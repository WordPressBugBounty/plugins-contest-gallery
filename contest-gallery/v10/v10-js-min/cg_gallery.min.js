jQuery(document).ready(function($){if(cgJsClass.gallery.vars.eventCgProVersionRecognized){return}else{cgJsClass.gallery.vars.eventCgProVersionRecognized=true}$(document).on("click",".cg_pro_version_info_close_button",function(e){var $element=$(this);var $cg_pro_version_info_container_header=$element.closest(".cg_pro_version_info_container_header");var $cg_pro_version_info_container_parent=$element.closest(".cg_pro_version_info_container_parent");var cgProVersionInfoId=$(this).closest(".cg_pro_version_info_container").attr("data-cg-pro-version-info-id");var cgProVersionInfoHash=$("#cgProVersionInfoHash").val();if(!cgProVersionInfoHash){cgProVersionInfoHash=""}var removeInfos=function(){$cg_pro_version_info_container_parent.remove();if($cg_pro_version_info_container_header.length){if(!$cg_pro_version_info_container_header.find(".cg_pro_version_info_container_parent").length){$cg_pro_version_info_container_header.remove()}}};jQuery.ajax({url:post_cg_pro_version_info_recognized_wordpress_ajax_script_function_name.cg_pro_version_info_recognized_ajax_url,method:"post",data:{action:"post_cg_pro_version_info_recognized",cgProVersionInfoId:cgProVersionInfoId,cgProVersionInfoHash:cgProVersionInfoHash}}).done(function(response){var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");jQuery(parsedHtml).find('script[data-cg-processing="true"]').each(function(){var script=jQuery(this).html();eval(script)});removeInfos()}).fail(function(xhr,status,error){console.log("Something went wrong removing pro version info.");removeInfos()}).always(function(){})})});;if(typeof cgJsClass==="undefined"){cgJsClass={}}cgJsClass.gallery=cgJsClass.gallery||{};cgJsClass.gallery.function=cgJsClass.gallery.function||{};cgJsClass.gallery.function.message=cgJsClass.gallery.function.message||{};cgJsClass.gallery.function.general=cgJsClass.gallery.function.general||{};cgJsClass.gallery.function.general.tools=cgJsClass.gallery.function.general.tools||{};cgJsClass.gallery.vars=cgJsClass.gallery.vars||{};cgJsClass.gallery.vars.messageContainerShown=false;cgJsClass.gallery.user=cgJsClass.gallery.user||{};cgJsClass.gallery.dynamicOptions=cgJsClass.gallery.dynamicOptions||{};cgJsClass.gallery.upload=cgJsClass.gallery.upload||{};var contGallSubmitLoaderShow=function($,$field){var $loader=$field.parent().find(".cg_form_div_image_upload_preview_loader_container");var widthSubmitButton=$field.width();var heightSubmitButton=$field.height();$loader.css("visibility","hidden");$loader.removeClass("cg_hide");var left=$field.position().left+parseInt($field.css("marginLeft"))+($field.outerWidth()/2-$loader.outerWidth()/2);var top=$field.position().top+parseInt($field.css("marginTop"))+($field.outerHeight()-$loader.outerHeight())/2;$field.val("");$field.width(widthSubmitButton);$field.height(heightSubmitButton);$field.addClass("cg_pointer_events_none");$loader.css({top:top+"px",left:left+"px",visibility:"visible"}).addClass("cg_pointer_events_none");$loader.closest("#cg_upload_form_container").addClass("cg_pointer_events_none")};var contGallSubmitLoaderHide=function($,$field,value){$field.removeClass("cg_pointer_events_none");if(value){$field.val(value)}var $loader=$field.parent().find(".cg_form_div_image_upload_preview_loader_container");$loader.addClass("cg_hide")};var contGallRemoveNotRequiredCgMessagesContainerAppendUniqueOne=function($){if(!cgJsClass.gallery.vars.isCgMessagesContainerPrepared){var $cg_messages_container=$(".cg_messages_container");var $cgMessagesContainer=$cg_messages_container.first().clone();cgJsClass.gallery.vars.dom.body.prepend($cgMessagesContainer);$cg_messages_container.remove();cgJsClass.gallery.vars.cgMessagesContainer=$cgMessagesContainer;cgJsClass.gallery.vars.isCgMessagesContainerPrepared=true}};var contGallRemoveNotRequiredCgMessagesContainerAppendUniqueOnePro=function($){if(!cgJsClass.gallery.vars.isCgMessagesContainerPreparedPro){var $cg_messages_container=$(".cg_messages_container_pro");var $cgMessagesContainer=$cg_messages_container.first().clone();cgJsClass.gallery.vars.dom.body.prepend($cgMessagesContainer);$cg_messages_container.remove();cgJsClass.gallery.vars.cgMessagesContainerPro=$cgMessagesContainer;cgJsClass.gallery.vars.isCgMessagesContainerPreparedPro=true}};var cgGetRealdIds=function($cgRealIdsHiddenInputs,$cgUploadFormInputWithGalleryId){var realGidsString="";var realGidsArray=[];$cgRealIdsHiddenInputs.each(function(){if(!realGidsString){realGidsString+=jQuery(this).val();realGidsArray.push(jQuery(this).val())}else{realGidsString+=","+jQuery(this).val();realGidsArray.push(jQuery(this).val())}});if($cgUploadFormInputWithGalleryId){if($cgUploadFormInputWithGalleryId.length){if(realGidsArray.indexOf($cgUploadFormInputWithGalleryId.val())===-1){realGidsString+=","+$cgUploadFormInputWithGalleryId.val()}}}return realGidsString};var cgCheckIfLoggedInAfterGoogleSignIn=function(){jQuery(document).ready(function($){if(!cgJsClass.gallery.vars.isCgMessagesContainerPrepared){cgJsClass.gallery.vars.dom=cgJsClass.gallery.vars.dom||{};if(!cgJsClass.gallery.vars.dom.body){cgJsClass.gallery.vars.dom.body=$("body")}if(!cgJsClass.gallery.vars.dom.html){cgJsClass.gallery.vars.dom.html=$("html")}contGallRemoveNotRequiredCgMessagesContainerAppendUniqueOne(jQuery);contGallRemoveNotRequiredCgMessagesContainerAppendUniqueOnePro(jQuery)}if(localStorage.getItem("cgSignedIn")){localStorage.removeItem("cgSignedIn")}})};cgCheckIfLoggedInAfterGoogleSignIn();;if(typeof cgJsClass=="undefined"){cgJsClass={}}cgJsClass=cgJsClass||{};cgJsClass.gallery=cgJsClass.gallery||{};cgJsClass.gallery.vars=cgJsClass.gallery.vars||{};cgJsClass.gallery.language=cgJsClass.gallery.language||{};cgJsClass.backend=true;cgJsClass.gallery.ecommerce=cgJsClass.gallery.ecommerce||{};cgJsClass.gallery.vars.ecommerce=cgJsClass.gallery.vars.ecommerce||{};cgJsClass.gallery.ecommerce.events=cgJsClass.gallery.ecommerce.events||{};cgJsClass.gallery.ecommerce.functions=cgJsClass.gallery.ecommerce.functions||{};cgJsClass.gallery.dynamicOptions=cgJsClass.gallery.dynamicOptions||{};cgJsClass.gallery.heightLogic=cgJsClass.gallery.heightLogic||{};cgJsClass.gallery.thumbLogic=cgJsClass.gallery.thumbLogic||{};cgJsClass.gallery.rowLogic=cgJsClass.gallery.rowLogic||{};cgJsClass.gallery.documentclick=cgJsClass.gallery.documentclick||{};cgJsClass.gallery.comment=cgJsClass.gallery.comment||{};cgJsClass.gallery.views=cgJsClass.gallery.views||{};cgJsClass.gallery.info=cgJsClass.gallery.info||{};cgJsClass.gallery.sorting=cgJsClass.gallery.sorting||{};cgJsClass.gallery.fbLike=cgJsClass.gallery.fbLike||{};cgJsClass.gallery.getJson=cgJsClass.gallery.getJson||{};cgJsClass.gallery.resize=cgJsClass.gallery.resize||{};cgJsClass.gallery.hover=cgJsClass.gallery.hover||{};cgJsClass.gallery.touch=cgJsClass.gallery.touch||{};cgJsClass.gallery.categories=cgJsClass.gallery.categories||{};cgJsClass.gallery.hashchange=cgJsClass.gallery.hashchange||{};cgJsClass.gallery.user=cgJsClass.gallery.user||{};cgJsClass.gallery.function=cgJsClass.gallery.function||{};cgJsClass.gallery.function.search=cgJsClass.gallery.function.search||{};cgJsClass.gallery.function.general=cgJsClass.gallery.function.general||{};cgJsClass.gallery.function.general.ajax=cgJsClass.gallery.function.general.ajax||{};cgJsClass.gallery.function.message=cgJsClass.gallery.function.message||{};cgJsClass.gallery.upload=cgJsClass.gallery.upload||{};cgJsClass.gallery.upload.events=cgJsClass.gallery.upload.events||{};cgJsClass.gallery.upload.validation=cgJsClass.gallery.upload.validation||{};cgJsClass.gallery.upload.functions=cgJsClass.gallery.upload.functions||{};cgJsClass.gallery.upload.functions.events=cgJsClass.gallery.upload.functions.events||{};cgJsClass.gallery.views=cgJsClass.gallery.views||{};cgJsClass.gallery.views.fullwindow=cgJsClass.gallery.views.fullwindow||{};cgJsClass.gallery.views.singleViewFunctions=cgJsClass.gallery.views.singleViewFunctions||{};var cgShowHiddenElementsForLoading=function(){jQuery(".mainCGdivContainer").removeAttr("style");jQuery("#mainCGdivOrderContainer").removeAttr("style");jQuery(".cg_header").removeAttr("style");jQuery(".mainCGdivUploadFormContainer").removeAttr("style");jQuery("#mainCGdivLoginFormContainer").removeAttr("style")};function cgGalleryReady(){jQuery(document).ready(function($){var $cg_main_pres=$(".cg_main_pre");var cgRemoveTags=function($element){if($element.is("pre")){var content=$element.text().trim();if(content===""){$element.remove()}}if($element.is("p")){var content=$element.text();if(content===""){$element.remove()}}};setTimeout(function(){$cg_main_pres.each(function(){var $cg_main_pre=$(this);$cg_main_pre.find(">pre,>p").each(function(){cgRemoveTags($(this))});$cg_main_pre.parent().find(">pre,>p").each(function(){cgRemoveTags($(this))})})},10);if(typeof cgJsClassEcommerceShowSaleOrderLoaded!="undefined"){cgJsClass.gallery.ecommerce.functions.showSaleOrder();cgJsClass.gallery.views.singleViewClickEvents.init($)}if(location.pathname.indexOf("wp-admin/admin.php")>1){return}for(var gid in cgJsClass.gallery.language){if(!cgJsClass.gallery.language.hasOwnProperty(gid)){break}for(var property in cgJsClass.gallery.language[gid]){if(!cgJsClass.gallery.language[gid].hasOwnProperty(property)){break}cgJsClass.gallery.language[gid][property]=jQuery("<textarea />").html(cgJsClass.gallery.language[gid][property]).text()}}$('script[data-cg-processing="true"]').remove();var $cgLoadedIds=$(".cg-loaded-gids");if(!$cgLoadedIds.length){cgShowHiddenElementsForLoading();if($("#mainCGdivEntryPageContainer").length){cgJsClass.gallery.vars.dom.body.addClass("cg_visibility_visible")}return}cgJsClass.gallery.vars.jQuery=$;cgJsClass.gallery.vars.$cgLoadedIds=$cgLoadedIds;$.fn.cgGoTo=function(){$("html, body").animate({scrollTop:$(this).offset().top-100+"px"},"fast");return this};cgJsClass.gallery.function.general.tools.checkIfIsChrome();cgJsClass.gallery.function.general.tools.checkIfIsSafari();cgJsClass.gallery.function.general.tools.checkIfIsFF();cgJsClass.gallery.function.general.tools.checkIfIsEdge();cgJsClass.gallery.function.general.tools.checkIfInternetExplorer();cgJsClass.gallery.function.general.mobile.check();if(cgJsClass.gallery.vars.isMobile){cgJsClass.gallery.vars.windowWidthLastResize=screen.width}else{cgJsClass.gallery.vars.windowWidthLastResize=$(window).width()}cgJsClass.gallery.comment.init();cgJsClass.gallery.rating.init();cgJsClass.gallery.sorting.init();cgJsClass.gallery.fbLike.clickFbLikeDiv();cgJsClass.gallery.touch.init($);cgJsClass.gallery.views.switchView.init();cgJsClass.gallery.function.message.init();cgJsClass.gallery.views.clickFurtherImagesStep.init();cgJsClass.gallery.function.search.init();cgJsClass.gallery.views.keypress.init();cgJsClass.gallery.views.fullscreen.init();cgJsClass.gallery.views.fullwindow.init();cgJsClass.gallery.hashchange.initCheckHashChangeEvent();cgJsClass.gallery.categories.initClick();var $mainCGallery=$(".mainCGallery");var length=$mainCGallery.length;cgJsClass.gallery.function.general.tools.testTopControlsStyle($);cgJsClass.gallery.vars.dom={};cgJsClass.gallery.vars.dom.body=$("body");cgJsClass.gallery.vars.dom.html=$("html");var $mainCGdivEntryPageContainer=$("#mainCGdivEntryPageContainer");if($mainCGdivEntryPageContainer.length){cgJsClass.gallery.vars.dom.body.addClass("cg_visibility_visible");$mainCGdivEntryPageContainer.find(">*").each(function(){var $element=$(this);if($element.is("style")||$element.is("script")||$element.is("link")||$element.is("pre")&&$element.hasClass("cg_main_pre")||$element.is("div")&&$element.attr("id")==="wpadminbar"){return true}else{$element.remove()}$mainCGdivEntryPageContainer.get(0).childNodes.forEach(function(element){if(element.nodeName=="#text"){element.remove()}})})}cgJsClass.gallery.function.general.tools.initTooltip($);contGallRemoveNotRequiredCgMessagesContainerAppendUniqueOne($);contGallRemoveNotRequiredCgMessagesContainerAppendUniqueOnePro($);cgJsClass.gallery.getJson.init($,$mainCGallery,0,length);cgJsClass.gallery.views.initSingleViewScroll();cgJsClass.gallery.views.singleViewClickEvents.init($);cgJsClass.gallery.resize.init(jQuery);cgJsClass.gallery.upload.functions.initCaptchaCheck(jQuery);cgJsClass.gallery.upload.events.init(jQuery);cgJsClass.gallery.upload.events.initFileUpload(jQuery);cgJsClass.gallery.upload.events.initFileUploadBulk(jQuery);cgJsClass.gallery.user.events(jQuery);cgJsClass.gallery.ecommerce.functions.init(jQuery);window.onpopstate=function(event){cgJsClass.gallery.vars.fullwindowCloseReplaceState=cgJsClass.gallery.vars.fullwindow;if(cgJsClass.gallery.vars.fullwindow&&!cgJsData[cgJsClass.gallery.vars.fullwindow].vars.isCgWpPageEntryLandingPage&&cgJsData[cgJsClass.gallery.vars.fullwindow].vars.hasWpPageParent){if(cgJsClass.gallery.vars.isGalleryUploadFormHashChange){cgJsClass.gallery.vars.isGalleryUploadFormHashChange=false}else{cgJsClass.gallery.views.fullwindow.closeFunction(cgJsClass.gallery.vars.fullwindow,true)}}else{if(cgJsClass.gallery.vars.isCgWpPageEntryLandingPage){if($mainCGallery.length==1){location.href=location.href}}}};var mainCGBackToGalleryButtonHrefGid=sessionStorage.getItem("mainCGBackToGalleryButtonHrefGid");if(cgJsData[mainCGBackToGalleryButtonHrefGid]&&cgJsData[mainCGBackToGalleryButtonHrefGid].vars){var $mainCGdivHelperParent=cgJsData[mainCGBackToGalleryButtonHrefGid].vars.mainCGdivHelperParent;if($mainCGdivHelperParent.length){$mainCGdivHelperParent.get(0).scrollIntoView();sessionStorage.removeItem("mainCGBackToGalleryButtonHrefGid")}}cgShowHiddenElementsForLoading();var cg_from_galleries_url=sessionStorage.getItem("cg_from_galleries_url");if(cgJsClass.gallery.vars.isCgWpPageEntryLandingPage&&cg_from_galleries_url){$(".mainCGBackToGalleryButtonHref").attr("href",cg_from_galleries_url+"?cg_gallery_id="+cgJsClass.gallery.vars.cgWpPageEntryLandingPageRealGid);sessionStorage.removeItem("cg_from_galleries_url")}return;jQuery.ajax({url:post_cg_load_v10_wordpress_ajax_script_function_name.cg_load_v10_ajax_url,method:"POST",type:"POST",data:{action:"post_cg_load_v10",realGidsString:realGidsString,cgPageUrl:cgPageUrl}}).done(function(response){}).fail(function(xhr,status,error){console.log(xhr);console.log(status);console.log(error);cgJsClass.gallery.function.message.showPro(mainCGBackToGalleryButtonHrefGid,'<p style="text-align:center;"><br>Something went wrong when loading gallery.<br>Ajax content could not be laoded code 2.<br><br></p>')}).always(function(){})})}cgGalleryReady();;cgJsClass.gallery.getJson.init=function($,$mainCGallery,i,length){var $gallery=$($mainCGallery[i]);var gid=$gallery.attr("data-cg-gid");var realGid=$gallery.attr("data-cg-real-gid");cgJsClass.gallery.vars.loadedGalleryIDs.push(gid);if(typeof cgJsData=="undefined"){return}if(typeof cgJsData[gid]=="undefined"){return}cgJsClass.gallery.upload.vars.init(gid);cgJsData[gid].vars.mainCGallery=$gallery;cgJsData[gid].vars.modernHover=true;cgJsData[gid].vars.mainCGallery.addClass("cg_modern_hover");cgJsData[gid].vars.imageDataLengthAfterPreProcess=0;cgJsData[gid].vars.realGid=realGid;if(cgJsData[gid].vars.isUserGallery){$gallery.addClass("cg_is_user_gallery")}cgJsData[gid].vars.mainCGdiv=$gallery.closest("#mainCGdiv"+gid);if(cgJsData[gid].vars.isCGalleries){cgJsData[gid].vars.mainCGdiv.addClass("isCGalleries")}if(cgJsData[gid].vars.isGalleriesMainPage){setTimeout(function(){cgJsData[gid].vars.mainCGdiv.get(0).scrollIntoView()},200)}cgJsData[gid].vars.cgNoImagesFound=cgJsData[gid].vars.mainCGdiv.find("#cgNoImagesFound"+gid);if(cgJsClass.gallery.vars.isMobile){cgJsData[gid].vars.mainCGdiv.addClass("cg_is_mobile")}cgJsData[gid].vars.cgLdsDualRingCGcenterDivLazyLoader=cgJsData[gid].vars.mainCGdiv.find("#cgLdsDualRingCGcenterDivLazyLoader"+gid);cgJsData[gid].vars.cgLdsDualRingMainCGdivHide=cgJsData[gid].vars.mainCGdiv.find("#cgLdsDualRingMainCGdivHide"+gid);cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide=cgJsData[gid].vars.mainCGallery.find("#cgLdsDualRingCGcenterDivHide"+gid);cgJsData[gid].vars.mainCGdivContainer=$gallery.closest("#mainCGdivContainer"+gid);cgJsData[gid].vars.mainCGdivUploadForm=cgJsData[gid].vars.mainCGdivContainer.find("#mainCGdivUploadForm"+gid);if(String(gid).indexOf("-u")>=0&&String(gid).indexOf("-uf")==-1&&!cgJsClass.gallery.vars.isLoggedIn){cgJsData[gid].vars.mainCGdivContainer.addClass("cg_hide");i=i+1;if(typeof $mainCGallery[i]!="undefined"){cgJsClass.gallery.getJson.init($,$mainCGallery,i,length)}return}cgJsData[gid].vars.mainCGdivHelperParent=$gallery.closest("#mainCGdivHelperParent"+gid);cgJsData[gid].vars.cgLdsDualRingDivGalleryHide=cgJsData[gid].vars.mainCGdivHelperParent.find("#cgLdsDualRingDivGalleryHide"+gid);cgJsData[gid].vars.cgCenterDivAppearenceHelper=jQuery("#cgCenterDivAppearenceHelper"+gid).removeClass("cg_hide");cgJsData[gid].vars.cgCenterDiv=$gallery.find("#cgCenterDiv"+gid);cgJsData[gid].vars.cgCenterDivLoaderContainer=$gallery.find(".cgCenterDivLoaderContainer");cgJsData[gid].vars.cgCenterDivLoaderContainerBackdrop=$gallery.find(".cgCenterDivLoaderContainerBackdrop");if(cgJsData[gid].vars.isEntryOnly){cgJsData[gid].vars.mainCGdiv.find(".cg_header").addClass("cg_hide_override");cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_and_top_controls_container").addClass("cg_hide_override")}cgJsData[gid].singleViewOrder={};cgJsData[gid].categories={};cgJsData[gid].image={};cgJsData[gid].imageObject={};cgJsData[gid].fbLikeContent={};cgJsData[gid].cgCenterDivBlogObject={};cgJsData[gid].images={};cgJsData[gid].forms={};cgJsData[gid].steps={};cgJsData[gid].forms.upload={};cgJsData[gid].rateAndCommentNumbers={};cgJsData[gid].infoGalleryViewAppended={};cgJsData[gid].imageCheck={};cgJsData[gid].vars.rawData={};cgJsData[gid].vars.startLocation=location.protocol+"//"+location.host+location.pathname+location.search;if(cgJsData[gid].vars.centerWhite){cgJsData[gid].vars.mainCGallery.addClass("cg_center_white")}if(cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.RatingVisibleForGalleryNoVoting){cgJsData[gid].vars.mainCGdivHelperParent.addClass("cg_no_voting")}cgJsClass.gallery.function.general.tools.setBackgroundColor(gid);cgJsClass.gallery.getJson.showGalleryLoader(gid);if(cgJsData[gid].vars.translateX=="slideDown"){cgJsData[gid].vars.translateX=true}else{cgJsData[gid].vars.translateX=true}cgJsClass.gallery.function.general.tools.checkAndSetCustomIconsStyle($,cgJsData[gid].optionsFullData,gid);if(gid.indexOf("-uf")>-1||gid.indexOf("-cf")>-1){cgJsData[gid].options=cgJsData[gid].optionsFullData[realGid]?cgJsData[gid].optionsFullData[realGid]:cgJsData[gid].optionsFullData}else{if(gid.indexOf("-ext")>-1){var gidToCheck=gid.split("-ext")[0];cgJsData[gid].options=cgJsData[gid].optionsFullData[gidToCheck]?cgJsData[gid].optionsFullData[gidToCheck]:cgJsData[gid].optionsFullData}else{cgJsData[gid].options=cgJsData[gid].optionsFullData[gid]?cgJsData[gid].optionsFullData[gid]:cgJsData[gid].optionsFullData}cgJsClass.gallery.comment.setComments(gid)}cgJsClass.gallery.views.checkOrderGallery(gid);cgJsData[gid].vars.mainCGdiv.find(".cg_header").addClass("cg_hide");cgJsData[gid].vars.mainCGdiv.removeClass("cg_hide").css("display","");if(gid.indexOf("-uf")>-1||gid.indexOf("-cf")>-1){cgJsClass.gallery.function.general.tools.checkSkeletonLoaderToShow(gid)}cgJsClass.gallery.function.general.tools.correctNewAddedOptionsIfRequired(cgJsData[gid].options);for(var property in cgJsData[gid].options.visual){if(!cgJsData[gid].options.visual.hasOwnProperty(property)){break}if(cgJsData[gid].options.visual[property]===null||cgJsData[gid].options.visual[property].length==0){cgJsData[gid].options.visual[property]=0}if(!isNaN(cgJsData[gid].options.visual[property])){cgJsData[gid].options.visual[property]=parseFloat(cgJsData[gid].options.visual[property])}}for(var property in cgJsData[gid].options.general){if(!cgJsData[gid].options.general.hasOwnProperty(property)){break}if(cgJsData[gid].options.general[property]===null||cgJsData[gid].options.general[property].length==0){cgJsData[gid].options.general[property]=0}if(!isNaN(cgJsData[gid].options.general[property])){cgJsData[gid].options.general[property]=parseFloat(cgJsData[gid].options.general[property])}}for(var property in cgJsData[gid].options.input){if(!cgJsData[gid].options.input.hasOwnProperty(property)){break}if(cgJsData[gid].options.input[property]===null||cgJsData[gid].options.input[property].length==0){cgJsData[gid].options.input[property]=0}if(!isNaN(cgJsData[gid].options.input[property])){cgJsData[gid].options.input[property]=parseFloat(cgJsData[gid].options.input[property])}}for(var property in cgJsData[gid].options.pro){if(!cgJsData[gid].options.pro.hasOwnProperty(property)){break}if(cgJsData[gid].options.pro[property]===null||cgJsData[gid].options.pro[property].length==0){cgJsData[gid].options.pro[property]=0}if(!isNaN(cgJsData[gid].options.pro[property])){cgJsData[gid].options.pro[property]=parseFloat(cgJsData[gid].options.pro[property])}}if(cgJsData[gid].vars.isCGalleries){cgJsData[gid].options.general.WidthThumb=cgJsData[gid].galleriesOptions.WidthThumb;cgJsData[gid].options.general.HeightThumb=cgJsData[gid].galleriesOptions.HeightThumb;cgJsData[gid].options.general.DistancePics=cgJsData[gid].galleriesOptions.DistancePics;cgJsData[gid].options.general.DistancePicsV=cgJsData[gid].galleriesOptions.DistancePicsV;cgJsData[gid].options.general.PicsPerSite=cgJsData[gid].galleriesOptions.PicsPerSite;cgJsData[gid].options.visual.FeControlsStyle=cgJsData[gid].galleriesOptions.FeControlsStyle;cgJsData[gid].options.visual.BorderRadius=cgJsData[gid].galleriesOptions.BorderRadius;cgJsData[gid].options.pro.PreselectSort="custom";cgJsData[gid].vars.mainCGdiv.find("#cg_select_ordermain").remove();if(cgJsData[gid].isCGalleriesForwardToWpPageEntry){cgJsData[gid].options.visual.ForwardToWpPageEntry=1;cgJsData[gid].options.visual.ForwardToWpPageEntryInNewTab=0}if(!cgJsData[gid].vars.mainCGdiv.hasClass("cg_is_ajax")){sessionStorage.removeItem("cgLastGalleriesStep")}}else{if(cgJsData[gid].vars.mainCGdiv.find(".mainCGBackToGalleryButtonHref.isCGalleries.cg_is_from_single_view_for_cg_galleries_class")){window.history.replaceState({},document.title,location.protocol+"//"+location.host+location.pathname)}}if(cgJsData[gid].options.visual.BorderRadius){cgJsClass.gallery.vars.cgMessagesContainer.addClass("cg_border_radius_controls_and_containers");cgJsClass.gallery.vars.cgMessagesContainerPro.addClass("cg_border_radius_controls_and_containers");cgJsData[gid].vars.mainCGdiv.addClass("cg_border_radius_controls_and_containers")}if(cgJsData[gid].options.visual.FeControlsStyle=="white"){cgJsData[gid].vars.mainCGdiv.addClass("cg_fe_controls_style_white")}else{cgJsData[gid].vars.mainCGdiv.addClass("cg_fe_controls_style_black")}if(cgJsData[gid].vars.isFbLikeOnlyShareOn||cgJsData[gid].options.pro.FbLikeOnlyShare){cgJsData[gid].options.general.FbLike=1}if(!cgJsClass.gallery.vars.isProVersion){cgJsData[gid].options.general.ActivateBulkUpload=0}if(cgJsData[gid].options.visual["EnableEmojis"]===undefined){cgJsData[gid].options.visual["EnableEmojis"]=1}if(cgJsData[gid].options.pro.AdditionalFiles==1){cgJsData[gid].options.general.ActivateBulkUpload=0}if(typeof cgJsData[gid].options.pro.AllowUploadICO=="undefined"){cgJsData[gid].options.pro.AllowUploadICO=1;cgJsData[gid].options.pro.AllowUploadJPG=1;cgJsData[gid].options.pro.AllowUploadPNG=1;cgJsData[gid].options.pro.AllowUploadGIF=1}if(!cgJsClass.gallery.vars.isProVersion){cgJsData[gid].options.pro.AllowUploadPNG=0;cgJsData[gid].options.pro.AllowUploadGIF=0}if(typeof cgJsData[gid].options.general.ActivatePostMaxMBfile=="undefined"){cgJsData[gid].options.general.ActivatePostMaxMBfile=1}if(typeof cgJsData[gid].options.general.PostMaxMBfile=="undefined"){cgJsData[gid].options.general.PostMaxMBfile=2}cgJsData[gid].options.general.AllowRatingDynamic=0;if(cgJsData[gid].options.general.AllowRating>=12&&cgJsData[gid].options.general.AllowRating<=20){cgJsData[gid].options.general.AllowRatingDynamic=cgJsData[gid].options.general.AllowRating-10}else if(cgJsData[gid].options.general.AllowRating==1){cgJsData[gid].options.general.AllowRatingDynamic=5}if(cgJsData[gid].options.general.FullSizeSlideOutStart==1&&cgJsData[gid].options.visual.SliderFullWindow!=1&&parseFloat(cgJsData[gid].vars.versionDatabaseGallery)<15.05){cgJsData[gid].options.general.FullSizeSlideOutStart=0;cgJsData[gid].options.visual.BlogLookFullWindow=1}else if(cgJsData[gid].options.visual.SliderFullWindow!=1&&cgJsData[gid].options.visual.BlogLookFullWindow!=1&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1&&parseFloat(cgJsData[gid].vars.versionDatabaseGallery)<15.05){cgJsData[gid].options.general.FullSizeSlideOutStart=0;cgJsData[gid].options.visual.BlogLookFullWindow=1}if(cgJsData[gid].vars.isOnlyGalleryNoVoting&&cgJsData[gid].options.general.AllowComments==0&&!cgJsData[gid].vars.RatingVisibleForGalleryNoVoting&&!cgJsData[gid].options.visual["Field1IdGalleryView"]&&!cgJsData[gid].options.visual["SubTitle"]&&!cgJsData[gid].options.visual["ThirdTitle"]){cgJsData[gid].vars.mainCGdivHelperParent.addClass("cg_no_comments")}cgJsData[gid].vars.isVotingPossible=false;if(cgJsData[gid].vars.shortcode_name=="cg_gallery"||cgJsData[gid].vars.shortcode_name=="cg_gallery_ecommerce"&&cgJsData[gid].options.general.AllowRatingForGalleryEcommerce==1){cgJsData[gid].vars.isVotingPossible=true}cgJsData[gid].singleViewOrder=cgJsData[gid].singleViewOrderFullData;cgJsData[gid].forms.upload=cgJsData[gid].formUploadFullData;cgJsData[gid].vars.isUserGalleryAndHasFieldsToEdit=false;cgJsData[gid].forms.uploadUserEditFieldsSortedByFieldOrder={};if(cgJsData[gid].vars.isUserGallery){for(var fieldId in cgJsData[gid].forms.upload){if(!cgJsData[gid].forms.upload.hasOwnProperty(fieldId)){break}var Field_Type=cgJsData[gid].forms.upload[fieldId]["Field_Type"];var Field_Order=cgJsData[gid].forms.upload[fieldId]["Field_Order"];var Show_Slider=cgJsData[gid].forms.upload[fieldId]["Show_Slider"];var canBeEdited=false;if((Field_Type=="url-f"||Field_Type=="select-f"||Field_Type=="date-f"||Field_Type=="selectc-f"||Field_Type=="text-f"||Field_Type=="comment-f")&&Show_Slider==1){canBeEdited=true}else if(fieldId==cgJsData[gid].options.visual["Field1IdGalleryView"]){canBeEdited=true}if(canBeEdited){cgJsData[gid].forms.uploadUserEditFieldsSortedByFieldOrder[Field_Order]=cgJsData[gid].forms.upload[fieldId];cgJsData[gid].forms.uploadUserEditFieldsSortedByFieldOrder[Field_Order].fieldId=fieldId;cgJsData[gid].vars.isUserGalleryAndHasFieldsToEdit=true}}}if(!cgJsData.isFirstMainLoad){if(cgJsData[gid].vars.hasGalleriesIds&&!cgJsClass.gallery.vars.galleriesIds){cgJsClass.gallery.vars.galleriesIds=cgJsData[gid].vars.galleriesIds}else{cgJsClass.gallery.vars.galleriesIds=[]}cgJsData.isFirstMainLoad=true}cgJsClass.gallery.upload.functions.initForGallery(gid);if(cgJsData[gid].vars.isOnlyUploadForm||cgJsData[gid].vars.isOnlyContactForm){cgJsData[gid].vars.mainCGdivUploadForm.insertBefore(cgJsData[gid].vars.mainCGdivContainer);cgJsData[gid].vars.mainCGdivContainer.remove();cgJsData[gid].vars.mainCGdivUploadForm.addClass("mainCGdivUploadFormOnly");cgJsData[gid].vars.mainCGdivUploadForm.removeClass("cg_hide");cgJsClass.gallery.upload.functions.init(gid,realGid);cgJsClass.gallery.upload.functions.uploadFormSetWidth(gid);i++;if(length>i){cgJsClass.gallery.getJson.init($,$mainCGallery,i,length)}return}cgJsData[gid].vars.showCategories=cgJsClass.gallery.categories.init(gid,cgJsData[gid].categoriesFullData);cgJsData[gid].vars.categoriesLength=Object.keys(cgJsData[gid].vars.categories).length;cgJsData[gid].vars.preRawData=cgJsData[gid].imagesFullData;cgJsClass.gallery.getJson.imageDataPreProcess(gid,cgJsData[gid].vars.preRawData,true);i++;if(length>i){cgJsClass.gallery.getJson.init($,$mainCGallery,i,length)}};;cgJsClass.gallery.getJson.queryDataArray=function(gid){debugger;for(var realId in cgJsData[gid].vars.queryDataArray){if(!cgJsData[gid].vars.queryDataArray.hasOwnProperty(realId)){break}if(realId==4174){debugger}if(cgJsData[gid].vars.queryDataArray[realId].Exif&&cgJsData[gid].vars.rawData&&cgJsData[gid].vars.rawData[realId]){cgJsData[gid].vars.rawData[realId].Exif=cgJsData[gid].vars.queryDataArray[realId].Exif}if(cgJsData[gid].vars.queryDataArray[realId].MultipleFiles&&cgJsData[gid].vars.rawData&&cgJsData[gid].vars.rawData[realId]){cgJsData[gid].vars.rawData[realId].MultipleFilesParsed=cgJsData[gid].vars.queryDataArray[realId].MultipleFiles}}};cgJsClass.gallery.getJson.galleryTstampCheckInit=function(uploadFolderUrl,gid){this.galleryTstampCheck(uploadFolderUrl,gid);this.galleryTstampCheckIntervallSet(uploadFolderUrl,gid)};cgJsClass.gallery.getJson.galleryTstampCheck=function(uploadFolderUrl,gid){jQuery.getJSON(uploadFolderUrl+"/contest-gallery/gallery-id-"+cgJsData[gid].vars.gidReal+"/json/"+gid+"-gallery-tstamp.json",{_:(new Date).getTime()}).done(function(data){}).done(function(tstamp){cgJsData[gid].vars.lastTstamp=tstamp;cgJsClass.gallery.getJson.getImages(uploadFolderUrl,gid,tstamp)})};cgJsClass.gallery.getJson.galleryTstampCheckIntervallSet=function(uploadFolderUrl,gid){cgJsClass.gallery.getJson.galleryTstampCheckIntervall=setInterval(function(){cgJsClass.gallery.getJson.galleryTstampCheck(uploadFolderUrl,gid)},5e3)};cgJsClass.gallery.getJson.galleryTstampCheckIntervall=null;cgJsClass.gallery.getJson.lastTstamp=null;cgJsClass.gallery.getJson.lastTstampSortValues=null;cgJsClass.gallery.getJson.getImagesOnlyForPreProcessing=function(gid,processedFilesCounter,newImageIdsArrayFromUpload,isCopyUploadToAnotherGallery){jQuery.ajax({cache:false,url:cgJsData[gid].vars.uploadFolderUrl+"/contest-gallery/gallery-id-"+cgJsData[gid].vars.gidReal+"/json/"+cgJsData[gid].vars.gidReal+"-images.json",dataType:"json"}).done(function(data){cgJsClass.gallery.getJson.imageDataPreProcess(gid,data,false,processedFilesCounter,true,newImageIdsArrayFromUpload,true,isCopyUploadToAnotherGallery)})};cgJsClass.gallery.getJson.newImageIdsArrayFromUpload=[];cgJsClass.gallery.getJson.removeImageFromImageData=function(gid,realIdToDelete,isCalledFromUserDeleteAjaxRequest,isCopyUploadToAnotherGallery){cgJsData[gid].vars.openedRealId=0;cgJsClass.gallery.function.general.tools.resetGallery(gid);if(typeof cgJsData[gid].wpUserImageIds!="undefined"){var index=cgJsData[gid].wpUserImageIds.indexOf(realIdToDelete);if(index>-1){cgJsData[gid].wpUserImageIds.splice(index,1);cgJsData[gid].vars.imageDataLength=cgJsData[gid].wpUserImageIds.length}}for(var realId in cgJsData[gid].vars.rawData){if(!cgJsData[gid].vars.rawData.hasOwnProperty(realId)){break}if(realId==realIdToDelete){delete cgJsData[gid].vars.rawData[realId];cgJsData[gid].vars.mainCGallery.find("#cg_show"+realId).remove();break}}for(var realId in cgJsData[gid].fullImageInfoData){if(!cgJsData[gid].fullImageInfoData.hasOwnProperty(realId)){break}if(realId==realIdToDelete){delete cgJsData[gid].fullImageInfoData[realId];break}}if(Object.keys(cgJsData[gid].vars.rawData).length>=1){cgJsData[gid].vars.isRemoveImageSliderViewCheck=true}cgJsClass.gallery.views.close(gid);cgJsData[gid].vars.mainCGallery.find(".cg-slider-range-container").addClass("cg_hide");cgJsData[gid].vars.mainCGdiv.find("#mainCGslider"+gid).find(".cg_show").addClass("cg_hide");cgJsData[gid].vars.cgCenterDivAppearenceHelper.removeClass("cg_hide");setTimeout(function(){cgJsData[gid].vars.mainCGdiv.find("#mainCGslider"+gid).addClass("cg_hide")},100);if(Object.keys(cgJsData[gid].vars.rawData).length==0){jQuery("#mainCGdiv"+gid).find(".cg_random_button").addClass("cg_hide")}else if(Object.keys(cgJsData[gid].vars.rawData).length>0){jQuery("#mainCGdiv"+gid).find(".cg_random_button").removeClass("cg_hide")}cgJsData[gid].vars.imageDataLengthAfterPreProcess=Object.keys(cgJsData[gid].vars.rawData).length;cgJsClass.gallery.getJson.imageData(gid,cgJsData[gid].vars.rawData,true,null,true,isCopyUploadToAnotherGallery);if(isCalledFromUserDeleteAjaxRequest){if(String(gid).indexOf("-u")>=0){var gidToCheck=gid.split("-u")[0];if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.removeImageFromImageData(gidToCheck,realIdToDelete,false,true)}var gidToCheck=gid.split("-u")[0]+"-nv";if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.removeImageFromImageData(gidToCheck,realIdToDelete,false,true)}}else if(String(gid).indexOf("-nv")>=0){var gidToCheck=gid.split("-nv")[0];if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.removeImageFromImageData(gidToCheck,realIdToDelete,false,true)}var gidToCheck=gid.split("-nv")[0]+"-u";if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.removeImageFromImageData(gidToCheck,realIdToDelete,false,true)}}else if(String(gid).indexOf("-u")==-1&&String(gid).indexOf("-nv")==-1){var gidToCheck=gid+"-u";if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.removeImageFromImageData(gidToCheck,realIdToDelete,false,true)}var gidToCheck=gid+"-nv";if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.removeImageFromImageData(gidToCheck,realIdToDelete,false,true)}}}if(cgJsData[gid].vars.imageDataLength<1){cgJsClass.gallery.getJson.showTextUntilAnImageAdded(gid)}};cgJsClass.gallery.getJson.getInfo=function(gid,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues){cgJsClass.gallery.info.setInfoAll(gid,cgJsData[gid].jsonInfoData,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues)};cgJsClass.gallery.getJson.removeMainCGalleryLoader=function($mainCGdiv){setTimeout(function(){cgJsClass.gallery.function.general.tools.hideSkeletonLoader(gid);$mainCGdiv.find(".mainCGallery").removeClass("cg_hide").addClass("cg_fade_in")},700)};cgJsClass.gallery.getJson.abortGetJson=function(gid){for(var key in cgJsData[gid].vars.getJson){if(!cgJsData[gid].vars.getJson.hasOwnProperty(key)){break}cgJsData[gid].vars.getJson[key].abort()}cgJsData[gid].vars.getJson=[]};cgJsClass.gallery.getJson.showGalleryLoader=function(gid){jQuery("#mainCGdivHelperParent"+gid).addClass("cg_display_block")};cgJsClass.gallery.getJson.hideGalleryLoader=function(gid){jQuery("#mainCGdivHelperParent"+gid).removeClass("cg_display_block");jQuery("#cgLdsDualRingDivGalleryHide"+gid).addClass("cg_hide");cgJsData[gid].vars.mainCGdiv.find(".cg_skeleton_loader_on_page_load_div").addClass("cg_hide")};cgJsClass.gallery.getJson.showTextUntilAnImageAdded=function(gid){cgJsData[gid].vars.isNoImagesAddedInFrontend=true;var $cgShowTextUntilAnImageAdded=jQuery("#cgShowTextUntilAnImageAdded"+gid);$cgShowTextUntilAnImageAdded.removeClass("cg_hide");if(typeof cgJsData[gid].vars.isCgWpPageEntryLandingPageAndNotActivatedForCategoryName!="undefined"){$cgShowTextUntilAnImageAdded.html('<p style="font-size: 20px; text-align: center;">Category <b>'+cgJsData[gid].vars.isCgWpPageEntryLandingPageAndNotActivatedForCategoryName+"</b> is deactivated.")}jQuery("#cgCenterDivAppearenceHelper"+gid).addClass("cg_hide");cgJsData[gid].vars.mainCGdivContainer.removeClass("cg_hide");if(!cgJsData[gid].vars.mainCGdiv.find("#cgGalleryViewSortControl"+gid).find(".cg-gallery-upload").length){cgJsData[gid].vars.mainCGdiv.find(".cg_header").addClass("cg_hide")}cgJsData[gid].vars.mainCGdiv.removeClass("cg_hide").show().find(".cg_header").addClass("cg_border_bottom_unset_important");if(!cgJsData[gid].vars.mainCGdiv.find("#cgShowTextUntilAnImageAdded"+gid).text().trim().length&&cgJsData[gid].options.pro.GalleryUpload!="1"){cgJsData[gid].vars.mainCGdiv.addClass("cg_visibility_hidden")}};cgJsClass.gallery.getJson.hideTextUntilAnImageAdded=function(gid){cgJsData[gid].vars.isNoImagesAddedInFrontend=false;jQuery("#cgShowTextUntilAnImageAdded"+gid).addClass("cg_hide")};cgJsClass.gallery.getJson.checkCheckControlElements=function(gid){if(cgJsData[gid].vars.mainCGdiv.find("#cgGalleryViewSortControl"+gid).find(".cg-gallery-upload").length==0){jQuery("#mainCGdivContainer"+gid).addClass("cg_hide");cgJsClass.gallery.getJson.hideGalleryLoader(gid)}else{cgJsData[gid].vars.mainCGdiv.removeClass("cg_hide").show().find(".cg_header").removeClass("cg_hide").find(".cg_gallery_control_element").addClass("cg_hide");cgJsClass.gallery.getJson.hideGalleryLoader(gid);cgJsData[gid].vars.mainCGdiv.find(".cg-gallery-upload").removeClass("cg_hide")}jQuery("#mainCGdivHelperParent"+gid).removeClass("cg_display_block")};;cgJsClass.gallery.getJson.getSortValuesRequest=function(uploadFolderUrl,gid,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues){setTimeout(function(){jQuery.ajax({cache:false,url:uploadFolderUrl+"/contest-gallery/gallery-id-"+cgJsData[gid].vars.gidReal+"/json/"+cgJsData[gid].vars.gidReal+"-images-sort-values.json",dataType:"json"}).done(function(data){var tstamp=parseInt((new Date).getTime())/1e3;cgJsClass.gallery.indexeddb.saveJsonSortValues(gid,data,tstamp);cgJsClass.gallery.getJson.setSortingData(gid,data,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues)})},500)};cgJsClass.gallery.getJson.getSortValuesFailedProcessingIdsData=function(gid,data,dataFailedProcessingIds,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues){this.getSortValuesFailedProcessingIdsDataSetData(gid,data,dataFailedProcessingIds,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues,0)};cgJsClass.gallery.getJson.getSortValuesFailedProcessingIdsDataSetData=function(gid,data,dataFailedProcessingIds,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues,index){var realId=dataFailedProcessingIds[index];jQuery.ajax({cache:false,url:cgJsData[gid].vars.uploadFolderUrl+"/contest-gallery/gallery-id-"+cgJsData[gid].vars.gidReal+"/json/image-data/image-data-"+realId+".json",dataType:"json"}).done(function(dataImage){index=index+1;data[realId]=dataImage;if(index==dataFailedProcessingIds.length||index==50){cgJsClass.gallery.getJson.setSortingData(gid,data,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues,true)}else{cgJsClass.gallery.getJson.getSortValuesFailedProcessingIdsDataSetData(gid,data,dataFailedProcessingIds,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues,index)}})};cgJsClass.gallery.getJson.setSortingData=function(gid,data,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues,isFailedProcessingIdsCorrected,newImageIdsArrayFromUpload){for(var realId in data){if(!data.hasOwnProperty(realId)){break}data[realId]=cgJsClass.gallery.dynamicOptions.configureRatingAndCommentsNumbers(gid,realId,data[realId])}for(var index in cgJsData[gid].fullImageData){if(!cgJsData[gid].fullImageData.hasOwnProperty(index)){break}var firstKey=Object.keys(cgJsData[gid].fullImageData[index])[0];var realId=cgJsData[gid].fullImageData[index][firstKey]["id"];for(var key in cgJsData[gid].fullImageData[index][firstKey]){if(!cgJsData[gid].fullImageData[index][firstKey].hasOwnProperty(key)){break}for(var keyInData in data[realId]){if(!data[realId].hasOwnProperty(keyInData)){break}if(!cgJsData[gid].fullImageData[index][firstKey][keyInData]){cgJsData[gid].fullImageData[index][firstKey][keyInData]=data[realId][keyInData]}}}}for(var index in cgJsData[gid].fullImageDataFiltered){if(!cgJsData[gid].fullImageDataFiltered.hasOwnProperty(index)){break}var firstKey=Object.keys(cgJsData[gid].fullImageDataFiltered[index])[0];var realId=cgJsData[gid].fullImageDataFiltered[index][firstKey]["id"];for(var key in cgJsData[gid].fullImageDataFiltered[index][firstKey]){if(!cgJsData[gid].fullImageDataFiltered[index][firstKey].hasOwnProperty(key)){break}for(var keyInData in data[realId]){if(!data[realId].hasOwnProperty(keyInData)){break}if(!cgJsData[gid].fullImageDataFiltered[index][firstKey][keyInData]){cgJsData[gid].fullImageDataFiltered[index][firstKey][keyInData]=data[realId][keyInData]}}}}cgJsClass.gallery.vars.isSortingDataAvailable=true;cgJsClass.gallery.getJson.getInfo(gid,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues)};;cgJsClass.gallery.getJson.getImages=function(uploadFolderUrl,gid,tstamp,isOpenedPage){jQuery.ajax({cache:false,url:uploadFolderUrl+"/contest-gallery/gallery-id-"+cgJsData[gid].vars.gidReal+"/json/"+cgJsData[gid].vars.gidReal+"-images.json",dataType:"json"}).done(function(data){cgJsData[gid].vars.preRawData=data;cgJsClass.gallery.indexeddb.saveJsonGallery(gid,data,tstamp);cgJsClass.gallery.getJson.imageDataPreProcess(gid,data,isOpenedPage)})};;cgJsClass.gallery.getJson.getGallery=function(gid,gidToShow,shortCodeName,realId){cgJsData[gid].vars.mainCGdiv.height(cgJsData[gid].vars.mainCGdiv.height());cgJsData[gid].vars.mainCGdiv.get(0).scrollIntoView();debugger;cgJsData[gid].vars.mainCGdiv.find(">*").addClass("cg_hide");cgJsData[gid].vars.mainCGdiv.find(".cg_skeleton_loader_on_page_load_div").removeClass("cg_hide");var gidToCheck=gidToShow;if(gidToShow==9999999){gidToCheck="main"}if(!cgJsData.lastGalleriesStep){cgJsData.lastGalleriesStep=1}if(gidToCheck=="main"){cgJsData.isCGalleriesAjaxLoadMain=true}else{cgJsData.isCGalleriesAjaxLoadMain=false}var cgCheckAndDeleteGallery=function(gidToShow,shortCodeName){if(gidToShow=="main"&&cgJsData[gidToShow]){delete cgJsData[gidToShow]}else if(cgJsData[gidToShow]){delete cgJsData[gidToCheck]}else if(shortCodeName=="cg_gallery_user"&&cgJsData[gidToShow+"-u"]){delete cgJsData[gidToShow+"-u"]}else if(shortCodeName=="cg_gallery_no_voting"&&cgJsData[gidToShow+"-nv"]){delete cgJsData[gidToShow+"-nv"]}else if(shortCodeName=="cg_gallery_winner"&&cgJsData[gidToShow+"-w"]){delete cgJsData[gidToShow+"-w"]}else if(shortCodeName=="cg_gallery_ecommerce"&&cgJsData[gidToShow+"-ec"]){delete cgJsData[gidToShow+"-ec"]}};if(realId&&cgJsData[gid].vars.rawData[realId]["isCGalleriesNoGalleryGid"]){gidToShow=cgJsData[gid].vars.rawData[realId]["isCGalleriesNoGalleryGid"];delete cgJsData[gidToShow]}else if(cgJsData[gidToCheck]){delete cgJsData[gidToCheck]}cgCheckAndDeleteGallery(gidToShow,shortCodeName);if(cgJsData[gid].vars.mainCGdiv.hasClass("isCGalleries")){sessionStorage.setItem("cg_from_galleries_url",location.origin+location.pathname);sessionStorage.setItem("cg_galleries_real_id_clicked",realId)}cgJsData.isGetGalleryLoading=true;jQuery.ajax({url:post_cg_galleries_show_cg_gallery_wordpress_ajax_script_function_name.cg_galleries_show_cg_gallery_ajax_url,type:"post",data:{action:"post_cg_galleries_show_cg_gallery",gidToShow:gidToShow,shortcode_name:shortCodeName,cgIds:cgJsClass.gallery.vars.galleriesIds}}).done(function(response){var $response=jQuery((new DOMParser).parseFromString(response,"text/html"));$response.find('script[data-cg-processing="true"]').each(function(){var script=jQuery(this).html();eval(script)});jQuery("#cgEcommerceCheckoutBodyContainer").remove();cgJsData[gid].vars.mainCGdiv.get(0).scrollIntoView();cgJsData[gid].vars.mainCGdivContainer.replaceWith($response.find(".mainCGdivContainer"));cgJsData.isGetGalleryLoading=false;if(shortCodeName=="cg_gallery_ecommerce"){cgJsClass.gallery.vars.ecommerce.isEcommerceInitDone=false}cgGalleryReady();if(gidToCheck=="main"){}})};;cgJsClass.gallery.getJson.imageData=function(gid,data,calledFromUpload,processedFilesCounter,isOpenedPage,isCopyUploadToAnotherGallery,newImageIdsArrayFromUpload,isDoNotCheckSortValues){if(calledFromUpload){cgJsData[gid].vars.mainCGdiv.removeClass("cg_visibility_hidden")}var $=cgJsClass.gallery.vars.jQuery;var $mainCGdiv=cgJsData[gid].vars.mainCGdiv;cgJsData[gid].vars.mainCGdiv.find(".cg-no-images-found-container").addClass("cg_hide");cgJsData[gid].vars.imageDataLength=Object.keys(cgJsData[gid].vars.rawData).length;var HideUntilVote=cgJsData[gid].options.general.HideUntilVote;if(!cgJsData[gid].vars.sorting){cgJsData[gid].vars.sorting="date-desc"}if(cgJsData[gid].vars.isUserGallery){if(cgJsData[gid].options.pro.PreselectSort=="custom"){cgJsData[gid].options.pro.PreselectSort="date_descend"}}if(!cgJsData[gid].options.pro.PreselectSort){if($mainCGdiv.find("#cg_select_order"+gid).find(".cg_date_descend").length){$mainCGdiv.find("#cg_select_order"+gid).val("date-desc")}cgJsData[gid].vars.sorting="date-desc";cgJsData[gid].options.pro.PreselectSort="date_descend"}else if(cgJsData[gid].options.pro.PreselectSort=="custom"){if($mainCGdiv.find("#cg_select_order"+gid).find(".cg_custom").length){$mainCGdiv.find("#cg_select_order"+gid).val("custom")}cgJsData[gid].vars.sorting="custom"}else if(cgJsData[gid].options.pro.PreselectSort=="date_descend"){if($mainCGdiv.find("#cg_select_order"+gid).find(".cg_date_descend").length){$mainCGdiv.find("#cg_select_order"+gid).val("date-desc")}cgJsData[gid].vars.sorting="date-desc"}else if(cgJsData[gid].options.pro.PreselectSort=="date_ascend"){if($mainCGdiv.find("#cg_select_order"+gid).find(".cg_date_ascend").length){$mainCGdiv.find("#cg_select_order"+gid).val("date-asc")}cgJsData[gid].vars.sorting="date-asc"}else if(cgJsData[gid].options.pro.PreselectSort=="comments_descend"&&cgJsData[gid].options.general.AllowComments>=1){if($mainCGdiv.find("#cg_select_order"+gid).find(".cg_comments_descend").length){$mainCGdiv.find("#cg_select_order"+gid).val("comment-desc")}cgJsData[gid].vars.sorting="comments-desc"}else if(cgJsData[gid].options.pro.PreselectSort=="comments_ascend"&&cgJsData[gid].options.general.AllowComments>=1){if($mainCGdiv.find("#cg_select_order"+gid).find(".cg_comments_ascend").length){$mainCGdiv.find("#cg_select_order"+gid).val("comment-asc")}cgJsData[gid].vars.sorting="comments-asc"}else if(cgJsData[gid].options.pro.PreselectSort=="rating_descend"&&cgJsData[gid].options.general.AllowRating&&HideUntilVote==0){if($mainCGdiv.find("#cg_select_order"+gid).find(".cg_rating_descend").length){$mainCGdiv.find("#cg_select_order"+gid).val("rate-desc")}cgJsData[gid].vars.sorting="rating-desc"}else if(cgJsData[gid].options.pro.PreselectSort=="rating_ascend"&&cgJsData[gid].options.general.AllowRating&&HideUntilVote==0){if($mainCGdiv.find("#cg_select_order"+gid).find(".cg_rating_ascend").length){$mainCGdiv.find("#cg_select_order"+gid).val("rate-asc")}cgJsData[gid].vars.sorting="rating-asc"}else if(cgJsData[gid].options.pro.PreselectSort=="rating_sum_descend"&&cgJsData[gid].options.general.AllowRatingDynamic&&HideUntilVote==0){if($mainCGdiv.find("#cg_select_order"+gid).find(".cg_rating_descend_sum").length){$mainCGdiv.find("#cg_select_order"+gid).val("rate-sum-desc")}cgJsData[gid].vars.sorting="rating-desc-sum"}else if(cgJsData[gid].options.pro.PreselectSort=="rating_sum_ascend"&&cgJsData[gid].options.general.AllowRatingDynamic&&HideUntilVote==0){if($mainCGdiv.find("#cg_select_order"+gid).find(".cg_rating_ascend_sum").length){$mainCGdiv.find("#cg_select_order"+gid).val("rate-sum-asc")}cgJsData[gid].vars.sorting="rating-asc-sum"}if(cgJsData[gid].options.general["RandomSort"]=="1"||cgJsData[gid].options.pro.PreselectSort=="random"){if($mainCGdiv.find("#cg_select_order"+gid).find(".cg_random_sort").length){$mainCGdiv.find("#cg_select_order"+gid).val("random")}cgJsData[gid].vars.sorting="random"}if(cgJsData[gid].vars.isCGalleries){cgJsData[gid].vars.sorting="custom";cgJsData[gid].options.pro.PreselectSort="custom"}var lengthKeys=Object.keys(data).length;if(lengthKeys==0){cgJsClass.gallery.getJson.checkCheckControlElements(gid);cgJsClass.gallery.getJson.showTextUntilAnImageAdded(gid);if(cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.mainCGdivContainer.removeClass("cg_hide");cgJsClass.gallery.views.fullwindow.closeFunction(gid,false,false,true);cgJsClass.gallery.getJson.checkCheckControlElements(gid)}return}cgJsData[gid].vars.mainCGdiv.find(".cg_gallery_control_element").each(function(){if($(this).hasClass("cg-center-image-fullwindow")&&cgJsClass.gallery.vars.fullwindow){return}else if($(this).hasClass("cg_random_button")){return}else if($(this).hasClass("cg-lds-dual-ring")){return}else{$(this).removeClass("cg_hide")}});var lazy=false;var openPage=true;var PicsPerSite=parseInt(cgJsData[gid].options.general.PicsPerSite);var $mainCGallery=cgJsData[gid].vars.mainCGallery;var realId=0;var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}cgJsClass.gallery.views.checkOrderGallery(gid);if(cgJsData[gid].options.general.FullSizeImageOutGallery==1||cgJsData[gid].options.general.OnlyGalleryView==1){cgJsData[gid].vars.mainCGallery.addClass("cg_only_gallery_view")}if(calledFromUpload!==true&&!cgJsClass.gallery.vars.isAnotherGidVariantAvailableAndWillBeOpened&&!cgJsClass.gallery.vars.someImageAlreadyOpened){if(location.href.indexOf("#!gallery")>-1){var obj=cgJsClass.gallery.hashchange.getRealIdAndGid(isOpenedPage);realId=obj["realId"];var gidToCompare=obj["gid"];if(gidToCompare==gid){cgJsClass.gallery.vars.someImageAlreadyOpened=true;cgJsData[gid].vars.openedRealId=realId;cgJsData[gid].vars.openedRealIdAfterUploadOrOnPageLoad=realId;if(typeof data[realId]!="undefined"){cgJsClass.gallery.hashchange.realId=realId}}else{var isAnotherGidVariantAvailableAndWillBeOpened=false;if(gidToCompare+"-u"==gid){isAnotherGidVariantAvailableAndWillBeOpened=true}else if(gidToCompare+"-w"==gid){isAnotherGidVariantAvailableAndWillBeOpened=true}else if(gidToCompare+"-nv"==gid){isAnotherGidVariantAvailableAndWillBeOpened=true}cgJsClass.gallery.vars.isAnotherGidVariantAvailableAndWillBeOpened=isAnotherGidVariantAvailableAndWillBeOpened;if(isAnotherGidVariantAvailableAndWillBeOpened){cgJsClass.gallery.vars.someImageAlreadyOpened=true;cgJsData[gid].vars.openedRealId=realId;cgJsData[gid].vars.openedRealIdAfterUploadOrOnPageLoad=realId;if(typeof data[realId]!="undefined"){cgJsClass.gallery.hashchange.realId=realId}}}}}if(PicsPerSite>10){cgJsClass.gallery.function.general.tools.checkSkeletonLoaderToShow(gid)}$mainCGdiv.find(".mainCGallery").addClass("cg_hidden");$mainCGdiv.css("display","block").removeClass("cg_hide");if(calledFromUpload&&cgJsClass.gallery.getJson.newImageIdsArrayFromUpload.length){cgJsData[gid].vars.openedRealId=cgJsClass.gallery.getJson.newImageIdsArrayFromUpload[cgJsClass.gallery.getJson.newImageIdsArrayFromUpload.length-1];cgJsData[gid].vars.openedRealIdAfterUploadOrOnPageLoad=cgJsData[gid].vars.openedRealId;realId=cgJsData[gid].vars.openedRealId;cgJsClass.gallery.getJson.newImageIdsArrayFromUpload=[]}cgJsClass.gallery.sorting.initSort(gid);var step=1;if(lengthKeys>PicsPerSite){if(realId==0){var step=cgJsClass.gallery.dynamicOptions.checkIfStepClick(gid)}else{var step=cgJsClass.gallery.dynamicOptions.getCurrentStep(gid,cgJsData[gid].vars.openedRealId)}}else{cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container_bottom").remove()}cgJsClass.gallery.dynamicOptions.checkStepsCutImageData(jQuery,step,true,lazy,gid,openPage,calledFromUpload,false,isCopyUploadToAnotherGallery);cgJsClass.gallery.hover.init(jQuery);if(lengthKeys>PicsPerSite){}else{cgJsClass.gallery.sorting.showRandomButtonInstantly(gid)}cgJsClass.gallery.getJson.hideGalleryLoader(gid);cgJsClass.gallery.getJson.hideTextUntilAnImageAdded(gid);cgJsClass.gallery.categories.checkIfShowMoreForCatAreaRequired(gid);var isVisibleCGheader=cgJsClass.gallery.views.functions.checkHeader(gid);cgJsClass.gallery.views.functions.checkIfGalleryContainerCanBeDisplayed(gid,isVisibleCGheader);setTimeout(function(){cgJsClass.gallery.views.cloneFurtherImagesStep(gid,true)},500);var $lastMainCGdivContainer=$("body").find(".mainCGdivContainer").last();var lastMainCGdivContainerGid=$lastMainCGdivContainer.attr("data-cg-gid");if(lastMainCGdivContainerGid){if(cgJsData[lastMainCGdivContainerGid]){if(cgJsData[gid].options.general.AllowRatingDynamic&&!cgJsData[lastMainCGdivContainerGid].vars.isOnlyGalleryNoVoting||cgJsData[gid].options.general.AllowRatingDynamic&&(cgJsData[lastMainCGdivContainerGid].vars.isOnlyGalleryNoVoting&&cgJsData[gid].vars.RatingVisibleForGalleryNoVoting)){}var heightDifference=$(document).height()-($lastMainCGdivContainer.offset().top+$lastMainCGdivContainer.height());if(heightDifference<400){}}}};;cgJsClass.gallery.getJson.imageDataPreProcess=function(gid,data,isOpenedPage,processedFilesCounter,calledFromUpload,newImageIdsArrayFromUpload,isCalledFromSameFunction,isCopyUploadToAnotherGallery){cgJsData[gid].vars.imageDataPreProcess=jQuery.extend({},data);if(calledFromUpload){cgJsData[gid].vars.searchInputCollectedIds=null;if(newImageIdsArrayFromUpload){var firstRealId=undefined;newImageIdsArrayFromUpload.forEach(function(realId){if(!firstRealId){firstRealId=realId}cgJsData[gid].rateAndCommentNumbers[realId]={};cgJsClass.gallery.vars.ratingAndCommentsProperties.forEach(function(property){cgJsData[gid].rateAndCommentNumbers[realId][property]=0});cgJsData[gid].vars.openedRealId=firstRealId;cgJsData[gid].vars.openedRealIdAfterUploadOrOnPageLoad=firstRealId})}cgJsClass.gallery.rating.updateData(gid,cgJsData[gid].rateAndCommentNumbers,true);if(cgJsData[gid].vars.showCategories){cgJsClass.gallery.categories.resetCategoriesCheckedStatusAfterUploadBeforeSorting(gid)}cgJsClass.gallery.function.general.tools.resetGallery(gid)}if(String(gid).indexOf("-w")>=0){cgJsData[gid].options.general.ShowOnlyUsersVotes=0;cgJsData[gid].options.general.HideUntilVote=0;cgJsData[gid].options.pro.MinusVote=0;for(var index in data){if(!data.hasOwnProperty(index)){break}if(data[index].Winner!=1){delete data[index]}}}if(newImageIdsArrayFromUpload){this.newImageIdsArrayFromUpload=newImageIdsArrayFromUpload;var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}if(sliderView){cgJsData[gid].vars.mainCGdiv.find("#mainCGslider"+gid).addClass("cg_hide");cgJsData[gid].vars.mainCGdiv.find("#cgSliderRangeContainer"+gid).addClass("cg_hide");cgJsClass.gallery.function.general.tools.checkSkeletonLoaderToShow(gid)}}cgJsClass.gallery.function.general.tools.checkSetUserGalleryOptions(gid);cgJsClass.gallery.function.general.tools.checkIfSettingsRequiredInFullWindow(gid);if(calledFromUpload){cgJsClass.gallery.vars.isSortingDataAvailable=false}var onlyLoggedInUserImages=false;if(typeof cgJsData[gid].wpUserImageIds!="undefined"){onlyLoggedInUserImages=true;if(newImageIdsArrayFromUpload){newImageIdsArrayFromUpload.forEach(function(id){cgJsData[gid].wpUserImageIds.push(parseInt(id))});cgJsData[gid].vars.imageDataLength=cgJsData[gid].wpUserImageIds.length}}cgJsData[gid].vars.categoriesImagesCount={};for(var index in data){if(!data.hasOwnProperty(index)){break}if(Object.keys(data[index]).length<15){delete data[index];continue}if(index==""){delete data[index];continue}if(cgJsData[gid].vars.showCategories){var realId=index;if(cgJsClass.gallery.categories.checkIfCanBeAddedToCategoriesCount(gid,realId)){var category=data[index].Category;if(typeof category=="undefined"){category=0;data[index].Category=0}else if(cgJsData[gid].vars.existingCategories.indexOf(parseInt(category))=="-1"){category=0;data[index].Category=0}if(!cgJsData[gid].vars.categoriesImagesCount[category]){cgJsData[gid].vars.categoriesImagesCount[category]=1}else{cgJsData[gid].vars.categoriesImagesCount[category]=cgJsData[gid].vars.categoriesImagesCount[category]+1}var showInGallery=false;for(var categoriesIndex in cgJsData[gid].vars.categories){if(!cgJsData[gid].vars.categories.hasOwnProperty(categoriesIndex)){break}if(cgJsData[gid].vars.categories[categoriesIndex].id==category||cgJsData[gid].options.pro.ShowOther==1&&category==0){showInGallery=true}}if(showInGallery==false){if(cgJsData[gid].vars.isCgWpPageEntryLandingPage){cgJsData[gid].vars.isCgWpPageEntryLandingPageAndNotActivatedForCategoryName="";if(data[index].Category==0){cgJsData[gid].vars.isCgWpPageEntryLandingPageAndNotActivatedForCategoryName=cgJsClass.gallery.language[gid].Other}else if(cgJsData[gid].categoriesFullData[data[index].Category]){cgJsData[gid].vars.isCgWpPageEntryLandingPageAndNotActivatedForCategoryName=cgJsData[gid].categoriesFullData[data[index].Category].Name}}delete data[index];continue}}}if(onlyLoggedInUserImages&&!data[index].isCGalleriesNoGalleryEntries){if(newImageIdsArrayFromUpload){if(cgJsData[gid].wpUserImageIds.indexOf(parseInt(index))===-1&&newImageIdsArrayFromUpload.indexOf(parseInt(index))===-1){delete data[index];continue}}else{if(cgJsData[gid].wpUserImageIds.indexOf(parseInt(index))===-1){delete data[index];continue}}}data[index]["id"]=index}cgJsClass.gallery.categories.addCategoriesImagesCount(gid);cgJsData[gid].vars.imageDataLengthAfterPreProcess=Object.keys(data).length;if(calledFromUpload&&(!cgJsData[gid].vars.rawData||Object.keys(cgJsData[gid].vars.rawData).length==0)){cgJsData[gid].vars.rawData=data;cgJsData[gid].vars.rawDataPreProcessed=jQuery.extend(true,{},data)}if(calledFromUpload){for(realId in data){if(!data.hasOwnProperty(realId)){break}if(!cgJsData[gid].vars.rawData[realId]){cgJsData[gid].vars.rawData[realId]=data[realId];cgJsData[gid].vars.rawDataPreProcessed[realId]=jQuery.extend(true,{},data[realId])}}}if(!cgJsData[gid].vars.rawDataPreProcessed){cgJsData[gid].vars.rawData=data}debugger;if(!cgJsData[gid].vars.queryDataArrayDone){cgJsClass.gallery.getJson.queryDataArray(gid);cgJsData[gid].vars.queryDataArrayDone=true}if(!cgJsData[gid].vars.ecommerceDataDone&&cgJsData[gid].vars.ecommerceFilesData){cgJsClass.gallery.ecommerce.functions.setEcommerceFilesData(gid);cgJsData[gid].vars.ecommerceDataDone=true}if(!cgJsData[gid].vars.rawDataPreProcessed){cgJsData[gid].vars.rawDataPreProcessed=jQuery.extend(true,{},data)}if(!cgJsData[gid].vars.setSelectedFileDataIfMultipleFilesOrExifDone||calledFromUpload){for(realId in cgJsData[gid].vars.rawData){if(!cgJsData[gid].vars.rawData.hasOwnProperty(realId)){break}cgJsClass.gallery.views.singleViewFunctions.setSelectedFileDataIfMultipleFilesOrExif(gid,realId)}cgJsData[gid].vars.setSelectedFileDataIfMultipleFilesOrExifDone=true}if(!cgJsData[gid].vars.imageDataLengthAfterPreProcess){cgJsClass.gallery.getJson.checkCheckControlElements(gid);cgJsClass.gallery.getJson.showTextUntilAnImageAdded(gid);return}if(calledFromUpload){if(cgJsClass.gallery.vars.fullwindow){}if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.reset(gid)}if(cgJsData[gid].vars.openedRealId>0){cgJsClass.gallery.views.close(gid)}}cgJsData[gid].vars.mainCGdiv.find(".cg_header").addClass("cg_hide");cgJsData[gid].vars.mainCGdiv.removeClass("cg_hide").css("display","");cgJsClass.gallery.function.general.tools.checkSkeletonLoaderToShow(gid);var imageDataPassedArgumentsWithoutIsDoNotCheckSortValues=[gid,data,calledFromUpload,processedFilesCounter,isOpenedPage,isCopyUploadToAnotherGallery,newImageIdsArrayFromUpload];if(isOpenedPage){cgJsClass.gallery.sorting.reset(gid,true);cgJsClass.gallery.getJson.setSortingData(gid,cgJsData[gid].imagesSortValuesFullData,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues)}else if(calledFromUpload){cgJsClass.gallery.vars.isSortingDataAvailable=true;cgJsClass.gallery.sorting.reset(gid,true);cgJsClass.gallery.getJson.imageData(gid,data,calledFromUpload,processedFilesCounter,isOpenedPage,isCopyUploadToAnotherGallery,newImageIdsArrayFromUpload)}else{cgJsClass.gallery.getJson.imageData(gid,data,calledFromUpload,processedFilesCounter,isOpenedPage,isCopyUploadToAnotherGallery,newImageIdsArrayFromUpload)}if(calledFromUpload&&!isCalledFromSameFunction){if(String(gid).indexOf("-u")>=0){var gidToCheck=gid.split("-u")[0];if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.getImagesOnlyForPreProcessing(gidToCheck,processedFilesCounter,newImageIdsArrayFromUpload,true)}var gidToCheck=gid.split("-u")[0]+"-nv";if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.getImagesOnlyForPreProcessing(gidToCheck,processedFilesCounter,newImageIdsArrayFromUpload,true)}var gidToCheck=gid.split("-u")[0]+"-w";if(cgJsData[gidToCheck]&&false){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.getImagesOnlyForPreProcessing(gidToCheck,processedFilesCounter,newImageIdsArrayFromUpload,true)}}else if(String(gid).indexOf("-nv")>=0){var gidToCheck=gid.split("-nv")[0];if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.getImagesOnlyForPreProcessing(gidToCheck,processedFilesCounter,newImageIdsArrayFromUpload,true)}var gidToCheck=gid.split("-nv")[0]+"-u";if(cgJsData[gidToCheck]&&cgJsClass.gallery.vars.isLoggedIn){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.getImagesOnlyForPreProcessing(gidToCheck,processedFilesCounter,newImageIdsArrayFromUpload,true)}var gidToCheck=gid.split("-nv")[0]+"-w";if(cgJsData[gidToCheck]&&false){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.getImagesOnlyForPreProcessing(gidToCheck,processedFilesCounter,newImageIdsArrayFromUpload,true)}}else if(String(gid).indexOf("-w")>=0){var gidToCheck=gid.split("-w")[0];if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.getImagesOnlyForPreProcessing(gidToCheck,processedFilesCounter,newImageIdsArrayFromUpload,true)}var gidToCheck=gid.split("-w")[0]+"-u";if(cgJsData[gidToCheck]&&cgJsClass.gallery.vars.isLoggedIn){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.getImagesOnlyForPreProcessing(gidToCheck,processedFilesCounter,newImageIdsArrayFromUpload,true)}var gidToCheck=gid.split("-w")[0]+"-nv";if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.getImagesOnlyForPreProcessing(gidToCheck,processedFilesCounter,newImageIdsArrayFromUpload,true)}}else if(String(gid).indexOf("-u")==-1&&String(gid).indexOf("-nv")==-1&&String(gid).indexOf("-w")==-1){var gidToCheck=gid+"-u";if(cgJsData[gidToCheck]&&cgJsClass.gallery.vars.isLoggedIn){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.getImagesOnlyForPreProcessing(gidToCheck,processedFilesCounter,newImageIdsArrayFromUpload,true)}var gidToCheck=gid+"-nv";if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.getImagesOnlyForPreProcessing(gidToCheck,processedFilesCounter,newImageIdsArrayFromUpload,true)}var gidToCheck=gid+"-w";if(cgJsData[gidToCheck]&&false){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.getJson.getImagesOnlyForPreProcessing(gidToCheck,processedFilesCounter,newImageIdsArrayFromUpload,true)}}}};;cgJsClass.gallery.resize={init:function($){$(window).resize(function(e){if(cgJsClass.gallery.views.fullscreen.isFullscreen()){return}cgJsClass.gallery.vars.isMobileStatusBefore=cgJsClass.gallery.vars.isMobile;var event=e;cgJsClass.gallery.function.general.mobile.check();var timeout=500;if(cgJsClass.gallery.vars.isMobileStatusBefore!=cgJsClass.gallery.vars.isMobile){timeout=500}clearTimeout(cgJsClass.gallery.resize.setTimeout);if(cgJsClass.gallery.vars.isMobile){var $cg_zoom_container=cgJsClass.gallery.vars.dom.body.find(".cg_zoom_container");if($cg_zoom_container.length){cgJsClass.gallery.views.singleViewFunctions.zoom($,cgJsClass.gallery.views.singleViewFunctions.$zoomImageDiv,$cg_zoom_container.attr("data-cg-gid"),$cg_zoom_container.attr("data-cg-real-id"),true,$cg_zoom_container)}}cgJsClass.gallery.resize.setTimeout=setTimeout(function(){cgJsClass.gallery.vars.initResize=true;jQuery(window).off("hashchange");cgJsClass.gallery.upload.functions.resizeAllForms();cgJsClass.gallery.vars.keypressStartInSeconds=(new Date).getTime()/1e3;if(cgJsClass.gallery.vars.isMobile){var screenWidth=screen.width}else{var screenWidth=$(window).width()}var screenWidthMore=screenWidth+4;var screenWidthLess=screenWidth-4;if(cgJsClass.gallery.vars.windowWidthLastResize>screenWidthLess&&cgJsClass.gallery.vars.windowWidthLastResize<screenWidthMore){return}cgJsClass.gallery.vars.windowWidthLastResize=screenWidth;cgJsClass.gallery.categories.setRemoveTitleAttributeForSmallWindow();if(cgJsClass.gallery.vars.fullscreenStartOpenImage==true){return}$(".mainCGallery").each(function(index){var gid=$(this).attr("data-cg-gid");if(cgJsClass.gallery.vars.isMobile){cgJsData[gid].vars.mainCGdiv.addClass("cg_is_mobile")}else{cgJsData[gid].vars.mainCGdiv.removeClass("cg_is_mobile")}if(cgJsClass.gallery.vars.messageContainerShown==true){cgJsClass.gallery.function.message.resize()}if(cgJsClass.gallery.vars.cgMessagesContainerProIsVisible){cgJsClass.gallery.function.message.resize(true)}var dataLength=0;if(cgJsData[gid].vars.rawData){dataLength=Object.keys(cgJsData[gid].vars.rawData).length}if(dataLength){if(cgJsData[gid].vars.currentLook=="height"){cgJsClass.gallery.heightLogic.init($,gid,false,false,false,false,false,false,false,true)}if(cgJsData[gid].vars.currentLook=="thumb"){cgJsClass.gallery.thumbLogic.init($,gid,false,false,false,false,false,false,false,true)}if(cgJsData[gid].vars.currentLook=="slider"){cgJsClass.gallery.thumbLogic.init($,gid,false,false,false,false,false,false,false,true)}if(cgJsData[gid].vars.currentLook=="row"){cgJsClass.gallery.rowLogic.init($,gid,false,false,false,false,false,false,false,true)}if(cgJsData[gid].vars.currentLook=="blog"){if(!cgJsClass.gallery.vars.fullwindow){cgJsClass.gallery.blogLogic.init(jQuery,gid,null,null,null,true,false,false,false,true)}if(cgJsClass.gallery.vars.fullwindow&&cgJsClass.gallery.vars.fullwindow==gid){var prepareResizeFullWindow=cgJsClass.gallery.blogLogic.prepareResizeFullWindow(gid);cgJsClass.gallery.blogLogic.changeWidth(prepareResizeFullWindow.widthNowForBlogView,prepareResizeFullWindow.factor,cgJsData[gid].vars.mainCGdivHelperParent,gid,false,true)}else{cgJsClass.gallery.blogLogic.changeWidth(null,null,cgJsData[gid].vars.mainCGdivHelperParent,gid,false,true)}}if(cgJsClass.gallery.vars.fullwindow==gid){cgJsClass.gallery.views.addRemoveSticky(cgJsData[gid].vars.mainCGdivHelperParent,cgJsData[gid].vars.mainCGdivHelperParent.scrollTop(),true,gid);cgJsClass.gallery.blogLogic.setWidthMainCGdivFullWindowConfigurationArea(gid);cgJsClass.gallery.blogLogic.setTopMainCGdivFullWindowConfigurationArea(gid);cgJsClass.gallery.views.clickFurtherImagesStep.setBottomContainerAsTextWidth(gid)}}if(cgJsData[gid].vars.openedRealId>=1){cgJsData[gid].vars.cgCenterDiv.css("display","none")}cgJsClass.gallery.categories.checkIfShowMoreForCatAreaRequired(gid,undefined,undefined,true);cgJsClass.gallery.upload.functions.uploadFormSetWidth(gid)});$(".mainCGdivUploadFormOnly").each(function(){var gid=$(this).attr("data-cg-gid");cgJsClass.gallery.upload.functions.uploadFormSetWidth(gid)});cgJsClass.gallery.hashchange.activateHashChangeEvent();cgJsClass.gallery.vars.initResize=false},timeout)})},setTimeOut:function(){},resizeCenter:function(cgCenterDiv,gid,mainCGalleryWidth,gidForElements){var AllowComments=cgJsData[gid].options.general.AllowComments;if(true){cgCenterDiv.find("#cgCenterImageDivButtons"+gidForElements).addClass("cgHundertPercentWidth");cgCenterDiv.find("#cgCenterImageDiv"+gidForElements).addClass("cgHundertPercentWidth");cgCenterDiv.find("#cgCenterInfoDiv"+gidForElements).addClass("cgHundertPercentWidth");cgCenterDiv.find("#cgCenterImageRatingDiv"+gidForElements).addClass("cgHundertPercentWidth");cgCenterDiv.find("#cgCenterImageFbLikeDiv"+gidForElements).addClass("cgHundertPercentWidth");cgCenterDiv.find(".cg-center-info-div").removeClass("cg_single_view_full_width");return true}else{cgCenterDiv.find("#cgCenterImageDivButtons"+gidForElements).removeClass("cgHundertPercentWidth");cgCenterDiv.find("#cgCenterImageDiv"+gidForElements).removeClass("cgHundertPercentWidth");cgCenterDiv.find("#cgCenterInfoDiv"+gidForElements).removeClass("cgHundertPercentWidth");cgCenterDiv.find("#cgCenterImageRatingDiv"+gidForElements).removeClass("cgHundertPercentWidth");cgCenterDiv.find("#cgCenterImageFbLikeDiv"+gidForElements).addClass("cgHundertPercentWidth");cgCenterDiv.find(".cg-center-info-div").addClass("cg_single_view_full_width");return false}},resizeInfoAndCommentAreas:function(cgCenterDiv,gid,mainCGalleryWidth,gidForElements){var AllowComments=cgJsData[gid].options.general.AllowComments;if(true){cgCenterDiv.find("#cgCenterImageInfoDivParent"+gidForElements).addClass("cgHundertPercentWidth");cgCenterDiv.find("#cgCenterImageCommentsDivParent"+gidForElements).addClass("cgHundertPercentWidth");return true}else{cgCenterDiv.find("#cgCenterImageInfoDivParent"+gidForElements).removeClass("cgHundertPercentWidth");cgCenterDiv.find("#cgCenterImageCommentsDivParent"+gidForElements).removeClass("cgHundertPercentWidth");return false}},offsetThumbCheckToCompare:0,collectedWidth:0,thumbSingleViewResize:function(cgCenterDiv,gid){cgJsClass.gallery.resize.collectedWidth=0;jQuery(cgJsData[gid].image).each(function(index){var firstKey=Object.keys(cgJsData[gid].image[index])[0];var offset=cgJsData[gid].image[index][firstKey]["imageObject"].offset().top;var offsetThumbCheckToCompare=cgJsClass.gallery.resize.offsetThumbCheckToCompare;if(offset>offsetThumbCheckToCompare&&offsetThumbCheckToCompare!=0){var collectedWidth=cgJsClass.gallery.resize.collectedWidth;cgCenterDiv.css("width",collectedWidth+"px")}else{cgJsClass.gallery.resize.collectedWidth=cgJsClass.gallery.resize.collectedWidth+cgJsData[gid].image[index][firstKey]["imageObject"].outerWidth(true);cgJsClass.gallery.resize.offsetThumbCheckToCompare=cgJsData[gid].image[index][firstKey]["imageObject"].offset().top}});return},galleryIcons:function($mainCGallery,isOpenPage,isJustRemoveClasses,gid,gWidth){if(isJustRemoveClasses){$mainCGallery.removeClass("cg_micro cg_xxs cg_sm cg_xs");return}if(cgJsData[gid].vars.modernHover){return}if(cgJsData[gid].vars.currentLook=="row"&&gWidth<=400&&cgJsData[gid].options.general.PicsInRow>=2&&cgJsData[gid].options.general.AllowRatingDynamic){$mainCGallery.addClass("cg_micro").removeClass("cg_xxs").removeClass("cg_sm").removeClass("cg_xs");return}else{$mainCGallery.removeClass("cg_micro")}if(isOpenPage==true){setTimeout(function(){if(gWidth<=350){$mainCGallery.addClass("cg_xxs").removeClass("cg_sm").removeClass("cg_xs")}else if(gWidth<=700){$mainCGallery.addClass("cg_xs").removeClass("cg_xxs").removeClass("cg_sm")}else if(gWidth<=800){$mainCGallery.addClass("cg_sm").removeClass("cg_xxs").removeClass("cg_xs")}else{$mainCGallery.removeClass("cg_sm").removeClass("cg_xs").removeClass("cg_xxs")}},500)}else{if(gWidth<=350){$mainCGallery.addClass("cg_xxs").removeClass("cg_sm").removeClass("cg_xs")}else if(gWidth<=700){$mainCGallery.addClass("cg_xs").removeClass("cg_xxs").removeClass("cg_sm")}else if(gWidth<=800){$mainCGallery.addClass("cg_sm").removeClass("cg_xxs").removeClass("cg_xs")}else{$mainCGallery.removeClass("cg_sm").removeClass("cg_xs").removeClass("cg_xxs")}}},galleryIconsSlider:function($mainCGslider,isOpenPage,isJustRemoveClasses,gid,gWidth){$mainCGslider.removeClass("cg_micro cg_xxs cg_sm cg_xs");if(isOpenPage==true){setTimeout(function(){if(gWidth<=400){$mainCGslider.addClass("cg_xs").removeClass("cg_xxs").removeClass("cg_sm")}else if(gWidth<=600){$mainCGslider.addClass("cg_sm").removeClass("cg_xxs").removeClass("cg_xs")}else{$mainCGslider.removeClass("cg_sm").removeClass("cg_xs").removeClass("cg_xxs")}},500)}else{if(gWidth<=400){$mainCGslider.addClass("cg_xs").removeClass("cg_xxs").removeClass("cg_sm")}else if(gWidth<=600){$mainCGslider.addClass("cg_sm").removeClass("cg_xxs").removeClass("cg_xs")}else{$mainCGslider.removeClass("cg_sm").removeClass("cg_xs").removeClass("cg_xxs")}}}};;cgJsClass.gallery.hover={init:function($){if(cgJsClass.gallery.vars.eventHoverInit){return}else{cgJsClass.gallery.vars.eventHoverInit=true}$(document).on("mouseenter",".cg_show",function(){var gid=$(this).attr("data-cg-gid");var realId=$(this).attr("data-cg-id");if($(this).hasClass("cg_show_info_bottom")){return}if(cgJsData[gid].options.general.ShowAlways!=1){cgJsClass.gallery.function.general.tools.setHeightForInfoBlockInGallery(gid,$(this).find(".cg_gallery_info_title"),$(this),$(this).height(),$(this).width(),undefined,realId);if(cgJsData[gid].options.general.AllowRatingDynamic){$(this).find(".cg_gallery_info").addClass("cg_fade_in_0");if(!cgJsData[gid].vars.modernHover){$(this).find(".cg_gallery_info_title").addClass("cg_fade_in_0_5")}}else{if(!cgJsData[gid].vars.modernHover){$(this).find(".cg_gallery_info").addClass("cg_fade_in_0_5");$(this).find(".cg_gallery_info_title").addClass("cg_fade_in_0_5")}}if(cgJsData[gid].vars.currentLook=="slider"&&cgJsData[gid].vars.rawData[realId].ImgType=="con"){$(this).find(".cg_gallery_info").removeClass("cg_hide_till_hover_con")}}});$(document).on("mouseleave",".cg_show",function(){var gid=$(this).attr("data-cg-gid");var realId=$(this).attr("data-cg-id");if(cgJsData[gid].options.general.ShowAlways!=1){if(cgJsData[gid].options.general.AllowRatingDynamic){$(this).find(".cg_gallery_info").removeClass("cg_fade_in_0");if(!cgJsData[gid].vars.modernHover){$(this).find(".cg_gallery_info_title").removeClass("cg_fade_in_0_5")}}else{if(!cgJsData[gid].vars.modernHover){$(this).find(".cg_gallery_info").removeClass("cg_fade_in_0_5");$(this).find(".cg_gallery_info_title").removeClass("cg_fade_in_0_5")}}if(cgJsData[gid].vars.currentLook=="slider"&&cgJsData[gid].vars.rawData[realId].ImgType=="con"){$(this).find(".cg_gallery_info").addClass("cg_hide_till_hover_con")}}})},fadeOutDone:false};;cgJsClass.gallery.touch={init:function($){if(cgJsClass.gallery.vars.eventInitGalleryTouch){return}else{cgJsClass.gallery.vars.eventInitGalleryTouch=true}$(document).on("touchstart",".cgCenterDiv",function(e){jQuery(window).off("hashchange");cgJsClass.gallery.vars.keypressStartInSeconds=(new Date).getTime()/1e3;cgJsClass.gallery.touch.touchstart=e.originalEvent.changedTouches[0].pageX;if(cgJsClass.gallery.vars.isMobile==true){if(cgJsClass.gallery.views.singleViewFunctions.$zoomImageDiv){cgJsClass.gallery.views.singleViewFunctions.zoomClose(jQuery)}}});$(document).on("touchend",".cgCenterDiv",function(e){var gid=cgJsClass.gallery.vars.openedGallery;var touchstart=cgJsClass.gallery.touch.touchstart;var touchend=e.originalEvent.changedTouches[0].pageX;var distance=touchstart-touchend;if(gid){if((distance>100||distance<-100)&&cgJsData[gid].vars.currentLook!="blog"){var order=parseInt(cgJsClass.gallery.vars.openedGalleryImageOrder);if(distance<-100){if(order==0){cgJsClass.gallery.views.singleViewFunctions.clickPrevStep(gid);return}var newOrder=order-1;cgJsClass.gallery.views.functions.appendAndRemoveImagesInSlider(gid,newOrder,cgJsData[gid].vars.maximumVisibleImagesInSlider,cgJsData[gid].vars.mainCGslider);cgJsClass.gallery.views.singleView.openImage($,newOrder,false,gid,"left")}if(distance>100){var newOrder=order+1;if(newOrder>=cgJsData[gid].image.length){cgJsClass.gallery.views.singleViewFunctions.clickNextStep(gid);return}cgJsClass.gallery.views.functions.appendAndRemoveImagesInSlider(gid,newOrder,cgJsData[gid].vars.maximumVisibleImagesInSlider,cgJsData[gid].vars.mainCGslider);cgJsClass.gallery.views.singleView.openImage($,newOrder,false,gid,"right")}}}cgJsClass.gallery.hashchange.activateHashChangeEvent();if(cgJsClass.gallery.vars.isMobile==true){setTimeout(function(){},300)}})},touchstart:0,touchstartSlider:0};;cgJsClass.gallery.indexeddb={instances:{},versionNumber:2,versionNumberGallery:2,versionNumberSortValues:2,init:function(uploadFolderUrl,gid,tstamp){window.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction;window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;if(!window.indexedDB){console.log("Dieser Browser unterstützt kein indexedDb");cgJsClass.gallery.getJson.getImages(uploadFolderUrl,gid,tstamp,true);return false}var request=indexedDB.open("contest-gal1ery-"+gid,cgJsClass.gallery.indexeddb.versionNumber);request.onerror=function(event){console.log("Verbindung zu indexed DB nicht möglich oder anderer Fehler");console.log(event);cgJsClass.gallery.getJson.getImages(uploadFolderUrl,gid,tstamp,true);return false};request.onupgradeneeded=function(event){var db=event.target.result;try{db.createObjectStore("sortValuesJson",{keyPath:"versionNumber"});db.createObjectStore("galleryJson",{keyPath:"versionNumber"})}catch(e){console.log("galleryJson couldn\t be created, must be already crated");console.log(e)}};request.onsuccess=function(){var db=request.result;cgJsClass.gallery.indexeddb.instances[gid]=db;var galleryJsonRequest=db.transaction("galleryJson").objectStore("galleryJson").get(cgJsClass.gallery.indexeddb.versionNumberGallery);galleryJsonRequest.onsuccess=function(event){if(typeof event.target.result=="undefined"){cgJsClass.gallery.getJson.getImages(uploadFolderUrl,gid,tstamp,true);return}var data=event.target.result;if(!Object.keys(data).length>=1){cgJsClass.gallery.getJson.getImages(uploadFolderUrl,gid,tstamp,true);return}if(!data.hasOwnProperty("tstamp")){cgJsClass.gallery.getJson.getImages(uploadFolderUrl,gid,tstamp,true)}else if(data.tstamp!=tstamp){cgJsClass.gallery.getJson.getImages(uploadFolderUrl,gid,tstamp,true)}else{cgJsData[gid].vars.preRawData=data;cgJsClass.gallery.getJson.imageDataPreProcess(gid,data.data,true)}};galleryJsonRequest.onerror=function(event){cgJsClass.gallery.getJson.getImages(uploadFolderUrl,gid,tstamp,true);console.log("galleryJsonRequest error");console.log(event)}}},saveJsonGallery:function(gid,data,tstamp){try{cgJsClass.gallery.indexeddb.instances[gid].transaction("galleryJson","readwrite").objectStore("galleryJson").put({versionNumber:cgJsClass.gallery.indexeddb.versionNumberGallery,tstamp:tstamp,data:data})}catch(e){console.log("saveJsonGallery did not worked");console.log(e)}},saveJsonSortValues:function(gid,data,tstamp,isFromSaveAfterRatingOrCommenting){for(var realId in cgJsData[gid].vars.rawData){if(!cgJsData[gid].vars.rawData.hasOwnProperty(realId)){break}if(!cgJsData[gid].rateAndCommentNumbers[realId]){cgJsData[gid].rateAndCommentNumbers[realId]={};cgJsClass.gallery.vars.ratingAndCommentsProperties.forEach(function(property){cgJsData[gid].rateAndCommentNumbers[realId][property]=0})}}var valuesToSaveForSortArray=cgJsClass.gallery.vars.ratingAndCommentsProperties;var dataNew={};for(var realId in data){if(!data.hasOwnProperty(realId)){break}for(var property in data[realId]){if(!data[realId].hasOwnProperty(property)){break}if(!dataNew[realId]){dataNew[realId]={}}if(valuesToSaveForSortArray.indexOf(property)>-1){data[realId][property]=parseInt(data[realId][property]);dataNew[realId][property]=data[realId][property]}}}var dataToSave=dataNew;if(isFromSaveAfterRatingOrCommenting){var dataToSave={};for(var realId in dataNew){if(!dataNew.hasOwnProperty(realId)){break}if(!dataToSave[realId]){dataToSave[realId]={}}for(var property in dataNew[realId]){if(!dataNew[realId].hasOwnProperty(property)){break}dataToSave[realId][property]=dataNew[realId][property]}if(dataToSave[realId].CountSreal){dataToSave[realId].CountS=dataToSave[realId].CountSreal;delete dataToSave[realId].CountSreal}}cgJsData[gid].rateAndCommentNumbers=dataToSave}try{cgJsClass.gallery.indexeddb.instances[gid].transaction("sortValuesJson","readwrite").objectStore("sortValuesJson").put({versionNumber:cgJsClass.gallery.indexeddb.versionNumberSortValues,tstamp:tstamp,data:dataToSave})}catch(e){console.log("saveJsonSortValues did not worked");console.log(e)}},getJsonSortValues:function(uploadFolderUrl,gid,tstamp,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues,newImageIdsArrayFromUpload){if(cgJsClass.gallery.indexeddb.instances[gid]){var db=cgJsClass.gallery.indexeddb.instances[gid];var sortValuesJsonRequest=db.transaction("sortValuesJson").objectStore("sortValuesJson").get(cgJsClass.gallery.indexeddb.versionNumberSortValues);sortValuesJsonRequest.onsuccess=function(event){if(typeof event.target.result=="undefined"){cgJsClass.gallery.getJson.getSortValuesRequest(uploadFolderUrl,gid,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues);return}var data=event.target.result;if(!Object.keys(data).length>=1){cgJsClass.gallery.getJson.getSortValuesRequest(uploadFolderUrl,gid,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues);return}if(!data.hasOwnProperty("tstamp")){cgJsClass.gallery.getJson.getSortValuesRequest(uploadFolderUrl,gid,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues)}else if(parseInt(data.tstamp)<tstamp&&!newImageIdsArrayFromUpload){cgJsClass.gallery.getJson.getSortValuesRequest(uploadFolderUrl,gid,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues)}else{cgJsClass.gallery.getJson.setSortingData(gid,data.data,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues,false,newImageIdsArrayFromUpload)}};sortValuesJsonRequest.onerror=function(event){cgJsClass.gallery.getJson.getSortValuesRequest(uploadFolderUrl,gid,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues);console.log("galleryJsonRequest error");console.log(event)}}else{cgJsClass.gallery.getJson.getSortValuesRequest(uploadFolderUrl,gid,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues)}}};;cgJsClass.gallery.hashchange={initCheckHashChangeEvent:function(){if(cgJsClass.gallery.vars.eventInitCheckHashChangeEvent){return}else{cgJsClass.gallery.vars.eventInitCheckHashChangeEvent=true}window.onhashchange=function(){if(cgJsClass.gallery.vars.isHashJustChangedForHandling==true){cgJsClass.gallery.vars.isHashJustChangedForHandling=false;return}if(cgJsClass.gallery.vars.isHashJustChangedNewLogic==true){cgJsClass.gallery.vars.isHashJustChangedNewLogic=false;return}if(cgJsClass.gallery.vars.openedUploadFormGalleryId){var gid=cgJsClass.gallery.vars.openedUploadFormGalleryId;cgJsClass.gallery.upload.functions.close(gid,true);return}if(location.href.indexOf("#!gallery")==-1&&cgJsClass.gallery.vars.fullwindow&&!(location.href.indexOf("#cgUploadFormOpened")>-1||location.href.indexOf("#cgFullWindowOpened")>-1)){var gid=cgJsClass.gallery.vars.fullwindow;cgJsClass.gallery.views.fullwindow.closeFunction(gid,true);return}else{if(!cgJsClass.gallery.vars.fullwindow&&cgJsClass.gallery.vars.openedGallery){var gid=cgJsClass.gallery.vars.openedGallery;if(cgJsData[gid].vars.currentLook!="slider"){}if(location.href.indexOf("#!gallery")==-1){setTimeout(function(){cgJsClass.gallery.vars.dom.html.animate({scrollTop:cgJsData[gid].vars.mainCGdiv.offset().top-40+"px"},0)},10)}return}}if(location.href.indexOf("#!gallery")>-1&&cgJsClass.gallery.vars.fullwindow){return}if(location.href.indexOf("#!gallery")>-1||location.href.indexOf("#cgUploadFormOpened")>-1||location.href.indexOf("#cgFullWindowOpened")>-1){cgJsClass.gallery.function.general.tools.replaceStateOnCloseOrMinimize();return}}},activateHashChangeEvent:function(){clearTimeout(cgJsClass.gallery.hashchange.setTimeoutEvent);cgJsClass.gallery.hashchange.setTimeoutEvent=setTimeout(function(){var checkDifference=(new Date).getTime()/1e3-cgJsClass.gallery.vars.keypressStartInSeconds;if(checkDifference>.5){cgJsClass.gallery.hashchange.initCheckHashChangeEvent()}},3e3)},setTimeoutEvent:null,checkHash:function($,backButton,counter,isOpenedPage){if(cgJsClass.gallery.vars.showImageClicked==true){setTimeout(function(){cgJsClass.gallery.vars.showImageClicked=false},100);return}if(location.href.indexOf("#!gallery")>0){if(backButton===true){cgJsClass.gallery.hashchange.checkHashFunction($,backButton,counter,isOpenedPage)}else{setTimeout(function(){cgJsClass.gallery.hashchange.checkHashFunction($,backButton,counter,isOpenedPage)},200)}}else{}},checkHashFunction:function($,backButton,counter,isOpenedPage){var obj=cgJsClass.gallery.hashchange.getRealIdAndGid(isOpenedPage);var realId=obj["realId"];var gid=obj["gid"];if(cgJsClass.gallery.vars.openedRealId==realId){return}if(typeof realId=="undefined"){return}if(cgJsData[gid].hasOwnProperty("options")){if(cgJsData[gid].options.general.FullSizeImageOutGallery==1){return}if(cgJsData[gid].options.general.OnlyGalleryView==1){return}}cgJsClass.gallery.vars.galleryForRecursiveNavigation=gid;if(backButton!=true){jQuery("#mainCGdiv"+gid).find(".cg-lds-dual-ring-div").removeClass("cg_hide").addClass("cg_fade_in_loader")}if(typeof cgJsData[gid].image!="object"){if(typeof counter=="undefined"){counter=0}else{counter++}if(counter==50){jQuery("#mainCGdiv"+gid).find(".cg-lds-dual-ring-div").addClass("cg_hide").removeClass("cg_fade_in_loader");return}cgJsClass.gallery.hashchange.checkHash($,false,counter)}else{if(Object.keys(cgJsData[gid].image).length==0){if(typeof counter=="undefined"){counter=0}else{counter++}if(counter==50){jQuery("#mainCGdiv"+gid).find(".cg-lds-dual-ring-div").addClass("cg_hide").removeClass("cg_fade_in_loader");return}cgJsClass.gallery.hashchange.checkHash($,false,counter)}}try{var firstStep=false;jQuery(cgJsData[gid].image).each(function(index,value){if(Object.keys(value)[0]==realId){firstStep=true}});if(cgJsData[gid].vars.currentLook=="slider"){cgJsData[gid].vars.openedRealId=realId}if(firstStep==false){var i=1;var length=Object.keys(cgJsData[gid].fullImageData).length;var PicsPerSite=parseInt(cgJsData[gid].options.general.PicsPerSite);jQuery(cgJsData[gid].fullImageData).each(function(index,value){var firstKey=Object.keys(cgJsData[gid].fullImageData[index])[0];var realId=cgJsData[gid].fullImageData[index][firstKey]["id"];if(realId==cgJsClass.gallery.hashchange.realId){var step=Math.floor(i/PicsPerSite)+1;if(cgJsData[gid].vars.currentLook!=1){jQuery("#mainCGdiv"+gid).find(".cg_further_images[data-cg-step="+step+"]").first().click();var order=i-PicsPerSite-1;setTimeout(function(){if(cgJsData[gid].options.general.FullSizeImageOutGallery==1){return}if(cgJsData[gid].options.general.OnlyGalleryView==1){return}jQuery("#cg_append"+realId+"").addClass("cg_open_gallery").click()},100)}return}i++})}function checkRecursive(i,breakCheck,realId){var check=false;setTimeout(function(){var gid=cgJsClass.gallery.vars.galleryForRecursiveNavigation;if($("#cg_show"+realId).length>=1){jQuery("#mainCGdiv"+gid).find(".cg-lds-dual-ring-div").addClass("cg_hide").removeClass("cg_fade_in_loader");if(cgJsData[gid].vars.currentLook!=1){if(cgJsData[gid].options.general.FullSizeImageOutGallery==1){return}if(cgJsData[gid].options.general.OnlyGalleryView==1){return}jQuery("#cg_append"+realId+"").addClass("cg_open_gallery").click()}check=true;return}else{i++;if(i==35){jQuery("#mainCGdiv"+gid).find(".cg-lds-dual-ring-div").addClass("cg_hide");return}checkRecursive(i,false,realId)}},100)}var i=0;checkRecursive(i,false,realId)}catch(e){jQuery("#mainCGdiv"+gid).find(".cg-lds-dual-ring-div").addClass("cg_hide")}},getRealIdAndGid:function(isOpenedPage,isJustGetGidAndRealId){var hashArr=location.hash.split("/");var gid=hashArr[1];var realId=hashArr[3];if(typeof realId=="undefined"||realId==""||isNaN(realId)||typeof gid=="undefined"||gid==""){if(!isJustGetGidAndRealId){location.hash="";location.reload();return}}var obj={};obj["realId"]=realId;obj["gid"]=gid;if(isJustGetGidAndRealId){return obj}if(isOpenedPage==true){cgJsClass.gallery.vars.byStartPageOpenedImageId=realId}return obj},rowIdOfRealId:null};;cgJsClass.gallery.comment.init=function(){cgJsClass.gallery.comment.clickComment()};;cgJsClass.gallery.comment.clickComment=function(){if(cgJsClass.gallery.vars.eventClickComment){return}else{cgJsClass.gallery.vars.eventClickComment=true}jQuery(document).on("click",".cg-center-image-comments-div-enter-submit",function(e){e.preventDefault();e.stopPropagation();var gid=jQuery(this).attr("data-cg-gid");if(cgJsData[gid].vars.currentLook=="blog"){var order=jQuery(this).closest(".cgCenterDiv").attr("data-cg-order")}else{var order=cgJsData[gid].vars.openedGalleryImageOrder}var firstKey=Object.keys(cgJsData[gid].image[order])[0];var realId=cgJsData[gid].image[order][firstKey]["id"];cgJsClass.gallery.comment.showSetComments(realId,gid,false,jQuery(this).closest(".cgCenterDiv").attr("data-cg-gid-with-order"))})};;cgJsClass.gallery.comment.setCommentsSingleImageView=function(realId,gid,cgCenterDiv,imageObject,gidForElements){debugger;var uploadFolderUrl=cgJsData[gid].vars.uploadFolderUrl;var galleryId=gid;var $cgCenterImageCommentsDiv=cgCenterDiv.find("#cgCenterImageCommentsDiv"+gidForElements);var $cgCenterImageCommentsDivTitle=cgCenterDiv.find("#cgCenterImageCommentsDivTitle"+gidForElements);$cgCenterImageCommentsDiv.addClass("cg_hide");var append=false;if(cgJsData[gid].vars.openedRealId){if(cgJsData[gid].vars.jsonGetComment>0){for(var key in cgJsData[gid].vars.jsonGetComment){if(!cgJsData[gid].vars.jsonGetComment.hasOwnProperty(key)){break}cgJsData[gid].vars.jsonGetComment[key].abort()}}cgJsData[gid].vars.jsonGetComment=[]}var data=cgJsData[gid].jsonCommentsData[realId];if(cgJsData[gid].jsonCommentsData[realId]){if(append==false){$cgCenterImageCommentsDiv.removeClass("cg_hide");$cgCenterImageCommentsDivTitle.removeClass("cg_hide");cgCenterDiv.find("#cgCenterInfoDiv"+gidForElements).find(".cg-center-image-comments-div-parent-parent").removeClass("cg_hide");append=true}debugger;for(var value in data){if(!data.hasOwnProperty(value)){break}if(data[value]["Active"]==2){continue}var WpUserId=data[value]["WpUserId"];var comment=data[value]["comment"];var name=data[value]["name"];name=name.replace(/&amp;amp;#x/g,"&#x");name=name.replace(/&amp;#x/g,"&#x");cgJsClass.gallery.vars.emojis.forEach(function(value){var regExp=new RegExp(value,"gi");name=name.replace(regExp,value+" ")});var timestamp=parseInt(data[value]["timestamp"]);var date=cgJsClass.gallery.comment.getDateDependsOnLocaleLang(gid,timestamp);var commentDiv=jQuery('<div class="cg-center-image-comments-div"></div>');comment=comment.replace(/&amp;amp;#x/g,"&#x");comment=comment.replace(/&amp;#x/g,"&#x");cgJsClass.gallery.vars.emojis.forEach(function(value){var regExp=new RegExp(value,"gi");comment=comment.replace(regExp,value+" ")});comment=jQuery("<textarea />").html(comment).text();name=jQuery("<textarea />").html(name).text();comment=cgJsClass.gallery.function.general.tools.encodeHTML(comment);name=cgJsClass.gallery.function.general.tools.encodeHTML(name);date=cgJsClass.gallery.function.general.tools.encodeHTML(date);comment=comment.replaceAll(/&lt;br\/&gt;/g," ");comment=comment.replaceAll(/&lt;br \/&gt;/g," ");comment=comment.replaceAll(/&lt;br\/>/g," ");comment=comment.replaceAll(/&lt;br \/>/g," ");comment=comment.replaceAll(/&lt;br>/g," ");comment=comment.replaceAll(/&lt;br >/g," ");commentDiv.append('<p class="cg-center-image-comments-comment-content">'+comment+"</p>");var profileImage="";var nickname="";if(cgJsData[gid].vars.profileImages[WpUserId]){profileImage=cgJsData[gid].vars.profileImages[WpUserId]}if(cgJsData[gid].vars.nicknames[WpUserId]){nickname=cgJsData[gid].vars.nicknames[WpUserId]}if(WpUserId&&(profileImage||nickname)){var $cgCenterImageCommentsUserData=jQuery('<div class="cg-center-image-comments-user-data">'+'<div class="cg-center-image-comments-profile-image cg_hide cg-center-show-profile-image-full" data-cg-wp-user-id="'+WpUserId+'"></div>'+'<div class="cg-center-image-comments-nickname-avatar cg_hide"></div>'+'<div class="cg-center-image-comments-nickname-text cg_hide"></div>'+"</div>");if(profileImage){$cgCenterImageCommentsUserData.find(".cg-center-image-comments-nickname-avatar").addClass("cg_hide");$cgCenterImageCommentsUserData.find(".cg-center-image-comments-profile-image").css("background-image","url("+profileImage+")").removeClass("cg_hide");$cgCenterImageCommentsUserData.find(".cg-center-image-comments-nickname-text").addClass("cg-center-show-profile-image-full")}if(nickname){if(!profileImage){$cgCenterImageCommentsUserData.find(".cg-center-image-comments-nickname-avatar").removeClass("cg_hide")}$cgCenterImageCommentsUserData.find(".cg-center-image-comments-nickname-text").text(nickname).removeClass("cg_hide")}$cgCenterImageCommentsUserData.append('<div class="cg-center-image-comments-date"><p>'+date+"</p></div>");commentDiv.prepend($cgCenterImageCommentsUserData)}else{var cgHideClassString="";if(!name){cgHideClassString="cg_hide"}var $nameDateContainer=jQuery('<div class="cg-center-image-comments-name-date-container">'+'<p class="cg-center-image-comments-name-content '+cgHideClassString+'">'+name+"</p>"+'<p class="cg-center-image-comments-date-content">'+date+"</p>"+"</div>");commentDiv.prepend($nameDateContainer)}$cgCenterImageCommentsDiv.prepend(commentDiv)}cgCenterDiv.find("#cgCenterImageCommentsDivParentParent"+gidForElements).removeClass("cg_hide");cgJsClass.gallery.comment.checkIfTopBottomArrowsRequired(gid,gidForElements)}else{$cgCenterImageCommentsDiv.removeClass("cg_hide");$cgCenterImageCommentsDivTitle.removeClass("cg_hide");cgCenterDiv.find("#cgCenterInfoDiv"+gid).find(".cg-center-image-comments-div-parent-parent").removeClass("cg_hide");append=true}cgCenterDiv.find(".cg-center-image-comments-div-parent > .cg-center-image-comments-div-add-comment").removeClass("cg_hidden")};cgJsClass.gallery.comment.checkIfTopBottomArrowsRequired=function(gid,gidForElements,isFromSetComments){if(!gidForElements){gidForElements=gid}var $cgCenterDiv=cgJsData[gid].vars.mainCGdiv.find("#cgCenterDiv"+gidForElements);setTimeout(function(){var collectedHeight=0;var paddingTop=parseInt($cgCenterDiv.find("#cgCenterImageCommentsDiv"+gidForElements).css("paddingTop"));var paddingBottom=parseInt($cgCenterDiv.find("#cgCenterImageCommentsDiv"+gidForElements).css("paddingBottom"));$cgCenterDiv.find(".cg-center-image-comments-div").each(function(){collectedHeight=collectedHeight+jQuery(this).outerHeight(true)+10});collectedHeight=collectedHeight+paddingTop+paddingBottom;if(collectedHeight>=300){$cgCenterDiv.find(".cg-center-image-comments-div-show-more-comments").removeClass("cg_hide");$cgCenterDiv.find(".cg-center-image-comments-div-parent").addClass("cg-center-image-comments-div-show-more-available");if(isFromSetComments){$cgCenterDiv.find(".cg-center-image-comments-div-parent").addClass("cg-center-image-comments-div-parent-enter-textarea-expanded")}}},300)};cgJsClass.gallery.comment.getDateDependsOnLocaleLang=function(gid,timestamp){if(cgJsData[gid].options.visual.CommentsDateFormat){var commentDate=new Date(timestamp*1e3);var month=parseInt(commentDate.getMonth());month=month+1;var year=commentDate.getFullYear();var hours=commentDate.getHours();var minutes=commentDate.getMinutes();if(minutes<10){minutes="0"+commentDate.getMinutes()}if(hours<10){hours="0"+commentDate.getHours()}var monthUS=month;if(monthUS<10){monthUS="0"+monthUS}var day=commentDate.getDate();if(day<10){day="0"+day}try{var dateTimeByFormat=cgJsData[gid].options.visual["CommentsDateFormat"];dateTimeByFormat=dateTimeByFormat.replace("YYYY",year);dateTimeByFormat=dateTimeByFormat.replace("MM",monthUS);dateTimeByFormat=dateTimeByFormat.replace("DD",day)}catch(e){return cgJsClass.gallery.comment.setUsDateStyle(timestamp)}return dateTimeByFormat+" "+hours+":"+minutes}else{return cgJsClass.gallery.comment.setUsDateStyle(timestamp)}};cgJsClass.gallery.comment.setUsDateStyle=function(timestamp){var commentDate=new Date(timestamp*1e3);var month=parseInt(commentDate.getMonth());month=month+1;var monthUS=month;if(monthUS<10){monthUS="0"+monthUS}var hours=commentDate.getHours();var minutes=commentDate.getMinutes();if(commentDate.getMinutes()<10){minutes="0"+commentDate.getMinutes()}if(commentDate.getHours()<10){hours="0"+commentDate.getHours()}var day=commentDate.getDate();if(day<10){day="0"+day}return commentDate.getFullYear()+"/"+monthUS+"/"+day+" "+hours+":"+minutes};cgJsClass.gallery.comment.setGermanDateStyle=function(timestamp){var commentDate=new Date(timestamp*1e3);var month=parseInt(commentDate.getMonth());month=month+1;var monthUS=month;var hours=commentDate.getHours();var minutes=commentDate.getMinutes();if(commentDate.getMinutes()<10){var minutes="0"+commentDate.getMinutes()}if(commentDate.getHours()<10){var hours="0"+commentDate.getHours()}return commentDate.getDate()+"."+monthUS+"."+commentDate.getFullYear()+" "+hours+":"+minutes};;cgJsClass.gallery.comment.removeLastComment=function(){if(cgJsClass.gallery.vars.$lastAppearedCommentDiv){cgJsClass.gallery.vars.$lastAppearedCommentDiv.remove()}if(cgJsClass.gallery.vars.$lastAppearedThankYouForCommentDiv){cgJsClass.gallery.vars.$lastAppearedThankYouForCommentDiv.remove()}};cgJsClass.gallery.comment.setComment=function(realId,addCountC,gid,isJustSuccess,gidForElements,isJustReturnCommentsDiv,ratingCommentsDataFromJustCommented){if(isJustSuccess){return}if(!gidForElements){gidForElements=gid}if(!cgJsData[gid]){return}if(!cgJsData[gid].vars){return}if(!cgJsData[gid].vars.rawData){return}if(!cgJsData[gid].vars.rawData[realId]){return}if(cgJsData[gid].options.general.AllowComments>=1){var CountC=parseInt(cgJsData[gid].rateAndCommentNumbers[realId].CountC);if(CountC>=1||addCountC>=1){var starLook="cg_gallery_comments_div_icon_on"}else{var starLook="cg_gallery_comments_div_icon_off"}if(addCountC==0){var imageObject=cgJsData[gid].imageObject[realId];var position="";if(cgJsData[gid].options.visual["CommentPositionGallery"]==2){position="cg_center"}if(cgJsData[gid].options.visual["CommentPositionGallery"]==3){position="cg_right"}var commentDiv='<div class="cg_gallery_comments_div"><div class="cg_gallery_comments_div_child '+position+'" ><div class="cg_gallery_comments_div_icon '+starLook+" cg_gallery_comments_div_icon"+realId+'"></div>'+'<div class="cg_gallery_comments_div_count'+realId+' cg_gallery_comments_div_count">'+CountC+"</div></div>";if(isJustReturnCommentsDiv&&!ratingCommentsDataFromJustCommented){return commentDiv}if(imageObject){if(imageObject.find(".cg_gallery_comments_div").length){imageObject.find(".cg_gallery_comments_div").remove()}if(cgJsData[gid].vars.modernHover){imageObject.find(".cg_gallery_info .cg_gallery_info_rating_comments").append(commentDiv)}else{imageObject.find(".cg_gallery_info").append(commentDiv)}}var rowIdOfRealId=cgJsData[gid].vars.rawData[realId]["rowid"];for(var key in cgJsData[gid].fullImageData){if(!cgJsData[gid].fullImageData.hasOwnProperty(key)){break}if(cgJsData[gid].fullImageData[key]==rowIdOfRealId){cgJsData[gid].fullImageData[key][rowIdOfRealId]["CountC"]=CountC}}}if(addCountC>0||addCountC<0){var CountC=parseInt(cgJsData[gid].rateAndCommentNumbers[realId].CountC);CountC=CountC+parseInt(addCountC);cgJsData[gid].rateAndCommentNumbers[realId].CountC=CountC;cgJsClass.gallery.dynamicOptions.setNewCountToMainImageArray(realId,"CountC",CountC,gid);if(CountC==0){var starLook="cg_gallery_comments_div_icon_off"}cgJsData[gid].vars.mainCGdiv.find(".cg_gallery_comments_div_icon"+realId).removeClass("cg_gallery_comments_div_icon_on").removeClass("cg_gallery_comments_div_icon_off").addClass(starLook);cgJsData[gid].vars.mainCGdiv.find(".cg_gallery_comments_div_count"+realId).text(CountC);for(var key in cgJsData[gid].fullImageData){if(!cgJsData[gid].fullImageData.hasOwnProperty(key)){break}var firstKey=Object.keys(cgJsData[gid].fullImageData[key])[0];if(cgJsData[gid].fullImageData[key][firstKey]["id"]==realId){cgJsData[gid].fullImageData[key][firstKey]["CountC"]=CountC;break}}}if(ratingCommentsDataFromJustCommented){cgJsData[gid].rateAndCommentNumbers[realId]=cgJsData[gid].rateAndCommentNumbers[realId];cgJsClass.gallery.rating.updateData(gid,cgJsData[gid].rateAndCommentNumbers,true)}}};cgJsClass.gallery.comment.setComments=function(gid){if(cgJsData[gid].options.general.AllowComments>=1){for(var realId in cgJsData[gid].imagesFullData){if(!cgJsData[gid].imagesFullData.hasOwnProperty(realId)){break}if(cgJsData[gid].jsonCommentsData&&cgJsData[gid].jsonCommentsData[realId]&&Object.keys(cgJsData[gid].jsonCommentsData[realId]).length){var CountCtoReview=0;for(var realIdCommentsData in cgJsData[gid].jsonCommentsData){if(!cgJsData[gid].jsonCommentsData.hasOwnProperty(realIdCommentsData)){break}for(var firstKey in cgJsData[gid].jsonCommentsData[realIdCommentsData]){if(!cgJsData[gid].jsonCommentsData[realIdCommentsData].hasOwnProperty(firstKey)){break}if(realIdCommentsData==realId&&cgJsData[gid].jsonCommentsData[realIdCommentsData][firstKey]["Active"]==2){CountCtoReview++}}}cgJsData[gid].imagesFullData[realId].CountC=Object.keys(cgJsData[gid].jsonCommentsData[realId]).length;cgJsData[gid].imagesFullData[realId].CountCtoReview=CountCtoReview;if(!cgJsData[gid].imagesSortValuesFullData[realId]){cgJsData[gid].imagesSortValuesFullData[realId]={}}cgJsData[gid].imagesSortValuesFullData[realId].CountC=cgJsData[gid].imagesFullData[realId].CountC;cgJsData[gid].imagesSortValuesFullData[realId].CountCtoReview=cgJsData[gid].imagesFullData[realId].CountCtoReview}else{cgJsData[gid].imagesFullData[realId].CountC=0}}}};;cgJsClass.gallery.dynamicOptions={checkIfStepClick:function(gid){if(location.hash.indexOf("#!gallery"+gid+"/step/")!==-1){if(typeof gid!="undefined"){var step=parseInt(location.hash.split("/")[1]);var PicsPerSite=parseInt(cgJsData[gid].options.general.PicsPerSite);var length=Object.keys(cgJsData[gid].fullImageData).length;var stepCheck=Math.ceil(length/PicsPerSite);if(step>stepCheck){location.hash="";location.reload();return}}return location.hash.split("/")[1]}return 1},checkUrl:function(){jQuery.each(cgJsClass.gallery.forms.upload,function(index,value){if(value["Field_Type"]=="url-f"){cgJsClass.gallery.options.formHasUrlField=1}})},cg_hide_hide_width:0,check_cg_hide_hide_width:function(index){if(cgJsData[index].vars.options.general.FbLikeGallery==1){cgJsData[index].vars.cg_hide_hide_width=180;cgJsData[index].vars.cgGalleryInfoWidth=180}else{cgJsData[index].vars.cg_hide_hide_width=130;cgJsData[index].vars.cgGalleryInfoWidth=130}},getInfoAndCategoriesFullImageData:function(gid){var countForArray=cgJsData[gid].vars.countAllImages-1;var uploadFolderUrl=cgJsData[gid].vars.uploadFolderUrl;for(var key in cgJsData[gid].fullImageData){if(!cgJsData[gid].fullImageData.hasOwnProperty(key)){break}var firstKey=Object.keys(cgJsData[gid].fullImageData[key])[0];var realId=cgJsData[gid].fullImageData[key][firstKey]["id"];cgJsClass.gallery.dynamicOptions.getJsonInfoData(uploadFolderUrl,gid,realId,key,firstKey)}},getJsonInfoData:function(uploadFolderUrl,gid,realId,key,firstKey){if(typeof cgJsData[gid].vars.info[realId]=="undefined"){jQuery.getJSON(uploadFolderUrl+"/contest-gallery/gallery-id-"+cgJsData[gid].vars.gidReal+"/json/image-info/image-info-"+realId+".json",{_:(new Date).getTime()}).done(function(data){}).done(function(data){if(data==null){data=[]}cgJsClass.gallery.info.collectInfo(gid,realId,data);cgJsClass.gallery.info.setInfo(realId,gid,false,firstKey,data,true,true)})}},getCurrentRatingAndCommentsData:function(gid){if(cgJsData[gid].options.general.AllowRating==2||cgJsData[gid].options.general.AllowRatingDynamic||cgJsData[gid].options.general.AllowComments>=1){cgJsClass.gallery.dynamicOptions.getRatingAndCommentsFullImageData(gid,true)}cgJsClass.gallery.sorting.showRandomButton(gid)},getRatingAndCommentsFullImageData:function(gid,isGetCurrentData){var uploadFolderUrl=cgJsData[gid].vars.uploadFolderUrl;if(!isGetCurrentData){var countForArray=cgJsData[gid].vars.countAllImages-1;var length=Object.keys(cgJsData[gid].fullImageData).length;var i=1;for(var key in cgJsData[gid].fullImageData){if(!cgJsData[gid].fullImageData.hasOwnProperty(key)){break}var firstKey=Object.keys(cgJsData[gid].fullImageData[key])[0];var realId=cgJsData[gid].fullImageData[key][firstKey]["id"];cgJsClass.gallery.dynamicOptions.getJsonImageData(uploadFolderUrl,gid,realId,key,firstKey);if(i==length){cgJsData[gid].vars.lastRealIdInFullImageDataObject=realId}i++}}else{for(var key in cgJsData[gid].image){if(!cgJsData[gid].image.hasOwnProperty(key)){break}var firstKey=Object.keys(cgJsData[gid].image[key])[0];var realId=cgJsData[gid].image[key][firstKey]["id"];cgJsClass.gallery.dynamicOptions.getJsonImageData(uploadFolderUrl,gid,realId,key,firstKey)}}},getJsonImageData:function(uploadFolderUrl,gid,realId,arrIndex,objectKey){jQuery.getJSON(uploadFolderUrl+"/contest-gallery/gallery-id-"+cgJsData[gid].vars.gidReal+"/json/image-data/image-data-"+realId+".json",{_:(new Date).getTime()}).done(function(data){}).done(function(data){data.id=realId;data.imageObject=cgJsData[gid].imageObject[realId];if(data["rThumb"]=="90"||data["rThumb"]=="270"){var Width=data["Width"];var Height=data["Height"];data["Width"]=Height;data["Height"]=Width}var AllowComments=cgJsData[gid].options.general.AllowComments;data=cgJsClass.gallery.dynamicOptions.configureRatingAndCommentsNumbers(gid,realId,data);if(data.hasOwnProperty("Exif")){cgJsData[gid].vars.rawData[realId]["Exif"]=data.Exif}else{cgJsData[gid].vars.rawData[realId]["Exif"]=0}if(AllowComments>=1){var countCtoReview=data.CountCtoReview?parseInt(data.CountCtoReview):0;data.CountC=isNaN(data.CountC)||typeof data.CountC=="undefined"?0:parseInt(data.CountC);data.CountC=data.CountC-countCtoReview;cgJsData[gid].rateAndCommentNumbers[realId]=data}cgJsClass.gallery.function.general.tools.modifyFullImageData(gid,realId,data);if(cgJsData[gid].vars.lastRealIdInFullImageDataObject==realId){cgJsClass.gallery.sorting.showRandomButton(gid)}})},getRatingAndComments:function(realId,arrIndex,objectKey,gid,calledFromUpload){if(cgJsData[gid].options.general.AllowRating>=1||cgJsData[gid].options.general.AllowComments>=1||cgJsData[gid].options.general.FbLike>=1){var uploadFolderUrl=cgJsData[gid].vars.uploadFolderUrl;cgJsData[gid].vars.getJson.push(jQuery.getJSON(uploadFolderUrl+"/contest-gallery/gallery-id-"+cgJsData[gid].vars.gidReal+"/json/image-data/image-data-"+realId+".json",{_:(new Date).getTime()}).done(function(data){data.id=realId;data.imageObject=cgJsData[gid].imageObject[realId];var AllowRating=cgJsData[gid].options.general.AllowRating;var AllowComments=cgJsData[gid].options.general.AllowComments;var FbLike=cgJsData[gid].options.general.FbLike;if(data.hasOwnProperty("Exif")){cgJsData[gid].vars.rawData[realId]["Exif"]=data.Exif}else{cgJsData[gid].vars.rawData[realId]["Exif"]=0}data=cgJsClass.gallery.dynamicOptions.configureRatingAndCommentsNumbers(gid,realId,data);if(AllowComments>=1){var countCtoReview=data.CountCtoReview?parseInt(data.CountCtoReview):0;data.CountC=isNaN(data.CountC)||typeof data.CountC=="undefined"?0:parseInt(data.CountC);data.CountC=data.CountC-countCtoReview;cgJsData[gid].rateAndCommentNumbers[realId]=data}cgJsClass.gallery.function.general.tools.modifyFullImageData(gid,realId,data);if(cgJsData[gid].options.general.AllowRatingDynamic){cgJsClass.gallery.rating.setRatingFiveStar(realId,0,0,true,gid)}if(AllowRating==2){cgJsClass.gallery.rating.setRatingOneStar(realId,0,true,gid)}if(AllowComments>=1){cgJsClass.gallery.comment.setComment(realId,0,gid)}if(FbLike==1){cgJsClass.gallery.fbLike.setFbLike(realId,arrIndex,objectKey,gid,calledFromUpload)}if(cgJsData[gid].vars.galleryLoaded==false){var counterCheck=arrIndex+1;if(cgJsData[gid].vars.countAllImages==counterCheck){cgJsData[gid].vars.galleryLoaded=true}}}))}},configureRatingAndCommentsNumbers:function(gid,realId,data){if(realId==301){}cgJsClass.gallery.vars.ratingAndCommentsProperties.forEach(function(property){data[property]=isNaN(data[property])?0:data[property]});var AllowRating=cgJsData[gid].options.general.AllowRating;var AllowComments=cgJsData[gid].options.general.AllowComments;var Manipulate=cgJsData[gid].options.pro.Manipulate;var ShowOnlyUsersVotes=cgJsData[gid].options.general.ShowOnlyUsersVotes;var CheckLogin=cgJsData[gid].options.general.CheckLogin;if(!cgJsData[gid].rateAndCommentNumbers[realId]){cgJsData[gid].rateAndCommentNumbers[realId]={}}if(cgJsData[gid].options.general.AllowRatingDynamic){if(Manipulate==0){for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("data.addCountR"+rCount+"= 0;")}}if(ShowOnlyUsersVotes==1&&!cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.isOnlyGalleryWinner){if(typeof cgJsData[gid].cgJsCountRuser[realId]=="undefined"){cgJsData[gid].cgJsCountRuser[realId]=0;cgJsData[gid].cgJsRatingUser[realId]=0;data["CountR"]=cgJsData[gid].cgJsCountRuser[realId];data["Rating"]=cgJsData[gid].cgJsRatingUser[realId]}else{data["CountR"]=parseInt(cgJsData[gid].cgJsCountRuser[realId]);data["Rating"]=parseInt(cgJsData[gid].cgJsRatingUser[realId])}}else if(Manipulate==1&&ShowOnlyUsersVotes!=1){for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("data.addCountR"+rCount+" = (isNaN(data.addCountR"+rCount+")) ? 0 : parseInt(data.addCountR"+rCount+");")}}if(ShowOnlyUsersVotes==1&&!cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.isOnlyGalleryWinner){for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("data.addCountR"+rCount+" = 0;")}for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("cgJsData[gid].cgJsCountR"+rCount+"user[realId] = (cgJsData[gid].cgJsCountR"+rCount+"user[realId]) ? cgJsData[gid].cgJsCountR"+rCount+"user[realId] : 0;")}for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("data.CountR"+rCount+" = cgJsData[gid].cgJsCountR"+rCount+"user[realId];")}}data.CountRtotal=cgJsClass.gallery.rating.getCountRtotal(gid,data);data.RatingTotal=cgJsClass.gallery.rating.getRatingTotal(gid,data,realId);data.RatingAverage=cgJsClass.gallery.rating.getAverage(gid,data);data.RatingAverageForSecondarySorting=cgJsClass.gallery.rating.getAverageForSecondarySorting(gid,data);data.RatingTotalForSecondarySorting=cgJsClass.gallery.rating.getRatingTotalForSecondarySorting(gid,data);var dataForRating={};dataForRating.CountRtotal=data.CountRtotal;dataForRating.RatingTotal=data.RatingTotal;dataForRating.RatingAverage=data.RatingAverage;dataForRating.RatingAverageForSecondarySorting=data.RatingAverageForSecondarySorting;dataForRating.RatingTotalForSecondarySorting=data.RatingTotalForSecondarySorting;dataForRating.CountR=data.CountR;dataForRating.Rating=data.Rating;for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("dataForRating.CountR"+rCount+" = (isNaN(data.CountR"+rCount+")) ? 0 : data.CountR"+rCount+";")}for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("dataForRating.addCountR"+rCount+" = data.addCountR"+rCount+";")}cgJsData[gid].rateAndCommentNumbers[realId]=dataForRating}if(AllowRating==2){if(ShowOnlyUsersVotes==1&&!cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.isOnlyGalleryWinner){if(typeof cgJsData[gid].cgJsCountSuser[realId]=="undefined"){cgJsData[gid].cgJsCountSuser[realId]=0;data["CountS"]=cgJsData[gid].cgJsCountSuser[realId]}else{data["CountS"]=parseInt(cgJsData[gid].cgJsCountSuser[realId])}}else if(Manipulate==1&&ShowOnlyUsersVotes!=1){var addCountS=parseInt(data.addCountS);data["CountS"]=parseInt(data["CountS"])+addCountS}var dataForRating={};dataForRating.CountS=data.CountS;dataForRating.addCountS=data.addCountS;cgJsData[gid].rateAndCommentNumbers[realId]=dataForRating}if(realId==107){}if(AllowComments>=1){var countCtoReview=data.CountCtoReview?parseInt(data.CountCtoReview):0;cgJsData[gid].rateAndCommentNumbers[realId].CountC=parseInt(data.CountC)-countCtoReview}return data},setRatingAndComments:function(realId,arrIndex,objectKey,gid,calledFromUpload){var AllowRating=cgJsData[gid].options.general.AllowRating;var AllowComments=cgJsData[gid].options.general.AllowComments;var FbLike=cgJsData[gid].options.general.FbLike;if(cgJsData[gid].options.general.AllowRatingDynamic){cgJsClass.gallery.rating.setRatingFiveStar(realId,0,0,true,gid)}if(AllowRating==2){cgJsClass.gallery.rating.setRatingOneStar(realId,0,true,gid)}if(AllowComments>=1&&cgJsData[gid].vars.currentLook!="blog"){cgJsClass.gallery.comment.setComment(realId,0,gid)}if(FbLike==1){cgJsClass.gallery.fbLike.setFbLike(realId,arrIndex,objectKey,gid,calledFromUpload)}if(cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.RatingVisibleForGalleryNoVoting||cgJsData[gid].vars.isOnlyGalleryEcommerce&&!cgJsData[gid].options.general.RatingVisibleForGalleryEcommerce){if(AllowComments!=1&&cgJsData[gid].options.general.FbLikeGallery!=1){}}},setNewCountToMainImageArray:function(realId,countProperty,newCount,gid){for(var property in cgJsData[gid].image){if(!cgJsData[gid].image.hasOwnProperty(property)){break}var firstKey=Object.keys(cgJsData[gid].image[property])[0];if(cgJsData[gid].image[property][firstKey]["id"]==realId){cgJsData[gid].image[property][firstKey][countProperty]=newCount;break}}},getCurrentStep:function(gid,realId){if(!realId>=1){return 1}var fullImageDataToUse=cgJsClass.gallery.sorting.returnFullImageDataSorted(gid);var i;for(var index in fullImageDataToUse){if(!fullImageDataToUse.hasOwnProperty(index)){break}var firstKey=Object.keys(fullImageDataToUse[index])[0];if(fullImageDataToUse[index][firstKey]["id"]==realId){i=index;break}}var PicsPerSite=parseInt(cgJsData[gid].options.general.PicsPerSite);var step=Math.floor(i/PicsPerSite)+1;return step},checkStepsCutImageData:function($,step,initStepChange,lazy,gid,isOpenPage,calledFromUpload,viewChange,isCopyUploadToAnotherGallery,isFromSearch,fullImageDataFilteredToTake){debugger;if(gid==="main"&&cgJsData.isCGalleriesAjaxLoadMain){step=cgJsData.lastGalleriesStep;cgJsData.isCGalleriesAjaxLoadMain=false}if(gid==="main"&&isOpenPage){var cgLastGalleriesStep=sessionStorage.getItem("cgLastGalleriesStep");if(cgLastGalleriesStep){step=cgLastGalleriesStep}}if(gid==="main"){cgJsData.lastGalleriesStep=step;sessionStorage.setItem("cgLastGalleriesStep",cgJsData.lastGalleriesStep)}if(cgJsData[gid].options.general.SliderLook==23){cgJsClass.gallery.views.singleViewFunctions.setFurtherSteps(gid,1);cgJsClass.gallery.views.initOrderGallery(gid,null,null,null,true,null)}else{var $mainCGdiv=$("#mainCGdiv"+gid);$mainCGdiv.find(".cg_further_images_container").addClass("cg_hide");if(typeof cgJsData[gid].vars.stepsNavigationTop=="undefined"){cgJsData[gid].vars.stepsNavigationTop=$mainCGdiv.find("#cgFurtherImagesContainerDiv"+gid)}if(fullImageDataFilteredToTake){var lengthData=Object.keys(fullImageDataFilteredToTake).length}else{var lengthData=Object.keys(cgJsData[gid].fullImageDataFiltered).length}cgJsData[gid].vars.lengthData=lengthData;if(lengthData==0&&isFromSearch){cgJsData[gid].vars.cgNoImagesFound.removeClass("cg_hide");cgJsData[gid].vars.mainCGallery.find(".cgCenterDiv").addClass("cg_hide");cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container").addClass("cg_hide")}else{cgJsData[gid].vars.mainCGdiv.find(".mainCGdivFullWindowConfigurationAreaSub .cg_further_images_and_top_controls_container .cgNoEntriesFound").remove()}if(lengthData!=0&&isFromSearch){cgJsData[gid].vars.cgNoImagesFound.addClass("cg_hide")}var stepsNavigationTop=cgJsData[gid].vars.stepsNavigationTop;stepsNavigationTop.find("*").not(".cg_further_images_container_position_helper").remove();var $hiddenNav=jQuery('<div class="cg_further_images_hidden_nav cg_hide"></div>');stepsNavigationTop.prepend($hiddenNav);var $divSelectOptions=$('<div class="cg_further_images_select_div cg_hide"><select class="cg_hover_effect cg_further_images_select" data-cg-tooltip="'+cgJsClass.gallery.language[gid].SelectPage+'" data-cg-gid="'+gid+'"></select></div>');var $divSelectNavigation=$('<div class="cg_hover_effect cg_further_images_select_nav_div cg_hide">'+'<div class="cg_further_images_select_nav_prev" data-cg-gid="'+gid+'" data-cg-tooltip="'+cgJsClass.gallery.language[gid].PreviousPage+'"></div>'+'<div class="cg_further_images_select_nav_current"></div>'+'<div class="cg_further_images_select_nav_of_language">'+cgJsClass.gallery.language[gid].of+"</div>"+'<div class="cg_further_images_select_nav_total" >'+lengthData+"</div>"+'<div class="cg_further_images_select_nav_next" data-cg-gid="'+gid+'" data-cg-tooltip="'+cgJsClass.gallery.language[gid].NextPage+'" ></div>'+"</div>");var PicsPerSite=parseInt(cgJsData[gid].options.general.PicsPerSite);var checkStepPicsStart=PicsPerSite*step-PicsPerSite;var cuttedData=[];var i=1;var start=1;var startStep=step*PicsPerSite;var dataCutted=false;var lastShortStepInserted=false;if(fullImageDataFilteredToTake){var fullImageDataToUse=fullImageDataFilteredToTake}else{var fullImageDataToUse=cgJsClass.gallery.sorting.returnFullImageDataSorted(gid)}cgJsData[gid].vars.fullImageDataToUse=fullImageDataToUse;for(var property in fullImageDataToUse){if(!fullImageDataToUse.hasOwnProperty(property)){break}if(i%PicsPerSite===0&&lastShortStepInserted!=true){var stepToInsert=Math.ceil(i/PicsPerSite);if(start==1){var startToInsert=1}else{var startToInsert=start+1}if(i==2&&PicsPerSite==1){startToInsert=2}var $option=$("<option class='cg_further_images_select_option '  data-cg-gid='"+gid+"' value='"+stepToInsert+"'>"+stepToInsert+"</option>");$divSelectOptions.find("select").append($option);stepsNavigationTop.find(".cg_further_images_hidden_nav").append(furtherImagesStep);var furtherImagesStep=$("<div class='cg_further_images cg_hide' data-cg-gid='"+gid+"' data-cg-step='"+stepToInsert+"'></div>").text(startToInsert+"-"+i);stepsNavigationTop.find(".cg_further_images_hidden_nav").append(furtherImagesStep);start=i;if(i==lengthData){lastShortStepInserted=true}}if(i<=checkStepPicsStart){i++;continue}if(dataCutted==false){cuttedData[property]=fullImageDataToUse[property]}if(i==startStep&&dataCutted==false){stepsNavigationTop.find(".cg_further_images").each(function(index){var check=index+1;if(check==step){$(this).addClass("cg_further_images_selected");$divSelectOptions.find('option[value="'+$(this).attr("data-cg-step")+'"]').attr("selected","1")}});dataCutted=true}if(i+1>=lengthData&&lastShortStepInserted==false&&i>start&&lastShortStepInserted==false||i>=lengthData&&i>start&&lastShortStepInserted==false){lastShortStepInserted=true;if(i>start){var lastStart=start+1;var stepToInsert=start/PicsPerSite+1;var $option=$("<option class='cg_further_images_select_option '  data-cg-gid='"+gid+"' value='"+stepToInsert+"'>"+stepToInsert+"</option>");stepsNavigationTop.prepend($divSelectOptions);stepsNavigationTop.append($divSelectNavigation);$divSelectOptions.find("select").append($option);var furtherImagesStep=$("<div class='cg_further_images cg_hide' data-cg-gid='"+gid+"' data-cg-step='"+stepToInsert+"'></div>").text(lastStart+"-"+i);stepsNavigationTop.find(".cg_further_images_hidden_nav").append(furtherImagesStep);var lengthSteps=stepsNavigationTop.find(".cg_further_images").length;var count=1;stepsNavigationTop.find(".cg_further_images").each(function(index){var check=index+1;if(check==1){var startHowMany=check;var tillHowMany=index+PicsPerSite}else if(check==lengthSteps){var startHowMany=index*PicsPerSite+1;var tillHowMany=lengthData}else{var startHowMany=index*PicsPerSite+1;var tillHowMany=startHowMany+PicsPerSite-1}if(check==step){$(this).addClass("cg_further_images_selected");$divSelectOptions.find('option[value="'+$(this).attr("data-cg-step")+'"]').attr("selected","1");$divSelectNavigation.find(".cg_further_images_select_nav_current").text(startHowMany+"-"+tillHowMany);if(count==1){$divSelectNavigation.find(".cg_further_images_select_nav_prev").addClass("cg_further_images_select_nav_none")}else if(count==lengthSteps){$divSelectNavigation.find(".cg_further_images_select_nav_next").addClass("cg_further_images_select_nav_none")}}count++})}}i++}if(cgJsClass.gallery.vars.fullwindow&&cgJsData[gid].vars.currentLook=="blog"){cgJsData[gid].vars.$mainCGdivFullWindowConfigurationAreaSub.find(".cg_further_images_and_top_controls_container").removeClass("cg_hide_override")}if(lengthData>PicsPerSite){$divSelectOptions.removeClass("cg_hide");$divSelectNavigation.removeClass("cg_hide");if(!cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_and_top_controls_container").removeClass("cg_hide")}}else{if(lengthData!=0&&cgJsClass.gallery.vars.fullwindow&&cgJsData[gid].vars.currentLook=="blog"){$divSelectOptions.addClass("cg_hide");$divSelectNavigation.find(".cg_further_images_select_nav_current").text("1");$divSelectNavigation.find(".cg_further_images_select_nav_prev").addClass("cg_further_images_select_nav_none");$divSelectNavigation.find(".cg_further_images_select_nav_next").addClass("cg_further_images_select_nav_none");$divSelectNavigation.removeClass("cg_hide");cgJsData[gid].vars.$mainCGdivFullWindowConfigurationAreaSub.find(".cg_further_images_and_top_controls_container").addClass("cg_hide_override")}}if(lengthData==0&&cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.$mainCGdivFullWindowConfigurationAreaSub.find(".cg_further_images_and_top_controls_container").addClass("cg_no_entries_found");cgJsData[gid].vars.$mainCGdivFullWindowConfigurationAreaSub.find(".cg_further_images_and_top_controls_container .cgNoEntriesFound").remove();cgJsData[gid].vars.$mainCGdivFullWindowConfigurationAreaSub.find(".cg_further_images_and_top_controls_container").prepend('<div class="cgNoEntriesFound">'+cgJsClass.gallery.language[gid].NoEntriesFound+"</div>");history.replaceState({},"",cgJsData[gid].vars.startLocation)}if(lengthData!=0&&cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.$mainCGdivFullWindowConfigurationAreaSub.find(".cg_further_images_and_top_controls_container").removeClass("cg_no_entries_found")}if(cgJsClass.gallery.vars.fullwindow&&cgJsData[gid].vars.currentLook=="blog"){cgJsData[gid].vars.$mainCGdivFullWindowConfigurationAreaSub.find(".cg_further_images_container").replaceWith(stepsNavigationTop.clone().removeClass("cg_hide"));if(lengthData==0){cgJsData[gid].vars.cgNoImagesFound.removeClass("cg_hide");cgJsData[gid].vars.mainCGallery.find(".cgCenterDiv").addClass("cg_hide");cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container").addClass("cg_hide")}else{cgJsData[gid].vars.$mainCGdivFullWindowConfigurationAreaSub.find(".cg_further_images_and_top_controls_container .cgNoEntriesFound").remove()}}var cuttedDataSorted=[];var i=0;for(var index in cuttedData){if(!cuttedData.hasOwnProperty(index)){break}if(initStepChange===true){var firstKey=Object.keys(cuttedData[index])[0];delete cuttedData[index][firstKey]["imageObject"]}cuttedDataSorted[i]=cuttedData[index];i++}var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true;if(fullImageDataFilteredToTake){cgJsData[gid].image=fullImageDataFilteredToTake}else{cgJsClass.gallery.views.switchView.sortViewSlider(gid)}}else{cgJsData[gid].image=cuttedDataSorted;cgJsData[gid].steps[step]=cuttedDataSorted}if(lazy===false){$mainCGdiv.find("#mainCGallery"+gid).find(".cg_show").remove()}if(sliderView){$mainCGdiv.find(".cg_further_images_container").addClass("cg_hide")}else{var $cg_further_images_container=$mainCGdiv.find(".cg_further_images_container").first();$cg_further_images_container.removeClass("cg_hide");cgJsData[gid].vars.$cg_further_images_container_top=$cg_further_images_container;cgJsClass.gallery.views.clickFurtherImagesStep.cloneStep(gid,$cg_further_images_container,false)}if(initStepChange===true){cgJsClass.gallery.views.initOrderGallery(gid,isOpenPage,calledFromUpload,true,null,viewChange,false,sliderView,isCopyUploadToAnotherGallery,false,true)}if(lengthData==0&&cgJsClass.gallery.vars.fullwindow&&(cgJsData[gid].vars.currentLook=="blog"||cgJsData[gid].vars.currentLook=="slider")){cgJsData[gid].vars.mainCGdivFullWindowConfigurationButton.text(0)}}},setCookie:function(gid,cookieName,cookieId){var d=new Date;var expTime=d.getTime()+20*365*24*60*60*1e3;d.setTime(expTime);document.cookie=cookieName+"="+cookieId+";path=/;expires="+d.toGMTString()},getCookie:function(cookieName){var v=document.cookie.match("(^|;) ?"+cookieName+"=([^;]*)(;|$)");var toReturn=v?v[2]:null;if(toReturn!=null){cgJsClass.gallery.vars.cookiesNotAllowed=false}if(typeof toReturn=="string"){if(toReturn=="undefined"){toReturn=undefined}else if(toReturn.toLowerCase()=="null"){toReturn=null}}return toReturn}};;cgJsClass.gallery.sorting.init=function(){cgJsClass.gallery.sorting.initSortRandomButton();cgJsClass.gallery.sorting.change()};cgJsClass.gallery.sorting.initSort=function(gid,filtered,isFromCategoriesOrSearch,isFromSortingSelect){cgJsClass.gallery.sorting.reset(gid);if(cgJsData[gid].vars.sorting=="custom"){var newData=cgJsClass.gallery.sorting.sortByPositionIdFiltered(gid);cgJsData[gid].image=cgJsClass.gallery.sorting.ascPosition(newData);cgJsData[gid].vars.sortedCustomFullData=cgJsData[gid].image.slice(0);cgJsData[gid].fullImageDataFiltered=cgJsData[gid].image}if(cgJsData[gid].vars.sorting=="date-desc"){var newData=cgJsClass.gallery.sorting.sortByIdFiltered(gid);cgJsData[gid].image=cgJsClass.gallery.sorting.desc(newData);cgJsData[gid].vars.sortedDateDescFullData=cgJsData[gid].image.slice(0);cgJsData[gid].fullImageDataFiltered=cgJsData[gid].image}if(cgJsData[gid].vars.sorting=="date-asc"){var newData=cgJsClass.gallery.sorting.sortByIdFiltered(gid);cgJsData[gid].image=cgJsClass.gallery.sorting.asc(newData);cgJsData[gid].vars.sortedDateAscFullData=cgJsData[gid].image.slice(0);cgJsData[gid].fullImageDataFiltered=cgJsData[gid].image}if(cgJsData[gid].vars.sorting=="rating-desc"){if(cgJsData[gid].options.general.AllowRating==2){var newData=cgJsClass.gallery.sorting.countS(gid)}if(cgJsData[gid].options.general.AllowRatingDynamic){var newData=cgJsClass.gallery.sorting.countR(gid)}cgJsData[gid].image=cgJsClass.gallery.sorting.desc(newData);cgJsData[gid].vars.sortedRatingDescFullData=cgJsData[gid].image.slice(0);cgJsData[gid].fullImageDataFiltered=cgJsData[gid].image}if(cgJsData[gid].vars.sorting=="rating-asc"){if(cgJsData[gid].options.general.AllowRating==2){var newData=cgJsClass.gallery.sorting.countS(gid)}if(cgJsData[gid].options.general.AllowRatingDynamic){var newData=cgJsClass.gallery.sorting.countR(gid)}cgJsData[gid].image=cgJsClass.gallery.sorting.asc(newData);cgJsData[gid].vars.sortedRatingAscFullData=cgJsData[gid].image.slice(0);cgJsData[gid].fullImageDataFiltered=cgJsData[gid].image}if(cgJsData[gid].vars.sorting=="rating-desc-average"){if(cgJsData[gid].options.general.AllowRatingDynamic){var newData=cgJsClass.gallery.sorting.countRaverage(gid)}cgJsData[gid].image=cgJsClass.gallery.sorting.desc(newData);cgJsData[gid].vars.sortedRatingDescAverageFullData=cgJsData[gid].image.slice(0);cgJsData[gid].fullImageDataFiltered=cgJsData[gid].image}if(cgJsData[gid].vars.sorting=="rating-asc-average"){if(cgJsData[gid].options.general.AllowRatingDynamic){var newData=cgJsClass.gallery.sorting.countRaverage(gid)}cgJsData[gid].image=cgJsClass.gallery.sorting.asc(newData);cgJsData[gid].vars.sortedRatingAscAverageFullData=cgJsData[gid].image.slice(0);cgJsData[gid].fullImageDataFiltered=cgJsData[gid].image}if(cgJsData[gid].vars.sorting=="rating-desc-sum"){if(cgJsData[gid].options.general.AllowRatingDynamic){var newData=cgJsClass.gallery.sorting.countSum(gid)}cgJsData[gid].image=cgJsClass.gallery.sorting.desc(newData);cgJsData[gid].vars.sortedRatingDescSumFullData=cgJsData[gid].image.slice(0);cgJsData[gid].fullImageDataFiltered=cgJsData[gid].image}if(cgJsData[gid].vars.sorting=="rating-asc-sum"){if(cgJsData[gid].options.general.AllowRatingDynamic){var newData=cgJsClass.gallery.sorting.countSum(gid)}cgJsData[gid].image=cgJsClass.gallery.sorting.asc(newData);cgJsData[gid].vars.sortedRatingAscSumFullData=cgJsData[gid].image.slice(0);cgJsData[gid].fullImageDataFiltered=cgJsData[gid].image}if(cgJsData[gid].vars.sorting=="comments-desc"){var newData=cgJsClass.gallery.sorting.countC(gid);cgJsData[gid].image=cgJsClass.gallery.sorting.desc(newData);cgJsData[gid].vars.sortedCommentsDescFullData=cgJsData[gid].image.slice(0);cgJsData[gid].fullImageDataFiltered=cgJsData[gid].image}if(cgJsData[gid].vars.sorting=="comments-asc"){var newData=cgJsClass.gallery.sorting.countC(gid);cgJsData[gid].image=cgJsClass.gallery.sorting.asc(newData);cgJsData[gid].vars.sortedCommentsAscFullData=cgJsData[gid].image.slice(0);cgJsData[gid].fullImageDataFiltered=cgJsData[gid].image}if(cgJsData[gid].vars.sorting=="random"){cgJsData[gid].image=cgJsClass.gallery.sorting.random(gid);cgJsData[gid].fullImageDataFiltered=cgJsData[gid].image}return cgJsData[gid].fullImageDataFiltered};cgJsClass.gallery.sorting.returnFullImageDataSorted=function(gid){var fullImageDataToUse;if(cgJsData[gid].vars.sorting=="random"){fullImageDataToUse=cgJsData[gid].vars.sortedRandomFullData}if(cgJsData[gid].vars.sorting=="custom"){fullImageDataToUse=cgJsData[gid].vars.sortedCustomFullData}else if(cgJsData[gid].vars.sorting=="date-desc"){fullImageDataToUse=cgJsData[gid].vars.sortedDateDescFullData}else if(cgJsData[gid].vars.sorting=="date-asc"){fullImageDataToUse=cgJsData[gid].vars.sortedDateAscFullData}else if(cgJsData[gid].vars.sorting=="rating-desc"){fullImageDataToUse=cgJsData[gid].vars.sortedRatingDescFullData}else if(cgJsData[gid].vars.sorting=="rating-asc"){fullImageDataToUse=cgJsData[gid].vars.sortedRatingAscFullData}else if(cgJsData[gid].vars.sorting=="rating-desc-average"){fullImageDataToUse=cgJsData[gid].vars.sortedRatingDescAverageFullData}else if(cgJsData[gid].vars.sorting=="rating-asc-average"){fullImageDataToUse=cgJsData[gid].vars.sortedRatingAscAverageFullData}else if(cgJsData[gid].vars.sorting=="rating-desc-sum"){fullImageDataToUse=cgJsData[gid].vars.sortedRatingDescSumFullData}else if(cgJsData[gid].vars.sorting=="rating-asc-sum"){fullImageDataToUse=cgJsData[gid].vars.sortedRatingAscSumFullData}else if(cgJsData[gid].vars.sorting=="comments-desc"){fullImageDataToUse=cgJsData[gid].vars.sortedCommentsDescFullData}else if(cgJsData[gid].vars.sorting=="comments-asc"){fullImageDataToUse=cgJsData[gid].vars.sortedCommentsAscFullData}else{fullImageDataToUse=cgJsData[gid].fullImageDataFiltered}return fullImageDataToUse};;cgJsClass.gallery.sorting.functions={};cgJsClass.gallery.sorting.functions.getDataForEventuallySortReset=function(gid){if(cgJsData[gid].vars.searchInputCollectedIds&&Object.keys(cgJsData[gid].vars.searchInputCollectedIds).length!=Object.keys(cgJsData[gid].vars.rawData).length){var data={};for(var realId in cgJsData[gid].vars.rawData){if(!cgJsData[gid].vars.rawData.hasOwnProperty(realId)){break}if(cgJsData[gid].vars.searchInputCollectedIds.hasOwnProperty(realId)){data[realId]=cgJsData[gid].vars.rawData[realId]}}}else{var data=cgJsData[gid].vars.rawData}return data};;cgJsClass.gallery.sorting.change=function(){if(cgJsClass.gallery.vars.eventSortingChange){return}else{cgJsClass.gallery.vars.eventSortingChange=true}jQuery(document).on("change",".cg_select_order",function(){var gid=jQuery(this).closest(".mainCGdiv").attr("data-cg-gid");var $element=jQuery(this);if(cgJsClass.gallery.function.general.tools.setWaitingForValues(gid,$element,"change")){return}cgJsClass.gallery.vars.hasToAppend=true;var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.reset(gid)}if(cgJsData[gid].vars.openedRealId>0&&cgJsData[gid].vars.currentLook!="blog"){cgJsClass.gallery.views.close(gid)}cgJsData[gid].vars.openedRealId=0;if(jQuery(this).find(".cg_custom").prop("selected")==true){cgJsData[gid].vars.sorting="custom";cgJsData[gid].options.pro.PreselectSort=cgJsClass.gallery.function.general.tools.getValueForPreselectSort(cgJsData[gid].vars.sorting);cgJsClass.gallery.sorting.initSort(gid,false,false,true)}if(jQuery(this).find(".cg_date_descend").prop("selected")==true){cgJsData[gid].vars.sorting="date-desc";cgJsData[gid].options.pro.PreselectSort=cgJsClass.gallery.function.general.tools.getValueForPreselectSort(cgJsData[gid].vars.sorting);cgJsClass.gallery.sorting.initSort(gid,false,false,true)}if(jQuery(this).find(".cg_date_ascend").prop("selected")==true){cgJsData[gid].vars.sorting="date-asc";cgJsData[gid].options.pro.PreselectSort=cgJsClass.gallery.function.general.tools.getValueForPreselectSort(cgJsData[gid].vars.sorting);cgJsClass.gallery.sorting.initSort(gid,false,false,true)}if(jQuery(this).find(".cg_rating_descend").prop("selected")==true){cgJsData[gid].vars.sorting="rating-desc";cgJsData[gid].options.pro.PreselectSort=cgJsClass.gallery.function.general.tools.getValueForPreselectSort(cgJsData[gid].vars.sorting);cgJsClass.gallery.sorting.initSort(gid,false,false,true)}if(jQuery(this).find(".cg_rating_ascend").prop("selected")==true){cgJsData[gid].vars.sorting="rating-asc";cgJsData[gid].options.pro.PreselectSort=cgJsClass.gallery.function.general.tools.getValueForPreselectSort(cgJsData[gid].vars.sorting);cgJsClass.gallery.sorting.initSort(gid,false,false,true)}if(jQuery(this).find(".cg_rating_descend_sum").prop("selected")==true){cgJsData[gid].vars.sorting="rating-desc-sum";cgJsData[gid].options.pro.PreselectSort=cgJsClass.gallery.function.general.tools.getValueForPreselectSort(cgJsData[gid].vars.sorting);cgJsClass.gallery.sorting.initSort(gid,false,false,true)}if(jQuery(this).find(".cg_rating_ascend_sum").prop("selected")==true){cgJsData[gid].vars.sorting="rating-asc-sum";cgJsData[gid].options.pro.PreselectSort=cgJsClass.gallery.function.general.tools.getValueForPreselectSort(cgJsData[gid].vars.sorting);cgJsClass.gallery.sorting.initSort(gid,false,false,true)}if(jQuery(this).find(".cg_comments_descend").prop("selected")==true){cgJsData[gid].vars.sorting="comments-desc";cgJsData[gid].options.pro.PreselectSort=cgJsClass.gallery.function.general.tools.getValueForPreselectSort(cgJsData[gid].vars.sorting);cgJsClass.gallery.sorting.initSort(gid,false,false,true)}if(jQuery(this).find(".cg_comments_ascend").prop("selected")==true){cgJsData[gid].vars.sorting="comments-asc";cgJsData[gid].options.pro.PreselectSort=cgJsClass.gallery.function.general.tools.getValueForPreselectSort(cgJsData[gid].vars.sorting);cgJsClass.gallery.sorting.initSort(gid,false,false,true)}if(jQuery(this).find(".cg_random_sort").prop("selected")==true){cgJsData[gid].vars.sorting="random";cgJsData[gid].options.pro.PreselectSort=cgJsClass.gallery.function.general.tools.getValueForPreselectSort(cgJsData[gid].vars.sorting);cgJsClass.gallery.sorting.initSort(gid,false,false,true)}var fullData=cgJsData[gid].fullImageDataFiltered;var length=Object.keys(fullData).length;var PicsPerSite=parseInt(cgJsData[gid].options.general.PicsPerSite);cgJsData[gid].vars.mainCGdiv.find(".cg-no-images-found-container").addClass("cg_hide");if(length>PicsPerSite){cgJsClass.gallery.dynamicOptions.checkStepsCutImageData(jQuery,1,true,false,gid,undefined,undefined,undefined,undefined,false,fullData);cgJsClass.gallery.vars.hasToAppend=false;return}else{}if(cgJsData[gid].vars.currentLook=="row"){cgJsClass.gallery.rowLogic.init(jQuery,gid)}if(cgJsData[gid].vars.currentLook=="height"){cgJsClass.gallery.heightLogic.init(jQuery,gid)}if(cgJsData[gid].vars.currentLook=="thumb"){cgJsClass.gallery.thumbLogic.init(jQuery,gid)}if(cgJsData[gid].vars.currentLook=="slider"){jQuery("#mainCGdiv"+gid).find("#mainCGslider"+gid).find(".cg_show").remove();cgJsClass.gallery.thumbLogic.init(jQuery,gid,null,null,true,null,null,true)}if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.init(jQuery,gid,null,null,null,true)}cgJsClass.gallery.vars.hasToAppend=false})};;cgJsClass.gallery.sorting.desc=function(newData){var arr=[];for(var key in newData){if(!newData.hasOwnProperty(key)){break}var obj={};obj[key]=newData[key];arr.push(obj)}var arrReverse=[];var iAdd=0;for(var i=arr.length-1;i>=0;i--){arrReverse[iAdd]=arr[i];iAdd++}return arrReverse};;cgJsClass.gallery.sorting.ascPosition=function(newData){var newObject={};var index=1;for(var key in newData){if(!newData.hasOwnProperty(key)){break}if(key<cgJsClass.gallery.vars.sortingStartValue){newObject[index]=newData[key];index++}else{newObject[key]=newData[key]}}var arr=[];for(var key in newObject){if(!newObject.hasOwnProperty(key)){break}var obj={};obj[key]=newObject[key];arr.push(obj)}return arr};cgJsClass.gallery.sorting.asc=function(newData){var arr=[];for(var key in newData){if(!newData.hasOwnProperty(key)){break}var obj={};obj[key]=newData[key];arr.push(obj)}return arr};;cgJsClass.gallery.sorting.reset=function(gid,isInit){debugger;if(cgJsData[gid].fullImageDataFiltered){cgJsData[gid].fullImageDataFilteredBakBeforeReset={};for(var orderKey in cgJsData[gid].fullImageDataFiltered){if(!cgJsData[gid].fullImageDataFiltered.hasOwnProperty(orderKey)){break}cgJsData[gid].fullImageDataFilteredBakBeforeReset[orderKey]=cgJsData[gid].fullImageDataFiltered[orderKey]}}cgJsData[gid].fullImageDataFiltered={};if(isInit){cgJsData[gid].fullImageData={}}if(cgJsData[gid].options.pro.PreselectSort=="custom"){var newData=cgJsClass.gallery.sorting.sortByPositionId(gid);cgJsData[gid].image=cgJsClass.gallery.sorting.ascPosition(newData)}else{var newData=cgJsClass.gallery.sorting.sortById(gid);cgJsData[gid].image=cgJsClass.gallery.sorting.desc(newData)}cgJsData[gid].fullImageDataFiltered=cgJsData[gid].image;if(isInit){cgJsData[gid].fullImageData=cgJsData[gid].image}};;cgJsClass.gallery.sorting.findNewId=function(newData,newKey){newKey=parseInt(newKey);if(newData[newKey]){cgJsClass.gallery.sorting.findNewId(newData,newKey+1)}else{return newKey}};cgJsClass.gallery.sorting.sortById=function(gid){var data=cgJsClass.gallery.sorting.functions.getDataForEventuallySortReset(gid);var newData={};var i=0;var startValue=cgJsClass.gallery.vars.sortingStartValue;var lastUnsortedValue;for(var key in data){if(!data.hasOwnProperty(key)){break}if(data[key]["rThumb"]=="90"||data[key]["rThumb"]=="270"){var Width=data[key]["Width"];var Height=data[key]["Height"];data[key]["Width"]=Height;data[key]["Height"]=Width}if(data[key]["id"]!="0"){var newKey=startValue+parseInt(data[key]["id"]);if(newData[newKey]){newKey=cgJsClass.gallery.sorting.findNewId(newData,newKey)}}else{if(!lastUnsortedValue){lastUnsortedValue=startValue-1;var newKey=lastUnsortedValue}else{lastUnsortedValue=lastUnsortedValue-1;var newKey=lastUnsortedValue}}newData[newKey]=data[key];newData[newKey]["id"]=parseInt(key);i++}return newData};cgJsClass.gallery.sorting.sortByIdFiltered=function(gid){var newObj={};var startValue=1e5;var lastUnsortedValue;jQuery.each(cgJsData[gid].fullImageDataFiltered,function(index,value){var firstKey=Object.keys(value)[0];var object=value[firstKey];var id=object.id;newObj[id]=object});return newObj};;cgJsClass.gallery.sorting.findNewPositionId=function(newData,newKey){newKey=parseInt(newKey);if(newData[newKey]){cgJsClass.gallery.sorting.findNewPositionId(newData,newKey+1)}else{return newKey}};cgJsClass.gallery.sorting.sortByPositionId=function(gid){var data=cgJsClass.gallery.sorting.functions.getDataForEventuallySortReset(gid);var newData={};var i=0;var startValue=cgJsClass.gallery.vars.sortingStartValue;var lastUnsortedValue;for(var key in data){if(!data.hasOwnProperty(key)){break}if(data[key]["rThumb"]=="90"||data[key]["rThumb"]=="270"){var Width=data[key]["Width"];var Height=data[key]["Height"];data[key]["Width"]=Height;data[key]["Height"]=Width}if(data[key]["PositionNumber"]&&data[key]["PositionNumber"]!=0){var newKey=startValue+parseInt(data[key]["PositionNumber"]);if(newData[newKey]){newKey=cgJsClass.gallery.sorting.findNewPositionId(newData,newKey)}}else{if(!lastUnsortedValue){lastUnsortedValue=startValue-1;var newKey=lastUnsortedValue}else{lastUnsortedValue=lastUnsortedValue-1;var newKey=lastUnsortedValue}}newData[newKey]=data[key];newData[newKey]["id"]=parseInt(key);i++}return newData};cgJsClass.gallery.sorting.sortByPositionIdFiltered=function(gid){var newObj={};var startValue=1e5;var lastUnsortedValue;jQuery.each(cgJsData[gid].fullImageDataFiltered,function(index,value){var firstKey=Object.keys(value)[0];var object=value[firstKey];var id=firstKey;newObj[id]=object});return newObj};;cgJsClass.gallery.sorting.countC=function(gid){var newObj={};var countImages=Object.keys(cgJsData[gid].fullImageDataFiltered).length;jQuery.each(cgJsData[gid].fullImageDataFiltered,function(index,value){var firstKey=Object.keys(value)[0];var object=value[firstKey];var add=parseInt(object["CountC"]);var newFirstKey=parseInt(add+"00000");if(add>0){if(newObj.hasOwnProperty(newFirstKey)==false){newObj[newFirstKey]=object}else{for(var i=0;i<=countImages;i++){newFirstKey=newFirstKey+1;if(newObj.hasOwnProperty(newFirstKey)==false){newObj[newFirstKey]=object;break}}}}else{var id=object["id"];newObj[id]=object}});return newObj};;cgJsClass.gallery.sorting.countS=function(gid){var newObj={};var countImages=Object.keys(cgJsData[gid].fullImageDataFiltered).length;var Manipulate=cgJsData[gid].options.pro.Manipulate;jQuery.each(cgJsData[gid].fullImageDataFiltered,function(index,value){var firstKey=Object.keys(value)[0];var object=value[firstKey];var add=parseInt(object["CountS"]);var newFirstKey=parseInt(add+"00000");if(add>0){if(newObj.hasOwnProperty(newFirstKey)==false){newObj[newFirstKey]=object}else{for(var i=0;i<=countImages;i++){newFirstKey=newFirstKey+1;if(newObj.hasOwnProperty(newFirstKey)==false){newObj[newFirstKey]=object;break}}}}else{var id=object["id"];newObj[id]=object}});return newObj};;cgJsClass.gallery.sorting.countR=function(gid){var newObj={};var countImages=Object.keys(cgJsData[gid].fullImageDataFiltered).length;var Manipulate=cgJsData[gid].options.pro.Manipulate;jQuery.each(cgJsData[gid].fullImageDataFiltered,function(index,value){var firstKey=Object.keys(value)[0];var object=value[firstKey];var add=parseInt(object["CountRtotal"]);var newFirstKey=parseInt(add+"00000");if(add>0){if(newObj.hasOwnProperty(newFirstKey)==false){newObj[newFirstKey]=object}else{for(var i=0;i<=countImages;i++){newFirstKey=newFirstKey+1;if(newObj.hasOwnProperty(newFirstKey)==false){newObj[newFirstKey]=object;break}}}}else{var id=object["id"];newObj[id]=object}});if(cgJsData[gid].options.general.AllowRatingDynamic){var newObjByCountR={};jQuery.each(newObj,function(index,value){var countRtotal=value.CountRtotal;if(!newObjByCountR[countRtotal]){newObjByCountR[countRtotal]=[]}newObjByCountR[countRtotal].push(value)});var newArray=[];jQuery.each(newObjByCountR,function(index,value){newObjByCountR[index].sort(function(a,b){return a.RatingAverageForSecondarySorting-b.RatingAverageForSecondarySorting});newObjByCountR[index].forEach(function(valueForEach,indexForEach){newArray.push(valueForEach)})});newObj=newArray}return newObj};cgJsClass.gallery.sorting.countRaverage=function(gid){var newObj={};var countImages=Object.keys(cgJsData[gid].fullImageDataFiltered).length;var Manipulate=cgJsData[gid].options.pro.Manipulate;jQuery.each(cgJsData[gid].fullImageDataFiltered,function(index,value){var firstKey=Object.keys(value)[0];var object=value[firstKey];var newFirstKey=object["RatingAverageForSecondarySorting"];if(newFirstKey>0){if(newObj.hasOwnProperty(newFirstKey)==false){newObj[newFirstKey]=object}else{for(var i=0;i<=countImages;i++){newFirstKey=newFirstKey+1;if(newObj.hasOwnProperty(newFirstKey)==false){newObj[newFirstKey]=object;break}}}}else{var id=object["id"];newObj[id]=object}});var newArray=[];jQuery.each(newObj,function(index,value){value.sortedKeyBefore=index;newArray.push(value)});newArray.sort(function(a,b){return a.RatingAverageForSecondarySorting-b.RatingAverageForSecondarySorting});var newObjSortedLikeNewArray={};newArray.forEach(function(value){newObjSortedLikeNewArray[value.sortedKeyBefore]=value});return newObjSortedLikeNewArray};cgJsClass.gallery.sorting.countSum=function(gid){var newObj={};var countImages=Object.keys(cgJsData[gid].fullImageDataFiltered).length;var Manipulate=cgJsData[gid].options.pro.Manipulate;jQuery.each(cgJsData[gid].fullImageDataFiltered,function(index,value){var firstKey=Object.keys(value)[0];var object=value[firstKey];var newFirstKey=object["RatingTotalForSecondarySorting"];if(newFirstKey>0){if(newObj.hasOwnProperty(newFirstKey)==false){newObj[newFirstKey]=object}else{for(var i=0;i<=countImages;i++){newFirstKey=newFirstKey+1;if(newObj.hasOwnProperty(newFirstKey)==false){newObj[newFirstKey]=object;break}}}}else{var id=object["id"];newObj[id]=object}});var newArray=[];jQuery.each(newObj,function(index,value){value.sortedKeyBefore=index;newArray.push(value)});newArray.sort(function(a,b){return a.RatingTotalForSecondarySorting-b.RatingTotalForSecondarySorting});var newObjSortedLikeNewArray={};newArray.forEach(function(value){newObjSortedLikeNewArray[value.sortedKeyBefore]=value});return newObjSortedLikeNewArray};;cgJsClass.gallery.sorting.random=function(gid){function shuffle(array){var currentIndex=array.length,temporaryValue,randomIndex;while(0!==currentIndex){randomIndex=Math.floor(Math.random()*currentIndex);currentIndex-=1;temporaryValue=array[currentIndex];array[currentIndex]=array[randomIndex];array[randomIndex]=temporaryValue}return array}var newObj=shuffle(cgJsData[gid].fullImageDataFiltered);cgJsData[gid].vars.sortedRandomFullData=newObj.slice(0);return newObj};;cgJsClass.gallery.sorting.initSortRandomButton=function(gid){if(cgJsClass.gallery.vars.eventInitSortRandomButton){return}else{cgJsClass.gallery.vars.eventInitSortRandomButton=true}jQuery(document).on("click",".cg_random_button",function(){cgJsClass.gallery.vars.hasToAppend=true;var gid=jQuery(this).attr("data-cg-gid");cgJsData[gid].options.pro.PreselectSort="random";var $element=jQuery(this);if(cgJsClass.gallery.function.general.tools.setWaitingForValues(gid,$element,"change")){return}$element.addClass("cg_hide");var $cg_random_button_loader=$element.parent().find(".cg_random_button_loader");$cg_random_button_loader.removeClass("cg_hide");var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.reset(gid)}cgJsData[gid].vars.sorting="random";if(cgJsData[gid].vars.openedRealId>0&&!sliderView){cgJsClass.gallery.views.close(gid)}if(cgJsData[gid].options.general.AllowSort==1){if(cgJsData[gid].vars.mainCGdiv.find("#cg_select_order"+gid).find(".cg_random_sort").length){cgJsData[gid].vars.mainCGdiv.find("#cg_select_order"+gid).val("random")}}cgJsData[gid].image=cgJsClass.gallery.sorting.random(gid);var PicsPerSite=parseInt(cgJsData[gid].options.general.PicsPerSite);var isInitiatedThroughViewChange=false;if(cgJsData[gid].image.length>PicsPerSite&&sliderView==false){isInitiatedThroughViewChange=true;var $step=cgJsData[gid].vars.mainCGdiv.find("#cgFurtherImagesContainerDiv"+gid).find('.cg_further_images[data-cg-step="1"]').addClass("cg_sorting_changed").removeClass("cg_further_images_selected");$step.addClass("cg_view_change").addClass("cg_random_button_clicked").click();cgJsClass.gallery.vars.hasToAppend=false}else{}if(cgJsData[gid].vars.currentLook=="row"){cgJsClass.gallery.rowLogic.init(jQuery,gid)}if(cgJsData[gid].vars.currentLook=="height"){cgJsClass.gallery.heightLogic.init(jQuery,gid)}if(cgJsData[gid].vars.currentLook=="slider"){cgJsData[gid].vars.openedRealId=0;jQuery("#mainCGdiv"+gid).find("#mainCGslider"+gid).find(".cg_show").remove();cgJsClass.gallery.thumbLogic.init(jQuery,gid,null,null,true,null,null,true)}if(cgJsData[gid].vars.currentLook=="thumb"){cgJsClass.gallery.thumbLogic.init(jQuery,gid)}if(cgJsData[gid].vars.currentLook=="blog"&&!isInitiatedThroughViewChange){cgJsClass.gallery.blogLogic.init(jQuery,gid,null,null,null,true)}setTimeout(function(){$element.removeClass("cg_hide");$cg_random_button_loader.addClass("cg_hide")},1e3);cgJsClass.gallery.vars.hasToAppend=false})};cgJsClass.gallery.sorting.showRandomButton=function(gid){if(Object.keys(cgJsData[gid].vars.rawData).length==0){var cgGalleryViewSortControl=jQuery("#mainCGdivHelperParent"+gid);cgGalleryViewSortControl.find(".cg-lds-dual-ring").addClass("cg_hide");cgGalleryViewSortControl.find(".cg_random_button").addClass("cg_hide")}else if(Object.keys(cgJsData[gid].vars.rawData).length>0){setTimeout(function(){var cgGalleryViewSortControl=jQuery("#mainCGdivHelperParent"+gid);cgGalleryViewSortControl.find(".cg-lds-dual-ring").addClass("cg_hide");cgGalleryViewSortControl.find(".cg_random_button").removeClass("cg_hide")},6e3)}};cgJsClass.gallery.sorting.showRandomButtonInstantly=function(gid){if(Object.keys(cgJsData[gid].vars.rawData).length==0){var cgGalleryViewSortControl=jQuery("#mainCGdivHelperParent"+gid);cgGalleryViewSortControl.find(".cg-lds-dual-ring").addClass("cg_hide");cgGalleryViewSortControl.find(".cg_random_button").addClass("cg_hide")}else if(Object.keys(cgJsData[gid].vars.rawData).length>0){var cgGalleryViewSortControl=jQuery("#mainCGdivHelperParent"+gid);cgGalleryViewSortControl.find(".cg-lds-dual-ring").addClass("cg_hide");cgGalleryViewSortControl.find(".cg_random_button").removeClass("cg_hide")}};cgJsClass.gallery.sorting.showRandomButtonDelayed=function(gid,delayTime){setTimeout(function(){var cgGalleryViewSortControl=jQuery("#mainCGdivHelperParent"+gid);cgGalleryViewSortControl.find(".cg-lds-dual-ring").addClass("cg_hide");cgGalleryViewSortControl.find(".cg_random_button").removeClass("cg_hide")},delayTime)};;cgJsClass.gallery.user.events=function($){if(cgJsClass.gallery.vars.eventGalleryUserEvents){return}else{cgJsClass.gallery.vars.eventGalleryUserEvents=true}$(document).on("click",".cg_delete_user_image",function(e){e.preventDefault();cgJsClass.gallery.user.deleteImageConfirmShow($(this))})};cgJsClass.gallery.user.isEventinProcess=false;;cgJsClass.gallery.fbLike.setFbLike=function(realId,arrIndex,objectKey,gid,calledFromUpload){if(cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.RatingVisibleForGalleryNoVoting||cgJsData[gid].vars.isOnlyGalleryEcommerce&&!cgJsData[gid].options.general.RatingVisibleForGalleryEcommerce){return}var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);if(cgJsData[gid].options.general.FbLike>=1&&cgJsData[gid].options.general.FbLikeGallery>=1&&cgJsData[gid].vars.currentLook!="blog"&&!isAlternativeFileType){var $cgFacebookDiv=cgJsClass.gallery.fbLike.createFbLike(realId,gid);if(cgJsData[gid].vars.openedRealId==realId&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1&&!calledFromUpload||sliderView==true&&!calledFromUpload){$cgFacebookDiv.addClass("cg_hide")}cgJsData[gid].imageObject[realId].find(".cg_gallery_info").append($cgFacebookDiv)}};cgJsClass.gallery.fbLike.createFbLike=function(realId,gid){var timestamp=cgJsData[gid].vars.rawData[realId]["Timestamp"];var namePic=cgJsData[gid].vars.rawData[realId]["NamePic"];var uploadFolderUrl=cgJsData[gid].vars.uploadFolderUrl;var nameFbLikePageUrl=timestamp+"_"+namePic+"413.html";var fbLikePageUrl=uploadFolderUrl+"/contest-gallery/gallery-id-"+cgJsData[gid].vars.gidReal+"/"+nameFbLikePageUrl+"?"+(new Date).getTime();var $fbContent=jQuery("<div id='cgFacebookGalleryDiv"+realId+"' class='cg_gallery_facebook_div' data-cg-gid='"+gid+"' >"+"<iframe src='"+fbLikePageUrl+"'  scrolling='no'"+"class='cg_fb_like_iframe_slider_order' id='cg_fb_like_iframe_slider"+realId+"'  name='cg_fb_like_iframe_slider"+realId+"'></iframe>"+"</div>");if(cgJsData[gid].vars.isUserGallery){$fbContent.find("iframe").addClass("cg_pointer_events_none")}return $fbContent};;cgJsClass.gallery.fbLike.clickFbLikeDiv=function(gid){if(cgJsClass.gallery.vars.eventClickFbLikeDiv){return}else{cgJsClass.gallery.vars.eventClickFbLikeDiv=true}jQuery(document).on("click",".cg_gallery_facebook_div, .cg-center-image-fblike-div",function(e){e.stopPropagation();e.preventDefault();var gid=jQuery(this).attr("data-cg-gid");if(gid.indexOf("-u")>=0){cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].YouCanNotVoteInOwnGallery);return}})};;cgJsClass.gallery.rating={init:function(gid){cgJsClass.gallery.rating.clickRateOneStar(gid);cgJsClass.gallery.rating.clickRateFiveStar(gid)},updateData:function(gid,data,isFromSaveAfterRatingOrCommenting){for(var realId in cgJsData[gid].vars.rawData){if(!cgJsData[gid].vars.rawData.hasOwnProperty(realId)){break}if(!cgJsData[gid].rateAndCommentNumbers[realId]){cgJsData[gid].rateAndCommentNumbers[realId]={};cgJsClass.gallery.vars.ratingAndCommentsProperties.forEach(function(property){cgJsData[gid].rateAndCommentNumbers[realId][property]=0})}}var valuesToSaveForSortArray=cgJsClass.gallery.vars.ratingAndCommentsProperties;var dataNew={};for(var realId in data){if(!data.hasOwnProperty(realId)){break}for(var property in data[realId]){if(!data[realId].hasOwnProperty(property)){break}if(!dataNew[realId]){dataNew[realId]={}}if(valuesToSaveForSortArray.indexOf(property)>-1){data[realId][property]=parseInt(data[realId][property]);dataNew[realId][property]=data[realId][property]}}}var dataToSave=dataNew;if(isFromSaveAfterRatingOrCommenting){var dataToSave={};for(var realId in dataNew){if(!dataNew.hasOwnProperty(realId)){break}if(!dataToSave[realId]){dataToSave[realId]={}}for(var property in dataNew[realId]){if(!dataNew[realId].hasOwnProperty(property)){break}dataToSave[realId][property]=dataNew[realId][property]}if(dataToSave[realId].CountSreal){dataToSave[realId].CountS=dataToSave[realId].CountSreal;delete dataToSave[realId].CountSreal}}cgJsData[gid].rateAndCommentNumbers=dataToSave}}};;cgJsClass.gallery.rating.countSuserVotedAnImage=function(gid,realId){var userVoted=false;if(typeof cgJsData[gid].cgJsCountSuser[realId]!="undefined"){if(cgJsData[gid].cgJsCountSuser[realId]>0){userVoted=true}}return userVoted};cgJsClass.gallery.rating.generateRatingDivOneStar=function(realId,countS,firstLoad,gid){var imageObject=cgJsData[gid].imageObject[realId];if(!imageObject&&cgJsData[gid].vars.currentLook!="blog"){imageObject=cgJsData[gid].vars.mainCGallery.find("#cg_show"+realId);if(imageObject.length==0){return}}var userVoted=cgJsClass.gallery.rating.countSuserVotedAnImage(gid,realId);var position="";if(cgJsData[gid].options.general.RatingOutGallery!="1"){var cg_rate_out_gallery_disallowed="cg_rate_out_gallery_disallowed"}else{var cg_rate_out_gallery_disallowed=""}if(cgJsData[gid].options.visual["RatingPositionGallery"]==2){position="cg_center"}if(cgJsData[gid].options.visual["RatingPositionGallery"]==3){position="cg_right"}countS=cgJsData[gid].rateAndCommentNumbers[realId].CountS;if(cgJsData[gid].options.general.HideUntilVote==1&&!cgJsData[gid].cgJsCountSuser[realId]&&!(cgJsData[gid].vars.isOnlyGalleryWinner||cgJsData[gid].vars.isOnlyGalleryNoVoting)){countS=""}else if(cgJsData[gid].options.general.HideUntilVote==1&&!(countS>=1)&&(cgJsData[gid].vars.isOnlyGalleryWinner||cgJsData[gid].vars.isOnlyGalleryNoVoting)){countS=0}var HideUntilVote=cgJsData[gid].options.general.HideUntilVote;var cg_gallery_rating_div_count_hide_until_vote="";if(HideUntilVote==1&&(countS==0||countS=="")&&!(cgJsData[gid].vars.isOnlyGalleryWinner||cgJsData[gid].vars.isOnlyGalleryNoVoting)){cg_gallery_rating_div_count_hide_until_vote="cg_gallery_rating_div_count_hide_until_vote"}var cg_already_voted="";if(realId==982){}if(cgJsData[gid].cgJsCountSuser&&cgJsData[gid].cgJsCountSuser[realId]&&cgJsData[gid].vars.isVotingPossible){cg_already_voted="cg_already_voted"}if(typeof firstLoad==="undefined"||firstLoad==false){if(countS>=1){var starLook="cg_gallery_rating_div_one_star_on"}else{var starLook="cg_gallery_rating_div_one_star_off"}var ratingDivChild='<div data-cg_rate_star_id="'+realId+'" data-cg-gid="'+gid+'" class="cg_rate_star cg_gallery_rating_div_star cg_gallery_rating_div_star_one_star '+starLook+" "+cg_rate_out_gallery_disallowed+'" data-cg-tooltip="'+cgJsClass.gallery.language[gid].VoteNow+'">'+'</div><div id="rating_cg-'+realId+'" class="cg_gallery_rating_div_count '+cg_gallery_rating_div_count_hide_until_vote+'">'+countS+'</div><div class="cg_voted_confirm" data-cg-tooltip="'+(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed?cgJsClass.gallery.language[gid].YouHaveAlreadyVotedThisPicture:cgJsClass.gallery.language[gid].YouHaveAlreadyVotedThisPicture)+'"></div>';if(imageObject){imageObject.find(".cg_gallery_rating_div_child").empty().removeClass("cg-lds-dual-ring-star-loading").append(ratingDivChild);if(cgJsData[gid].options.pro.MinusVote==1&&userVoted&&!cgJsData[gid].vars.isUserGallery){imageObject.find(".cg_gallery_rating_div_child").find(".cg_rate_minus").remove();imageObject.find(".cg_gallery_rating_div_child").append('<div data-cg_rate_star_id="'+realId+'" class="cg_rate_minus" data-cg-gid="'+gid+'"  data-cg-tooltip="'+cgJsClass.gallery.language[gid].UndoYourLastVote+'" ></div>')}else{imageObject.find(".cg_gallery_rating_div_child").find(".cg_rate_minus").remove()}}if(cgJsData[gid].vars.currentLook=="blog"){var cgCenterDiv=cgJsData[gid].cgCenterDivBlogObject[realId];var ratingDivContainer=cgCenterDiv.find(".cg-center-image-rating-div");ratingDivContainer.find(".cg_gallery_rating_div_child").empty().removeClass("cg-lds-dual-ring-star-loading").append(ratingDivChild);if(cgJsData[gid].options.pro.MinusVote==1&&userVoted&&!cgJsData[gid].vars.isUserGallery){ratingDivContainer.find(".cg_gallery_rating_div_child").find(".cg_rate_minus").remove();ratingDivContainer.find(".cg_gallery_rating_div_child").append('<div data-cg_rate_star_id="'+realId+'" class="cg_rate_minus" data-cg-gid="'+gid+'"  data-cg-tooltip="'+cgJsClass.gallery.language[gid].UndoYourLastVote+'"></div>')}else{ratingDivContainer.find(".cg_gallery_rating_div_child").find(".cg_rate_minus").remove()}if(cgJsData[gid].cgJsCountSuser&&cgJsData[gid].cgJsCountSuser[realId]&&cgJsData[gid].vars.isVotingPossible){if(imageObject){imageObject.find(".cg_gallery_rating_div_child").addClass("cg_already_voted")}cgCenterDiv.find(".cg_gallery_rating_div_child").addClass("cg_already_voted")}else{if(imageObject){imageObject.find(".cg_gallery_rating_div_child").removeClass("cg_already_voted")}cgCenterDiv.find(".cg_gallery_rating_div_child").removeClass("cg_already_voted")}}else{var cgCenterDiv=cgJsData[gid].vars.cgCenterDiv;if(cgCenterDiv.is(":visible")){if(cgJsData[gid].vars.openedRealId==realId){cgCenterDiv.find("#cgCenterImageRatingDiv"+gid).empty();imageObject.find(".cg_gallery_rating_div").clone().appendTo(cgCenterDiv.find("#cgCenterImageRatingDiv"+gid));cgCenterDiv.find(".cg_gallery_rating_div_star").removeClass("cg_rate_out_gallery_disallowed cg-lds-dual-ring-star-loading");if(cgJsData[gid].cgJsCountSuser&&cgJsData[gid].cgJsCountSuser[realId]&&cgJsData[gid].vars.isVotingPossible){cgCenterDiv.find(".cg_gallery_rating_div_child").addClass("cg_already_voted")}else{cgCenterDiv.find(".cg_gallery_rating_div_child").removeClass("cg_already_voted")}}}}}else{if(countS>=1){var starLook="cg_gallery_rating_div_one_star_on"}else{var starLook="cg_gallery_rating_div_one_star_off"}if(cgJsData[gid].options.pro.MinusVote==1&&userVoted&&!cgJsData[gid].vars.isUserGallery){var cg_rate_minus='<div data-cg_rate_star_id="'+realId+'" class="cg_rate_minus" data-cg-gid="'+gid+'" data-cg-tooltip="'+cgJsClass.gallery.language[gid].UndoYourLastVote+'"></div>'}else{var cg_rate_minus=""}var $cg_pointer_events_none="";if(!cgJsData[gid].vars.isVotingPossible){$cg_pointer_events_none="cg_pointer_events_none"}var ratingDiv='<div class="cg_gallery_rating_div cg_gallery_rating_div_one_star '+$cg_pointer_events_none+'" id="cg_gallery_rating_div'+realId+'">'+'<div class="cg_gallery_rating_div_child '+position+" "+cg_already_voted+'" id="cg_gallery_rating_div_child'+realId+'">'+'<div data-cg_rate_star_id="'+realId+'" data-cg-gid="'+gid+'" class="cg_rate_star cg_gallery_rating_div_star cg_gallery_rating_div_star_one_star '+starLook+" "+cg_rate_out_gallery_disallowed+'" data-cg-tooltip="'+cgJsClass.gallery.language[gid].VoteNow+'">'+'</div><div id="rating_cg-'+realId+'" class="cg_gallery_rating_div_count '+cg_gallery_rating_div_count_hide_until_vote+'">'+countS+'</div><div class="cg_voted_confirm" data-cg-tooltip="'+(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed?cgJsClass.gallery.language[gid].YouHaveAlreadyVotedThisPicture:cgJsClass.gallery.language[gid].YouHaveAlreadyVotedThisPicture)+'"></div>'+cg_rate_minus+"</div>"+"</div>";if(cgJsData[gid].vars.currentLook=="blog"){var cgCenterDiv=cgJsData[gid].cgCenterDivBlogObject[realId];cgCenterDiv.find(".cg-center-image-rating-div").empty().append(ratingDiv)}else{if(imageObject&&cgJsData[gid].vars.currentLook!="blog"){if(cgJsData[gid].vars.modernHover){imageObject.find(".cg_gallery_info .cg_gallery_info_rating_comments").append(ratingDiv)}else{imageObject.find(".cg_gallery_info").append(ratingDiv)}}}}if(cgJsData[gid].cgJsCountSuser&&cgJsData[gid].cgJsCountSuser[realId]&&cgJsData[gid].vars.isVotingPossible){if(imageObject){var $cg_gallery_rating_div_child=imageObject.find(".cg_gallery_rating_div_child");if(!$cg_gallery_rating_div_child.hasClass("cg_already_voted")){$cg_gallery_rating_div_child.addClass("cg_already_voted")}}}};cgJsClass.gallery.rating.setRatingOneStarSameGalleryId=function(realId,addVoteS,firstLoad,gid,allVotesUsed,VotesInTimeExceeded,ratingFileData,isSetUserVoteToNull){var realGid=cgJsData[gid].vars.realGid;cgJsClass.gallery.vars.$cgLoadedIds.each(function(){if(jQuery(this).attr("data-cg-real-gid")!=realGid){return}if(jQuery(this).attr("data-cg-short")=="uf"||jQuery(this).attr("data-cg-short")=="uc"){return}if(jQuery(this).attr("data-cg-gid")==gid){return}cgJsClass.gallery.views.close(jQuery(this).attr("data-cg-gid"));cgJsClass.gallery.rating.setRatingOneStar(realId,addVoteS,firstLoad,jQuery(this).attr("data-cg-gid"),allVotesUsed,VotesInTimeExceeded,ratingFileData,isSetUserVoteToNull,true)});return;if(String(gid).indexOf("-u")>=0){return}if(String(gid).indexOf("-u")==-1){var gidToCheck=gid+"-u";if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.rating.setRatingOneStar(realId,addVoteS,firstLoad,gidToCheck,allVotesUsed,VotesInTimeExceeded,ratingFileData,isSetUserVoteToNull,true)}var gidToCheck=gid+"-w";if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.rating.setRatingOneStar(realId,addVoteS,firstLoad,gidToCheck,allVotesUsed,VotesInTimeExceeded,ratingFileData,isSetUserVoteToNull,true)}}};cgJsClass.gallery.rating.setRatingOneStar=function(realId,addVoteS,firstLoad,gid,allVotesUsed,VotesInTimeExceeded,ratingFileData,isSetUserVoteToNull,isSetFromSameGalleryId){if(cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.RatingVisibleForGalleryNoVoting||cgJsData[gid].vars.isOnlyGalleryEcommerce&&!cgJsData[gid].options.general.RatingVisibleForGalleryEcommerce){return}if(!cgJsData[gid].vars.rawData[realId]){return}if(isSetUserVoteToNull){cgJsData[gid].cgJsCountSuser[realId]=0}if(typeof cgJsData[gid].cgJsCountSuser[realId]=="undefined"){cgJsData[gid].cgJsCountSuser[realId]=0}var data=cgJsData[gid].rateAndCommentNumbers[realId];var CheckLogin=cgJsData[gid].options.general.CheckLogin;var ShowOnlyUsersVotes=cgJsData[gid].options.general.ShowOnlyUsersVotes;var Manipulate=cgJsData[gid].options.pro.Manipulate;if(!data){console.log(realId);console.log(cgJsData[gid].vars.rawData[realId]);debugger}data.CountS=parseInt(data.CountS)+addVoteS;if(addVoteS){cgJsData[gid].cgJsCountSuser[realId]=parseInt(cgJsData[gid].cgJsCountSuser[realId])+addVoteS}data.CountSreal=data.CountS;if(ShowOnlyUsersVotes==1&&!(cgJsData[gid].vars.isOnlyGalleryWinner||cgJsData[gid].vars.isOnlyGalleryNoVoting)){data.CountS=cgJsData[gid].cgJsCountSuser[realId]}if(addVoteS){for(var key in cgJsData[gid].fullImageDataFiltered){if(!cgJsData[gid].fullImageDataFiltered.hasOwnProperty(key)){break}var firstKey=Object.keys(cgJsData[gid].fullImageDataFiltered[key])[0];if(cgJsData[gid].fullImageDataFiltered[key][firstKey]["id"]==realId){cgJsData[gid].fullImageDataFiltered[key][firstKey]["CountS"]=data.CountS;break}}cgJsData[gid].rateAndCommentNumbers[realId]=data;cgJsClass.gallery.rating.updateData(gid,cgJsData[gid].rateAndCommentNumbers,true)}if(cgJsData[gid].options.general.HideUntilVote==1&&allVotesUsed==true&&!(cgJsData[gid].vars.isOnlyGalleryWinner||cgJsData[gid].vars.isOnlyGalleryNoVoting)){if(data.CountS>0){if(cgJsClass.gallery.rating.countSuserVotedAnImage(gid,realId)){if(ShowOnlyUsersVotes){countStoSet=cgJsData[gid].cgJsCountSuser[realId]}else{var countStoSet=data.CountS}}else{var countStoSet=""}}else{var countStoSet=""}jQuery(cgJsClass.gallery.rating.generateRatingDivOneStar(realId,countStoSet,firstLoad,gid));if(VotesInTimeExceeded===true){cgJsClass.gallery.function.message.show(gid,cgJsData[gid].options.pro.VotesInTimeIntervalAlertMessage);return}return}if(cgJsData[gid].options.general.HideUntilVote==1&&!(cgJsData[gid].vars.isOnlyGalleryWinner||cgJsData[gid].vars.isOnlyGalleryNoVoting)){if(typeof cgJsData[gid].cgJsCountSuser[realId]=="undefined"){jQuery(cgJsClass.gallery.rating.generateRatingDivOneStar(realId,"",firstLoad,gid))}else{if(cgJsData[gid].cgJsCountSuser[realId]==0){jQuery(cgJsClass.gallery.rating.generateRatingDivOneStar(realId,"",firstLoad,gid))}else{jQuery(cgJsClass.gallery.rating.generateRatingDivOneStar(realId,data.CountS,firstLoad,gid))}}}else{if(data.CountS<1){jQuery(cgJsClass.gallery.rating.generateRatingDivOneStar(realId,0,firstLoad,gid))}else{cgJsClass.gallery.rating.generateRatingDivOneStar(realId,data.CountS,firstLoad,gid)}}if(VotesInTimeExceeded===true){cgJsClass.gallery.function.message.show(gid,cgJsData[gid].options.pro.VotesInTimeIntervalAlertMessage)}if(!isSetFromSameGalleryId&&addVoteS){cgJsClass.gallery.rating.setRatingOneStarSameGalleryId(realId,addVoteS,firstLoad,gid,allVotesUsed,VotesInTimeExceeded,ratingFileData,isSetUserVoteToNull)}if(ratingFileData){cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_do_not_show_tooltip");setTimeout(function(){cgJsClass.gallery.function.general.tools.tooltip.removeClass("cg_do_not_show_tooltip")},3e3)}};;cgJsClass.gallery.rating.setStars=function(average,gid){var stars={};for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("stars.star"+rCount+" = 'cg_gallery_rating_div_one_star_off';")}for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){var rCountPlusOne=rCount+1;var rCountMinusOne=rCount-1;if(rCount==1){eval("if(average>="+rCount+"){stars.star"+rCount+" = 'cg_gallery_rating_div_one_star_on'}");eval("if(average>="+rCount+".25 && average<"+rCount+".75){stars.star"+rCountPlusOne+" = 'cg_gallery_rating_div_one_star_half_off'}")}else{if(rCount+1!=cgJsData[gid].options.general.AllowRatingDynamic){eval("if(average>="+rCountMinusOne+".75){stars.star"+rCount+" = 'cg_gallery_rating_div_one_star_on'}");eval("if(average>="+rCount+".25 && average<"+rCount+".75){stars.star"+rCountPlusOne+" = 'cg_gallery_rating_div_one_star_half_off'}")}else{eval("if(average>="+rCountMinusOne+".75){stars.star"+rCount+" = 'cg_gallery_rating_div_one_star_on'}")}}}return stars};cgJsClass.gallery.rating.generateRatingDiv=function(realId,countR,imageObject,firstLoad,gid,stars,average,isFromSingleView,isSomeMessageWillBeShown){var userVoted=false;if(typeof cgJsData[gid].cgJsCountRuser[realId]!="undefined"){if(cgJsData[gid].cgJsCountRuser[realId]>0){userVoted=true}}if(firstLoad==false){cgJsClass.gallery.dynamicOptions.setNewCountToMainImageArray(realId,"CountR",countR,gid)}var position="";if(cgJsData[gid].options.general.RatingOutGallery!="1"){var cg_rate_out_gallery_disallowed="cg_rate_out_gallery_disallowed"}else{var cg_rate_out_gallery_disallowed=""}if(cgJsData[gid].options.visual["RatingPositionGallery"]==2){position="cg_center"}if(cgJsData[gid].options.visual["RatingPositionGallery"]==3){position="cg_right"}var HideUntilVote=cgJsData[gid].options.general.HideUntilVote;var test=0;if(cgJsData[gid].options.pro.MinusVote==1&&userVoted&&!cgJsData[gid].vars.isUserGallery){var cg_rate_minus='<div data-cg-real-id="'+realId+'" class="cg_rate_minus cg_rate_minus_five_star" data-cg-gid="'+gid+'" data-cg-tooltip="'+cgJsClass.gallery.language[gid].UndoYourLastVote+'"></div>'}else{var cg_rate_minus=""}if(realId==981){}var ratingData=cgJsData[gid].rateAndCommentNumbers[realId];var cg_gallery_rating_div_count_hide_until_vote="";if(HideUntilVote==1&&ratingData["RatingTotal"]==0&&!cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.isOnlyGalleryWinner){cg_gallery_rating_div_count_hide_until_vote="cg_gallery_rating_div_count_hide_until_vote"}var cg_rate_star_five_star_hide_until_vote="";if(HideUntilVote==1&&ratingData["RatingTotal"]==0&&!cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.isOnlyGalleryWinner){cg_rate_star_five_star_hide_until_vote="cg_rate_star_five_star_hide_until_vote"}var $ratingDivChild=jQuery('<div class="cg_gallery_rating_div_star_container">'+'<div class="cg_gallery_rating_div_star" data-cg-tooltip="'+cgJsClass.gallery.language[gid].VoteNow+'" data-cg-gid="'+gid+'" >'+"</div>"+'<div id="rating_cg-'+realId+'" class="cg_gallery_rating_div_count '+cg_gallery_rating_div_count_hide_until_vote+'"> '+(ratingData["RatingTotal"]==0&&HideUntilVote?"":ratingData["RatingTotal"])+' </div><div class="cg_voted_confirm" data-cg-tooltip="'+(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed?cgJsClass.gallery.language[gid].YouHaveAlreadyVotedThisPicture:cgJsClass.gallery.language[gid].YouHaveAlreadyVotedThisPicture)+'"></div>'+cg_rate_minus+"</div>");var divStringStars="";for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){var starsObjectString=eval("stars.star"+rCount);eval("var string = 'data-cg_rate_star=\"' + rCount + '\" data-cg-gid=\"' + gid + '\"  class=\"cg_rate_star cg_rate_star_five_star cg_gallery_rating_div_star_one_star '+ starsObjectString +' '+cg_rate_out_gallery_disallowed+'\" data-cg-real-id=\"' + realId + '\"'");divStringStars=divStringStars+"<div "+string+" ></div>"}if(ratingData["RatingTotal"]>0){var $div=jQuery('<div data-cg_rate_star="1" data-cg-gid="'+gid+'"  class="cg_rate_star cg_rate_star_five_star '+cg_rate_star_five_star_hide_until_vote+" cg_gallery_rating_div_star_one_star cg_gallery_rating_div_one_star_on "+cg_rate_out_gallery_disallowed+'" data-cg-real-id="'+realId+'"></div>')}else{var $div=jQuery('<div data-cg_rate_star="0" data-cg-gid="'+gid+'"  class="cg_rate_star cg_rate_star_five_star '+cg_rate_star_five_star_hide_until_vote+" cg_gallery_rating_div_star_one_star cg_gallery_rating_div_one_star_off "+cg_rate_out_gallery_disallowed+'" data-cg-real-id="'+realId+'"></div>')}$div.insertAfter($ratingDivChild.find(".cg_gallery_rating_div_star"));if(cgJsData[gid].options.pro.IsModernFiveStar==1){for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("var percentageR"+rCount+" = (ratingData['CountR"+rCount+"']==0 && ratingData['addCountR"+rCount+"']==0) ? 0 : Math.round((parseInt(ratingData['CountR"+rCount+"'])+parseInt(ratingData['addCountR"+rCount+"']))*100/parseInt(ratingData['CountRtotal']));")}var cg_hide="cg_hide";var $ratingDivChildShowOnHover=jQuery('<div class="cg_gallery_rating_div_star_hover">^</div>'+'<div class="cg_gallery_rating_div_five_star_details '+cg_hide+'" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'" id="cgDetails'+realId+'">'+'<div class="cg_gallery_rating_div_five_star_details_close_button"></div>'+'<span class="cg_five_star_details_to_insert_orientation"></span>'+'<div class="cg_five_star_details_arrow_up">'+"</div>"+"</div>");var divString="";for(var rCount=cgJsData[gid].options.general.AllowRatingDynamic;rCount>=1;rCount--){var percentageString=eval("percentageR"+rCount);divString=divString+'<div class="cg_five_star_details_row">'+'<div class="cg_five_star_details_row_number">'+rCount+'</div><div class="cg_five_star_details_row_star"></div>'+'<div class="cg_five_star_details_row_number_count">'+cgJsClass.gallery.rating.getCountRpart(gid,ratingData,rCount)+"</div>"+'<div class="cg_five_star_details_row_number_equal">=</div>'+'<div class="cg_five_star_details_row_number_rating">'+cgJsClass.gallery.rating.getRatingTotalPart(gid,ratingData,rCount)+"</div>"+'<div class="cg_five_star_details_row_number_rating_plus cg_hide" data-cg-r-count="'+rCount+'"></div>'+"</div>"}jQuery(divString).insertBefore($ratingDivChildShowOnHover.find(".cg_five_star_details_to_insert_orientation").first())}if(!imageObject&&!cgJsData[gid].vars.currentLook=="blog"){imageObject=cgJsData[gid].vars.mainCGallery.find("#cg_show"+realId);if(imageObject.length==0){return}}var $cg_pointer_events_none="";var cg_already_voted="";if(cgJsData[gid].cgJsCountRuser&&cgJsData[gid].cgJsCountRuser[realId]){cg_already_voted="cg_already_voted"}var ratingDivString='<div class="cg_gallery_rating_div cg_gallery_rating_div_five_stars '+$cg_pointer_events_none+'" id="cg_gallery_rating_div'+realId+'">'+'<div class="cg_gallery_rating_div_child '+cg_already_voted+" cg_gallery_rating_div_child_five_star "+position+'" id="cg_gallery_rating_div_child'+realId+'" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'">'+"</div>"+"</div>";if(imageObject){var ratingDivContainerGallery=imageObject.find(".cg_gallery_info_rating_comments");ratingDivContainerGallery.find(".cg_gallery_rating_div").remove();ratingDivContainerGallery.prepend(ratingDivString);ratingDivContainerGallery.find(".cg_gallery_rating_div_child").removeClass("cg-lds-dual-ring-star-loading").append($ratingDivChild.clone().html()).find(".cg_gallery_rating_div_count").prepend($ratingDivChildShowOnHover.clone());ratingDivContainerGallery.find(".cg_gallery_rating_div_five_star_details").prepend(jQuery('<div class="cg_gallery_rating_overview">'+divStringStars+"</div>"));if(cgJsData[gid].cgJsCountRuser&&cgJsData[gid].cgJsCountRuser[realId]){imageObject.find(".cg_gallery_rating_div_child").addClass("cg_already_voted")}else{imageObject.find(".cg_gallery_rating_div_child").removeClass("cg_already_voted")}}if(cgJsData[gid].vars.currentLook=="blog"||cgJsData[gid].vars.currentLook=="slider"||cgJsData[gid].vars.openedRealId){if(cgJsData[gid].vars.currentLook=="blog"){var cgCenterDiv=cgJsData[gid].cgCenterDivBlogObject[realId]}else{var cgCenterDiv=cgJsData[gid].vars.cgCenterDiv}var ratingDivContainer=cgCenterDiv.find(".cg-center-image-rating-div");ratingDivContainer.find(".cg_gallery_rating_div").remove();ratingDivContainer.append(ratingDivString);ratingDivContainer.find(".cg_gallery_rating_div_child").removeClass("cg-lds-dual-ring-star-loading").append($ratingDivChild.html()).find(".cg_gallery_rating_div_count").prepend($ratingDivChildShowOnHover);ratingDivContainer.find(".cg_gallery_rating_div_five_star_details").prepend(jQuery('<div class="cg_gallery_rating_overview">'+divStringStars+"</div>"))}};cgJsClass.gallery.rating.setRatingFiveStarSameGalleryId=function(realId,addVoteR,ratingAdd,firstLoad,gid,allVotesUsed,VotesInTimeExceeded,ratingFileData,isFromSingleView,isSetUserVoteToNull){var realGid=cgJsData[gid].vars.realGid;cgJsClass.gallery.vars.$cgLoadedIds.each(function(){if(jQuery(this).attr("data-cg-real-gid")!=realGid){return}if(jQuery(this).attr("data-cg-short")=="uf"||jQuery(this).attr("data-cg-short")=="uc"){return}if(jQuery(this).attr("data-cg-gid")==gid){return}cgJsClass.gallery.views.close(jQuery(this).attr("data-cg-gid"));cgJsClass.gallery.rating.setRatingFiveStar(realId,addVoteR,ratingAdd,firstLoad,jQuery(this).attr("data-cg-gid"),allVotesUsed,VotesInTimeExceeded,ratingFileData,isFromSingleView,isSetUserVoteToNull,true)});return;if(String(gid).indexOf("-u")>=0){return}if(String(gid).indexOf("-u")==-1){var gidToCheck=gid+"-u";if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.rating.setRatingFiveStar(realId,addVoteR,ratingAdd,firstLoad,gidToCheck,allVotesUsed,VotesInTimeExceeded,ratingFileData,isFromSingleView,isSetUserVoteToNull,true)}var gidToCheck=gid+"-w";if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.rating.setRatingFiveStar(realId,addVoteR,ratingAdd,firstLoad,gidToCheck,allVotesUsed,VotesInTimeExceeded,ratingFileData,isFromSingleView,isSetUserVoteToNull,true)}}};cgJsClass.gallery.rating.setRatingFiveStar=function(realId,addVoteR,ratingAdd,firstLoad,gid,allVotesUsed,VotesInTimeExceeded,ratingFileData,isFromSingleView,isSetUserVoteToNull,isSetFromSameGalleryId,isSomeMessageWillBeShown){if(cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.RatingVisibleForGalleryNoVoting||cgJsData[gid].vars.isOnlyGalleryEcommerce&&!cgJsData[gid].options.general.RatingVisibleForGalleryEcommerce){return}if(!cgJsData[gid].vars.rawData[realId]){return}if(isFromSingleView=="false"){isFromSingleView=false}if(isSetUserVoteToNull){cgJsData[gid].cgJsCountRuser[realId]=0}var onlyLoggedInUserImages=false;if(typeof cgJsData[gid].onlyLoggedInUserImages!="undefined"){onlyLoggedInUserImages=true}var imageObject=cgJsData[gid].imageObject[realId];var CheckLogin=cgJsData[gid].options.general.CheckLogin;var ShowOnlyUsersVotes=cgJsData[gid].options.general.ShowOnlyUsersVotes;var HideUntilVote=cgJsData[gid].options.general.HideUntilVote;var Manipulate=cgJsData[gid].options.pro.Manipulate;var MinusVote=cgJsData[gid].options.pro.MinusVote;var data;data=cgJsData[gid].rateAndCommentNumbers[realId];if(realId==216){}if(parseInt(ratingAdd)){ratingAdd=parseInt(ratingAdd);data.CountR=data.CountR+addVoteR;data.CountRtotal=data.CountRtotal+addVoteR;if(ratingAdd==1){data.CountR1=data.CountR1+1}if(ratingAdd==2){data.CountR2=data.CountR2+1}if(ratingAdd==3){data.CountR3=data.CountR3+1}if(ratingAdd==4){data.CountR4=data.CountR4+1}if(ratingAdd==5){data.CountR5=data.CountR5+1}if(ratingAdd==6){data.CountR6=data.CountR6+1}if(ratingAdd==7){data.CountR7=data.CountR7+1}if(ratingAdd==8){data.CountR8=data.CountR8+1}if(ratingAdd==9){data.CountR9=data.CountR9+1}if(ratingAdd==10){data.CountR10=data.CountR10+1}if(ratingAdd==-1){data.CountR1=data.CountR1-1}if(ratingAdd==-2){data.CountR2=data.CountR2-1}if(ratingAdd==-3){data.CountR3=data.CountR3-1}if(ratingAdd==-4){data.CountR4=data.CountR4-1}if(ratingAdd==-5){data.CountR5=data.CountR5-1}if(ratingAdd==-6){data.CountR6=data.CountR6-1}if(ratingAdd==-7){data.CountR7=data.CountR7-1}if(ratingAdd==-8){data.CountR8=data.CountR8-1}if(ratingAdd==-9){data.CountR9=data.CountR9-1}if(ratingAdd==-10){data.CountR10=data.CountR10-1}data.Rating=data.Rating+ratingAdd;data.RatingTotal=data.RatingTotal+ratingAdd;data.RatingTotalForSecondarySorting=cgJsClass.gallery.rating.getRatingTotalForSecondarySorting(gid,data);cgJsData[gid].rateAndCommentNumbers[realId]=data;if(typeof cgJsData[gid].cgJsCountRuser[realId]=="undefined"){cgJsData[gid].cgJsCountRuser[realId]=0;cgJsData[gid].cgJsRatingUser[realId]=0}cgJsData[gid].cgJsCountRuser[realId]=parseInt(cgJsData[gid].cgJsCountRuser[realId])+addVoteR;cgJsData[gid].cgJsRatingUser[realId]=parseInt(cgJsData[gid].cgJsRatingUser[realId])+ratingAdd;var average=data.RatingAverage;for(var key in cgJsData[gid].fullImageDataFiltered){if(!cgJsData[gid].fullImageDataFiltered.hasOwnProperty(key)){break}var firstKey=Object.keys(cgJsData[gid].fullImageDataFiltered[key])[0];if(cgJsData[gid].fullImageDataFiltered[key][firstKey]["id"]==realId){cgJsData[gid].fullImageDataFiltered[key][firstKey]["CountR"]=data.CountR;cgJsData[gid].fullImageDataFiltered[key][firstKey]["Rating"]=data.Rating;cgJsData[gid].fullImageDataFiltered[key][firstKey]["CountRtotal"]=data.CountRtotal;cgJsData[gid].fullImageDataFiltered[key][firstKey]["RatingAverage"]=data.RatingAverage;cgJsData[gid].fullImageDataFiltered[key][firstKey]["RatingTotal"]=data.RatingTotal;cgJsData[gid].fullImageDataFiltered[key][firstKey]["RatingAverageForSecondarySorting"]=data.RatingAverageForSecondarySorting;cgJsData[gid].fullImageDataFiltered[key][firstKey]["RatingTotalForSecondarySorting"]=data.RatingTotalForSecondarySorting;if(!ratingFileData){for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("cgJsData[gid].fullImageDataFiltered[key][firstKey]['CountR"+rCount+"'] = data.CountR"+rCount+";")}}break}}cgJsClass.gallery.rating.updateData(gid,cgJsData[gid].rateAndCommentNumbers,true)}if(HideUntilVote==1&&allVotesUsed==true&&!onlyLoggedInUserImages){var stars=cgJsClass.gallery.rating.setStars(average,gid);if(average>0){var countRtoSet=data.CountR}else{var countRtoSet=0}jQuery(cgJsClass.gallery.rating.generateRatingDiv(realId,countRtoSet,imageObject,false,gid,stars,average,isFromSingleView,isSomeMessageWillBeShown));if(VotesInTimeExceeded===true){cgJsClass.gallery.function.message.show(gid,cgJsData[gid].options.pro.VotesInTimeIntervalAlertMessage)}return}if(HideUntilVote==1&&!onlyLoggedInUserImages){if(cgJsData[gid].cgJsCountRuser[realId]==0||typeof cgJsData[gid].cgJsCountRuser[realId]=="undefined"){var stars=cgJsClass.gallery.rating.setStars(0,gid);jQuery(cgJsClass.gallery.rating.generateRatingDiv(realId,"",imageObject,firstLoad,gid,stars,average,isFromSingleView,isSomeMessageWillBeShown))}else{var stars=cgJsClass.gallery.rating.setStars(average,gid);jQuery(cgJsClass.gallery.rating.generateRatingDiv(realId,data.CountRtotal,imageObject,firstLoad,gid,stars,average,isFromSingleView,isSomeMessageWillBeShown))}}else{if(data.CountRtotal<1){var stars=cgJsClass.gallery.rating.setStars(0,gid);jQuery(cgJsClass.gallery.rating.generateRatingDiv(realId,0,imageObject,firstLoad,gid,stars,average,isFromSingleView,isSomeMessageWillBeShown))}else{var stars=cgJsClass.gallery.rating.setStars(average,gid);cgJsClass.gallery.rating.generateRatingDiv(realId,data.CountRtotal,imageObject,firstLoad,gid,stars,average,isFromSingleView,isSomeMessageWillBeShown)}}if(VotesInTimeExceeded===true){cgJsClass.gallery.function.message.show(gid,cgJsData[gid].options.pro.VotesInTimeIntervalAlertMessage)}if(!isSetFromSameGalleryId&&addVoteR){cgJsClass.gallery.rating.setRatingFiveStarSameGalleryId(realId,addVoteR,ratingAdd,firstLoad,gid,allVotesUsed,VotesInTimeExceeded,cgJsData[gid].rateAndCommentNumbers[realId],isFromSingleView,isSetUserVoteToNull)}if(ratingFileData){cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_do_not_show_tooltip");setTimeout(function(){cgJsClass.gallery.function.general.tools.tooltip.removeClass("cg_do_not_show_tooltip")},3e3)}};cgJsClass.gallery.rating.getRatingTotal=function(gid,data,realId){var countRtotalMulti=0;for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("countRtotalMulti = countRtotalMulti + parseInt(data['CountR"+rCount+"'])*"+rCount+";")}var addCountRtotalMulti=0;if(cgJsData[gid].options.pro.Manipulate==1){for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("addCountRtotalMulti = addCountRtotalMulti + parseInt(data['addCountR"+rCount+"'])*"+rCount+";")}}var ratingTotal=countRtotalMulti+addCountRtotalMulti;return ratingTotal};cgJsClass.gallery.rating.getRatingTotalPart=function(gid,data,rCount){var countRtotalMulti=0;eval("countRtotalMulti = countRtotalMulti + parseInt(data['CountR"+rCount+"'])*"+rCount+";");var addCountRtotalMulti=0;if(cgJsData[gid].options.pro.Manipulate==1){eval("addCountRtotalMulti = addCountRtotalMulti + parseInt(data['addCountR"+rCount+"'])*"+rCount+";")}var ratingTotal=countRtotalMulti+addCountRtotalMulti;return ratingTotal};cgJsClass.gallery.rating.getCountRpart=function(gid,data,rCount){var countRtotalMulti=0;eval("countRtotalMulti = countRtotalMulti + parseInt(data['CountR"+rCount+"']);");var addCountRtotalMulti=0;if(cgJsData[gid].options.pro.Manipulate==1){eval("addCountRtotalMulti = addCountRtotalMulti + parseInt(data['addCountR"+rCount+"']);")}var countRpart=countRtotalMulti+addCountRtotalMulti;return countRpart};cgJsClass.gallery.rating.getAverage=function(gid,data){var average=data.RatingTotal/data.CountRtotal;if(isNaN(average)){average=0}else{average=Math.round(average*10)/10}return average};cgJsClass.gallery.rating.getAverageForSecondarySorting=function(gid,data){var averageForSecondarySorting=data["RatingAverage"].toString().replace(".","")+"0"+data["CountRtotal"].toString()+"00000";averageForSecondarySorting=averageForSecondarySorting.substr(0,13);averageForSecondarySorting=parseInt(averageForSecondarySorting);return averageForSecondarySorting};cgJsClass.gallery.rating.getCountRtotal=function(gid,data){var countRtotal=0;for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("countRtotal = countRtotal + parseInt(data['CountR"+rCount+"']);")}var addCountRtotal=0;if(cgJsData[gid].options.pro.Manipulate==1){for(var rCount=1;rCount<=cgJsData[gid].options.general.AllowRatingDynamic;rCount++){eval("addCountRtotal = addCountRtotal + parseInt(data['addCountR"+rCount+"']);")}}var countRtotal=countRtotal+addCountRtotal;return countRtotal};cgJsClass.gallery.rating.getRatingTotalForSecondarySorting=function(gid,data){var sumForSecondarySorting=data["RatingTotal"].toString()+"0"+data["CountRtotal"].toString()+"00000";sumForSecondarySorting=parseInt(sumForSecondarySorting);return sumForSecondarySorting};;cgJsClass.gallery.views.initOrderGallery=function(gid,openPage,calledFromUpload,openImage,stepChange,viewChange,randomButtonClicked,sliderView,isCopyUploadToAnotherGallery,isFromFullWindowSliderOrBlogView,isFromCheckStepsCutImageData){if(cgJsData[gid].vars.getJson.length>0&&openPage==false){cgJsClass.gallery.getJson.abortGetJson(gid)}if(cgJsData[gid].vars.isCGalleries){cgJsData[gid].vars.currentLook="thumb"}if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.init(jQuery,gid,openPage,calledFromUpload,openImage,stepChange,viewChange,randomButtonClicked,isCopyUploadToAnotherGallery,false,false,isFromCheckStepsCutImageData);cgJsClass.gallery.views.cloneFurtherImagesStep(gid);return}if(cgJsData[gid].vars.currentLook=="row"){cgJsClass.gallery.rowLogic.init(jQuery,gid,openPage,calledFromUpload,openImage,stepChange,viewChange,randomButtonClicked,isCopyUploadToAnotherGallery,false,isFromFullWindowSliderOrBlogView);cgJsClass.gallery.views.cloneFurtherImagesStep(gid);return}if(cgJsData[gid].vars.currentLook=="height"){cgJsClass.gallery.heightLogic.init(jQuery,gid,openPage,calledFromUpload,openImage,stepChange,viewChange,randomButtonClicked,isCopyUploadToAnotherGallery,false,isFromFullWindowSliderOrBlogView);cgJsClass.gallery.views.cloneFurtherImagesStep(gid);return}if(cgJsData[gid].vars.currentLook=="thumb"){cgJsClass.gallery.thumbLogic.init(jQuery,gid,openPage,calledFromUpload,openImage,stepChange,viewChange,randomButtonClicked,isCopyUploadToAnotherGallery,false,isFromFullWindowSliderOrBlogView);cgJsClass.gallery.views.cloneFurtherImagesStep(gid);return}if(cgJsData[gid].vars.currentLook=="slider"){cgJsClass.gallery.thumbLogic.init(jQuery,gid,openPage,calledFromUpload,openImage,stepChange,viewChange,randomButtonClicked,isCopyUploadToAnotherGallery,false,isFromFullWindowSliderOrBlogView);return}};cgJsClass.gallery.views.checkOrderGallery=function(gid){if(!cgJsData[gid].vars.currentLook){for(var property in cgJsData[gid].vars.orderGalleries){if(!cgJsData[gid].vars.orderGalleries.hasOwnProperty(property)){break}if(cgJsData[gid].vars.orderGalleries[property]=="SliderLookOrder"&&cgJsData[gid].options.general.SliderLook=="1"){cgJsData[gid].vars.currentLook="slider";break}if(cgJsData[gid].vars.orderGalleries[property]=="ThumbLookOrder"&&cgJsData[gid].options.general.ThumbLook=="1"){cgJsData[gid].vars.currentLook="thumb";break}if(cgJsData[gid].vars.orderGalleries[property]=="HeightLookOrder"&&cgJsData[gid].options.general.HeightLook=="1"){cgJsData[gid].vars.currentLook="height";break}if(cgJsData[gid].vars.orderGalleries[property]=="RowLookOrder"&&cgJsData[gid].options.general.RowLook=="1"){cgJsData[gid].vars.currentLook="height";break}if(cgJsData[gid].vars.orderGalleries[property]=="BlogLookOrder"&&cgJsData[gid].options.visual.BlogLook=="1"){cgJsData[gid].vars.currentLook="blog";break}}}};;cgJsClass.gallery.views.cloneFurtherImagesStep=function(gid,isInit){return;var $mainCGdiv=jQuery("#mainCGdiv"+gid);if($mainCGdiv.find(".cg_further_images_container").first().is(":visible")){if(cgJsData[gid].vars.currentLook=="slider"){return}var heightCheck=jQuery(window).height()/3;if($mainCGdiv.find("#mainCGallery"+gid).height()>heightCheck){if($mainCGdiv.find(".cg_further_images_container").length>1){$mainCGdiv.find(".cg_further_images_container").each(function(index){if(index>=1){jQuery(this).remove()}})}$mainCGdiv.find(".cg_further_images_container").first().clone().removeAttr("id").appendTo($mainCGdiv).find(".cg_further_images").addClass("cg_cloned")}else{if(Object.keys(cgJsData[gid].fullImageDataFiltered).length<1){$mainCGdiv.find(".cg_further_images_container:first-child").hide();$mainCGdiv.find(".cg_further_images_container:last-child").remove()}else{$mainCGdiv.find(".cg_further_images_container:last-child").remove();if(cgJsClass.gallery.vars.categoryClicked==false&&cgJsClass.gallery.vars.inputWritten==false){jQuery("#cgFurtherImagesContainerDiv"+gid).cgGoTo()}}}}};;cgJsClass.gallery.views.close=function(gid,closeAnotherGallery,realId,isNoOpenedRealIdReset){if(typeof gid=="undefined"){gid=cgJsClass.gallery.vars.openedGallery}if(cgJsData[gid].vars.currentLook=="blog"){cgJsData[gid].vars.openedGalleryImageOrder=null;cgJsClass.gallery.vars.openedRealId=0;cgJsData[gid].vars.openedRealId=0;if(closeAnotherGallery!=true){cgJsClass.gallery.vars.openedGallery=null}return}var cgCenterDiv=cgJsData[gid].vars.cgCenterDiv;var FbLike=cgJsData[gid].options.general.FbLike;var FbLikeGallery=cgJsData[gid].options.general.FbLikeGallery;if(FbLike>=1&&FbLikeGallery>=1&&cgJsData[gid].vars.openedRealId>=1){var fbContent=cgCenterDiv.find("#cgCenterImageFbLikeDiv"+gid).html();cgJsData[gid].imageObject[cgJsData[gid].vars.openedRealId].find(".cg_gallery_facebook_div").html(fbContent).removeClass("cg_hide")}cgCenterDiv.css("display","none");cgJsData[gid].vars.openedGalleryImageOrder=null;if(!isNoOpenedRealIdReset){cgJsClass.gallery.vars.openedRealId=0;cgJsData[gid].vars.openedRealId=0}if(closeAnotherGallery!=true){cgJsClass.gallery.vars.openedGallery=null}cgJsClass.gallery.views.cloneFurtherImagesStep(gid)};cgJsClass.gallery.views.closeCenterDiv=function(gid){return;if(jQuery(".cgCenterDiv").is(":visible")){jQuery(".cgCenterDiv").css("display","none");if(typeof gid!="undefined"){cgJsData[gid].vars.openedGalleryImageOrder=null}else{jQuery(".cgCenterDiv").each(function(){var gid=jQuery(this).attr("data-cg-gid");cgJsData[gid].vars.openedGalleryImageOrder=null})}}};;cgJsClass.gallery.views.singleView={openImage:function($,order,openComment,gid,direction,isGalleryOpened,isGalleryOpenedSliderLook,isBlogView,isResizeBlogViewOnly,isFirstScrollOrder,blogViewImagesLoadedCount,isFromTopScroll,fullWindowBlogLogicRealIdToShow,BlogLookFullWindowInitiated){if(cgJsData[gid].vars.blogViewImagesLoaded&&!isResizeBlogViewOnly){if(isBlogView){cgJsData[gid].vars.cgCenterDiv.addClass("cg_hide_cg_center_div")}return}var cgJsDataGidImageLength=Object.keys(cgJsData[gid].image).length;if(cgJsData[gid].vars.currentLook=="blog"&&!isResizeBlogViewOnly&&!isFirstScrollOrder&&blogViewImagesLoadedCount){if(blogViewImagesLoadedCount%10===0&&order>10&&cgJsDataGidImageLength!=21){cgJsData[gid].vars.blogViewImagesLoaded=true;cgJsData[gid].vars.blogViewImagesLoadedGid=gid;cgJsData[gid].vars.blogViewImagesLoadedLastOrder=order-1;cgJsData[gid].vars.blogViewImagesLoopOneTimeLoaded=true;if(isFromTopScroll&&order!=0){cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.removeClass("cg_hide")}else{cgJsData[gid].vars.cgLdsDualRingCGcenterDivLazyLoader.removeClass("cg_hide")}if(isBlogView){cgJsData[gid].vars.cgCenterDiv.addClass("cg_hide_cg_center_div")}return"break"}}if(cgJsData[gid].vars.galleryShortCodeEntryId&&cgJsData[gid].options.visual["ShowBackToGalleryButton"]){cgJsData[gid].vars.mainCGdiv.find(".mainCGBackToGalleryButtonHrefContainer").removeClass("cg_hide")}cgJsData[gid].vars.mainCGallery.removeClass("cg_thumb_view cg_height_view cg_slider");cgJsData[gid].vars.blogViewImagesLoadedLastOrder=order;var noSlideOut=false;var gidForCenterDivElements=gid;var firstKey=Object.keys(cgJsData[gid].image[order])[0];var realId=cgJsData[gid].image[order][firstKey]["id"];var isSlideOutAppend=false;if(isBlogView){gidForCenterDivElements=gid+"-"+order;if(order+1==cgJsDataGidImageLength){cgJsData[gid].vars.blogViewImagesLoadedAllImages=true}else{cgJsData[gid].vars.blogViewImagesLoadedAllImages=false}}if(cgJsData[gid].options.general.FullSizeImageOutGallery==1||cgJsData[gid].options.general.OnlyGalleryView==1){noSlideOut=true}if(noSlideOut==false){}if(cgJsClass.gallery.vars.openedGallery!=null){if(cgJsClass.gallery.vars.openedGallery!=gid){}}cgJsClass.gallery.vars.openedGallery=gid;cgJsClass.gallery.vars.showImageClicked=true;var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}if(isBlogView){sliderView=true}if(sliderView&&!isBlogView){cgJsData[gid].vars.mainCGallery.addClass("cg_slider").removeClass("cg_hide")}else{cgJsData[gid].vars.mainCGallery.removeClass("cg_slider")}var windowHeight=jQuery(window).height();var cgCenterDivWidth=cgJsData[gid].vars.widthmainForCalculation;if(sliderView&&cgJsData[gid].vars.widthmainForCalculation>cgJsClass.gallery.vars.maxWidthBlogView){cgCenterDivWidth=cgJsClass.gallery.vars.maxWidthBlogView}cgCenterDivWidth=cgCenterDivWidth-2;var scalingMultiplicatorCenterDiv=9;if(windowHeight<640){scalingMultiplicatorCenterDiv=4}else if(windowHeight<700){scalingMultiplicatorCenterDiv=4.5}else if(windowHeight<800){scalingMultiplicatorCenterDiv=5}else if(windowHeight<900){scalingMultiplicatorCenterDiv=5.4}else if(windowHeight<1e3){scalingMultiplicatorCenterDiv=5.9}else if(windowHeight<1100){scalingMultiplicatorCenterDiv=6.3}else if(windowHeight<1200){scalingMultiplicatorCenterDiv=6.7}else{scalingMultiplicatorCenterDiv=7.1;if(windowHeight>2e3){scalingMultiplicatorCenterDiv=9}}var scalingMultiplicatorForDivImageParent=2.5;if(cgCenterDivWidth>=400){scalingMultiplicatorForDivImageParent=3}if(cgCenterDivWidth>=700){scalingMultiplicatorForDivImageParent=4}if(cgCenterDivWidth>=800){scalingMultiplicatorForDivImageParent=4.5}if(cgCenterDivWidth>=1e3){scalingMultiplicatorForDivImageParent=5}if(cgCenterDivWidth>=1200){scalingMultiplicatorForDivImageParent=5.5}if(cgCenterDivWidth>=1400&&sliderView==false){scalingMultiplicatorForDivImageParent=6}if(cgCenterDivWidth>=1600&&sliderView==false){scalingMultiplicatorForDivImageParent=6.5}if(cgCenterDivWidth>=1800&&sliderView==false){scalingMultiplicatorForDivImageParent=7}if(cgCenterDivWidth>=1900&&sliderView==false){scalingMultiplicatorForDivImageParent=7}if(cgJsClass.gallery.vars.isMobile==true){if(screen.height>=screen.width){scalingMultiplicatorForDivImageParent=9}else{scalingMultiplicatorForDivImageParent=8.5}}else if(sliderView&&cgJsClass.gallery.vars.fullwindow){if(windowHeight<640){scalingMultiplicatorForDivImageParent=4}else if(windowHeight<700){scalingMultiplicatorForDivImageParent=4.5}else if(windowHeight<800){scalingMultiplicatorForDivImageParent=5}else if(windowHeight<900){scalingMultiplicatorForDivImageParent=5.4}else if(windowHeight<1e3){scalingMultiplicatorForDivImageParent=5.9}else if(windowHeight<1100){scalingMultiplicatorForDivImageParent=6.3}else if(windowHeight<1200){scalingMultiplicatorForDivImageParent=6.7}else{scalingMultiplicatorForDivImageParent=7.1;if(windowHeight>2e3){scalingMultiplicatorForDivImageParent=7.3}}}if(cgJsClass.gallery.vars.fullwindow){var setHeightToMakeDivStable=windowHeight/10*scalingMultiplicatorCenterDiv;var cgCenterImageParentHeight=windowHeight/10*scalingMultiplicatorForDivImageParent}else{var setHeightToMakeDivStable=windowHeight/10*scalingMultiplicatorCenterDiv;var cgCenterImageParentHeight=windowHeight/10*scalingMultiplicatorForDivImageParent}if(true){setHeightToMakeDivStable=windowHeight;cgCenterImageParentHeight=windowHeight/5*4}var ImgType=cgJsData[gid].vars.rawData[realId].ImgType;if(ImgType=="twt"||ImgType=="tkt"||ImgType=="inst"){if(cgCenterImageParentHeight<740){cgCenterImageParentHeight=740}}cgJsData[gid].vars.cgCenterImageParentHeight=cgCenterImageParentHeight;var cgCenterDiv=cgJsData[gid].vars.cgCenterDiv;cgCenterDiv.removeClass("cg_social_consent_required");var originalCgCenterDiv=cgCenterDiv;if(sliderView||!isBlogView){cgCenterDiv.removeClass("cg_hide");cgCenterDiv.removeClass("cg_blog_view_visible")}else{cgCenterDiv.removeClass("cg_blog_view_visible")}if(isBlogView){cgCenterDiv.addClass("cg_hide_cg_center_div")}else{cgCenterDiv.removeClass("cg_hide_cg_center_div")}cgCenterDiv.removeClass("cg_fade_in");if(cgJsData[gid].vars.currentLook=="slider"){cgCenterDiv.find(".cg-center-slider-position-info").text(parseInt(order)+1+" "+cgJsClass.gallery.language[gid].of+" "+Object.keys(cgJsData[gid].image).length)}if(isBlogView){if(isResizeBlogViewOnly){cgCenterDiv=cgJsData[gid].cgCenterDivBlogObject[realId];cgJsData[gid].cgCenterDivBlogObjects.push(cgCenterDiv);originalCgCenterDiv.addClass("cg_hide_cg_center_div")}else{var originalCgCenterDiv=cgCenterDiv;cgCenterDiv=cgCenterDiv.clone();cgCenterDiv.removeClass("cg_hide cg_hide_cg_center_div");originalCgCenterDiv.addClass("cg_hide_cg_center_div");if(BlogLookFullWindowInitiated){cgCenterDiv.addClass("cg_visibility_hidden")}cgJsData[gid].cgCenterDivBlogObject[realId]=cgCenterDiv;cgJsData[gid].cgCenterDivBlogObjects.push(cgCenterDiv);if(!isFromTopScroll&&fullWindowBlogLogicRealIdToShow){cgCenterDiv.addClass("cg_visibility_hidden")}}cgCenterDiv.addClass("cgCenterDivForBlogView");cgCenterDiv.removeClass("cg_fade_in");cgCenterDiv.attr("data-cg-real-id",+realId);cgCenterDiv.find("#cgCenterImageFullwindow"+gid).attr("data-cg-real-id",+realId);if(order==0){cgCenterDiv.addClass("cg_border_top_unset_important");cgJsData[gid].vars.firstOrderRealIdBlogView=realId}if(!isResizeBlogViewOnly){cgCenterDiv.attr("id",cgCenterDiv.attr("id")+"-"+order);cgCenterDiv.attr("data-cg-gid-with-order",gid+"-"+order);cgCenterDiv.attr("data-cg-order",order)}if(!isResizeBlogViewOnly){cgCenterDiv.find("*").each(function(){var $element=$(this);if($element.attr("id")){$element.attr("id",$element.attr("id")+"-"+order)}})}cgCenterDiv.find(".cg-center-arrow").remove();if(!isResizeBlogViewOnly){if(isFromTopScroll){if(cgJsData[gid].vars.cgFurtherImagesContainerAsTextTop){cgCenterDiv.insertBefore(cgJsData[gid].vars.mainCGallery.find(".cgCenterDiv.cgCenterDivForBlogView").first())}else{cgCenterDiv.insertBefore(cgJsData[gid].vars.mainCGallery.find(".cgCenterDiv.cgCenterDivForBlogView").first())}}else{cgJsData[gid].vars.mainCGallery.append(cgCenterDiv)}cgCenterDiv.addClass("cg_fade_in")}}if(!isResizeBlogViewOnly){cgJsClass.gallery.views.singleViewFunctions.removeEmbed(cgCenterDiv)}cgCenterDiv.attr("data-cg-real-id",realId);cgCenterDiv.attr("data-cg-gid-for-center-div-elements",gidForCenterDivElements);if(sliderView&&cgJsData[gid].vars.currentLook!="blog"){cgCenterDiv.find("#cgCenterGoUpButton"+gidForCenterDivElements).addClass("cg_hide")}else{if(cgJsData[gid].vars.currentLook=="blog"){if(order==0){cgCenterDiv.find("#cgCenterGoUpButton"+gidForCenterDivElements).addClass("cg_hide")}else{cgCenterDiv.find("#cgCenterGoUpButton"+gidForCenterDivElements).removeClass("cg_hide")}}else{cgCenterDiv.find("#cgCenterGoUpButton"+gidForCenterDivElements).removeClass("cg_hide")}}if(cgJsData[gid].vars.centerWhite){cgCenterDiv.addClass("cg_center_white")}else{cgCenterDiv.addClass("cg_center_black")}if(cgJsData[gid].vars.currentLook=="slider"){cgJsData[gid].vars.mainCGdiv.addClass("cg-slider-view");cgCenterDiv.find(".cg-center-div-helper").addClass("cg-slider-view")}else{cgJsData[gid].vars.mainCGdiv.removeClass("cg-slider-view");cgCenterDiv.find(".cg-center-div-helper").removeClass("cg-slider-view")}if(cgJsData[gid].vars.currentLook!="slider"&&cgJsClass.gallery.vars.fullwindow){cgCenterDiv.css("width",cgCenterDivWidth+"px")}if(sliderView&&cgJsClass.gallery.vars.fullwindow){cgCenterDiv.css("width",cgCenterDivWidth+"px")}if(!cgJsClass.gallery.vars.fullwindow){cgCenterDiv.css("width","100%")}if(sliderView&&cgJsClass.gallery.vars.fullwindow&&!isBlogView){cgCenterDiv.addClass("cg_margin_bottom_0");cgJsData[gid].vars.mainCGdiv.addClass("cg_margin_bottom_0 cg_padding_bottom_0")}else{cgCenterDiv.removeClass("cg_margin_bottom_0");cgJsData[gid].vars.mainCGdiv.removeClass("cg_margin_bottom_0 cg_padding_bottom_0")}if(isBlogView){if(order+1==cgJsDataGidImageLength){}}if(!isResizeBlogViewOnly){if(cgJsData[gid].vars.translateX){cgCenterDiv.find("#cgCenterImageDiv"+gidForCenterDivElements).show();var minus="";if(typeof direction=="undefined"){direction="right"}if(direction=="left"){minus="-"}cgCenterDiv.find("#cgCenterImage"+gidForCenterDivElements).addClass("cg_hide cg_translateX").removeClass("cg_transition")}else{cgCenterDiv.find("#cgCenterImageDiv"+gidForCenterDivElements).show();cgCenterDiv.find("#cgCenterImage"+gidForCenterDivElements).hide()}}if(!cgJsData[gid].vars.cgCenterDivLastHeight){cgCenterDiv.css("min-height",setHeightToMakeDivStable+"px");cgCenterDiv.css("height","unset");if(sliderView){cgCenterDiv.css("height",setHeightToMakeDivStable+"px")}}else{cgCenterDiv.css("min-height",""+String(cgJsData[gid].vars.cgCenterDivLastHeight)+"px");cgCenterDiv.css("height","unset");if(sliderView){cgCenterDiv.css("height",""+String(cgJsData[gid].vars.cgCenterDivLastHeight)+"px")}}var spaceForShowExif=0;if(cgJsData[gid].options.pro.ShowExif==1){spaceForShowExif=85;cgCenterImageParentHeight=cgCenterImageParentHeight+spaceForShowExif}cgJsData[gid].vars.spaceForShowExif=spaceForShowExif;order=parseInt(order);if(cgJsClass.gallery.vars.openedGallery!=gid&&cgJsClass.gallery.vars.openedGallery!=null){cgJsClass.gallery.views.close(cgJsClass.gallery.vars.openedGallery,true)}cgJsClass.gallery.vars.openedGallery=gid;cgJsClass.gallery.vars.thereIsImageInfo=false;if(!isBlogView){cgCenterDiv.find(".cg-center-image-div").hide()}var PicsPerSite=parseInt(cgJsData[gid].options.general.PicsPerSite);var rowId=cgJsData[gid].image[order][firstKey]["rowid"];var imageObject=cgJsData[gid].imageObject[realId];if(sliderView&&!isBlogView){for(var propertyName in cgJsData[gid].imageObject){if(!cgJsData[gid].imageObject.hasOwnProperty(propertyName)){break}cgJsData[gid].imageObject[propertyName].removeClass("cg_selected")}imageObject.addClass("cg_selected")}var ShowNickname=cgJsData[gid].options.pro.ShowNickname;var ShowProfileImage=cgJsData[gid].options.pro.ShowProfileImage;cgCenterDiv.removeClass("cg-center-div-alternative-file-type cg-center-div-alternative-file-type-audio cg-center-div-alternative-file-type-video");var selectedFile=cgJsData[gid].vars.rawData[realId];var ImgType=selectedFile.ImgType;var NamePic=selectedFile.NamePic;var originalSource=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId]["guid"]);var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId,selectedFile);var isImageType=cgJsClass.gallery.function.general.tools.isImageType(gid,realId);var $cgCenterImageParent=cgCenterDiv.find("#cgCenterImageParent"+gidForCenterDivElements);$cgCenterImageParent.removeClass("cg-center-image-parent-small-image");if(!cgJsData[gid].vars.rawData[realId].MultipleFilesParsed&&isImageType&&isBlogView){$cgCenterImageParent.addClass("cg-one-image-only")}if(!isResizeBlogViewOnly){$cgCenterImageParent.removeClass("cg-center-image-parent-multiple-files-clicked")}$cgCenterImageParent.find(".cg-center-image-parent-multiple-files-nav").remove();if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){$cgCenterImageParent.addClass("cg-center-image-parent-multiple-files");if(!isResizeBlogViewOnly){cgCenterDiv.find(".cg-center-image-parent-multiple-files-nav").remove();var divString='<div class="cg-center-image-parent-multiple-files-nav">';for(var rCount=1;rCount<=Object.keys(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed).length;rCount++){if(rCount==selectedFile.selectedOrder){divString+='<div class="cg-center-image-parent-multiple-files-nav-point cg-center-image-parent-multiple-files-nav-point-active" data-cg-order="'+rCount+'"></div>'}else{divString+='<div class="cg-center-image-parent-multiple-files-nav-point" data-cg-order="'+rCount+'"></div>'}}divString+="</div>";$(divString).insertBefore(cgCenterDiv.find(".cg-center-image-rating-and-buttons-div"))}var heightToSet=220;var highestHeight=220;var widthHighestHeight=undefined;var heightImage=undefined;var widthImage=undefined;for(var multipleFilesOrder in cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){if(!cgJsData[gid].vars.rawData[realId].MultipleFilesParsed.hasOwnProperty(multipleFilesOrder)){break}var ImgTypeMultiple=cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].ImgType;if(cgJsClass.gallery.ecommerce.functions.checkIfVideoForSale(ImgTypeMultiple,gid,realId,multipleFilesOrder)){continue}if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].Height&&((cgJsData[gid].image[order][firstKey].rThumb=="90"||cgJsData[gid].image[order][firstKey].rThumb=="270")&&cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].Width>highestHeight||cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].Height>highestHeight)){if(cgJsData[gid].vars.rawData[realId]["rThumb"]=="90"||cgJsData[gid].vars.rawData[realId]["rThumb"]=="270"){widthImage=cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].Height;heightImage=cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].Width}else{heightImage=cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].Height;widthImage=cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].Width}var cgCenterImageParentWidth=cgCenterDivWidth-parseInt(cgCenterDiv.css("padding-right"));var widthCgCenterImageDiv=cgCenterImageParentHeight*widthImage/heightImage;if(widthCgCenterImageDiv>cgCenterImageParentWidth){widthCgCenterImageDiv=cgCenterImageParentWidth;var heightToCheck=widthCgCenterImageDiv*heightImage/widthImage;if(heightToCheck>highestHeight){highestHeight=heightToCheck;widthHighestHeight=widthCgCenterImageDiv}}else{var heightToCheck=heightImage;if(heightToCheck>highestHeight){if(heightToCheck>cgCenterImageParentHeight){highestHeight=cgCenterImageParentHeight;widthHighestHeight=cgCenterImageParentHeight*widthImage/heightImage}else{highestHeight=heightToCheck;widthHighestHeight=widthImage}}}}}if(heightImage&&highestHeight){var heightToCheck=220+spaceForShowExif;if(highestHeight>heightToCheck&&highestHeight<=cgCenterImageParentHeight){heightToSet=highestHeight}else if(highestHeight<cgCenterImageParentHeight){heightToSet=heightToCheck}else{heightToSet=cgCenterImageParentHeight}}debugger;if(heightToSet<220){heightToSet=220}if(ImgType=="twt"||ImgType=="tkt"||ImgType=="inst"){if(heightToSet<740){heightToSet=740}}if(ImgType=="ytb"){heightToSet=cgCenterImageParentHeight}cgCenterImageParentHeight=heightToSet;cgJsData[gid].vars.cgCenterImageParentHeight=cgCenterImageParentHeight;var $cgCenterImageNextFile=$cgCenterImageParent.find(".cg-center-image-next-file");var $cgCenterImagePrevFile=$cgCenterImageParent.find(".cg-center-image-prev-file");$cgCenterImageNextFile.attr({"data-cg-real-id":realId,"data-cg-img-type":ImgType});$cgCenterImagePrevFile.attr({"data-cg-real-id":realId,"data-cg-img-type":ImgType});if(!isResizeBlogViewOnly){cgJsClass.gallery.views.singleViewFunctions.showNextPrevFileArrows(selectedFile.selectedOrder,gid,realId,$cgCenterImageNextFile,$cgCenterImagePrevFile)}$cgCenterImageParent.attr("data-cg-multiple-files-height-to-set",heightToSet);$cgCenterImageParent.css({"min-height":heightToSet+"px","max-height":heightToSet+"px",height:heightToSet+"px"})}else{cgCenterDiv.find(".cg-center-image-prev-file").addClass("cg_hide");cgCenterDiv.find(".cg-center-image-next-file").addClass("cg_hide");cgCenterDiv.find(".cg-center-image-parent-multiple-files-nav").remove();$cgCenterImageParent.removeClass("cg-center-image-parent-multiple-files");$cgCenterImageParent.removeClass("cg-center-image-parent-multiple-files-clicked");if(ImgType=="twt"||ImgType=="tkt"||ImgType=="inst"){$cgCenterImageParent.css({"min-height":"740px","max-height":"740px",height:"740px"})}else{$cgCenterImageParent.css({"min-height":"unset","max-height":"unset",height:"unset"})}}var FbLike=cgJsData[gid].options.general.FbLike;var FbLikeGallery=cgJsData[gid].options.general.FbLikeGallery;if(FbLike>=1&&FbLikeGallery>=1&&cgJsData[gid].vars.openedRealId>=1&&!isBlogView&&!isAlternativeFileType){if(!cgJsData[gid].vars.isOnlyGalleryNoVoting||cgJsData[gid].vars.isOnlyGalleryNoVoting&&cgJsData[gid].vars.RatingVisibleForGalleryNoVoting){if(sliderView==true){cgJsData[gid].imageObject[cgJsData[gid].vars.openedRealId].find(".cg_gallery_facebook_div").html(fbContent).addClass("cg_hide")}else{cgJsData[gid].imageObject[cgJsData[gid].vars.openedRealId].find(".cg_gallery_facebook_div").html(fbContent).removeClass("cg_hide")}}}cgJsClass.gallery.vars.openedGalleryImageOrder=order;cgJsData[gid].vars.openedGalleryImageOrder=order;var cgRotationThumbNumber=cgJsData[gid].image[order][firstKey].rThumb;var $cgCenterImage=cgCenterDiv.find(".cg-center-image");$cgCenterImage.removeClass("cg_background_unset");$cgCenterImage.css("top","");$cgCenterImage.removeClass("cg-center-image-alternative-file-type cg-center-image-alternative-file-type-audio cg_skeleton_loader");if(sliderView){$cgCenterImage.removeClass("cg-center-image-pdf");$cgCenterImage.removeClass("cg-center-image-zip");$cgCenterImage.removeClass("cg-center-image-txt");$cgCenterImage.removeClass("cg-center-image-doc");$cgCenterImage.removeClass("cg-center-image-docx");$cgCenterImage.removeClass("cg-center-image-xls");$cgCenterImage.removeClass("cg-center-image-xlsx");$cgCenterImage.removeClass("cg-center-image-csv");$cgCenterImage.removeClass("cg-center-image-mp3");$cgCenterImage.removeClass("cg-center-image-m4a");$cgCenterImage.removeClass("cg-center-image-ogg");$cgCenterImage.removeClass("cg-center-image-wav");$cgCenterImage.removeClass("cg-center-image-mp4");$cgCenterImage.removeClass("cg-center-image-mov");$cgCenterImage.removeClass("cg-center-image-avi");$cgCenterImage.removeClass("cg-center-image-wmv");$cgCenterImage.removeClass("cg-center-image-webm");$cgCenterImage.removeClass("cg-center-image-ppt");$cgCenterImage.removeClass("cg-center-image-pptx");$cgCenterImage.removeClass("cg-center-image-con-entry");cgJsClass.gallery.views.singleViewFunctions.removeClassEmbed($cgCenterImage);$cgCenterImage.find(".cg-center-image-name").remove();$cgCenterImage.find(".cg-center-image-audio").remove();$cgCenterImage.find(".cg-center-image-video").remove()}if(ImgType=="con"){$cgCenterImage.addClass("cg-center-image-con-entry");var inputFieldId=cgJsData[gid].options.visual["Field1IdGalleryView"];if(cgJsData[gid].vars.showCategories&&inputFieldId==cgJsData[gid].vars.categoriesUploadFormId){var categoryId=cgJsData[gid].vars.rawData[realId]["Category"];if(categoryId>0&&cgJsData[gid].vars.categories[categoryId]){var content=cgJsData[gid].vars.categories[categoryId].Name}else{var content=cgJsClass.gallery.language[gid].Other}content=content.replace(/\\/g,"");content=jQuery("<textarea />").html(content).text();$cgCenterImageParent.removeClass("cg_hide");$cgCenterImage.removeAttr("style");$cgCenterImage.addClass("cg-center-image-con-entry");cgCenterDiv.find(".cg-center-image-con-entry-content").remove();$cgCenterImage.prepend('<div class="cg-center-image-con-entry-content">'+content+"</div>")}else if(inputFieldId&&cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.info[realId][inputFieldId]&&cgJsData[gid].vars.info[realId][inputFieldId]["field-content"]){$cgCenterImageParent.removeClass("cg_hide");$cgCenterImage.removeAttr("style");$cgCenterImage.addClass("cg-center-image-con-entry");cgCenterDiv.find(".cg-center-image-con-entry-content").remove();$cgCenterImage.prepend('<div class="cg-center-image-con-entry-content">'+cgJsData[gid].vars.info[realId][inputFieldId]["field-content"]+"</div>")}else{$cgCenterImageParent.addClass("cg_hide")}cgCenterDiv.find(".cg-copy-original-file-link").addClass("cg_hide");cgCenterDiv.find(".cg-forward-original-file").addClass("cg_hide")}else if(cgJsClass.gallery.function.general.tools.isEmbed(gid,realId)){cgJsClass.gallery.views.singleViewFunctions.setEmbed(gid,realId,ImgType,$cgCenterImage,$cgCenterImageParent,cgCenterDiv,cgCenterDivWidth,cgCenterImageParentHeight)}else{$cgCenterImageParent.removeClass("cg_hide")}if(isAlternativeFileType){cgJsClass.gallery.views.singleViewFunctions.setAlternativeFileTypeOrVideo(gid,realId,$cgCenterImage,ImgType,originalSource,NamePic,isAlternativeFileType,cgCenterDiv,isResizeBlogViewOnly)}$cgCenterImage.attr("data-cg-real-id",realId);var cgCenterImageFullwindow=cgCenterDiv.find("#cgCenterImageFullwindow"+gidForCenterDivElements);if(isBlogView||sliderView){if(cgJsClass.gallery.vars.fullwindow){cgCenterImageFullwindow.attr("data-cg-tooltip",cgJsClass.gallery.language[gid].CloseView)}else{cgCenterImageFullwindow.attr("data-cg-tooltip",cgJsClass.gallery.language[gid].FullWindow)}}if(!isResizeBlogViewOnly){if(sliderView){}else{}if(cgJsData[gid].options.visual["EnableEmojis"]!=1){cgCenterDiv.find(".cg-emojis-add").addClass("cg_hide")}cgCenterDiv.find("#cgCenterImageClose"+gidForCenterDivElements).addClass("cg_hide");if(cgJsClass.gallery.vars.fullwindow&&cgJsData[gid].options.visual["ImageViewFullScreen"]==1){cgCenterDiv.find(".cg-header-controls-show-only-full-window").removeClass("cg_hide");cgCenterImageFullwindow.attr("data-cg-real-id",realId).removeClass("cg_hide")}else{cgCenterDiv.find(".cg-header-controls-show-only-full-window").addClass("cg_hide")}cgCenterDiv.attr("data-cg-cat-id",cgJsData[gid].image[order][firstKey]["Category"]);cgCenterDiv.find(".cg-center-image-comments-div-enter").addClass("cg_hide");cgCenterDiv.find(".cg-fullwindow-configuration-button").addClass("cg_hide_override");cgCenterDiv.find(".cg-gallery-upload").addClass("cg_hide_override");cgCenterDiv.find(".cg_switch_colors").addClass("cg_hide_override");cgCenterDiv.find(".cg-fullscreen-button").addClass("cg_hide_override");cgCenterDiv.find(".cg-inside-center-image-div").addClass("cg_hide_override");cgCenterDiv.find(".cg-center-go-up-button").addClass("cg_hide_override");cgCenterDiv.find(".cg-top-bottom-arrow").addClass("cg_hide");cgCenterDiv.find("#cgCenterImageCommentsDiv"+gidForCenterDivElements).addClass("cg_hide");cgCenterDiv.find("#cgCenterImageCommentsDivParentParent"+gidForCenterDivElements).addClass("cg_hide");cgCenterDiv.find(".cg-center-image-info-div-parent-padding").removeClass("cg-center-image-info-div-parent-padding");cgCenterDiv.find(".cg-center-image-info-info-separator").addClass("cg_hide");cgCenterDiv.find(".cg-center-image-comments-div-parent-parent").addClass("cg_hide");cgCenterDiv.find("#cgCenterImageExifData"+gidForCenterDivElements).addClass("cg_hide").find(".cg-exif").addClass("cg_hide");cgCenterDiv.find(".cg-center-image-comments-div-show-more.cg-center-image-comments-div-show-more-info").attr("data-cg-tooltip",cgJsClass.gallery.language[gid].ShowMoreInfo).addClass("cg_hide");cgCenterDiv.find(".cg-center-image-comments-div-show-more.cg-center-image-comments-div-show-more-comments").attr("data-cg-tooltip",cgJsClass.gallery.language[gid].ShowMoreComments).addClass("cg_hide");cgCenterDiv.find(".cg-center-image-info-div-container").removeClass("cg-center-image-comments-div-show-more-available cg-center-image-show-more-expanded");cgCenterDiv.find(".cg-center-image-info-div-parent-parent").removeClass("cg-center-image-show-more-expanded");cgCenterDiv.find(".cg-center-image-comments-div-parent").removeClass("cg-center-image-comments-div-show-more-available cg-center-image-show-more-expanded");cgCenterDiv.find(".cg-center-image-comments-div-parent-parent").removeClass("cg-center-image-show-more-expanded");cgCenterDiv.find(".cg-center-image-comments-div-show-more").removeClass("cg-center-image-show-more-expanded cg_edit_started");if(cgJsData[gid].vars.isOnlyGalleryEcommerce&&cgJsData[gid].vars.rawData[realId].ecommerceData){var priceSplitted=cgJsData[gid].vars.rawData[realId].ecommerceData["Price"].split(".");var priceSymbol=cgJsClass.gallery.vars.ecommerce.currenciesArray[cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort];cgCenterDiv.find(".cg-center-sale-price-left").text(cgJsClass.gallery.ecommerce.functions.priceToShowLeft(priceSplitted[0]));cgCenterDiv.find(".cg-center-sale-price-right").text(priceSplitted[1]);if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyPosition=="left"){cgCenterDiv.find(".cg-center-sale-price-left-symbol").text(priceSymbol)}else{cgCenterDiv.find(".cg-center-sale-price-right-symbol").text(priceSymbol)}if(cgJsData[gid].vars.rawData[realId].ecommerceData["IsShipping"]=="1"){cgCenterDiv.find(".cg-center-sale-price-type").text(cgJsClass.gallery.language.ecommerce.Shipping)}else if(cgJsData[gid].vars.rawData[realId].ecommerceData["IsDownload"]=="1"){cgCenterDiv.find(".cg-center-sale-price-type").text(cgJsClass.gallery.language.ecommerce.Download)}else if(cgJsData[gid].vars.rawData[realId].ecommerceData["IsService"]=="1"){cgCenterDiv.find(".cg-center-sale-price-type").text(cgJsClass.gallery.language.ecommerce.Service)}else if(cgJsData[gid].vars.rawData[realId].ecommerceData["IsUpload"]=="1"){cgCenterDiv.find(".cg-center-sale-price-type").text(cgJsClass.gallery.language[gid].sendUpload)}cgCenterDiv.find(".cg-center-sale-product-info-title").text(cgJsData[gid].vars.rawData[realId].ecommerceData["SaleTitle"]);cgCenterDiv.find(".cg-center-sale-product-info-description").text(cgJsData[gid].vars.rawData[realId].ecommerceData["SaleDescription"]);cgCenterDiv.find(".cg-center-sale-buy-now").attr({"data-cg-gid":gid,"data-cg-real-id":realId});cgCenterDiv.find(".cg-center-sale-add-to-basket").attr({"data-cg-gid":gid,"data-cg-real-id":realId});cgCenterDiv.find(".cg-center-sale").removeClass("cg_hide")}if(!cgJsData[gid].vars.translateX){cgCenterDiv.find(".cg-center-image").hide()}cgCenterDiv.find(".cg-center-image").removeClass("cg_contain");cgCenterDiv.find("#cgCenterImageFbLikeDiv"+gidForCenterDivElements).hide().removeClass("cg_hide");cgCenterDiv.find("#cgCenterImageRatingDiv"+gidForCenterDivElements).hide();$cgCenterImage.removeClass("cg180degree cg270degree cg90degree cg0degree");$cgCenterImage.find(".cg-center-image-rotated").hide();if(cgRotationThumbNumber=="180"){$cgCenterImage.find(".cg-center-image-rotated").addClass("cg180degree").removeClass("cg90degree cg270degree cg0degree").show()}else if(cgRotationThumbNumber=="270"){$cgCenterImage.find(".cg-center-image-rotated").addClass("cg270degree").removeClass("cg90degree cg180degree cg0degree").show()}else if(cgRotationThumbNumber=="90"){$cgCenterImage.find(".cg-center-image-rotated").addClass("cg90degree").removeClass("cg270degree cg180degree cg0degree").show()}}var $cgCenterImageDivButtons=cgCenterDiv.find("#cgCenterImageDivButtons"+gidForCenterDivElements);$cgCenterImageDivButtons.removeClass("cg-center-image-div-buttons-first-break cg-center-image-div-buttons-second-break");if(ShowNickname==1||ShowProfileImage==1){var $cgCenterShowNicknameParent=cgCenterDiv.find("#cgCenterShowNicknameParent"+gidForCenterDivElements);$cgCenterShowNicknameParent.removeClass("cg-center-image-div-buttons-second-break")}if(cgCenterDivWidth<700&&cgCenterDivWidth>450){$cgCenterImageDivButtons.addClass("cg-center-image-div-buttons-first-break")}else if(cgCenterDivWidth<=450){$cgCenterImageDivButtons.addClass("cg-center-image-div-buttons-second-break");if(ShowNickname==1||ShowProfileImage==1){cgCenterDiv.find("#cgCenterShowNicknameParent"+gidForCenterDivElements).addClass("cg-center-image-div-buttons-second-break")}}cgJsData[gid].vars.openedGalleryImageOrder=order;var galleryId=gid;var AllowRating=cgJsData[gid].options.general.AllowRating;var AllowComments=cgJsData[gid].options.general.AllowComments;if(!isResizeBlogViewOnly){cgCenterDiv.find("#cgCenterImageInfoDiv"+gidForCenterDivElements).empty();cgCenterDiv.find("#cgCenterImageCommentsDiv"+gidForCenterDivElements).empty();var fullImageDataToUse={};fullImageDataToUse=cgJsClass.gallery.views.switchView.sortViewSlider(gid,fullImageDataToUse);if(order==0&&cgJsData[gid].vars.currentStep>1){var imageObjectToCompare=undefined;var imageObjectLastPrevStep=undefined;for(var i=0,len=cgJsData[gid].vars.imageDataLength;i<len;i++){var firstKeyToCompare=Object.keys(fullImageDataToUse[i])[0];if(fullImageDataToUse[i][firstKeyToCompare].rowid==rowId){imageObjectLastPrevStep=imageObjectToCompare;break}imageObjectToCompare=fullImageDataToUse[i][firstKeyToCompare]}if(typeof imageObjectLastPrevStep!="undefined"){var prevRealId=imageObjectLastPrevStep.id;var prevStepNumber=parseInt(cgJsData[gid].vars.currentStep);prevStepNumber--;cgCenterDiv.find("#cgCenterArrowLeft"+gidForCenterDivElements).removeClass("cg-center-arrow-left cg_center_pointer_event_none").addClass("cg-center-arrow-left-prev-step cg_further_images").attr({"data-cg-step":prevStepNumber,"data-cg-step-prev-real-id":prevRealId,"data-cg-gid":gid,"data-cg-tooltip":cgJsClass.gallery.language[gid].PreviousPage})}else{cgCenterDiv.find("#cgCenterArrowLeft"+gidForCenterDivElements).addClass("cg_center_pointer_event_none")}}else{cgCenterDiv.find("#cgCenterArrowLeft"+gidForCenterDivElements).removeClass("cg_center_pointer_event_none cg-center-arrow-left-prev-step cg_further_images").addClass("cg-center-arrow-left").removeAttr("data-cg-step data-cg-step-prev-real-id data-cg-step-next-real-id");if(order==0){cgCenterDiv.find("#cgCenterArrowLeft"+gidForCenterDivElements).addClass("cg_center_pointer_event_none")}else{cgCenterDiv.find("#cgCenterArrowLeft"+gidForCenterDivElements).removeClass("cg_center_pointer_event_none")}cgCenterDiv.find("#cgCenterArrowLeft"+gidForCenterDivElements).attr({"data-cg-tooltip":cgJsClass.gallery.language[gid].PreviousImage})}var orderCheck=order+1;if(cgJsData[gid].image.length==orderCheck&&cgJsData[gid].vars.imageDataLength>PicsPerSite){var imageObjectNext=undefined;for(var i=0,len=cgJsData[gid].vars.imageDataLength;i<len;i++){var firstKeyToCompare=Object.keys(fullImageDataToUse[i])[0];if(fullImageDataToUse[i][firstKeyToCompare].rowid==rowId){var iToCheck=i+1;if(typeof fullImageDataToUse[iToCheck]!="undefined"){var firstKeyToCompare=Object.keys(fullImageDataToUse[iToCheck])[0];imageObjectNext=fullImageDataToUse[iToCheck][firstKeyToCompare]}break}}if(typeof imageObjectNext!="undefined"){var nextRealId=imageObjectNext.id;var nextStepNumber=parseInt(cgJsData[gid].vars.currentStep);nextStepNumber++;cgCenterDiv.find("#cgCenterArrowRight"+gidForCenterDivElements).removeClass("cg-center-arrow-right cg_center_pointer_event_none").addClass("cg-center-arrow-right-next-step cg_further_images").attr({"data-cg-step":nextStepNumber,"data-cg-step-next-real-id":nextRealId,"data-cg-gid":gid,"data-cg-tooltip":cgJsClass.gallery.language[gid].NextPage})}else{cgCenterDiv.find("#cgCenterArrowRight"+gidForCenterDivElements).addClass("cg_center_pointer_event_none")}}else{cgCenterDiv.find("#cgCenterArrowRight"+gidForCenterDivElements).removeClass("cg_center_pointer_event_none cg-center-arrow-right-next-step cg_further_images").addClass("cg-center-arrow-right").removeAttr("data-cg-step data-cg-step-prev-real-id data-cg-step-next-real-id");if(cgJsData[gid].image.length==orderCheck){cgCenterDiv.find("#cgCenterArrowRight"+gidForCenterDivElements).addClass("cg_center_pointer_event_none")}else{cgCenterDiv.find("#cgCenterArrowRight"+gidForCenterDivElements).removeClass("cg_center_pointer_event_none")}cgCenterDiv.find("#cgCenterArrowRight"+gidForCenterDivElements).attr({"data-cg-tooltip":cgJsClass.gallery.language[gid].NextImage})}}var mainCGalleryWidth=cgCenterDiv.closest("#mainCGallery"+gid).width();var hundertPercentWidth=cgJsClass.gallery.resize.resizeCenter(cgCenterDiv,gid,mainCGalleryWidth,gidForCenterDivElements);if(!isResizeBlogViewOnly){if(hundertPercentWidth){cgCenterDiv.find("#cgCenterInfoDiv"+gidForCenterDivElements).addClass("cg_hide")}else{cgCenterDiv.find("#cgCenterInfoDiv"+gidForCenterDivElements).removeClass("cg_hide")}}if(cgJsData[gid].vars.isUserGallery&&!isResizeBlogViewOnly&&!cgJsData[gid].vars.isCgWpPageEntryLandingPage&&!cgJsData[gid].vars.galleryShortCodeEntryId){var $cg_delete_user_image=cgCenterDiv.find(".cg_delete_user_image").removeClass("cg_hide");if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){$cg_delete_user_image.attr("data-cg-tooltip",cgJsClass.gallery.language[gid].DeleteImages)}else{$cg_delete_user_image.attr("data-cg-tooltip",cgJsClass.gallery.language[gid].DeleteImage)}$cg_delete_user_image.attr("data-cg-real-id",realId)}cgJsClass.gallery.resize.resizeInfoAndCommentAreas(cgCenterDiv,gid,mainCGalleryWidth,gidForCenterDivElements);cgCenterDiv.attr("data-cg-order",order);if(cgJsData[gid].vars.isUserGallery&&!isResizeBlogViewOnly){cgCenterDiv.find("#cgCenterImageInfoDivParent"+gidForCenterDivElements).removeClass("cg_edit");cgCenterDiv.find(".cg_gallery_info_title").removeClass("cg_hide_till_hover ")}var mainObject=cgJsData[gid].image[order][firstKey];var realId=cgJsData[gid].image[order][firstKey]["id"];cgCenterDiv.find(".cg-center-image-close").attr("data-cg-actual-realId",realId);cgCenterDiv.find(".cg-center-arrow-left").attr("data-cg-actual-realId",realId);cgCenterDiv.find(".cg-center-arrow-right").attr("data-cg-actual-realId",realId);cgJsClass.gallery.vars.openedRealId=realId;cgJsData[gid].vars.openedRealId=realId;var FullSizeGallery=cgJsData[gid].options.general.FullSizeGallery;if(cgJsClass.gallery.vars.fullwindow&&cgJsData[gid].options.visual["ImageViewFullScreen"]==1){if(cgJsData[gid].vars.mainCGdiv.find(".cg_header .cg-center-image-close-fullwindow").length){cgCenterImageFullwindow.attr("data-cg-real-id",realId).removeClass("cg_hide")}}else{if((cgJsData[gid].vars.galleryAlreadyFullWindow==true||FullSizeGallery!=1&&cgJsData[gid].options.pro.SliderFullWindow!=1)&&!cgJsClass.gallery.vars.fullwindow){if(cgJsData[gid].vars.mainCGdiv.find(".cg_header .cg-center-image-close-fullwindow").length){cgCenterImageFullwindow.attr("data-cg-real-id",realId).addClass("cg_hide")}else{if(cgJsData[gid].options.visual["ImageViewFullWindow"]==1){cgCenterImageFullwindow.attr("data-cg-real-id",realId).removeClass("cg_hide")}else{if(cgJsClass.gallery.vars.fullwindow){cgCenterImageFullwindow.attr("data-cg-real-id",realId).removeClass("cg_hide")}else{cgCenterImageFullwindow.attr("data-cg-real-id",realId).addClass("cg_hide")}}}}else{if(cgJsData[gid].options.visual["ImageViewFullWindow"]==1){cgCenterImageFullwindow.attr("data-cg-real-id",realId).removeClass("cg_hide")}else{if(cgJsClass.gallery.vars.fullwindow){cgCenterImageFullwindow.attr("data-cg-real-id",realId).removeClass("cg_hide")}else{cgCenterImageFullwindow.attr("data-cg-real-id",realId).addClass("cg_hide")}}}}if((cgJsData[gid].options.pro.SliderFullWindow==1||cgJsData[gid].options.visual.BlogLookFullWindow==1)&&cgJsClass.gallery.vars.fullwindow){cgCenterImageFullwindow.attr("data-cg-real-id",realId).removeClass("cg_hide")}if(AllowRating>=1&&!cgJsData[gid].vars.isOnlyGalleryNoVoting&&!isResizeBlogViewOnly||AllowRating>=1&&cgJsData[gid].vars.isOnlyGalleryNoVoting&&cgJsData[gid].vars.RatingVisibleForGalleryNoVoting&&!isResizeBlogViewOnly){if(isBlogView){cgJsClass.gallery.dynamicOptions.setRatingAndComments(realId,order,false,gid)}else{cgCenterDiv.find("#cgCenterImageRatingDiv"+gidForCenterDivElements).empty();imageObject.find(".cg_gallery_rating_div").clone().appendTo(cgCenterDiv.find("#cgCenterImageRatingDiv"+gid)).find(".cg_gallery_rating_div_child").removeClass("cg_center").removeClass("cg_right");cgCenterDiv.find(".cg_gallery_rating_div").removeClass("cg_sm").removeClass("cg_xs").removeClass("cg_xxs");cgCenterDiv.find(".cg_gallery_rating_div .cg_rate_star").removeClass("cg_rate_out_gallery_disallowed").removeClass("cg_sm").removeClass("cg_xs").removeClass("cg_xxs");cgCenterDiv.find(".cg_gallery_rating_div .cg_gallery_rating_div_count").removeClass("cg_sm").removeClass("cg_xs").removeClass("cg_xxs");cgCenterDiv.find(".cg_gallery_rating_div_five_star_details").addClass("cg_hide");cgCenterDiv.find(".cg_gallery_rating_div_star").attr("data-cg-tooltip",cgJsClass.gallery.language[gid].VoteNow)}}if(AllowComments>=1&&!isBlogView&&!isResizeBlogViewOnly){cgJsClass.gallery.views.singleViewFunctions.cloneCommentDiv(gid,realId,cgCenterDiv,imageObject,gidForCenterDivElements)}else if(AllowComments>=1&&isBlogView&&!isResizeBlogViewOnly){cgJsClass.gallery.views.singleViewFunctions.cloneCommentDiv(gid,realId,cgCenterDiv,imageObject,gidForCenterDivElements,isBlogView)}else{if(!isResizeBlogViewOnly){cgCenterDiv.find("#cgCenterImageCommentsDivParent"+gidForCenterDivElements+"").remove()}}if(FbLike>=1&&!isBlogView&&!isResizeBlogViewOnly&&!isAlternativeFileType){if(!cgJsData[gid].vars.isOnlyGalleryNoVoting||cgJsData[gid].vars.isOnlyGalleryNoVoting&&cgJsData[gid].vars.RatingVisibleForGalleryNoVoting){if(FbLikeGallery>=1&&isGalleryOpened!==true){var fbContent=imageObject.find(".cg_gallery_facebook_div").html();var $cgCenterImageFbLikeDiv=cgCenterDiv.find("#cgCenterImageFbLikeDiv"+gidForCenterDivElements).empty().html(fbContent).show();imageObject.find("#cgFacebookGalleryDiv"+realId).addClass("cg_hide")}else{cgJsData[gid].imageObject[cgJsData[gid].vars.openedRealId].find(".cg_gallery_facebook_div").addClass("cg_hide");var fbContent=cgJsClass.gallery.fbLike.createFbLike(realId,gid);var $cgCenterImageFbLikeDiv=cgCenterDiv.find("#cgCenterImageFbLikeDiv"+gidForCenterDivElements).empty().show().append(fbContent)}if(!cgJsData[gid].options.general.AllowRatingDynamic&&cgJsData[gid].options.general.AllowRating!=2){if($cgCenterImageFbLikeDiv){cgCenterDiv.find("#cgCenterImageFbLikeDiv"+gidForCenterDivElements).addClass("cg_margin_top_10")}}}}else if(FbLike>=1&&isBlogView&&!isResizeBlogViewOnly&&!isAlternativeFileType){if(!cgJsData[gid].vars.isOnlyGalleryNoVoting||cgJsData[gid].vars.isOnlyGalleryNoVoting&&cgJsData[gid].vars.RatingVisibleForGalleryNoVoting){var fbContent=cgJsClass.gallery.fbLike.createFbLike(realId,gid);var $cgCenterImageFbLikeDiv=cgCenterDiv.find("#cgCenterImageFbLikeDiv"+gidForCenterDivElements).empty().show().append(fbContent)}if(!cgJsData[gid].options.general.AllowRatingDynamic&&cgJsData[gid].options.general.AllowRating!=2){if($cgCenterImageFbLikeDiv){cgCenterDiv.find("#cgCenterImageFbLikeDiv"+gidForCenterDivElements).addClass("cg_margin_top_10")}}}var nickname="";if(cgJsData[gid].vars.rawData[realId]["WpUserId"]){if(cgJsData[gid].vars.nicknames[cgJsData[gid].vars.rawData[realId]["WpUserId"]]){nickname=cgJsData[gid].vars.nicknames[cgJsData[gid].vars.rawData[realId]["WpUserId"]]}}if(ShowNickname==1&&nickname){cgCenterDiv.find("#cgCenterImageDivButtonsBorder"+gidForCenterDivElements).removeClass("cg_hide");cgCenterDiv.find("#cgCenterShowNicknameParent"+gidForCenterDivElements).removeClass("cg_hide").css({height:"auto",visibility:"visible"});cgCenterDiv.find("#cgCenterShowNicknameText"+gidForCenterDivElements).text(nickname)}else{if(ShowNickname==1){cgCenterDiv.find("#cgCenterImageDivButtonsBorder"+gidForCenterDivElements).addClass("cg_hide");cgCenterDiv.find("#cgCenterShowNicknameParent"+gidForCenterDivElements).addClass("cg_hide")}}var profileImage="";if(cgJsData[gid].vars.rawData[realId]["WpUserId"]){if(cgJsData[gid].vars.profileImages[cgJsData[gid].vars.rawData[realId]["WpUserId"]]){profileImage=cgJsData[gid].vars.profileImages[cgJsData[gid].vars.rawData[realId]["WpUserId"]]}}if(ShowProfileImage==1&&profileImage){cgCenterDiv.find("#cgCenterImageDivButtonsBorder"+gidForCenterDivElements).removeClass("cg_hide");cgCenterDiv.find("#cgCenterShowNicknameParent"+gidForCenterDivElements).removeClass("cg_hide").css({height:"auto",visibility:"visible"});cgCenterDiv.find("#cgCenterShowNicknameAvatar"+gidForCenterDivElements).addClass("cg_hide");cgCenterDiv.find("#cgCenterShowProfileImage"+gidForCenterDivElements).css("background-image","url("+profileImage+")").removeClass("cg_hide");cgCenterDiv.find("#cgCenterShowNicknameText"+gidForCenterDivElements).css("margin-top","7px").addClass("cg-center-show-profile-image-full")}else{if(ShowProfileImage==1&&ShowNickname!=1){cgCenterDiv.find("#cgCenterImageDivButtonsBorder"+gidForCenterDivElements).addClass("cg_hide");cgCenterDiv.find("#cgCenterShowNicknameParent"+gidForCenterDivElements).addClass("cg_hide")}}var $cgCenterShowSocialShareMobileButton=cgCenterDiv.find("#cgCenterShowSocialShareMobileButton"+gidForCenterDivElements);var $cgCenterShowSocialShareParent=cgCenterDiv.find("#cgCenterShowSocialShareParent"+gidForCenterDivElements);$cgCenterShowSocialShareParent.removeAttr("style");if(cgJsData[gid].options.visual.ShareButtons){$cgCenterShowSocialShareParent.removeClass("cg_hide");$cgCenterShowSocialShareMobileButton.removeClass("cg_hide")}else{$cgCenterShowSocialShareParent.addClass("cg_hide");$cgCenterShowSocialShareMobileButton.addClass("cg_hide")}if(cgJsData[gid].options.visual.ShareButtons&&cgJsData[gid].vars.rawData[realId]["entryGuid"]&&!isResizeBlogViewOnly){var shareButtonsArray=cgJsData[gid].options.visual.ShareButtons.split(",");$cgCenterShowSocialShareParent.empty();var title=cgJsData[gid].vars.rawData[realId]["post_title"];var description="";var IsForWpPageTitleID=cgJsData[gid].options.visual["IsForWpPageTitleID"];var IsForWpPageDescriptionID=cgJsData[gid].options.visual["IsForWpPageDescriptionID"];var infoData=cgJsData[gid].vars.info[realId];if(IsForWpPageTitleID){if(infoData&&infoData[IsForWpPageTitleID]&&infoData[IsForWpPageTitleID]["field-content"]){title=infoData[IsForWpPageTitleID]["field-content"].replace(/\\/g,"")}}if(IsForWpPageDescriptionID){if(infoData&&infoData[IsForWpPageDescriptionID]&&infoData[IsForWpPageDescriptionID]["field-content"]){description=infoData[IsForWpPageDescriptionID]["field-content"].replace(/\\/g,"")}}var anIconSet=false;shareButtonsArray.forEach(function(value){var href="";var classes="";var platform="";if(value=="email"){platform="Email";anIconSet=true;href="mailto:?subject="+title+"&body="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+" "+description;classes="cg_center_show_social_share cg_center_show_social_share_email"}if(value=="sms"){platform="SMS";anIconSet=true;href="sms:?body="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+" "+title;classes="cg_center_show_social_share cg_center_show_social_share_sms"}if(value=="gmail"){platform="Gmail";anIconSet=true;href="https://mail.google.com/mail/?view=cm&body="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&su="+title;classes="cg_center_show_social_share cg_center_show_social_share_gmail"}if(value=="yahoo"){platform="Yahoo";anIconSet=true;href="http://compose.mail.yahoo.com/?body="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&subject="+title;classes="cg_center_show_social_share cg_center_show_social_share_yahoo"}if(value=="evernote"){platform="Evernote";anIconSet=true;href="https://www.evernote.com/clip.action?url="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&title="+title;classes="cg_center_show_social_share cg_center_show_social_share_evernote"}if(value=="facebook"&&cgJsClass.gallery.vars.isProVersion){platform="Facebook";anIconSet=true;href="https://www.facebook.com/sharer.php?u="+cgJsData[gid].vars.rawData[realId]["entryGuid"];classes="cg_center_show_social_share cg_center_show_social_share_facebook"}if(value=="whatsapp"&&cgJsClass.gallery.vars.isProVersion){platform="WhatsApp";anIconSet=true;href="https://api.whatsapp.com/send?text="+title+"%20"+cgJsData[gid].vars.rawData[realId]["entryGuid"];classes="cg_center_show_social_share cg_center_show_social_share_whatsapp"}if(value=="twitter"&&cgJsClass.gallery.vars.isProVersion){platform="Twitter";anIconSet=true;href="https://twitter.com/intent/tweet?url="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&text="+title;classes="cg_center_show_social_share cg_center_show_social_share_twitter"}if(value=="skype"){platform="Skype";anIconSet=true;href="https://web.skype.com/share?url="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&text="+title;classes="cg_center_show_social_share cg_center_show_social_share_skype"}if(value=="telegram"){platform="Telegram";anIconSet=true;href="https://t.me/share/url?url="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&text="+title;classes="cg_center_show_social_share cg_center_show_social_share_telegram"}if(value=="pinterest"){platform="Pinterest";anIconSet=true;href="http://pinterest.com/pin/create/link/?url="+cgJsData[gid].vars.rawData[realId]["entryGuid"];classes="cg_center_show_social_share cg_center_show_social_share_pinterest"}if(value=="reddit"){platform="Reddit";anIconSet=true;href="https://reddit.com/submit?url="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&title="+title;classes="cg_center_show_social_share cg_center_show_social_share_reddit"}if(value=="xing"){platform="XING";anIconSet=true;href="https://www.xing.com/spi/shares/new?url="+cgJsData[gid].vars.rawData[realId]["entryGuid"];classes="cg_center_show_social_share cg_center_show_social_share_xing"}if(value=="linkedin"){platform="LinkedIn";anIconSet=true;href="https://www.linkedin.com/sharing/share-offsite/?url="+cgJsData[gid].vars.rawData[realId]["entryGuid"];classes="cg_center_show_social_share cg_center_show_social_share_linkedin"}if(value=="vk"&&cgJsClass.gallery.vars.isProVersion){platform="VK";anIconSet=true;href="http://vk.com/share.php?url="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&title="+title+"&comment="+description;classes="cg_center_show_social_share cg_center_show_social_share_vk"}if(value=="okru"&&cgJsClass.gallery.vars.isProVersion){platform="OK";anIconSet=true;href="https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&st.shareUrl="+cgJsData[gid].vars.rawData[realId]["entryGuid"];classes="cg_center_show_social_share cg_center_show_social_share_okru"}if(value=="qzone"&&cgJsClass.gallery.vars.isProVersion){platform="Qzone";anIconSet=true;href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&title="+title+"&summary="+description;classes="cg_center_show_social_share cg_center_show_social_share_qzone"}if(value=="weibo"&&cgJsClass.gallery.vars.isProVersion){platform="Weibo";anIconSet=true;href="http://service.weibo.com/share/share.php?url="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&title="+title;classes="cg_center_show_social_share cg_center_show_social_share_weibo"}if(value=="douban"&&cgJsClass.gallery.vars.isProVersion){platform="Douban";anIconSet=true;href="http://www.douban.com/recommend/?href="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&comment="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&name="+title+"&text="+description;classes="cg_center_show_social_share cg_center_show_social_share_douban"}if(value=="renren"&&cgJsClass.gallery.vars.isProVersion){platform="RenRen";anIconSet=true;href="http://widget.renren.com/dialog/share?resourceUrl="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&srcUrl="+cgJsData[gid].vars.rawData[realId]["entryGuid"]+"&title="+title+"&description="+description;classes="cg_center_show_social_share cg_center_show_social_share_renren"}$cgCenterShowSocialShareParent.append('<a href="'+href+'" target="_blank" class="cg_center_show_social_share_link" '+'data-cg-tooltip="'+cgJsClass.gallery.language[gid].ShareTo+" "+platform+'"><div class="'+classes+'"></div></a>')});$cgCenterShowSocialShareParent.removeClass("cg_hide");if(anIconSet){$cgCenterShowSocialShareMobileButton.removeClass("cg_hide")}}cgJsClass.gallery.views.singleViewFunctions.setCenterImageDownloadLink(gid,realId,originalSource,ImgType,cgCenterDiv,$cgCenterImage);if(cgJsData[gid].options.pro.GalleryUpload=="1"&&!cgJsData[gid].vars.isOnlyGalleryWinner&&!cgJsData[gid].vars.isOnlyGalleryEcommerce){cgCenterDiv.find(".cg-gallery-upload").show()}if(cgJsData[gid].options.visual.CopyImageLink=="1"){if(ImgType=="con"){cgCenterDiv.find(".cg-image-image-href-to-copy").attr("data-cg-real-id",realId).attr("data-cg-tooltip",cgJsClass.gallery.language[gid].CopyGalleryEntryLink).show()}else{cgCenterDiv.find(".cg-image-image-href-to-copy").attr("data-cg-real-id",realId).show()}}if(cgJsData[gid].options.visual.CopyOriginalFileLink=="1"&&ImgType!="con"&&!cgJsData[gid].vars.isOnlyGalleryEcommerce){cgCenterDiv.find(".cg-copy-original-file-link").attr({"data-cg-gid":gid,"data-cg-real-id":realId}).removeClass("cg_hide")}if(cgJsData[gid].options.visual.ForwardOriginalFile=="1"&&ImgType!="con"&&!cgJsData[gid].vars.isOnlyGalleryEcommerce){var $cgForwardOriginalFile=cgCenterDiv.find(".cg-forward-original-file");if($cgForwardOriginalFile.parent().is("a")){$cgForwardOriginalFile.unwrap()}if(ImgType=="ytb"){$cgForwardOriginalFile.wrap("<a href='"+"https://www.youtube.com/watch?v="+cgJsData[gid].vars.rawData[realId].post_name+"' target='_blank'></a>").removeClass("cg_hide")}else if(ImgType=="inst"){var guidWithoutEmbed=cgJsData[gid].vars.rawData[realId].guid.split("/embed")[0];$cgForwardOriginalFile.wrap("<a href='"+guidWithoutEmbed+"' target='_blank'></a>").removeClass("cg_hide")}else if(ImgType=="twt"){$cgForwardOriginalFile.wrap("<a href='"+cgJsData[gid].vars.rawData[realId].guid+"' target='_blank'></a>").removeClass("cg_hide")}else if(ImgType=="tkt"){$cgForwardOriginalFile.wrap("<a href='"+cgJsData[gid].vars.rawData[realId].guid+"' target='_blank'></a>").removeClass("cg_hide")}else{$cgForwardOriginalFile.wrap("<a href='"+originalSource+"' target='_blank'></a>").removeClass("cg_hide")}}cgCenterDiv.find(".cg-center-image-div-buttons-second-controls > *:visible:last").css("margin-right",0);if(!isBlogView){var imageObjectOuterWidth=imageObject.outerWidth();var offsetLeftClickedImage=imageObject.get(0).offsetLeft}else{offsetLeftClickedImage=0}var firstImage=false;if(offsetLeftClickedImage==0){firstImage=true}var addDistancePics=true;if(firstImage){addDistancePics=false}var widthOrientation;if(cgJsData[gid].vars.currentLook=="row"){if(addDistancePics){var positionLeftOrientation=imageObject.position().left+parseInt(cgJsData[gid].options.visual.RowViewSpaceWidth)}else{var positionLeftOrientation=imageObject.position().left}widthOrientation=imageObjectOuterWidth}if(cgJsData[gid].vars.currentLook=="height"){if(addDistancePics){var positionLeftOrientation=imageObject.position().left+parseInt(cgJsData[gid].options.visual.HeightViewSpaceWidth)}else{var positionLeftOrientation=imageObject.position().left}widthOrientation=imageObjectOuterWidth}if(cgJsData[gid].vars.currentLook=="thumb"){positionLeftOrientation=cgJsClass.gallery.views.singleView.positionLeftOrientationThumbLook(gid,imageObject,addDistancePics,sliderView);widthOrientation=imageObjectOuterWidth}if(!sliderView){cgCenterDiv.find("#cgCenterOrientation"+gidForCenterDivElements).width(widthOrientation);cgCenterDiv.find("#cgCenterOrientation"+gidForCenterDivElements).css("margin-left",positionLeftOrientation+"px");cgCenterDiv.find("#cgCenterOrientation"+gidForCenterDivElements).removeClass("cg_hide")}else{cgCenterDiv.find("#cgCenterOrientation"+gidForCenterDivElements).addClass("cg_hide")}if(isImageType){cgJsClass.gallery.views.singleViewFunctions.setImageWidthHeight(realId,gid,gidForCenterDivElements,selectedFile,sliderView,spaceForShowExif,cgCenterImageParentHeight,cgRotationThumbNumber,cgCenterDiv,$cgCenterImage,minus,isResizeBlogViewOnly)}if(ImgType=="mp4"||ImgType=="avi"||ImgType=="webm"||ImgType=="wmv"||ImgType=="mov"){cgJsClass.gallery.views.singleViewFunctions.setVideoWidthAndHeight($cgCenterImage,cgCenterDiv,originalSource,gid,realId,cgCenterImageParentHeight,false)}if(!isResizeBlogViewOnly){if(sliderView){$("#mainCGallery"+gidForCenterDivElements).append(cgCenterDiv);if(FbLike>=1&&!isAlternativeFileType){if(!cgJsData[gid].vars.isOnlyGalleryNoVoting||cgJsData[gid].vars.isOnlyGalleryNoVoting&&cgJsData[gid].vars.RatingVisibleForGalleryNoVoting){if(FbLikeGallery>=1){}else{cgCenterDiv.find("#cgCenterImageFbLikeDiv"+gidForCenterDivElements).show()}}}if(AllowRating>=1&&!cgJsData[gid].vars.isOnlyGalleryNoVoting||AllowRating>=1&&cgJsData[gid].vars.isOnlyGalleryNoVoting&&cgJsData[gid].vars.RatingVisibleForGalleryNoVoting){cgCenterDiv.find("#cgCenterImageRatingDiv"+gidForCenterDivElements).show()}}else if(isBlogView){cgJsData[gid].vars.mainCGallery.append(cgCenterDiv)}else{var isLastRow=cgJsClass.gallery.views.singleViewFunctions.slideOutAppend(gid,order,realId,firstKey,isGalleryOpened,offsetLeftClickedImage,imageObject,cgCenterDiv,gidForCenterDivElements,isAlternativeFileType);isSlideOutAppend=true}if(cgJsData[gid].vars.currentLook=="thumb"){if(cgJsData[gid].vars.thumbViewWidthFromLastImageInRow&&cgJsData[gid].vars.currentLook!="slider"){cgCenterDiv.css("width",cgJsData[gid].vars.thumbViewWidthFromLastImageInRow+"px")}}cgJsClass.gallery.views.singleViewFunctions.showExifData(gid,realId,cgCenterDiv,gidForCenterDivElements);cgJsClass.gallery.info.checkInfoSingleImageView(realId,gid,order,isBlogView,gidForCenterDivElements);if(AllowComments>=1){if(cgJsData[gid].rateAndCommentNumbers[realId]){if(cgJsData[gid].rateAndCommentNumbers[realId].CountC){cgJsClass.gallery.comment.setCommentsSingleImageView(realId,gid,cgCenterDiv,imageObject,gidForCenterDivElements)}}}if(!sliderView){cgCenterDiv.css({display:"table"})}else{cgCenterDiv.css({display:"block"});cgJsClass.gallery.views.singleViewFunctions.showCGcenterDivAfterGalleryLoad(gid,cgCenterDiv.closest("#mainCGallery"+gid),gidForCenterDivElements)}if(cgJsData[gid].vars.translateX){cgCenterDiv.find("#cgCenterInfoDiv"+gidForCenterDivElements).removeClass("cg_hide");if(cgJsData[gid].vars.currentLook=="slider"){cgCenterDiv.find("#cgCenterImageDiv"+gidForCenterDivElements).show()}cgCenterDiv.find("#cgCenterImage"+gidForCenterDivElements).removeClass("cg_hide");setTimeout(function(){cgCenterDiv.find("#cgCenterImage"+gidForCenterDivElements).addClass("cg_transition")},100)}else{cgCenterDiv.find("#cgCenterInfoDiv"+gidForCenterDivElements).removeClass("cg_hide");cgCenterDiv.find("#cgCenterImageDiv"+gidForCenterDivElements).show();cgCenterDiv.find("#cgCenterImage"+gidForCenterDivElements).hide().slideDown(500)}}if(cgJsData[gid].vars.isUserGallery&&!cgJsData[gid].vars.isUserGalleryAndHasFieldsToEdit){cgCenterDiv.find("#cgCenterImageInfoEditIconContainer"+gidForCenterDivElements).addClass("cg_hide")}if(!cgCenterDiv.find("#cgCenterInfoDiv"+gidForCenterDivElements+" .cg-center-image-info-div").length&&cgJsData[gid].options.general.AllowComments!=1&&cgJsData[gid].options.general.AllowComments!=2){cgCenterDiv.find("#cgCenterInfoDiv"+gidForCenterDivElements).addClass("cg_hide")}cgCenterDiv.css("min-height","unset");if(sliderView){cgCenterDiv.css("height","unset")}if(!isBlogView&&!isResizeBlogViewOnly){cgJsClass.gallery.views.singleView.createImageUrl(gid,realId,undefined,isGalleryOpenedSliderLook);cgJsClass.gallery.vars.dom.html.addClass("cg_scroll_behaviour_initial");cgJsClass.gallery.vars.dom.body.addClass("cg_scroll_behaviour_initial");cgJsClass.gallery.views.singleView.goToLocation(gid,realId,isGalleryOpened,isGalleryOpenedSliderLook,windowHeight,sliderView,cgCenterDiv);cgJsClass.gallery.vars.dom.html.removeClass("cg_scroll_behaviour_initial");cgJsClass.gallery.vars.dom.body.removeClass("cg_scroll_behaviour_initial")}if(!cgJsData[gid].vars.singleViewOneTimeOpened){cgJsData[gid].vars.singleViewOneTimeOpened=true}if(cgJsClass.gallery.vars.fullwindow&&!isResizeBlogViewOnly){cgJsClass.gallery.views.fullwindow.checkAndHideFullWindowConfigurationButton(gid,cgCenterDiv)}cgJsClass.gallery.vars.backButtonClicked=false;if((cgRotationThumbNumber=="270"||cgRotationThumbNumber=="90")&&cgJsData[gid].vars.currentLook=="thumb"&&!sliderView){if(imageObject&&!sliderView&&cgJsData[gid].vars.currentLook=="thumb"){imageObject.find("figure").hide();setTimeout(function(){imageObject.find("figure").show()},10)}}cgJsData[gid].vars.cgCenterDivLastHeight=cgCenterDiv.outerHeight()+parseInt(cgCenterDiv.css("padding-top"))+parseInt(cgCenterDiv.css("padding-bottom"));cgCenterDiv.css("min-height",""+String(cgJsData[gid].vars.cgCenterDivLastHeight)+"px");if(sliderView){cgCenterDiv.css("height",""+String(cgJsData[gid].vars.cgCenterDivLastHeight)+"px")}if(sliderView&&cgJsClass.gallery.vars.fullwindow){var restHeight=windowHeight-(cgJsData[gid].vars.mainCGdiv.find("#mainCGslider"+gid).height()+65+cgJsData[gid].vars.cgCenterDivLastHeight);if(restHeight>0){cgJsData[gid].vars.cgCenterDivLastHeight=cgJsData[gid].vars.cgCenterDivLastHeight+restHeight;cgCenterDiv.css("height",""+String(cgJsData[gid].vars.cgCenterDivLastHeight)+"px")}}if(!isResizeBlogViewOnly){cgJsClass.gallery.views.singleView.checkIfImageExists(cgCenterDiv,gid,realId)}if(!cgJsClass.gallery.vars.fullwindow){}if(cgJsClass.gallery.vars.isMobile){cgCenterDiv.find("#cgCenterImageFullScreenButton"+gidForCenterDivElements).addClass("cg_hide")}else{if(cgJsClass.gallery.vars.fullscreen){cgCenterDiv.find("#cgCenterImageFullScreenButton"+gidForCenterDivElements).addClass("cg_hide")}else{if(cgJsData[gid].options.visual["ImageViewFullScreen"]!=1){cgCenterDiv.find("#cgCenterImageFullScreenButton"+gidForCenterDivElements).addClass("cg_hide")}else if(cgJsClass.gallery.vars.fullwindow&&cgJsData[gid].options.visual["ImageViewFullScreen"]==1){cgCenterDiv.find("#cgCenterImageFullScreenButton"+gidForCenterDivElements).removeClass("cg_hide")}else{if(cgJsClass.gallery.vars.isMobile){cgCenterDiv.find("#cgCenterImageFullScreenButton"+gidForCenterDivElements).addClass("cg_hide")}}}}if(cgJsData[gid].vars.mainCGallery.hasClass("cg_called_from_upload")){cgJsData[gid].vars.mainCGallery.removeClass("cg_hide cg_called_from_upload").addClass("cg_fade_in")}if(isBlogView&&cgJsClass.gallery.vars.fullwindow){cgCenterDiv.css("height","unset");cgCenterDiv.css("min-height","unset")}else if(isResizeBlogViewOnly||sliderView){cgCenterDiv.css("height","unset");cgCenterDiv.css("min-height","unset")}if(isSlideOutAppend&&!cgJsData[gid].vars.translateX&&cgJsClass.gallery.vars.fullwindow){if(isSlideOutAppend&&isLastRow&&!cgJsData[gid].vars.translateX){setTimeout(function(){cgCenterDiv.removeClass("cg_min_height_1000");cgCenterDiv.css("min-height","unset")},400)}else{cgCenterDiv.removeClass("cg_min_height_1000");cgCenterDiv.css("min-height","unset")}}if(isBlogView){cgJsData[gid].vars.cgCenterDiv.addClass("cg_hide_cg_center_div")}},checkIfImageExists:function($cgCenterDiv,gid,realId){setTimeout(function(){if($cgCenterDiv.is(":visible")&&realId==cgJsData[gid].vars.openedRealId){cgJsClass.gallery.function.general.tools.checkError($cgCenterDiv,gid,realId)}},3e3)},positionLeftOrientationThumbLook:function(gid,imageObject,addDistancePics,sliderView){var distancePics=parseInt(cgJsData[gid].options.general.DistancePics);if(imageObject.position().left<=30){distancePics=0}if(sliderView===true){distancePics=0}var positionLeftOrientation;if(addDistancePics){positionLeftOrientation=imageObject.position().left+parseInt(cgJsData[gid].options.visual.ThumbViewBorderWidth)+distancePics}else{positionLeftOrientation=imageObject.position().left+parseInt(cgJsData[gid].options.visual.ThumbViewBorderWidth)}return positionLeftOrientation},openAgain:function(gid,order){var firstKey=Object.keys(cgJsData[gid].image[order])[0];var realId=cgJsData[gid].image[order][firstKey]["id"];jQuery("#cg_show"+realId).find(".cg_append").click();cgJsClass.gallery.vars.fullscreenStartOpenImage=true},goToLocation:function(gid,realId,isGalleryOpened,isGalleryOpenedSliderLook,windowHeight,sliderView,cgCenterDiv){cgJsClass.gallery.function.general.tools.hideSkeletonLoader(gid);var distanceTop=40;if(sliderView===true){distanceTop=120;if(windowHeight<800){distanceTop=0}}var noSlideOut=false;if(cgJsData[gid].options.general.FullSizeImageOutGallery==1||cgJsData[gid].options.general.OnlyGalleryView==1){noSlideOut=true}if(cgJsData[gid].vars.singleViewOneTimeOpened&&cgJsData[gid].vars.currentLook=="slider"){cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");return}console.log("single view go to location");if(cgJsClass.gallery.vars.isMobile==true){if(isGalleryOpened===true){if(cgJsData[gid].vars.currentLook!="slider"||cgJsData[gid].vars.currentLook=="slider"&&isGalleryOpened){if(sliderView&&isGalleryOpenedSliderLook){setTimeout(function(){if(cgJsData[gid].options.pro.SliderFullWindow!=1){if(!cgJsClass.gallery.vars.dom.body.hasClass("cg_gallery_rating_div_five_star_details_is_opened")){cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll")}}},600);return}if(cgJsClass.gallery.vars.fullwindow==false){}if(noSlideOut==false){}setTimeout(function(){cgJsClass.gallery.vars.dom.html.animate({scrollTop:cgJsData[gid].vars.mainCGallery.find("#cgShowPositionHelper"+realId).offset().top-distanceTop+"px"},"fast",function(){});setTimeout(function(){if(cgJsData[gid].options.pro.SliderFullWindow!=1){if(!cgJsClass.gallery.vars.dom.body.hasClass("cg_gallery_rating_div_five_star_details_is_opened")){cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll")}}},600)},1500)}}else{if(cgJsClass.gallery.vars.isMobile==true&&cgJsData[gid].vars.currentLook!="slider"){if(screen.height>=screen.width){cgJsData[gid].vars.mainCGallery.find("#cgShowPositionHelper"+realId+'[data-cg-gid="'+gid+'"]').get(0).scrollIntoView()}else{jQuery("#cgCenterImageDiv"+gid).get(0).scrollIntoView()}}else{if(sliderView===true&&isGalleryOpenedSliderLook!==true){cgJsClass.gallery.vars.dom.html.animate({scrollTop:cgJsData[gid].vars.mainCGallery.find("#cgShowPositionHelper"+realId).offset().top-distanceTop+"px"},"fast",function(){})}else{if(isGalleryOpenedSliderLook!==true){cgJsData[gid].vars.mainCGallery.find("#cgShowPositionHelper"+realId+'[data-cg-gid="'+gid+'"]').get(0).scrollIntoView()}}}if(cgJsData[gid].options.pro.SliderFullWindow!=1){if(!cgJsClass.gallery.vars.dom.body.hasClass("cg_gallery_rating_div_five_star_details_is_opened")){cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll")}}}setTimeout(function(){if(!cgJsClass.gallery.vars.dom.body.hasClass("cg_gallery_rating_div_five_star_details_is_opened")){cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll")}cgJsClass.gallery.vars.dom.body.removeClass("cg_body_overflow_hidden")},300)}else{if(isGalleryOpened===true||sliderView&&isGalleryOpened){if(isGalleryOpened===true){if(sliderView&&isGalleryOpenedSliderLook){setTimeout(function(){if(cgJsData[gid].options.pro.SliderFullWindow!=1){if(!cgJsClass.gallery.vars.dom.body.hasClass("cg_gallery_rating_div_five_star_details_is_opened")){cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll")}}},600);return}if(cgJsClass.gallery.vars.fullwindow==false){}if(noSlideOut==false){}if(cgJsClass.gallery.vars.fullwindow&&cgJsClass.gallery.function.general.tools.isFullSizeSlideOutStartNormally(gid)){setTimeout(function(){cgJsData[gid].vars.mainCGdivHelperParent.animate({scrollTop:cgCenterDiv.position().top+30+"px"},"fast",function(){})},0)}else{if(cgJsData[gid].vars.isClosedFullWindowAndSliderViewOpened){cgJsData[gid].vars.isClosedFullWindowAndSliderViewOpened=false;return}setTimeout(function(){cgJsClass.gallery.vars.dom.html.animate({scrollTop:cgJsData[gid].vars.mainCGallery.find("#cgShowPositionHelper"+realId).offset().top-distanceTop+"px"},"fast",function(){});setTimeout(function(){if(cgJsData[gid].options.pro.SliderFullWindow!=1){if(!cgJsClass.gallery.vars.dom.body.hasClass("cg_gallery_rating_div_five_star_details_is_opened")){cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll")}}},600)},0)}}}else{if(cgJsClass.gallery.vars.isMobile==true){if(screen.height>=screen.width){cgJsData[gid].vars.mainCGallery.find("#cgShowPositionHelper"+realId+'[data-cg-gid="'+gid+'"]').get(0).scrollIntoView()}else{jQuery("#cgCenterImageDiv"+gid).get(0).scrollIntoView()}}else{if(sliderView===true&&isGalleryOpenedSliderLook!==true&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){if(jQuery(window).scrollTop()+100<cgJsData[gid].vars.mainCGdiv.find("#mainCGslider"+gid).offset().top){cgJsClass.gallery.vars.dom.html.animate({scrollTop:cgJsData[gid].vars.mainCGallery.find("#cgShowPositionHelper"+realId).offset().top-distanceTop+"px"},"fast",function(){})}}else{if(isGalleryOpenedSliderLook!==true){if(sliderView===true&&(cgJsData[gid].options.general.FullSizeImageOutGallery==1||cgJsData[gid].options.general.OnlyGalleryView==1)){}else{if(cgJsClass.gallery.vars.isFromFullWindowAndDataCgRealIdHasToBeOpened){setTimeout(function(){cgJsData[gid].vars.mainCGallery.find("#cgShowPositionHelper"+realId+'[data-cg-gid="'+gid+'"]').get(0).scrollIntoView();cgJsClass.gallery.vars.isFromFullWindowAndDataCgRealIdHasToBeOpened=false},1e3)}else{cgJsData[gid].vars.mainCGallery.find("#cgShowPositionHelper"+realId+'[data-cg-gid="'+gid+'"]').get(0).scrollIntoView()}}}}if(cgJsData[gid].options.pro.SliderFullWindow!=1){if(!cgJsClass.gallery.vars.dom.body.hasClass("cg_gallery_rating_div_five_star_details_is_opened")){cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll")}}}}}},getCurrentRealIdIndexForFullWindow:function(gid,realId){var indexCount=1;for(var property in cgJsData[gid].vars.fullImageDataToUse){if(!cgJsData[gid].vars.fullImageDataToUse.hasOwnProperty(property)){break}var firstKey=Object.keys(cgJsData[gid].vars.fullImageDataToUse[property])[0];var realIdToCompare=cgJsData[gid].vars.fullImageDataToUse[property][firstKey]["id"];if(realId==realIdToCompare){break}indexCount++}return indexCount},createImageUrl:function(gid,realId,isJustReturn,isGalleryOpenedSliderLook){if(cgJsData[gid].vars.galleryShortCodeEntryId){return}if(cgJsData[gid].vars.currentLook=="height"||cgJsData[gid].vars.currentLook=="thumb"){history.replaceState({},"",cgJsData[gid].vars.startLocation);return}if(cgJsData[gid].vars.currentLook=="blog"&&!cgJsClass.gallery.vars.fullwindow){history.replaceState({},"",cgJsData[gid].vars.startLocation);return}if(isGalleryOpenedSliderLook&&!cgJsClass.gallery.vars.fullwindow){return}if((cgJsData[gid].vars.currentLook=="blog"||cgJsData[gid].vars.currentLook=="slider")&&cgJsClass.gallery.vars.fullwindow){if(cgJsData[gid].vars.lengthData==0){cgJsData[gid].vars.mainCGdivFullWindowConfigurationButton.text(0).removeClass("cg_visibility_hidden")}else{var currentIndex=cgJsClass.gallery.views.singleView.getCurrentRealIdIndexForFullWindow(gid,realId);cgJsData[gid].vars.mainCGdivFullWindowConfigurationButton.text(currentIndex+" "+cgJsClass.gallery.language[gid].of+" "+cgJsData[gid].vars.lengthData).removeClass("cg_visibility_hidden")}}else{if(cgJsData[gid].vars.mainCGdivFullWindowConfigurationButton){cgJsData[gid].vars.mainCGdivFullWindowConfigurationButton.removeClass("cg_visibility_hidden")}}cgJsData[gid].vars.openedRealId=realId;if(cgJsData[gid].vars.rawData[realId]["entryGuid"]){var newUrlForHistory=cgJsData[gid].vars.rawData[realId]["entryGuid"];if(cgJsData[gid].vars.isEcommerceTest){newUrlForHistory=newUrlForHistory+"?test=true"}}else{if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){var imageTitle=cgJsData[gid].vars.rawDataPreProcessed[realId]["post_title"]}else{if(cgJsData[gid].vars.rawData[realId]["ImgType"]=="con"){var imageTitle="entry"}else{var imageTitle=cgJsData[gid].vars.rawData[realId]["post_title"]}}var imageHref="!gallery/"+gid+"/file/"+realId+"/"+imageTitle;if(cgJsData[gid].vars.isEcommerceTest){var newUrlForHistory=location.protocol+"//"+location.host+location.pathname+location.search+"?test=true#"+imageHref}else{var newUrlForHistory=location.protocol+"//"+location.host+location.pathname+location.search+"#"+imageHref}}if(isJustReturn){return newUrlForHistory}else{if(cgJsData[gid].vars.rawData[realId]["entryGuid"]){var time=(new Date).getTime()/1e3;if(!cgJsData[gid].vars.firstPushSateDone){cgJsData[gid].vars.firstPushSateDone=true;cgJsData[gid].vars.isWpEntryPageURLshown=true;history.pushState({},"",newUrlForHistory)}else{cgJsData[gid].vars.isWpEntryPageURLshown=true;history.replaceState({},"",newUrlForHistory)}}else{if(location.href.indexOf("#!gallery")>-1){history.replaceState({},"",newUrlForHistory)}else{cgJsClass.gallery.vars.isHashJustChangedNewLogic=true;window.location.href=newUrlForHistory}}}}};;cgJsClass.gallery.views.initSingleViewScroll=function(){if(cgJsClass.gallery.vars.eventInitSingleViewScroll){return}else{cgJsClass.gallery.vars.eventInitSingleViewScroll=true}jQuery(document).on("click",".cg-center-go-up-button",function(){var gid=jQuery(this).attr("data-cg-gid");cgJsClass.gallery.views.scrollUp(gid)});jQuery(document).on("click",".cg-scroll-info-single-image-view .cg-top-bottom-arrow:first-child",function(){var $object=jQuery(this);cgJsClass.gallery.views.scrollInfoOrCommentTop($object)});jQuery(document).on("click",".cg-scroll-info-single-image-view .cg-top-bottom-arrow:last-child",function(){var $object=jQuery(this);cgJsClass.gallery.views.scrollInfoOrCommentBottom($object)});var interval;jQuery(document).on("mousedown touchstart",".cg-scroll-info-single-image-view .cg-top-bottom-arrow:first-child",function(){var $object=jQuery(this);interval=setInterval(function(){cgJsClass.gallery.views.scrollInfoOrCommentTop($object)},100)});jQuery(document).on("mousedown touchstart",".cg-scroll-info-single-image-view .cg-top-bottom-arrow:last-child",function(){var $object=jQuery(this);interval=setInterval(function(){cgJsClass.gallery.views.scrollInfoOrCommentBottom($object)},100)});jQuery(document).on("mouseup touchend",function(){clearInterval(interval)});jQuery(window).scroll(function(){if(!cgJsData.isGetGalleryLoading){cgJsClass.gallery.views.scrollBlogView(this)}});jQuery(".mainCGdivHelperParent ").scroll(function(){if(!cgJsClass.gallery.vars.fullwindow){return}if(cgJsClass.gallery.vars.isInitFullWindowOpen){return}cgJsClass.gallery.views.scrollBlogView(this,undefined,true)})};cgJsClass.gallery.views.scrollUp=function(gid){if(cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.mainCGdivHelperParent.animate({scrollTop:0+"px"},"fast",function(){})}else{cgJsClass.gallery.vars.dom.html.animate({scrollTop:cgJsData[gid].vars.mainCGdivHelperParent.offset().top-40+"px"},"fast",function(){})}};cgJsClass.gallery.views.addRemoveSticky=function(object,windowScrollTop,isMainCGdivHelperParentScroll,fromResizeGid){var $object=jQuery(object);cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.addClass("cg_sticky");var barWidth=15;if(jQuery.position&&jQuery.position.scrollbarWidth){barWidth=jQuery.position.scrollbarWidth()}if(fromResizeGid){cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.css("width",cgJsData[$object.attr("data-cg-gid")].vars.mainCGdivHelperParent.outerWidth(true)-barWidth+"px")}else{cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.css("width",cgJsData[$object.attr("data-cg-gid")].vars.mainCGdivHelperParent.outerWidth(true)+(cgJsData[$object.attr("data-cg-gid")].vars.currentLook=="slider"?17:17)-barWidth+"px")}var windowWidth=jQuery(window).width();if(windowWidth>cgJsClass.gallery.vars.maxWidthBlogView){var paddingLeftRight=(windowWidth-cgJsClass.gallery.vars.maxWidthBlogView)/2;cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.css("padding-left",paddingLeftRight+"px");cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.css("padding-right",paddingLeftRight+barWidth-7+"px");cgJsData[$object.attr("data-cg-gid")].vars.mainCGdivFullWindowConfigurationArea.css("padding-left",paddingLeftRight+"px");cgJsData[$object.attr("data-cg-gid")].vars.mainCGdivFullWindowConfigurationArea.css("padding-right",paddingLeftRight+barWidth-7+"px")}else{cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.css("padding-left","");cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.css("padding-right","");cgJsData[$object.attr("data-cg-gid")].vars.mainCGdivFullWindowConfigurationArea.css("padding-left","");cgJsData[$object.attr("data-cg-gid")].vars.mainCGdivFullWindowConfigurationArea.css("padding-right","")}cgJsData[$object.attr("data-cg-gid")].vars.mainCGdivFullWindowConfigurationArea.find(".cg-cat-select-area-show-less").width(cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.width());return;if(fromResizeGid){cgJsData[cgJsData[fromResizeGid].vars.mainCGdivHelperParent.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.removeClass("cg_sticky")}if(cgJsClass.gallery.vars.fullwindow&&isMainCGdivHelperParentScroll&&windowScrollTop>0&&isMainCGdivHelperParentScroll){if(!cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.hasClass("cg_sticky")){cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.addClass("cg_sticky");cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.css("width",cgJsData[$object.attr("data-cg-gid")].vars.mainCGdivHelperParent.outerWidth(true)(cgJsData[gid].vars.currentLook=="slider"?17:17)-barWidth+"px");var windowWidth=jQuery(window).width();if(windowWidth>cgJsClass.gallery.vars.maxWidthBlogView){var paddingLeftRight=(windowWidth-cgJsClass.gallery.vars.maxWidthBlogView)/2;cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.css("padding-left",paddingLeftRight+"px");cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.css("padding-right",paddingLeftRight+barWidth-7+"px")}}}if(cgJsClass.gallery.vars.fullwindow&&isMainCGdivHelperParentScroll&&windowScrollTop==0&&isMainCGdivHelperParentScroll){var $object=jQuery(object);cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.addClass("cg_sticky");cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.css("width","inherit");cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.css("padding-left","");cgJsData[$object.attr("data-cg-gid")].vars.cg_sort_div_blogLookFullWindow.css("padding-right","")}};cgJsClass.gallery.views.scrollBlogView=function(object,isWindowScroll,isMainCGdivHelperParentScroll){var windowScrollTop=jQuery(object).scrollTop();cgJsClass.gallery.vars.loadedGalleryIDs.forEach(function(gid){if(cgJsData[gid].vars.currentLook=="slider"&&!cgJsData[gid].vars.galleryShortCodeEntryId&&!cgJsData[gid].vars.isCgWpPageEntryLandingPage&&cgJsData[gid].vars.hasWpPageParent){if(!cgJsClass.gallery.vars.fullwindow){if(cgJsData[gid].vars.isWpEntryPageURLshown){cgJsData[gid].vars.isWpEntryPageURLshown=false;history.replaceState({},"",cgJsData[gid].vars.startLocation)}}}if(windowScrollTop>cgJsClass.gallery.vars.lastScrollTopCurrentScrollObject){cgJsClass.gallery.views.scrollBlogViewBottom(gid,object,windowScrollTop);if(cgJsClass.gallery.vars.fullwindow==gid){cgJsClass.gallery.views.setUrl(gid,windowScrollTop,"bottom")}}if(windowScrollTop<cgJsClass.gallery.vars.lastScrollTopCurrentScrollObject){cgJsClass.gallery.views.scrollBlogViewTop(gid,object,windowScrollTop);if(cgJsClass.gallery.vars.fullwindow==gid){cgJsClass.gallery.views.setUrl(gid,windowScrollTop,"top")}}});cgJsClass.gallery.vars.lastScrollTopCurrentScrollObject=windowScrollTop};cgJsClass.gallery.views.currentScrollImageDataOrderBlogViewFullWindow=undefined;cgJsClass.gallery.views.currentScrollImageDataImageIdBlogViewFullWindow=0;cgJsClass.gallery.views.currentScrollImageDataOrderBlogViewFullWindowCalculation=function(gid,realIdToCompare){var partOfWindowHeightForCalculation=jQuery(window).height()/8;jQuery.each(cgJsData[gid].image,function(index){var firstKey=Object.keys(cgJsData[gid].image[index])[0];var realId=cgJsData[gid].image[index][firstKey]["id"];if(cgJsData[gid].cgCenterDivBlogObject[realId]){if(realId==realIdToCompare){return false}}})};cgJsClass.gallery.views.setUrl=function(gid,windowScrollTop,scrollDirection){if(cgJsClass.gallery.vars.fullwindow){var fullWindowHeight=jQuery(window).height();var partOfWindowHeightForCalculationForScrollTop=fullWindowHeight/2;var partOfWindowHeightForCalculationForScrollBottom=fullWindowHeight/3;jQuery.each(cgJsData[gid].image,function(index){var firstKey=Object.keys(cgJsData[gid].image[index])[0];var realId=cgJsData[gid].image[index][firstKey]["id"];if(cgJsData[gid].cgCenterDivBlogObject[realId]){var positionTop=cgJsData[gid].cgCenterDivBlogObject[realId].position().top;if(scrollDirection=="top"){if(windowScrollTop<=positionTop+partOfWindowHeightForCalculationForScrollTop){var isHigherRealIdIndex=false;if(cgJsClass.gallery.views.currentScrollImageDataOrderBlogViewFullWindow!==undefined){if(index>=cgJsClass.gallery.views.currentScrollImageDataOrderBlogViewFullWindow){isHigherRealIdIndex=true}}if(isHigherRealIdIndex){return}else{cgJsClass.gallery.views.currentScrollImageDataImageIdBlogViewFullWindow=realId;cgJsClass.gallery.views.currentScrollImageDataOrderBlogViewFullWindow=index;cgJsClass.gallery.views.singleView.createImageUrl(gid,realId)}}}if(scrollDirection=="bottom"){if(windowScrollTop>positionTop-partOfWindowHeightForCalculationForScrollBottom){var isLowerRealIdIndex=false;if(cgJsClass.gallery.views.currentScrollImageDataOrderBlogViewFullWindow!==undefined){if(index<=cgJsClass.gallery.views.currentScrollImageDataOrderBlogViewFullWindow){isLowerRealIdIndex=true}}if(isLowerRealIdIndex){return}else{cgJsClass.gallery.views.currentScrollImageDataImageIdBlogViewFullWindow=realId;cgJsClass.gallery.views.currentScrollImageDataOrderBlogViewFullWindow=index;cgJsClass.gallery.views.singleView.createImageUrl(gid,realId)}}}}})}};cgJsClass.gallery.views.scrollBlogViewBottom=function(gid,object,windowScrollTop){if(cgJsData[gid].vars.blogViewImagesLoaded){if(cgJsClass.gallery.vars.fullwindow){var distanceToTop=cgJsData[gid].vars.cgLdsDualRingCGcenterDivLazyLoader.position().top;var factorToCheck=1e3}else{var distanceToTop=cgJsData[gid].vars.cgLdsDualRingCGcenterDivLazyLoader.offset().top;var factorToCheck=800}if(windowScrollTop+factorToCheck>distanceToTop&&!cgJsData[gid].vars.blogViewImagesLoadFromScrollStarted&&!cgJsData[gid].vars.cgLdsDualRingCGcenterDivLazyLoader.hasClass("cg_hide")){cgJsData[gid].vars.blogViewImagesLoadFromScrollStarted=true;cgJsData[gid].vars.blogViewImagesLoaded=false;cgJsData[gid].vars.cgLdsDualRingCGcenterDivLazyLoader.addClass("cg_hide");var order=0;var isFirstScrollOrder=true;var blogViewImagesLoadedCount=0;jQuery.each(cgJsData[gid].image,function(index,value){if(index<=cgJsData[gid].vars.blogViewImagesLoadedLastOrder){return}order=index;if(isFirstScrollOrder){var returnedValue=cgJsClass.gallery.views.singleView.openImage(jQuery,index,false,gid,"right",true,false,true,false,true,blogViewImagesLoadedCount);isFirstScrollOrder=false}else{var returnedValue=cgJsClass.gallery.views.singleView.openImage(jQuery,index,false,gid,"right",true,false,true,false,false,blogViewImagesLoadedCount)}blogViewImagesLoadedCount=blogViewImagesLoadedCount+1;if(returnedValue=="break"){return false}});if(cgJsData[gid].vars.blogViewImagesLoadedLastOrder+1==Object.keys(cgJsData[gid].image).length){cgJsData[gid].vars.cgLdsDualRingCGcenterDivLazyLoader.addClass("cg_hide")}else{cgJsData[gid].vars.cgLdsDualRingCGcenterDivLazyLoader.removeClass("cg_hide")}cgJsData[gid].vars.blogViewImagesLoaded=true;cgJsData[gid].vars.blogViewImagesLoadFromScrollStarted=false}}};cgJsClass.gallery.views.scrollBlogViewTop=function(gid,object,windowScrollTop){if(cgJsData[gid].vars.blogViewImagesLoaded||cgJsData[gid].vars.blogViewImagesLoadedAllImages){if(windowScrollTop!=0){return}if(windowScrollTop==0&&!cgJsData[gid].vars.blogViewImagesLoadFromScrollStarted&&!cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.hasClass("cg_hide")&&cgJsData[gid].vars.blogViewImagesLoadedFirstOrder!=0){cgJsData[gid].vars.blogViewImagesLoadFromScrollStarted=true;cgJsData[gid].vars.blogViewImagesLoaded=false;cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.addClass("cg_hide");cgJsData[gid].vars.blogViewImagesLoadedLastRealIdForTopScroll=null;var $current_top_element=cgJsData[gid].vars.mainCGallery.find(".cgCenterDivForBlogView").first();var order;var isFirstScrollOrder=true;var blogViewImagesLoadedCount=0;var isLoopBreak=false;for(var i=cgJsData[gid].image.length-1;i>=0;i--){order=i;if(i>=cgJsData[gid].vars.blogViewImagesLoadedFirstOrder){continue}if(isFirstScrollOrder){var returnedValue=cgJsClass.gallery.views.singleView.openImage(jQuery,i,false,gid,"right",true,false,true,false,true,blogViewImagesLoadedCount,true);isFirstScrollOrder=false}else{var returnedValue=cgJsClass.gallery.views.singleView.openImage(jQuery,i,false,gid,"right",true,false,true,false,false,blogViewImagesLoadedCount,true)}blogViewImagesLoadedCount=blogViewImagesLoadedCount+1;if(returnedValue=="break"){cgJsData[gid].vars.blogViewImagesLoadedFirstOrder=i-1;isLoopBreak=true;break}}if(!isLoopBreak){cgJsData[gid].vars.blogViewImagesLoadedFirstOrder=i}var previous_height=0;$current_top_element.prevAll().each(function(){if(jQuery(this).hasClass("cg_hide")){return}previous_height+=jQuery(this).outerHeight()});jQuery(object).scrollTop(previous_height-650);if(order==0){cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.addClass("cg_hide")}else{cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.removeClass("cg_hide")}cgJsData[gid].vars.blogViewImagesLoaded=true;cgJsData[gid].vars.blogViewImagesLoadFromScrollStarted=false}}};cgJsClass.gallery.views.scrollInfoOrCommentTopFullHeight=function(gid,gidForElements){if(!gidForElements){gidForElements=gid}var $element=cgJsData[gid].vars.mainCGdiv.find("#cgCenterImageCommentsDiv"+gidForElements);var $elementParent=cgJsData[gid].vars.mainCGdiv.find("#cgCenterImageCommentsDivParentParent"+gidForElements);if($element.length){$element.scrollTop(0);if($elementParent.find(".cg-top-bottom-arrow:first-child").length){if($elementParent.find(".cg-top-bottom-arrow:first-child").is(":visible")){$elementParent.find(".cg-top-bottom-arrow:first-child").addClass("cg_no_scroll")}}if($elementParent.find(".cg-top-bottom-arrow:last-child").length){if($elementParent.find(".cg-top-bottom-arrow:last-child").is(":visible")){$elementParent.find(".cg-top-bottom-arrow:last-child").removeClass("cg_no_scroll")}}}};cgJsClass.gallery.views.scrollInfoOrCommentTop=function($object){var gid=$object.attr("data-cg-gid");$object.parent().find(".cg-top-bottom-arrow:last-child").removeClass("cg_no_scroll");var $scrollElement=$object.closest(".cg-scroll-info-single-image-view").find(".cg-center-image-info-div-parent-padding");$scrollElement.scrollTop($scrollElement.scrollTop()-50);if($scrollElement.scrollTop()==0){$object.addClass("cg_no_scroll")}else{$object.removeClass("cg_no_scroll")}};cgJsClass.gallery.views.scrollInfoOrCommentBottom=function($object){var gid=$object.attr("data-cg-gid");$object.parent().find(".cg-top-bottom-arrow:first-child").removeClass("cg_no_scroll");var $scrollElement=$object.closest(".cg-scroll-info-single-image-view").find(".cg-center-image-info-div-parent-padding");$scrollElement.scrollTop($scrollElement.scrollTop()+50);var countHeight=0;$scrollElement.find(".cg-center-image-info-div, .cg-center-image-comments-div").each(function(){countHeight=countHeight+jQuery(this).height()+0});var scrollCheck=$scrollElement.scrollTop()+$scrollElement.height();var scrollHeightElement=countHeight;if(scrollCheck>=scrollHeightElement){$object.addClass("cg_no_scroll")}else{$object.removeClass("cg_no_scroll")}};cgJsClass.gallery.comment.scrollInterval=null;;cgJsClass.gallery.views.singleViewClickEvents={selection:null,range:null,sel:null,node:null,commentTitleBefore:"",commentTextBefore:"",focusInNoScrollTimeout:1500,isLoaded:false,init:function($){debugger;if(!cgJsClass.gallery.views.singleViewClickEvents.isLoaded){cgJsClass.gallery.views.singleViewClickEvents.isLoaded=true}else{return}var cgInsertAtCursor=function(myField,myValue){if(document.selection){myField.focus();sel=document.selection.createRange();sel.text=myValue}else if(myField.selectionStart||myField.selectionStart=="0"){var startPos=myField.selectionStart;var endPos=myField.selectionEnd;myField.value=myField.value.substring(0,startPos)+myValue+myField.value.substring(endPos,myField.value.length);myField.selectionStart=startPos+myValue.length;myField.selectionEnd=startPos+myValue.length}else{myField.value+=myValue}};$(document).on("focus input paste",".cgCenterDiv .cg-center-image-comments-div-enter-textarea,.cgCenterDiv .cg-center-image-comments-div-enter-title",function(event){var start=this.selectionStart;var end=this.selectionEnd;cgJsClass.gallery.vars.selectionStart=start;cgJsClass.gallery.vars.selectionEnd=end});$(document).on("click",".cg-emoji-select",function(){if(parseInt($(this).closest(".cg-center-image-comments-div-enter-container").find(".cg-center-image-comments-div-enter-counter").text())<=0){return}var $contentEditable=$(this).closest(".cg-center-image-comments-div-enter-container").find(".cg-center-image-comments-div-enter-contenteditable");cgInsertAtCursor($contentEditable.get(0),$(this).attr("data-emoji"));$contentEditable.focus();$contentEditable.get(0).selectionStart=cgJsClass.gallery.vars.selectionStart;$contentEditable.get(0).selectionEnd=cgJsClass.gallery.vars.selectionEnd;cgJsClass.gallery.views.singleViewFunctions.calculateChars($contentEditable)});$(document).on("click",".cg-emojis-add.cg-emojis-add-textarea,.cg-emojis-add.cg-emojis-add-title",function(){var $cgCenterImageCommentsDivEnterContainer=$(this).closest(".cg-center-image-comments-div-enter-container");var gid=$cgCenterImageCommentsDivEnterContainer.attr("data-cg-gid");var $cgEmojisDiv=$cgCenterImageCommentsDivEnterContainer.find(".cg-emojis-div");if($(this).hasClass("cg-emojis-add-textarea")){$(this).closest(".cg-center-image-comments-div-enter").find(".cg-center-image-comments-div-enter-title-div .cg-emojis-div").addClass("cg_hide");$(this).closest(".cg-center-image-comments-div-enter").find(".cg-center-image-comments-div-enter-title-div .cg-emojis-add").attr("data-cg-tooltip",cgJsClass.gallery.language[gid].AddAnEmoji)}else if($(this).hasClass("cg-emojis-add-title")){$(this).closest(".cg-center-image-comments-div-enter").find(".cg-center-image-comments-div-enter-textarea-div .cg-emojis-div").addClass("cg_hide");$(this).closest(".cg-center-image-comments-div-enter").find(".cg-center-image-comments-div-enter-textarea-div .cg-emojis-add").attr("data-cg-tooltip",cgJsClass.gallery.language[gid].AddAnEmoji)}if($cgEmojisDiv.hasClass("cg_hide")){$cgEmojisDiv.removeClass("cg_hide");$(this).attr("data-cg-tooltip",cgJsClass.gallery.language[gid].HideEmojis)}else{$cgEmojisDiv.addClass("cg_hide");$(this).attr("data-cg-tooltip",cgJsClass.gallery.language[gid].AddAnEmoji)}});$(document).on("focusin",".cg-center-image-comments-div-enter-title",function(event){if(cgJsClass.gallery.vars.isMobile){$("body > .mainCGdivHelperParent").addClass("cg_no_scroll");setTimeout(function(){$("body > .mainCGdivHelperParent").removeClass("cg_no_scroll")},cgJsClass.gallery.views.singleViewClickEvents.focusInNoScrollTimeout)}$(this).closest(".cg-center-image-comments-div-enter").find(".cg-center-image-comments-div-enter-textarea-div .cg-emojis-div").addClass("cg_hide")});$(document).on("focusin",".cg-center-image-comments-div-enter-textarea",function(event){if(cgJsClass.gallery.vars.isMobile){var $mainCGdivHelperParent=$("body > .mainCGdivHelperParent");if(!$mainCGdivHelperParent.hasClass("cg_no_scroll")){$mainCGdivHelperParent.addClass("cg_no_scroll");setTimeout(function(){$mainCGdivHelperParent.removeClass("cg_no_scroll")},cgJsClass.gallery.views.singleViewClickEvents.focusInNoScrollTimeout)}}$(this).closest(".cg-center-image-comments-div-enter").find(".cg-center-image-comments-div-enter-title-div .cg-emojis-div").addClass("cg_hide")});$(document).on("input",".cg-center-image-comments-div-enter-textarea",function(event){cgJsClass.gallery.views.singleViewFunctions.calculateChars($(this))});$(document).on("input",".cg-center-image-comments-div-enter-title",function(event){cgJsClass.gallery.views.singleViewFunctions.calculateChars($(this))});$(document).on("keydown",".cgCenterDiv .cg-center-image-comments-div-enter-textarea,.cgCenterDiv .cg-center-image-comments-div-enter-title",function(event){var $element=$(this);var elementVal=$element.val();cgJsClass.gallery.vars.enteredTextBefore=elementVal});$(document).on("input",".cgCenterDiv .cg-center-image-comments-div-enter-textarea,.cgCenterDiv .cg-center-image-comments-div-enter-title",function(event){var $element=$(this);var $cgCenterDiv=$element.closest(".cgCenterDiv");var gid=$cgCenterDiv.attr("data-cg-gid");var elementVal=$element.val();if($element.hasClass("cg-center-image-comments-div-enter-textarea")){cgJsClass.gallery.views.singleViewClickEvents.commentTextBefore=cgJsClass.gallery.vars.enteredTextBefore}else if($element.hasClass("cg-center-image-comments-div-enter-title")){cgJsClass.gallery.views.singleViewClickEvents.commentTitleBefore=cgJsClass.gallery.vars.enteredTextBefore}});$(document).on("click",".mainCGBackToGalleryButtonHref",function(e){var gid=$(this).closest(".mainCGdiv").attr("data-cg-gid");if($(this).hasClass("isCGalleries")){e.preventDefault();cgJsClass.gallery.getJson.getGallery($(this).closest(".mainCGdiv").attr("data-cg-gid"),"9999999",cgJsData[gid].vars.shortcode_name)}else{sessionStorage.setItem("mainCGBackToGalleryButtonHrefGid",$(this).attr("data-cg-gid"))}});$(document).on("click",".cg_center_show_social_share_mobile_button",function(){$(this).addClass("cg_hide");$(this).closest(".cgCenterDiv").find(".cg_center_show_social_share_parent").css("display","flex").removeClass("cg_hide")});$(document).on("click",".cg-copy-original-file-link",function(){var gid=$(this).attr("data-cg-gid");var realId=$(this).attr("data-cg-real-id");if(cgJsData[gid].vars.rawData[realId].ImgType=="ytb"){var imageUrl="https://www.youtube.com/watch?v="+cgJsData[gid].vars.rawData[realId].post_name}else{var imageUrl=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId]["full"])}var el=document.createElement("textarea");el.value=imageUrl;el.setAttribute("readonly","");el.style.position="absolute";el.style.left="-9999px";document.body.appendChild(el);el.select();document.execCommand("copy");document.body.removeChild(el);cgJsClass.gallery.function.message.show($(this).attr("data-cg-gid"),cgJsClass.gallery.language[$(this).attr("data-cg-gid")].OriginalFileSourceLinkCopied)});$(document).on("click",".cg-image-image-href-to-copy",function(){var gid=$(this).attr("data-cg-gid");var realId=$(this).attr("data-cg-real-id");if(cgJsData[gid].vars.rawData[realId]["entryGuid"]){var imageUrl=cgJsData[gid].vars.rawData[realId]["entryGuid"]}else{var imageUrl=cgJsClass.gallery.views.singleView.createImageUrl($(this).attr("data-cg-gid"),$(this).attr("data-cg-real-id"),true)}if(cgJsData[gid].vars.isEcommerceTest){imageUrl+="?test=true"}var el=document.createElement("textarea");el.value=imageUrl;el.setAttribute("readonly","");el.style.position="absolute";el.style.left="-9999px";document.body.appendChild(el);el.select();document.execCommand("copy");document.body.removeChild(el);var imgType=cgJsData[gid].vars.rawData[realId].ImgType;if(imgType=="con"){cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].GalleryEntryLinkCopied)}else{cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].GalleryEntryLinkCopied)}});$(document).on("click",".cg-center-image-info-edit-icon-container",function(){var gid=$(this).closest(".cgCenterDiv").attr("data-cg-gid");$(this).addClass("cg_edit_started_current");cgJsData[gid].vars.mainCGallery.find(".cg-center-image-info-edit-icon-container.cg_edit_started:not(.cg_edit_started_current)").each(function(){var $cgCenterDiv=$(this).closest(".cgCenterDiv");cgJsClass.gallery.views.singleViewFunctions.editCloseInfoUserGallery($cgCenterDiv)});$(this).removeClass("cg_edit_started_current");if(!$(this).hasClass("cg_edit_started")){var $cgCenterDiv=$(this).closest(".cgCenterDiv");cgJsClass.gallery.views.singleViewFunctions.editOpenInfoUserGallery($,this,$cgCenterDiv)}else{var $cgCenterDiv=$(this).closest(".cgCenterDiv");cgJsClass.gallery.views.singleViewFunctions.editCloseInfoUserGallery($cgCenterDiv)}});$(document).on("click",".cg-center-image-info-save-icon,.cg-center-image-info-save-text",function(){cgJsClass.gallery.user.editImageDataProcess($(this))});$(document).on("input paste",".cg-field-id-input-content.hasDatepicker",function(e){this.value="";return});$(document).on("input change",".cg-field-id-input-content",function(e){var $field=$(this);var elementVal=$field.val();if(false){$field.val(elementVal.replace(cgJsClass.gallery.vars.regexEmoticons,""));return}});$(document).on("click",".cg-center-image-info-div-title .cg-center-image-comments-div-add-comment",function(){cgJsClass.gallery.views.singleViewFunctions.showCommentsAreaOnAddCommentClick($(this))});$(document).on("click",".cg-center-image-comments-div-parent > .cg-center-image-comments-div-add-comment",function(){cgJsClass.gallery.views.singleViewFunctions.showCommentsAreaOnAddCommentClick($(this))});$(document).on("click",".cg-center-image-close",function(){var gid=$(this).closest(".cgCenterDiv").attr("data-cg-gid");var realId=$(this).attr("data-cg-actual-realId");cgJsClass.gallery.views.close(gid,false,realId)});$(document).on("click",".cg-center-arrow-left",function(){jQuery(window).off("hashchange");cgJsClass.gallery.vars.keypressStartInSeconds=(new Date).getTime()/1e3;cgJsClass.gallery.vars.showImageClicked=true;var gid=$(this).closest(".cgCenterDiv").attr("data-cg-gid");var order=parseInt(cgJsData[gid].vars.openedGalleryImageOrder)-1;cgJsClass.gallery.views.functions.appendAndRemoveImagesInSlider(gid,order,cgJsData[gid].vars.maximumVisibleImagesInSlider,cgJsData[gid].vars.mainCGslider);cgJsClass.gallery.views.singleView.openImage($,order,false,gid,"left");cgJsClass.gallery.hashchange.activateHashChangeEvent()});$(document).on("click",".cg-center-arrow-right",function(){jQuery(window).off("hashchange");cgJsClass.gallery.vars.keypressStartInSeconds=(new Date).getTime()/1e3;cgJsClass.gallery.vars.showImageClicked=true;var gid=$(this).closest(".cgCenterDiv").attr("data-cg-gid");var order=parseInt(cgJsData[gid].vars.openedGalleryImageOrder)+1;cgJsClass.gallery.views.functions.appendAndRemoveImagesInSlider(gid,order,cgJsData[gid].vars.maximumVisibleImagesInSlider,cgJsData[gid].vars.mainCGslider);cgJsClass.gallery.views.singleView.openImage($,order,false,gid,"right");cgJsClass.gallery.hashchange.activateHashChangeEvent()});$(document).on("click",".cg_show_href_target_blank",function(e){if($(this).hasClass("cg_no_target_blank")){e.preventDefault();return}if(cgJsClass.gallery.vars.dom.body.hasClass("cg_gallery_rating_div_five_star_details_is_opened")||$(e.target).closest(".cg_gallery_rating_div_five_star_details").length){e.preventDefault();return}});$(document).on("click",".cg_show .cg_multiple_files, .cg_show .cg_multiple_files_prev",function(e){$(this).closest(".cg_show").find(".cg_append").click()});var eventTime=0;$(document).on("click",'.cg_append, .cg_append_social_overlay, .cg_gallery_info, .cg_gallery_info_title, div[id^="cg_show"] .cg_gallery_info',function(e){var timeMilliseconds=(new Date).getTime();if(eventTime){if(timeMilliseconds-10<=eventTime){return}}eventTime=timeMilliseconds;if($(e.target).closest(".cgCenterDiv").length||$(e.target).hasClass("cg_extern_privacy_policy")){return}if($(e.target).hasClass("cg_delete_user_image")){return}if($(e.target).hasClass("cg_social_consent_agree")){return}if($(this).hasClass("cg_gallery_info_href")||$(e.target).closest(".cg_gallery_info_href").length){return}if($(this).hasClass("cg_append_social_overlay")){$(this).parent().find(".cg_append").click();return}var $element=$(this);var $mainCGallery=$element.closest(".mainCGallery");var gid=$mainCGallery.attr("data-cg-gid");var $cg_show=$element.closest(".cg_show");if($(this).closest(".isCGalleries").length){if(cgJsData[gid].vars.isGalleriesMainPage){return}cgJsClass.gallery.getJson.getGallery(gid,$cg_show.attr("data-cg-gid-to-show"),cgJsData[gid].vars.shortcode_name,$cg_show.attr("data-cg-id"));return}var $mainCGslider=$element.closest(".mainCGslider");if(!cgJsData[gid].vars.isUserGallery&&!cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.isOnlyGalleryWinner){if($cg_show.length&&!$mainCGslider.length){if(!$(e.target).hasClass("cg_voted_confirm")){if(($(e.target).hasClass("cg_gallery_rating_div")||$(e.target).closest(".cg_gallery_rating_div").length)&&cgJsData[gid].options.general.RatingOutGallery==1&&!$element.hasClass("cg_open_gallery")&&!$element.hasClass("cg_open_gallery_slider_look")&&!cgJsClass.gallery.vars.isMobile){return}}}}if(cgJsData[gid].vars.isUserGallery){if($(e.target).closest(".cg-center-image-parent").length){return}}if(cgJsData[gid].options.pro.IsModernFiveStar==1&&cgJsData[gid].options.general.RatingOutGallery==1&&cgJsClass.gallery.vars.isMobile&&!$(this).hasClass("cg-pass-through")&&!cgJsClass.gallery.vars.passThrough){if($(e.target).closest(".cg_gallery_rating_div_child").length==1&&$(e.target).closest(".cg-center-image-rating-div").length==0||$(e.target).hasClass(".cg_gallery_rating_div_child")&&$(e.target).closest(".cg-center-image-rating-div").length==0){if(!$mainCGslider.length){return}}}if(cgJsData[gid].options.pro.IsModernFiveStar==1&&cgJsData[gid].options.general.AllowRatingDynamic){if($mainCGslider.length>=1){var $cg_show=$(this).closest(".cg_show");if($cg_show.length>=1){if(cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){$cg_show.find(".cg_gallery_rating_div_five_star_details").addClass("cg_hide")}}}}$(this).removeClass("cg-pass-through");cgJsClass.gallery.vars.passThrough=false;cgJsClass.gallery.vars.showImageClicked=true;cgJsClass.gallery.function.general.tools.checkErrorAbort(gid);var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}if(cgJsData[gid].options.general.FullSizeImageOutGallery==1&&sliderView==false){return}if(cgJsData[gid].options.general.OnlyGalleryView==1&&sliderView==false){return}if(cgJsData[gid].options.visual.ForwardToWpPageEntry==1&&sliderView==false){return}e.preventDefault();var order=$element.closest(".cg_show").attr("data-cg-order");cgJsClass.gallery.views.functions.appendAndRemoveImagesInSlider(gid,order,cgJsData[gid].vars.maximumVisibleImagesInSlider,cgJsData[gid].vars.mainCGslider);var firstKey=Object.keys(cgJsData[gid].image[order])[0];var realId=cgJsData[gid].image[order][firstKey]["id"];var isGalleryOpened=false;var initFullWindow=false;if(cgJsData[gid].options.pro.SliderFullWindow==1||cgJsData[gid].options.visual.BlogLookFullWindow==1){initFullWindow=true}if((cgJsData[gid].options.general.FullSizeSlideOutStart==1||cgJsData[gid].options.pro.SliderFullWindow==1||cgJsData[gid].options.visual.BlogLookFullWindow==1)&&!cgJsClass.gallery.vars.fullwindow&&!cgJsData[gid].vars.galleryAlreadyFullWindow||!cgJsClass.gallery.vars.fullwindow&&initFullWindow==true){if(!sliderView&&cgJsData[gid].vars.currentLook!="blog"){if(typeof $element.find(".cg_rate_star")[0]=="undefined"&&$element.hasClass("cg_gallery_info")){if(cgJsClass.gallery.function.general.tools.checkIfNoRating(gid)){cgJsData[gid].vars.openedRealId=realId;cgJsClass.gallery.views.fullwindow.openFunction(gid,$('<div data-cg-real-id="'+realId+'"></div>'))}else{return}}else{cgJsData[gid].vars.openedRealId=realId;cgJsClass.gallery.views.fullwindow.openFunction(gid,$('<div data-cg-real-id="'+realId+'"></div>'))}return}}var isGalleryOpenedSliderLook=false;if($element.hasClass("cg_open_gallery")){$element.removeClass("cg_open_gallery");isGalleryOpened=true}if($element.hasClass("cg_open_gallery_slider_look")){$element.removeClass("cg_open_gallery_slider_look");if(sliderView==true){isGalleryOpenedSliderLook=true}}var direction=undefined;if(typeof cgJsData[gid].vars.openedGalleryImageOrder!=null){if(parseInt(order)>=parseInt(cgJsData[gid].vars.openedGalleryImageOrder)){direction="right"}if(parseInt(order)<parseInt(cgJsData[gid].vars.openedGalleryImageOrder)){direction="left"}}if(typeof $element.find(".cg_rate_star")[0]=="undefined"&&$element.hasClass("cg_gallery_info")){if(cgJsClass.gallery.function.general.tools.checkIfNoRating(gid)){cgJsClass.gallery.views.singleView.openImage($,order,false,gid,direction,isGalleryOpened,isGalleryOpenedSliderLook)}else{return}}else{cgJsClass.gallery.views.singleView.openImage($,order,false,gid,direction,isGalleryOpened,isGalleryOpenedSliderLook)}});jQuery(document).on("click",".cg-center-image-comments-div-show-more-comments",function(){var $element=jQuery(this);var $cgCenterDiv=$element.closest(".cgCenterDiv");if($element.hasClass("cg-center-image-show-more-expanded")){$cgCenterDiv.find(".cg-center-image-comments-div-parent-parent").removeClass("cg-center-image-show-more-expanded");$cgCenterDiv.find(".cg-center-image-comments-div-parent").removeClass("cg-center-image-show-more-expanded");$element.removeClass("cg-center-image-show-more-expanded").attr("data-cg-tooltip",cgJsClass.gallery.language[$cgCenterDiv.attr("data-cg-gid")].ShowMoreComments)}else{$cgCenterDiv.find(".cg-center-image-comments-div-parent-parent").addClass("cg-center-image-show-more-expanded");$cgCenterDiv.find(".cg-center-image-comments-div-parent").addClass("cg-center-image-show-more-expanded");$element.addClass("cg-center-image-show-more-expanded").attr("data-cg-tooltip",cgJsClass.gallery.language[$cgCenterDiv.attr("data-cg-gid")].ShowLessComments)}});jQuery(document).on("click",".cg-center-image-comments-div-show-more-info",function(){var $element=jQuery(this);var $cgCenterDiv=$element.closest(".cgCenterDiv");if($element.hasClass("cg-center-image-show-more-expanded")){$cgCenterDiv.find(".cg-center-image-info-div-parent-parent").removeClass("cg-center-image-show-more-expanded");$cgCenterDiv.find(".cg-center-image-info-div-container").removeClass("cg-center-image-show-more-expanded");$element.removeClass("cg-center-image-show-more-expanded").attr("data-cg-tooltip",cgJsClass.gallery.language[$cgCenterDiv.attr("data-cg-gid")].ShowMoreInfo)}else{$cgCenterDiv.find(".cg-center-image-info-div-parent-parent").addClass("cg-center-image-show-more-expanded");$cgCenterDiv.find(".cg-center-image-info-div-container").addClass("cg-center-image-show-more-expanded");$element.addClass("cg-center-image-show-more-expanded").attr("data-cg-tooltip",cgJsClass.gallery.language[$cgCenterDiv.attr("data-cg-gid")].ShowLessInfo)}});jQuery(document).on("click",".cg-center-image",function(e){var $element=jQuery(this);var $eTarget=jQuery(e.target);if($eTarget.hasClass("cg_delete_user_image_container")||$eTarget.closest(".cg_delete_user_image_container").length){return}if(cgJsClass.gallery.vars.isMobile&&$element.width()<=750){var $cgCenterDiv=$element.closest(".cgCenterDiv");var gid=$cgCenterDiv.attr("data-cg-gid");var realId=$cgCenterDiv.attr("data-cg-real-id");cgJsClass.gallery.views.singleViewFunctions.zoom(jQuery,$element,gid,realId)}});jQuery(document).on("click",".cg_zoom_close",function(){cgJsClass.gallery.views.singleViewFunctions.zoomClose(jQuery,$(this))});jQuery(document).on("click",".cg-center-show-profile-image",function(){var gid=$(this).closest(".cgCenterDiv").attr("data-cg-gid");var realId=$(this).closest(".cgCenterDiv").attr("data-cg-real-id");var $cgCenterInfoDiv=$(this).closest(".cg-center-info-div");var nickname="";if(cgJsData[gid].vars.rawData[realId]["WpUserId"]){if(cgJsData[gid].vars.nicknames[cgJsData[gid].vars.rawData[realId]["WpUserId"]]){nickname=cgJsData[gid].vars.nicknames[cgJsData[gid].vars.rawData[realId]["WpUserId"]]}}var profileImage="";if(cgJsData[gid].vars.rawData[realId]["WpUserId"]){if(cgJsData[gid].vars.profileImages[cgJsData[gid].vars.rawData[realId]["WpUserId"]]){profileImage=cgJsData[gid].vars.profileImages[cgJsData[gid].vars.rawData[realId]["WpUserId"]]}}if(cgJsData[gid].options.pro.ShowNickname&&nickname||$cgCenterInfoDiv.length){cgJsClass.gallery.function.message.showPro(gid,'<div class="cg-center-show-profile-image-full-nickname">'+nickname+'</div><div class="cg-center-show-profile-image-full-show" style="background-image: url('+profileImage+');"></div>')}else{cgJsClass.gallery.function.message.showPro(gid,'<div class="cg-center-show-profile-image-full-show" style="background-image: url('+profileImage+');"></div>')}});jQuery(document).on("click",".cg-center-image-comments-div .cg-center-image-comments-profile-image,.cg-center-image-comments-div-enter .cg-center-image-comments-user-data .cg-center-image-comments-profile-image",function(){var gid=$(this).closest(".cgCenterDiv").attr("data-cg-gid");var WpUserId=$(this).attr("data-cg-wp-user-id");var $cgCenterInfoDiv=$(this).closest(".cg-center-info-div");var nickname="";if(cgJsData[gid].vars.nicknames[WpUserId]){nickname=cgJsData[gid].vars.nicknames[WpUserId]}var profileImage="";if(cgJsData[gid].vars.profileImages[WpUserId]){profileImage=cgJsData[gid].vars.profileImages[WpUserId]}if(cgJsData[gid].options.pro.ShowNickname&&nickname||$cgCenterInfoDiv.length){cgJsClass.gallery.function.message.showPro(gid,'<div class="cg-center-show-profile-image-full-nickname">'+nickname+'</div><div class="cg-center-show-profile-image-full-show" style="background-image: url('+profileImage+');"></div>')}else{cgJsClass.gallery.function.message.showPro(gid,'<div class="cg-center-show-profile-image-full-show" style="background-image: url('+profileImage+');"></div>')}});jQuery(document).on("click",".cg-center-image-next-file,.cg-center-image-prev-file",function(){var $cgCenterDiv=$(this).closest(".cgCenterDiv");var $cgCenterImage=$cgCenterDiv.find(".cg-center-image");$cgCenterImage.removeClass("cg_transition");$cgCenterImage.css({width:"",height:"","max-width":"","max-height":""});$cgCenterImage.removeClass("cg_background_unset");var gidForCenterDivElements=$cgCenterDiv.attr("data-cg-gid-with-order");var realId=$(this).attr("data-cg-real-id");var gid=$(this).attr("data-cg-gid");var ImgType=$(this).attr("data-cg-img-type");cgJsClass.gallery.views.singleViewFunctions.removeEmbed($cgCenterDiv);cgJsClass.gallery.views.singleViewFunctions.removeClassEmbed($cgCenterImage);if(cgJsData[gid].imageObject[realId]){cgJsData[gid].imageObject[realId].isAdditionalFileChanged=true}if($(this).hasClass("cg-center-image-next-file")){var minus="";cgJsClass.gallery.views.singleViewFunctions.setSelectedFileInMultipleFiles(gid,realId,undefined,true,$cgCenterDiv)}else if($(this).hasClass("cg-center-image-prev-file")){var minus="-";cgJsClass.gallery.views.singleViewFunctions.setSelectedFileInMultipleFiles(gid,realId,true,undefined,$cgCenterDiv)}var selectedFile=cgJsData[gid].vars.rawData[realId];var isEmbed=cgJsClass.gallery.function.general.tools.isEmbed(gid,realId,selectedFile);var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId,selectedFile);var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}$cgCenterDiv.find(".cg-center-image-parent-multiple-files-nav-point").removeClass("cg-center-image-parent-multiple-files-nav-point-active");$cgCenterDiv.find('.cg-center-image-parent-multiple-files-nav-point[data-cg-order="'+selectedFile.selectedOrder+'"]').addClass("cg-center-image-parent-multiple-files-nav-point-active");debugger;var originalSource=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId]["guid"]);cgJsClass.gallery.views.singleViewFunctions.setCenterImageDownloadLink(gid,realId,originalSource,ImgType,$cgCenterDiv,$cgCenterImage);if(isAlternativeFileType){cgJsClass.gallery.views.singleViewFunctions.setAlternativeFileTypeOrVideo(gid,realId,$cgCenterImage,selectedFile.ImgType,selectedFile.guid,selectedFile.NamePic,isAlternativeFileType,$cgCenterDiv,false,true)}else if(cgJsClass.gallery.function.general.tools.isEmbed(gid,realId)){$cgCenterDiv.find(".cg-center-image-download-link").addClass("cg_hide");cgJsClass.gallery.views.singleViewFunctions.setEmbed(gid,realId,selectedFile.ImgType,$cgCenterImage,$cgCenterDiv.find(".cg-center-image-parent"),$cgCenterDiv,$cgCenterDiv.width(),$cgCenterDiv.find(".cg-center-image-parent").height())}else{cgJsClass.gallery.views.singleViewFunctions.setImageWidthHeight(realId,gid,gidForCenterDivElements,selectedFile,sliderView,cgJsData[gid].vars.spaceForShowExif,$cgCenterImage.closest(".cg-center-image-parent").attr("data-cg-multiple-files-height-to-set"),selectedFile.rThumb,$cgCenterDiv,$cgCenterImage,minus,false,true);cgJsClass.gallery.views.singleViewFunctions.showExifData(gid,realId,$cgCenterDiv,gidForCenterDivElements);cgJsClass.gallery.views.setWatermarkSingleImageView(realId,gid,cgJsData[gid].vars.info[realId],$cgCenterDiv)}if($cgCenterDiv.find(".cg-forward-original-file").parent().is("a")){if(selectedFile.ImgType=="ytb"){var imageUrl="https://www.youtube.com/watch?v="+selectedFile.post_name;$cgCenterDiv.find(".cg-forward-original-file").parent().attr("href",imageUrl)}else{$cgCenterDiv.find(".cg-forward-original-file").parent().attr("href",selectedFile.guid)}}});jQuery(document).on("click",".cg_ytb_consent_agree",function(e){e.preventDefault();sessionStorage.setItem("cgYtbConsentAgreed","1");cgJsClass.gallery.vars.dom.body.find(".mainCGallery > .cg_show .cg_append_ytb_overlay_consent").each(function(){var gid=$(this).attr("data-cg-gid");var guid=$(this).attr("data-ytb-src");var realId=$(this).attr("data-cg-real-id");var $cg_show=$(this).closest(".cg_show");$cg_show.removeClass("cg_social_consent_required");$(this).replaceWith($('<iframe  class="cg_append cg_append_social cg_append_ytb" id="cg_append'+realId+'" width="100%" height="100%" src="'+guid+'" ></iframe>'));if(!$cg_show.closest(".cg_galleries_main_page").length&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){$cg_show.prepend('<div class="cg_append cg_append_iframe_overlay_for_click"></div>')}});cgJsClass.gallery.vars.dom.body.find(".mainCGslider .cg_show .cg_append_ytb_overlay_consent").each(function(){var guid=$(this).attr("data-ytb-src");var realId=$(this).attr("data-cg-real-id");var $cg_show=$(this).closest(".cg_show");$(this).replaceWith($('<iframe  class="cg_append cg_append_social" id="cg_append'+realId+'" width="100%" height="100%" src="'+guid+'" ></iframe>'));$cg_show.removeClass("cg_social_consent_required");$cg_show.append('<div class="cg_append_social_overlay"></div>')});cgJsClass.gallery.vars.dom.body.find(".mainCGallery .cgCenterDiv .cg_append_ytb_overlay_consent").each(function(){var guid=$(this).attr("data-ytb-src");var width=$(this).attr("data-cg-center-div-width");var height=$(this).attr("data-cg-center-div-height");var $cgCenterDiv=$(this).closest(".cgCenterDiv");$cgCenterDiv.removeClass("cg_social_consent_required");$(this).replaceWith($('<iframe  class="cg-center-image-ytb-entry-content" width="'+width+'" height="'+height+'" src="'+guid+'" ></iframe>'))});cgJsClass.gallery.vars.dom.body.find(".mainCGdiv .cg-ecommerce-checkout-body-product-info-image .cg_append_ytb_overlay_consent").each(function(){var guid=$(this).attr("data-ytb-src");var realId=$(this).attr("data-cg-real-id");debugger;$(this).closest(".cg-ecommerce-checkout-body-product-info-image").removeClass("cg_embed_consent_required");$(this).replaceWith($('<iframe  class="cg_append cg_append_social cg_append_ytb" id="cg_append'+realId+'" width="400" height="300" src="'+guid+'" ></iframe>'))})});jQuery(document).on("click",".cg_twt_consent_agree",function(e){e.preventDefault();sessionStorage.setItem("cgTwtConsentAgreed","1");cgJsClass.gallery.vars.dom.body.find(".mainCGallery > .cg_show .cg_append_twt_overlay_consent").each(function(){var realId=$(this).attr("data-cg-real-id");var gid=$(this).attr("data-cg-gid");var $cg_show=$(this).closest(".cg_show");$cg_show.removeClass("cg_social_consent_required");var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent($,gid,realId);var imageObject=$('<div  class="cg_append cg_append_twt" id="cg_append'+realId+'"></div>');if(!$cg_show.closest(".cg_galleries_main_page").length&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){imageObject.prepend('<div class="cg_append cg_append_iframe_overlay_for_click"></div>')}imageObject.append($blockquote);$(this).replaceWith(imageObject)});cgJsClass.gallery.vars.dom.body.find(".mainCGslider .cg_show .cg_append_twt_overlay_consent").each(function(){var realId=$(this).attr("data-cg-real-id");var gid=$(this).attr("data-cg-gid");var $cg_show=$(this).closest(".cg_show");var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent($,gid,realId);var imageObject=$('<div  class="cg_append cg_append_twt" id="cg_append'+realId+'" ></div>');imageObject.append($blockquote);$(this).replaceWith(imageObject);$cg_show.removeClass("cg_social_consent_required");$cg_show.append('<div class="cg_append_social_overlay"></div>')});cgJsClass.gallery.vars.dom.body.find(".mainCGallery .cgCenterDiv .cg_append_twt_overlay_consent").each(function(){var gid=$(this).attr("data-cg-gid");var realId=$(this).attr("data-cg-real-id");var $cgCenterDiv=$(this).closest(".cgCenterDiv");$cgCenterDiv.removeClass("cg_social_consent_required");var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent($,gid,realId);$cgCenterDiv.find(".cg-center-image").empty().prepend('<div class="cg-center-image-twt-entry-content" ></div>');$cgCenterDiv.find(".cg-center-image-twt-entry-content").append($blockquote)});cgJsClass.gallery.vars.dom.body.find(".mainCGdiv .cg-ecommerce-checkout-body-product-info-image .cg_append_twt_overlay_consent").each(function(){var gid=$(this).attr("data-cg-gid");var realId=$(this).attr("data-cg-real-id");$(this).closest(".cg-ecommerce-checkout-body-product-info-image").removeClass("cg_embed_consent_required");var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent($,gid,realId);var imageObject=$('<div  class="cg_append cg_append_twt" id="cg_append'+realId+'"></div>');imageObject.append($blockquote);$(this).replaceWith(imageObject)})});jQuery(document).on("click",".cg_tkt_consent_agree",function(e){e.preventDefault();sessionStorage.setItem("cgTktConsentAgreed","1");cgJsClass.gallery.vars.dom.body.find(".mainCGallery > .cg_show .cg_append_tkt_overlay_consent").each(function(){var gid=$(this).attr("data-cg-gid");var realId=$(this).attr("data-cg-real-id");var $cg_show=$(this).closest(".cg_show");$cg_show.closest(".cg_show").removeClass("cg_social_consent_required");var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent($,gid,realId);var imageObject=$('<div  class="cg_append cg_append_tkt" id="cg_append'+realId+'"></div>');if(!$cg_show.closest(".cg_galleries_main_page").length&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){imageObject.prepend('<div class="cg_append cg_append_iframe_overlay_for_click"></div>')}imageObject.append($blockquote);$(this).replaceWith(imageObject)});cgJsClass.gallery.vars.dom.body.find(".mainCGslider .cg_show .cg_append_tkt_overlay_consent").each(function(){var realId=$(this).attr("data-cg-real-id");var gid=$(this).attr("data-cg-gid");var $cg_show=$(this).closest(".cg_show");var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent($,gid,realId);var imageObject=$('<div  class="cg_append cg_append_tkt" id="cg_append'+realId+'" ></div>');imageObject.append($blockquote);$(this).replaceWith(imageObject);$cg_show.removeClass("cg_social_consent_required");$cg_show.append('<div class="cg_append_social_overlay"></div>')});cgJsClass.gallery.vars.dom.body.find(".mainCGallery .cgCenterDiv .cg_append_tkt_overlay_consent").each(function(){var gid=$(this).attr("data-cg-gid");var realId=$(this).attr("data-cg-real-id");var $cgCenterDiv=$(this).closest(".cgCenterDiv");$cgCenterDiv.removeClass("cg_social_consent_required");var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent($,gid,realId);$cgCenterDiv.find(".cg-center-image").empty().prepend('<div class="cg-center-image-tkt-entry-content" ></div>');$cgCenterDiv.find(".cg-center-image-tkt-entry-content").append($blockquote)});cgJsClass.gallery.vars.dom.body.find(".mainCGdiv .cg-ecommerce-checkout-body-product-info-image .cg_append_tkt_overlay_consent").each(function(){var gid=$(this).attr("data-cg-gid");var realId=$(this).attr("data-cg-real-id");$(this).closest(".cg-ecommerce-checkout-body-product-info-image").removeClass("cg_embed_consent_required");var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent($,gid,realId);var imageObject=$('<div  class="cg_append cg_append_tkt" id="cg_append'+realId+'"></div>');imageObject.append($blockquote);$(this).replaceWith(imageObject)})});jQuery(document).on("click",".cg_inst_consent_agree",function(e){e.preventDefault();sessionStorage.setItem("cgInstConsentAgreed","1");cgJsClass.gallery.vars.dom.body.find(".mainCGallery > .cg_show .cg_append_inst_overlay_consent").each(function(){var gid=$(this).attr("data-cg-gid");var guid=$(this).attr("data-inst-src");var realId=$(this).attr("data-cg-real-id");var $cg_show=$(this).closest(".cg_show");$cg_show.removeClass("cg_social_consent_required");$(this).replaceWith($('<iframe  class="cg_append cg_append_social cg_append_inst" id="cg_append'+realId+'" width="100%" height="100%" src="'+guid+'" ></iframe>'));if(!$cg_show.closest(".cg_galleries_main_page").length&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){$cg_show.prepend('<div class="cg_append cg_append_iframe_overlay_for_click"></div>')}});cgJsClass.gallery.vars.dom.body.find(".mainCGslider .cg_show .cg_append_inst_overlay_consent").each(function(){var guid=$(this).attr("data-inst-src");var realId=$(this).attr("data-cg-real-id");var $cg_show=$(this).closest(".cg_show");$(this).replaceWith($('<iframe  class="cg_append cg_append_social" id="cg_append'+realId+'" width="100%" height="100%" src="'+guid+'" ></iframe>'));$cg_show.removeClass("cg_social_consent_required");$cg_show.append('<div class="cg_append_social_overlay"></div>')});cgJsClass.gallery.vars.dom.body.find(".mainCGallery .cgCenterDiv .cg_append_inst_overlay_consent").each(function(){var guid=$(this).attr("data-inst-src");var width=$(this).attr("data-cg-center-div-width");var height=$(this).attr("data-cg-center-div-height");var $cgCenterDiv=$(this).closest(".cgCenterDiv");$cgCenterDiv.removeClass("cg_social_consent_required");$(this).replaceWith($('<iframe  class="cg-center-image-inst-entry-content" width="'+width+'" height="'+height+'" src="'+guid+'" ></iframe>'))});cgJsClass.gallery.vars.dom.body.find(".mainCGdiv .cg-ecommerce-checkout-body-product-info-image .cg_append_inst_overlay_consent").each(function(){var guid=$(this).attr("data-inst-src");var realId=$(this).attr("data-cg-real-id");$(this).closest(".cg-ecommerce-checkout-body-product-info-image").removeClass("cg_embed_consent_required");$(this).replaceWith($('<iframe  class="cg_append cg_append_social cg_append_inst" id="cg_append'+realId+'" width="400" height="300" src="'+guid+'" ></iframe>'))})})}};;cgJsClass.gallery.views.singleViewFunctions.setVideoWidthAndHeight=function($cgCenterImage,cgCenterDiv,originalSource,gid,realId,cgCenterImageParentHeight,isFromClickNextPrevFile){debugger;var widthContainer=cgCenterDiv.width()-80;var heightContainer=widthContainer*.5625;$cgCenterImage.css({"max-width":widthContainer+"px","max-height":heightContainer+"px",width:widthContainer+"px",height:heightContainer+"px"});var video=$cgCenterImage.find("video").get(0);var Width=cgJsData[gid].vars.rawData[realId]["Width"];var Height=cgJsData[gid].vars.rawData[realId]["Height"];if(isFromClickNextPrevFile){var cgCenterImageHeight=$cgCenterImage.closest(".cg-center-image-parent").height()}else{var cgCenterImageHeight=cgCenterImageParentHeight}if(Width&&Height){var $video=$cgCenterImage.find("video");$video.width(Width);$video.css("height","");var widthForCalculation=cgCenterDiv.width()-80;if(Width>=widthForCalculation){var videoWidth=widthForCalculation;var videoHeight=widthForCalculation/Width*Height}else{var videoWidth=Width;var videoHeight=Height}if(videoHeight>cgCenterImageHeight){videoWidth=cgCenterImageHeight*videoWidth/videoHeight;videoHeight=cgCenterImageHeight}var $video=$cgCenterImage.find("video");$video.width(videoWidth);$video.height(videoHeight);$cgCenterImage.css({"max-height":videoHeight,"max-width":videoWidth,width:videoWidth,height:videoHeight});setTimeout(function(){$video.width(videoWidth-1);$video.height(videoHeight-1)},1)}else if(cgJsClass.gallery.vars.videosMetadataLoaded[originalSource]){var $video=$cgCenterImage.find("video");$video.width(cgJsClass.gallery.vars.videosMetadataLoaded[originalSource].videoWidth);$video.css("height","");var widthForCalculation=cgCenterDiv.width()-80;if(cgJsClass.gallery.vars.videosMetadataLoaded[originalSource].videoWidth>=widthForCalculation){var videoWidth=widthForCalculation;var videoHeight=widthForCalculation/cgJsClass.gallery.vars.videosMetadataLoaded[originalSource].videoWidth*cgJsClass.gallery.vars.videosMetadataLoaded[originalSource].videoHeight}else{var videoWidth=cgJsClass.gallery.vars.videosMetadataLoaded[originalSource].videoWidth;var videoHeight=cgJsClass.gallery.vars.videosMetadataLoaded[originalSource].videoHeight}var $video=$cgCenterImage.find("video");$video.width(videoWidth);$video.css("height","");$cgCenterImage.css({"max-height":videoHeight,"max-width":videoWidth,width:videoWidth,height:videoHeight});setTimeout(function(){$video.width(videoWidth-1)},1)}else{video.addEventListener("loadedmetadata",function(e){var widthForCalculation=cgCenterDiv.width()-80;if(video.videoWidth>=widthForCalculation){var videoWidth=widthForCalculation;var videoHeight=widthForCalculation/video.videoWidth*video.videoHeight}else{var videoWidth=video.videoWidth;var videoHeight=video.videoHeight}var $video=$cgCenterImage.find("video");$video.width(videoWidth);$video.css("height","");cgJsClass.gallery.vars.videosMetadataLoaded[originalSource]={};cgJsClass.gallery.vars.videosMetadataLoaded[originalSource].videoWidth=video.videoWidth;cgJsClass.gallery.vars.videosMetadataLoaded[originalSource].videoHeight=video.videoHeight;setTimeout(function(){$video.width(videoWidth-1)},1)})}};cgJsClass.gallery.views.singleViewFunctions.audioOnplay=function(e){var $element=jQuery(e.target);$element.addClass("cg-is-audio-playing");jQuery("body .cg-center-image-audio audio").each(function(){if(!jQuery(this).hasClass("cg-is-audio-playing")){jQuery(this).get(0).pause()}});$element.removeClass("cg-is-audio-playing");jQuery("body .cg-center-image-video video").each(function(){jQuery(this).get(0).pause()})};cgJsClass.gallery.views.singleViewFunctions.videoOnplay=function(e){var $element=jQuery(e.target);$element.addClass("cg-is-video-playing");jQuery("body .cg-center-image-video video").each(function(){if(!jQuery(this).hasClass("cg-is-video-playing")){jQuery(this).get(0).pause()}});$element.removeClass("cg-is-video-playing");jQuery("body .cg-center-image-audio audio").each(function(){jQuery(this).get(0).pause()})};cgJsClass.gallery.views.singleViewFunctions.editCloseInfoUserGallery=function($cgCenterDiv){var gid=$cgCenterDiv.attr("data-cg-gid");var realId=$cgCenterDiv.attr("data-cg-real-id");var gidForCenterDivElements=$cgCenterDiv.attr("data-cg-gid-for-center-div-elements");$cgCenterDiv.find(".cg-center-image-info-div-parent-parent").removeClass("cg_overflow_visible");$cgCenterDiv.find(".cg-center-image-info-edit-icon-container").removeClass("cg_edit_started");$cgCenterDiv.find(".cg-center-image-comments-div-show-more-info").removeClass("cg_edit_started");cgJsClass.gallery.views.checkIfTopBottomArrowsRequired(gid,gidForCenterDivElements,true);$cgCenterDiv.find(".cg-center-image-info-save-icon-text-container").addClass("cg_hide");cgJsClass.gallery.views.setInfoSingleImageView(realId,gid,false,gidForCenterDivElements);cgJsClass.gallery.info.setWatermarkGalleryView(realId,gid);cgJsClass.gallery.info.setInfoGalleryView(realId,gid,true,cgJsData[gid].imageObject[realId],cgJsData[gid].imageObject[realId]?cgJsData[gid].imageObject[realId].height:undefined);var $cgCenterImageInfoDivParent=$cgCenterDiv.find(".cg-center-image-info-div-parent");$cgCenterImageInfoDivParent.removeClass("cg_edit")};cgJsClass.gallery.views.singleViewFunctions.editOpenInfoUserGallery=function($,object,$cgCenterDiv){$cgCenterDiv.find(".cg-center-image-info-div-parent-parent").removeClass("cg-center-image-show-more-expanded");$cgCenterDiv.find(".cg-center-image-info-div-parent-parent").addClass("cg_overflow_visible");$cgCenterDiv.find(".cg-center-image-info-div-container").removeClass("cg-center-image-show-more-expanded").addClass("cg-center-image-comments-div-show-more-available");$cgCenterDiv.find(".cg-center-image-info-edit-icon-container").addClass("cg_edit_started");$cgCenterDiv.find(".cg-center-image-comments-div-show-more-info").addClass("cg_edit_started").removeClass("cg_hide cg-center-image-show-more-expanded");$cgCenterDiv.find(".cg-center-image-info-save-icon-text-container").removeClass("cg_hide");var $cgCenterImageInfoDivParent=$(object).closest(".cg-center-image-info-div-parent");$cgCenterImageInfoDivParent.addClass("cg_edit");$cgCenterDiv.css({height:"unset","min-height":"unset"});var realId=$cgCenterDiv.attr("data-cg-real-id");var gid=$cgCenterDiv.attr("data-cg-gid");var $cgCenterImageInfoDivContainer=$cgCenterImageInfoDivParent.find(".cg-center-image-info-div-container");$cgCenterImageInfoDivContainer.empty();for(var index in cgJsData[gid].singleViewOrder){if(!cgJsData[gid].singleViewOrder.hasOwnProperty(index)){break}var fieldIdToBeEdited=cgJsData[gid].singleViewOrder[index]["id"];for(var fieldId in cgJsData[gid].forms.upload){if(!cgJsData[gid].forms.upload.hasOwnProperty(fieldId)){break}if(fieldIdToBeEdited==fieldId){var Field_Type=cgJsData[gid].forms.upload[fieldId]["Field_Type"];var content="";if(cgJsData[gid].vars.info[realId]){if(cgJsData[gid].vars.info[realId][fieldId]){content=cgJsData[gid].vars.info[realId][fieldId]["field-content"];if(!content){content=""}}}content=content.replace(/\\/g,"");content=jQuery("<textarea />").html(content).text();var fieldTitle=cgJsData[gid].forms.upload[fieldId]["Field_Content"]["titel"];fieldTitle=fieldTitle.replace(/\\/g,"");content=jQuery("<textarea />").html(content).text();content=cgJsClass.gallery.function.general.tools.htmlEntities(content);var $cgCenterImageInfoDiv=$('<div class="cg-center-image-info-div"><p>'+fieldTitle+":</p></div>");if(Field_Type=="text-f"||Field_Type=="url-f"){$cgCenterImageInfoDiv.append('<div class="cg-center-image-info-div-content-input"><input type="text" name="cg-field-id['+fieldId+']" data-cg-input-field-id="'+fieldId+'" data-cg-input-field-title="'+fieldTitle+'" data-cg-input-field-type="'+Field_Type+'"  class="cg-field-id-input-content" spellcheck="false"  value="'+content+'" /></div>')}if(Field_Type=="comment-f"){$cgCenterImageInfoDiv.append('<div class="cg-center-image-info-div-content-input"><textarea name="cg-field-id['+fieldId+']" data-cg-input-field-id="'+fieldId+'" data-cg-input-field-title="'+fieldTitle+'" data-cg-input-field-type="'+Field_Type+'"  rows="4" spellcheck="false" class="cg-field-id-input-content" >'+content+"</textarea></div>")}if(Field_Type=="select-f"){var content=cgJsData[gid].forms.upload[fieldId]["Field_Content"]["content"];content=jQuery("<textarea />").html(content).text();content=content.replace(/\n/g," ");content=content.replace(/\r/g," ");content=content.replace(/  /g," ");content=content.replace(/ /g," ");content=content.split(" ");var $contentForSelect=$('<select class="cg-field-id-input-content"  data-cg-input-field-id="'+fieldId+'"  data-cg-input-field-title="'+fieldTitle+'" data-cg-input-field-type="'+Field_Type+'"  ><option value="0">'+cgJsClass.gallery.language[gid].pleaseSelect+"</option></select>");content.forEach(function(selectValue){var selected="";if(cgJsData[gid].vars.info[realId]){if(cgJsData[gid].vars.info[realId][fieldId]){var contentToCompare=cgJsData[gid].vars.info[realId][fieldId]["field-content"];contentToCompare=contentToCompare.replace(/\\/g,"");selectValue=selectValue.replace(/\\/g,"");if(cgJsData[gid].vars.info[realId][fieldId]["field-content"].trim()==selectValue.trim()){selected="selected"}}}$contentForSelect.append('<option value="'+selectValue+'" '+selected+">"+selectValue+"</option>")});var $cgCenterImageInfoDivContentInput=$('<div class="cg-center-image-info-div-content-input"></div>');$cgCenterImageInfoDivContentInput.append($contentForSelect);$cgCenterImageInfoDiv.append($cgCenterImageInfoDivContentInput)}if(Field_Type=="selectc-f"){var pleaseSelect=cgJsClass.gallery.language[gid].pleaseSelect.replace(/\\/g,"");var $contentForSelect=$('<select name="cg-cat-id" class="cg-cat-id-input-content"><option value="0">'+pleaseSelect+"</option></select>");for(var categoryId in cgJsData[gid].vars.categories){if(!cgJsData[gid].vars.categories.hasOwnProperty(categoryId)){break}if(categoryId>0){var selected="";if(cgJsData[gid].vars.rawData[realId].Category==categoryId){selected="selected"}var nameToAppear=cgJsData[gid].vars.categories[categoryId]["Name"];nameToAppear=nameToAppear.replace(/\\/g,"");$contentForSelect.append('<option value="'+categoryId+'" '+selected+">"+nameToAppear+"</option>")}}var $cgCenterImageInfoDivContentInput=$('<div class="cg-center-image-info-div-content-input"></div>');$cgCenterImageInfoDivContentInput.append($contentForSelect);$cgCenterImageInfoDiv.append($cgCenterImageInfoDivContentInput)}if(Field_Type=="date-f"){var inputSelector="cg_input_date_id_"+realId;var format=cgJsData[gid].forms.upload[fieldId]["Field_Content"]["format"];var content="";if(cgJsData[gid].vars.info[realId]){if(cgJsData[gid].vars.info[realId][fieldId]){content=cgJsData[gid].vars.info[realId][fieldId]["field-content"]}}content=content.replace(/\\/g,"");content=jQuery("<textarea />").html(content).text();var $inputSelector=$('<input type="text" id="'+inputSelector+'" autocomplete="off" data-cg-date-format="'+format+'" data-cg-input-field-id="'+fieldId+'" data-cg-input-field-title="'+fieldTitle+'" data-cg-input-field-type="'+Field_Type+'"  value="'+content+'" name="cg-field-id['+fieldId+']" class="cg-field-id-input-content" />');var cgCenterDivClass="cg_center_div_image_edit";if(cgJsData[gid].vars.centerWhite){cgCenterDivClass=cgCenterDivClass+" cg_center_white"}cgJsClass.gallery.upload.functions.initInputDate($,$inputSelector,content,cgCenterDivClass);$cgCenterImageInfoDiv.append($('<div class="cg-center-image-info-div-content-input"></div>').append($inputSelector))}$cgCenterImageInfoDivContainer.append($cgCenterImageInfoDiv)}}}};cgJsClass.gallery.views.singleViewFunctions.showExif=function(gid,realId,$cgCenterDiv,gidForCenterDivElements){if(cgJsData[gid].options.pro.hasOwnProperty("ShowExif")){if(cgJsData[gid].options.pro.ShowExif==1){if(!cgJsData[gid].vars.rawData[realId].hasOwnProperty("Exif")){jQuery.getJSON(cgJsData[gid].vars.uploadFolderUrl+"/contest-gallery/gallery-id-"+cgJsData[gid].vars.gidReal+"/json/image-data/image-data-"+realId+".json",{_:(new Date).getTime()}).done(function(data){}).done(function(data){data.id=realId;data.imageObject=cgJsData[gid].imageObject[realId];if(data.hasOwnProperty("Exif")){if(data.Exif!=0){cgJsData[gid].vars.rawData[realId].Exif=data.Exif;cgJsClass.gallery.views.singleViewFunctions.showExifData(gid,realId,$cgCenterDiv,gidForCenterDivElements)}}})}else{if(cgJsData[gid].vars.rawData[realId].Exif!=0){cgJsClass.gallery.views.singleViewFunctions.showExifData(gid,realId,$cgCenterDiv,gidForCenterDivElements)}}}}};cgJsClass.gallery.views.singleViewFunctions.showExifData=function(gid,realId,$cgCenterDiv,gidForCenterDivElements){var show=false;if(!gidForCenterDivElements){gidForCenterDivElements=gid}$cgCenterDiv.find("#cgCenterImageExifData"+gidForCenterDivElements).addClass("cg_hide");if(cgJsData[gid].options.pro.ShowExif==1&&cgJsData[gid].vars.rawData[realId].Exif&&typeof cgJsData[gid].vars.rawData[realId].Exif=="object"){if(cgJsData[gid].vars.rawData[realId].Exif.hasOwnProperty("DateTimeOriginal")){if(cgJsData[gid].options.general["ShowExifDateTimeOriginal"]==1){var dateTimeOriginalSplitted=cgJsData[gid].vars.rawData[realId].Exif.DateTimeOriginal.split(":");var dateTimeOriginalObject={};dateTimeOriginalObject["YYYY"]=dateTimeOriginalSplitted[0].trim();dateTimeOriginalObject["MM"]=dateTimeOriginalSplitted[1].trim();dateTimeOriginalObject["DD"]=dateTimeOriginalSplitted[2].split(" ")[0].trim();try{var dateTimeByFormat=cgJsData[gid].options.general["ShowExifDateTimeOriginalFormat"];dateTimeByFormat=dateTimeByFormat.replace("YYYY",dateTimeOriginalObject["YYYY"]);dateTimeByFormat=dateTimeByFormat.replace("MM",dateTimeOriginalObject["MM"]);dateTimeByFormat=dateTimeByFormat.replace("DD",dateTimeOriginalObject["DD"])}catch(e){dateTimeByFormat=cgJsData[gid].vars.rawData[realId].Exif.DateTimeOriginal}$cgCenterDiv.find("#cgCenterImageExifData"+gidForCenterDivElements+" .cg-exif-date-time-original").removeClass("cg_hide").find(".cg-exif-date-time-original-text").text(dateTimeByFormat);show=true}}if(cgJsData[gid].vars.rawData[realId].Exif.hasOwnProperty("MakeAndModel")){if(cgJsData[gid].options.general["ShowExifModel"]==1||typeof cgJsData[gid].options.general["ShowExifModel"]=="undefined"){$cgCenterDiv.find("#cgCenterImageExifData"+gidForCenterDivElements+" .cg-exif-model").removeClass("cg_hide").find(".cg-exif-model-text").text(cgJsData[gid].vars.rawData[realId].Exif.MakeAndModel);show=true}}else if(cgJsData[gid].vars.rawData[realId].Exif.hasOwnProperty("Model")){if(cgJsData[gid].options.general["ShowExifModel"]==1||typeof cgJsData[gid].options.general["ShowExifModel"]=="undefined"){$cgCenterDiv.find("#cgCenterImageExifData"+gidForCenterDivElements+" .cg-exif-model").removeClass("cg_hide").find(".cg-exif-model-text").text(cgJsData[gid].vars.rawData[realId].Exif.Model);show=true}}if(cgJsData[gid].vars.rawData[realId].Exif.hasOwnProperty("ApertureFNumber")){if(cgJsData[gid].options.general["ShowExifApertureFNumber"]==1||typeof cgJsData[gid].options.general["ShowExifModel"]=="undefined"){$cgCenterDiv.find("#cgCenterImageExifData"+gidForCenterDivElements+" .cg-exif-aperturefnumber").removeClass("cg_hide").find(".cg-exif-aperturefnumber-text").text(cgJsData[gid].vars.rawData[realId].Exif.ApertureFNumber);show=true}}if(cgJsData[gid].vars.rawData[realId].Exif.hasOwnProperty("ExposureTime")){if(cgJsData[gid].options.general["ShowExifExposureTime"]==1||typeof cgJsData[gid].options.general["ShowExifModel"]=="undefined"){$cgCenterDiv.find("#cgCenterImageExifData"+gidForCenterDivElements+" .cg-exif-exposuretime").removeClass("cg_hide").find(".cg-exif-exposuretime-text").text(cgJsData[gid].vars.rawData[realId].Exif.ExposureTime);show=true}}if(cgJsData[gid].vars.rawData[realId].Exif.hasOwnProperty("ISOSpeedRatings")){if(cgJsData[gid].options.general["ShowExifISOSpeedRatings"]==1||typeof cgJsData[gid].options.general["ShowExifModel"]=="undefined"){$cgCenterDiv.find("#cgCenterImageExifData"+gidForCenterDivElements+" .cg-exif-isospeedratings").removeClass("cg_hide").find(".cg-exif-isospeedratings-text").text(cgJsData[gid].vars.rawData[realId].Exif.ISOSpeedRatings);show=true}}if(cgJsData[gid].vars.rawData[realId].Exif.hasOwnProperty("FocalLength")){if(cgJsData[gid].options.general["ShowExifFocalLength"]==1||typeof cgJsData[gid].options.general["ShowExifModel"]=="undefined"){$cgCenterDiv.find("#cgCenterImageExifData"+gidForCenterDivElements+" .cg-exif-focallength").removeClass("cg_hide").find(".cg-exif-focallength-text").text(cgJsData[gid].vars.rawData[realId].Exif.FocalLength);show=true}}}if(show){$cgCenterDiv.find("#cgCenterImageExifData"+gidForCenterDivElements).removeClass("cg_hide");if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){var $cgCenterImageParent=$cgCenterDiv.find("#cgCenterImageParent"+gidForCenterDivElements);var $cgCenterImage=$cgCenterDiv.find("#cgCenterImage"+gidForCenterDivElements);var top=parseFloat($cgCenterImageParent.css("height"))-parseFloat($cgCenterImage.attr("data-cg-new-height-image"));if(top!=0){top=top/2*-1}$cgCenterDiv.find("#cgCenterImageExifDataSub"+gidForCenterDivElements).css("top",top+"px")}}};cgJsClass.gallery.views.singleViewFunctions.setFurtherSteps=function(gid,order,isFromBlogLogicNotFromScroll){var PicsPerSite=parseInt(cgJsData[gid].options.general.PicsPerSite);var stepNumber=Math.floor(order/PicsPerSite+1);var $cg_further_images_container=jQuery("#cgFurtherImagesContainerDiv"+gid);$cg_further_images_container.find(".cg_further_images").removeClass("cg_further_images_selected");$cg_further_images_container.find("[data-cg-step="+stepNumber+"]").addClass("cg_further_images_selected");cgJsClass.gallery.views.clickFurtherImagesStep.cloneStep(gid,$cg_further_images_container,isFromBlogLogicNotFromScroll)};cgJsClass.gallery.views.singleViewFunctions.setSliderMargin=function(order,gid,direction,isGalleryOpenedSliderLook,realId){var sliderView=false;if(cgJsData[gid].options.pro.SliderFullWindow==1&&cgJsClass.gallery.vars.fullwindow){sliderView=true}if(cgJsData[gid].vars.currentLook=="slider"){var checkStart=Math.floor(cgJsData[gid].vars.maximumVisibleImagesInSlider/2);var $mainCGslider=jQuery("#mainCGslider"+gid);if(isGalleryOpenedSliderLook==true){for(var index in cgJsData[gid].image){if(!cgJsData[gid].image.hasOwnProperty(index)){break}var firstKey=Object.keys(cgJsData[gid].image[index])[0];if(cgJsData[gid].image[index][firstKey].id==realId){order=parseInt(index)}}}if(order>checkStart){var newMarginLeft=order*cgJsData[gid].vars.widthSliderPreview;newMarginLeft=newMarginLeft-(cgJsData[gid].vars.widthmain-cgJsData[gid].vars.widthSliderPreview)/2}else{newMarginLeft=0}if(cgJsData[gid].vars.imageDataLength*cgJsData[gid].vars.widthSliderPreview>cgJsData[gid].vars.widthmain){$mainCGslider.removeClass("cgCenterDivBackgroundColor")}else{$mainCGslider.addClass("cgCenterDivBackgroundColor")}jQuery($mainCGslider).animate({scrollLeft:newMarginLeft+"px"},"fast");cgJsClass.gallery.views.singleViewFunctions.setFurtherSteps(gid,order)}};cgJsClass.gallery.views.singleViewFunctions.slideOutAppend=function(gid,order,realId,firstKey,isGalleryOpened,offsetLeftClickedImage,imageObject,cgCenterDiv,gidForElements,isAlternativeFileType){var last=parseInt(order)+1;var FbLike=cgJsData[gid].options.general.FbLike;var FbLikeGallery=cgJsData[gid].options.general.FbLikeGallery;var AllowRating=cgJsData[gid].options.general.AllowRating;var set=false;var isLastRow=false;if(typeof cgJsData[gid].image[last]==="undefined"){cgCenterDiv.insertAfter(imageObject);cgCenterDiv.css("display","table");cgCenterDiv.find(".cg-center-image").show();if(FbLike>=1&&!isAlternativeFileType){if(FbLikeGallery>=1){}else{cgCenterDiv.find("#cgCenterImageFbLikeDiv"+gidForElements).show()}}if(AllowRating>=1){cgCenterDiv.find("#cgCenterImageRatingDiv"+gidForElements).show()}}else{for(var i=parseInt(order)+1;i<=1e3;i++){if(typeof cgJsData[gid].image[i]!=="undefined"){var firstKeyToCompare=Object.keys(cgJsData[gid].image[i])[0];var categoryId=cgJsData[gid].image[i][firstKeyToCompare]["Category"];if(typeof cgJsData[gid].vars.categories[categoryId]!="undefined"){if(cgJsData[gid].vars.showCategories==true&&cgJsData[gid].vars.categories[categoryId]["Checked"]==false){return}}var imageObjectToCompare=cgJsData[gid].image[i][firstKeyToCompare]["imageObject"];var offsetLeftToCompare=imageObjectToCompare.get(0).offsetLeft;if(offsetLeftToCompare<=offsetLeftClickedImage){set=true;cgCenterDiv.insertBefore(imageObjectToCompare);cgCenterDiv.css("display","table");if(!cgJsData[gid].vars.translateX&&cgJsClass.gallery.vars.fullwindow){cgCenterDiv.addClass("cg_min_height_1000")}cgCenterDiv.find(".cg-center-image").show();if(FbLike>=1&&!isAlternativeFileType){if(FbLikeGallery>=1){}else{cgCenterDiv.find("#cgCenterImageFbLikeDiv"+gidForElements).show()}}if(AllowRating>=1){cgCenterDiv.find("#cgCenterImageRatingDiv"+gidForElements).show()}break}}}if(set==false){isLastRow=true;var key=Object.keys(cgJsData[gid].image[cgJsData[gid].image.length-1])[0];var lastImageObject=cgJsData[gid].image[cgJsData[gid].image.length-1][key]["imageObject"];cgCenterDiv.insertAfter(lastImageObject);cgCenterDiv.css("display","table");if(!cgJsData[gid].vars.translateX&&cgJsClass.gallery.vars.fullwindow){cgCenterDiv.addClass("cg_min_height_1000")}cgCenterDiv.find(".cg-center-image").show();if(FbLike>=1&&!isAlternativeFileType){if(FbLikeGallery>=1){}else{cgCenterDiv.find("#cgCenterImageFbLikeDiv"+gidForElements).show()}}if(AllowRating>=1){cgCenterDiv.find("#cgCenterImageRatingDiv"+gidForElements).show()}}else{}}return isLastRow};cgJsClass.gallery.views.singleViewFunctions.clickNextStep=function(gid){var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}if(sliderView==false){var $cgCenterDiv=cgJsData[gid].vars.cgCenterDiv;var $nextStepArrow=$cgCenterDiv.find(".cg-center-arrow-right-next-step");if($nextStepArrow.length>=1){if($nextStepArrow.hasClass("cg_center_pointer_event_none")==false){$nextStepArrow.click()}}}};cgJsClass.gallery.views.singleViewFunctions.clickPrevStep=function(gid){var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}if(sliderView==false){var $cgCenterDiv=cgJsData[gid].vars.cgCenterDiv;var $prevStepArrow=$cgCenterDiv.find(".cg-center-arrow-left-prev-step");if($prevStepArrow.length>=1){if($prevStepArrow.hasClass("cg_center_pointer_event_none")==false){$prevStepArrow.click()}}}};cgJsClass.gallery.views.singleViewFunctions.showCGcenterDivAfterGalleryLoad=function(gid,$mainCGallery,gidForSingleViewElements){setTimeout(function(){var $mainCGdiv=$mainCGallery.closest(".mainCGdiv");cgJsClass.gallery.function.general.tools.hideSkeletonLoader(gid);$mainCGallery.css("visibility","visible").addClass("cg_fade_in").removeClass("cg_hidden");$mainCGdiv.find(".cg_gallery_thumbs_control .cg_view_switcher").removeClass("cg_disabled")},400);return;$mainCGdiv.find(".cg_gallery_thumbs_control .cg_view_switcher").addClass("cg_disabled");setTimeout(function(){$mainCGallery.find(".cgCenterDiv").hide();$mainCGallery.css("visibility","visible");$mainCGallery.removeClass("cg_fade_in");$mainCGallery.removeClass("cg_fade_in_new");$mainCGallery.find(".cgCenterDiv").css("min-height","unset");$mainCGallery.find(".cgCenterDiv").css("height","unset");$mainCGallery.find(".cgCenterDiv").removeClass("cg_hide_override").slideDown(function(){$mainCGallery.find(".cgCenterDiv").css("display","table");$mainCGdiv.find(".cg_gallery_thumbs_control .cg_view_switcher").removeClass("cg_disabled")})},300)};cgJsClass.gallery.views.singleViewFunctions.cloneCommentDiv=function(gid,realId,$cgCenterDiv,imageObject,gidForElements,isForBlogView){if(cgJsData[gid].options.general.AllowComments==2){$cgCenterDiv.find("#cgCenterImageCommentsDivEnter"+gidForElements+"").addClass("cg_hide")}if(cgJsData[gid].options.general.HideCommentNameField==1||cgJsClass.gallery.vars.isLoggedIn){$cgCenterDiv.find("#cgCenterImageCommentsDivEnterTitleDiv"+gidForElements+"").addClass("cg_hide")}if(cgJsData[gid].options.general.HideCommentNameField==1){$cgCenterDiv.find("#cgCenterImageCommentsDivEnterTitleDiv"+gidForElements+"").addClass("cg_hide")}$cgCenterDiv.find("#cgCenterImageCommentsDivTitle"+gidForElements+"").empty();$cgCenterDiv.find("#cgCenterImageCommentsDivEnterTitle"+gidForElements+"").empty();$cgCenterDiv.find("#cgCenterImageCommentsDivEnterTextarea"+gidForElements+"").empty();$cgCenterDiv.find(".cg-emojis-div").addClass("cg_hide");if(isForBlogView){var commentsDivString=cgJsClass.gallery.comment.setComment(realId,0,gid,false,false,true);jQuery(commentsDivString).appendTo($cgCenterDiv.find("#cgCenterImageCommentsDivTitle"+gidForElements+"")).find(".cg_gallery_comments_div").removeClass("cg_center").removeClass("cg_right")}else{imageObject.find(".cg_gallery_comments_div").clone().appendTo($cgCenterDiv.find("#cgCenterImageCommentsDivTitle"+gidForElements+"")).find(".cg_gallery_comments_div").removeClass("cg_center").removeClass("cg_right")}$cgCenterDiv.find("#cgCenterImageCommentsDivTitle"+gidForElements+"").append("<hr>");$cgCenterDiv.find(".cg_gallery_comments_div").removeClass("cg_sm").removeClass("cg_xs").removeClass("cg_xxs");$cgCenterDiv.find(".cg_gallery_comments_div .cg_gallery_comments_div_icon").removeClass("cg_sm").removeClass("cg_xs").removeClass("cg_xxs");$cgCenterDiv.find(".cg_gallery_comments_div .cg_gallery_comments_div_count").removeClass("cg_sm").removeClass("cg_xs").removeClass("cg_xxs");$cgCenterDiv.find(".cg_gallery_comments_div_icon").addClass("cg_inside_center_div");$cgCenterDiv.find(".cg-center-image-comments-div-enter-title-label-container .cg-center-image-comments-div-enter-counter").text("99");$cgCenterDiv.find(".cg-center-image-comments-div-enter-textarea-label-container .cg-center-image-comments-div-enter-counter").text("999");if(cgJsData[gid].rateAndCommentNumbers[realId].CountC==0){$cgCenterDiv.find(".cg-center-image-comments-div-parent .cg-center-image-info-div-title").addClass("cg-center-image-info-div-title-no-comments")}if(cgJsData[gid].options.general.AllowComments==2){$cgCenterDiv.find(".cg-center-image-comments-div-add-comment").remove()}else if(cgJsData[gid].options.general.AllowComments==1){$cgCenterDiv.find(".cg-center-image-comments-div-add-comment").removeClass("cg_hide")}if(cgJsData[gid].rateAndCommentNumbers[realId].CountC>=1){$cgCenterDiv.find(".cg-center-image-comments-div-parent .cg-center-image-info-div-title").removeClass("cg-center-image-info-div-title-no-comments")}};cgJsClass.gallery.views.singleViewFunctions.showCommentsAreaOnAddCommentClick=function($object){var $cgCenterDiv=$object.closest(".cgCenterDiv");var gid=$cgCenterDiv.attr("data-cg-gid");if(cgJsData[gid].options.pro["CheckLoginComment"]==1&&!cgJsClass.gallery.vars.isLoggedIn){cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].YouHaveToBeLoggedInToComment);return}var $mainCGallery=$object.closest(".mainCGallery");$mainCGallery.find(".cg-center-image-comments-div-enter").addClass("cg_hide");$mainCGallery.find(".cg-center-image-comments-div-parent.cg-center-image-comments-div-show-more-available").removeClass("cg-center-image-comments-div-parent-enter-textarea-expanded");$mainCGallery.find(".cg-center-image-comments-div-add-comment").removeClass("cg_hide");$object.addClass("cg_hide");$cgCenterDiv.find(".cg-center-image-comments-div-enter").removeClass("cg_hide");$cgCenterDiv.find(".cg-center-image-comments-div-parent.cg-center-image-comments-div-show-more-available").addClass("cg-center-image-comments-div-parent-enter-textarea-expanded");if(cgJsData[gid].options.general.HideCommentNameField!=1&&!cgJsClass.gallery.vars.isLoggedIn){$cgCenterDiv.find(".cg-center-image-comments-div-enter-title-div").removeClass("cg_hide")}var profileImage="";var nickname="";if(cgJsClass.gallery.vars.isLoggedIn){if(cgJsData[gid].vars.profileImages[cgJsClass.gallery.vars.wpUserId]){profileImage=cgJsData[gid].vars.profileImages[cgJsClass.gallery.vars.wpUserId]}if(cgJsData[gid].vars.nicknames[cgJsClass.gallery.vars.wpUserId]){nickname=cgJsData[gid].vars.nicknames[cgJsClass.gallery.vars.wpUserId]}}$cgCenterDiv.find(".cg-center-image-comments-div-enter").get(0).scrollIntoView({behavior:"smooth"});if(profileImage||nickname){if(profileImage){$cgCenterDiv.find(".cg-center-image-comments-div-enter .cg-center-image-comments-nickname-avatar").addClass("cg_hide");$cgCenterDiv.find(".cg-center-image-comments-div-enter .cg-center-image-comments-profile-image").css("background-image","url("+profileImage+")").removeClass("cg_hide").attr("data-cg-wp-user-id",cgJsClass.gallery.vars.wpUserId);$cgCenterDiv.find(".cg-center-image-comments-div-enter .cg-center-image-comments-nickname-text").addClass("cg-center-show-profile-image-full")}if(nickname){if(!profileImage){$cgCenterDiv.find(".cg-center-image-comments-div-enter .cg-center-image-comments-nickname-avatar").removeClass("cg_hide")}$cgCenterDiv.find(".cg-center-image-comments-div-enter .cg-center-image-comments-nickname-text").text(nickname).removeClass("cg_hide")}$cgCenterDiv.find(".cg-center-image-comments-div-enter .cg-center-image-comments-user-data").removeClass("cg_hide")}if(cgJsClass.gallery.vars.commentSubmitButtonDisabledCounter!=0){var gidForElements=$cgCenterDiv.attr("data-cg-gid-for-center-div-elements");var $cgCenterImageCommentsDivEnterSubmit=cgJsClass.gallery.comment.prepareSubmitButton(gid,gidForElements);cgJsClass.gallery.comment.checkRecursive(cgJsClass.gallery.vars.commentSubmitButtonDisabledCounter,gid,$cgCenterImageCommentsDivEnterSubmit)}};cgJsClass.gallery.views.singleViewFunctions.zoom=function($,$element,gid,realId,isFromResize,$cg_zoom_container_from_resize){var isImageType=cgJsClass.gallery.function.general.tools.isImageType(gid,realId);if(!isImageType){return}if(cgJsClass.gallery.vars.isMobile){var windowWidth=screen.width;var windowHeight=screen.height}else{var windowWidth=jQuery(window).width();var windowHeight=jQuery(window).height()}if(parseInt(cgJsData[gid].vars.rawData[realId]["Width"])<windowWidth-40&&parseInt(cgJsData[gid].vars.rawData[realId]["Height"])<windowHeight&&!isFromResize){return}cgJsClass.gallery.views.singleViewFunctions.$zoomImageDiv=$element;var centerImageBackgroundWidth=$element.attr("data-cg-size-width");var originalImageWidth=cgJsData[gid].vars.rawData[realId]["Width"];var originalImageHeight=cgJsData[gid].vars.rawData[realId]["Height"];var cgRotationThumbNumber=cgJsData[gid].vars.rawData[realId]["rThumb"];var degreeClass="";if([90,270,180].indexOf(cgRotationThumbNumber)>-1){if(cgRotationThumbNumber=="270"||cgRotationThumbNumber=="90"){originalImageWidth=cgJsData[gid].vars.rawData[realId]["Height"];originalImageHeight=cgJsData[gid].vars.rawData[realId]["Width"];if(cgRotationThumbNumber=="90"){degreeClass="cg90degree"}if(cgRotationThumbNumber=="270"){degreeClass="cg270degree"}}if(cgRotationThumbNumber=="180"){degreeClass="cg180degree"}}if(centerImageBackgroundWidth>=800){var backGroundUrl=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId]["large"]);var background="url("+backGroundUrl+") no-repeat center center"}else{var backgroundUrl=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId]["full"]);var background="url("+backgroundUrl+") no-repeat center center"}var widthImageDivContainer=800;var widthImageDiv=800;var imageHeight=windowHeight-50;if(originalImageWidth<windowWidth){widthImageDiv=parseInt(cgJsData[gid].vars.rawData[realId]["Width"])}if(originalImageHeight<windowHeight){imageHeight=parseInt(cgJsData[gid].vars.rawData[realId]["Height"])}if([270,90].indexOf(cgRotationThumbNumber)>-1){var heightImageDiv=widthImageDiv*parseInt(cgJsData[gid].vars.rawData[realId]["Width"])/parseInt(cgJsData[gid].vars.rawData[realId]["Height"])}else{var heightImageDiv=widthImageDiv*parseInt(cgJsData[gid].vars.rawData[realId]["Height"])/parseInt(cgJsData[gid].vars.rawData[realId]["Width"])}var topLeftStyleForRotatedImages="";degreeClass;var left=0;var top=0;var isCalculateLeft=false;var isCalculateTop=false;if([270,90].indexOf(cgRotationThumbNumber)>-1){if(originalImageHeight<windowWidth){isCalculateLeft=true}if(originalImageWidth<windowHeight){isCalculateTop=true}}else{if(originalImageWidth<windowWidth){isCalculateLeft=true}if(originalImageHeight<windowHeight){isCalculateTop=true}}if([90,270].indexOf(cgRotationThumbNumber)>-1){left=(windowWidth-heightImageDiv)/2}else{left=(windowWidth-widthImageDiv)/2}if([90,270].indexOf(cgRotationThumbNumber)>-1){top=(windowHeight-widthImageDiv)/2}else{top=(windowHeight-heightImageDiv)/2}if(left<0){left=0}if(top<0){top=0}topLeftStyleForRotatedImages="top:"+top+"px;left:"+left+"px;";var cgBorderRadiusClass="";var cg_center_white_class="";if(cgJsData[gid].options.visual.BorderRadius){cgBorderRadiusClass="cg_border_radius_controls_and_containers"}if(cgJsData[gid].vars.centerWhite){cg_center_white_class="cg_center_white"}else{cg_center_white_class="cg_center_black"}var $image=$('<div style="width:'+windowWidth+"px;height:"+windowHeight+'px;" class="cg_zoom_container '+cg_center_white_class+'" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'" >'+'<div class="cg_zoom_close '+cgBorderRadiusClass+"  "+cg_center_white_class+'"></div>'+'<div class="cg_zoom_image_container">'+'<div style="background: '+background+";width:"+widthImageDiv+"px;height:"+heightImageDiv+"px;"+topLeftStyleForRotatedImages+'" class="cg_zoom_image '+degreeClass+'"></div>'+"</div>"+"</div>");if(isFromResize){$cg_zoom_container_from_resize.remove()}cgJsClass.gallery.vars.dom.body.prepend($image);cgJsClass.gallery.vars.dom.body.addClass("cg_no_scroll");cgJsClass.gallery.vars.dom.html.addClass("cg_no_scroll");if(widthImageDiv>windowWidth){var scrollLeft=(800-windowWidth)/4;$image.animate({scrollLeft:scrollLeft+"px"},0,function(){})}if(heightImageDiv>windowHeight){var scrollTop=(heightImageDiv-windowHeight)/4;$image.animate({scrollTop:scrollTop+"px"},0,function(){})}};cgJsClass.gallery.views.singleViewFunctions.zoomClose=function(jQuery,$closeButton){if($closeButton){$closeButton.closest(".cg_zoom_container").remove();cgJsClass.gallery.vars.dom.body.removeClass("cg_no_scroll");cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");cgJsClass.gallery.views.singleViewFunctions.$zoomImageDiv=null}else{jQuery("body > .cg_zoom_container").remove();cgJsClass.gallery.vars.dom.body.removeClass("cg_no_scroll");cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");cgJsClass.gallery.views.singleViewFunctions.$zoomImageDiv=null}};cgJsClass.gallery.views.singleViewFunctions.calculateChars=function($object){var length=$object.val().length;var startValue=99;if($object.hasClass("cg-center-image-comments-div-enter-textarea")){startValue=999}$object.closest(".cg-center-image-comments-div-enter-container").find(".cg-center-image-comments-div-enter-counter").text(startValue-length)};cgJsClass.gallery.views.singleViewFunctions.setSelectedFileDataIfMultipleFilesOrExif=function(gid,realId){if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed&&!cgJsData[gid].vars.rawData[realId].MultipleFilesParsedRealIdSourceSet){for(var multipleFilesOrder in cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){if(!cgJsData[gid].vars.rawData[realId].MultipleFilesParsed.hasOwnProperty(multipleFilesOrder)){break}if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].isRealIdSource){cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["WpUpload"]=cgJsData[gid].vars.rawData[realId]["WpUpload"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["post_title"]=cgJsData[gid].vars.rawData[realId]["post_title"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["post_name"]=cgJsData[gid].vars.rawData[realId]["post_name"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["post_content"]=cgJsData[gid].vars.rawData[realId]["post_content"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["post_excerpt"]=cgJsData[gid].vars.rawData[realId]["post_excerpt"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["post_mime_type"]=cgJsData[gid].vars.rawData[realId]["post_mime_type"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["medium"]=cgJsData[gid].vars.rawData[realId]["medium"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["large"]=cgJsData[gid].vars.rawData[realId]["large"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["full"]=cgJsData[gid].vars.rawData[realId]["full"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["guid"]=cgJsData[gid].vars.rawData[realId]["guid"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["type"]=cgJsData[gid].vars.rawData[realId]["type"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["NamePic"]=cgJsData[gid].vars.rawData[realId]["NamePic"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["ImgType"]=cgJsData[gid].vars.rawData[realId]["ImgType"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["Width"]=cgJsData[gid].vars.rawData[realId]["Width"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["Height"]=cgJsData[gid].vars.rawData[realId]["Height"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["imgSrcOriginalWidth"]=cgJsData[gid].vars.rawData[realId]["Width"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["imgSrcOriginalHeight"]=cgJsData[gid].vars.rawData[realId]["Height"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["rThumb"]=cgJsData[gid].vars.rawData[realId]["rThumb"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder]["Exif"]=cgJsData[gid].vars.rawData[realId]["Exif"];cgJsData[gid].vars.rawData[realId].MultipleFilesParsedRealIdSourceSet=true}}}var selectedOrder=1;for(var multipleFilesOrder in cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){if(!cgJsData[gid].vars.rawData[realId].MultipleFilesParsed.hasOwnProperty(multipleFilesOrder)){break}if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].selected){selectedOrder=multipleFilesOrder;break}}if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]){var isRealIdSource=cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder].isRealIdSource;cgJsData[gid].vars.rawData[realId].selectedOrder=selectedOrder;cgJsData[gid].vars.rawData[realId]["WpUpload"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["WpUpload"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["WpUpload"];cgJsData[gid].vars.rawData[realId]["post_title"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["post_title"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["post_title"];cgJsData[gid].vars.rawData[realId]["post_name"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["post_name"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["post_name"];cgJsData[gid].vars.rawData[realId]["post_content"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["post_content"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["post_content"];cgJsData[gid].vars.rawData[realId]["post_excerpt"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["post_excerpt"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["post_excerpt"];cgJsData[gid].vars.rawData[realId]["post_mime_type"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["post_mime_type"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["post_mime_type"];cgJsData[gid].vars.rawData[realId]["medium"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["medium"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["medium"];cgJsData[gid].vars.rawData[realId]["large"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["large"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["large"];cgJsData[gid].vars.rawData[realId]["full"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["full"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["full"];cgJsData[gid].vars.rawData[realId]["guid"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["guid"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["guid"];cgJsData[gid].vars.rawData[realId]["type"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["type"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["type"];cgJsData[gid].vars.rawData[realId]["NamePic"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["NamePic"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["NamePic"];cgJsData[gid].vars.rawData[realId]["ImgType"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["ImgType"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["ImgType"];cgJsData[gid].vars.rawData[realId]["Width"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["Width"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["Width"];cgJsData[gid].vars.rawData[realId]["Height"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["Height"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["Height"];cgJsData[gid].vars.rawData[realId]["imgSrcOriginalWidth"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["Width"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["imgSrcOriginalWidth"];cgJsData[gid].vars.rawData[realId]["imgSrcOriginalHeight"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["Height"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["imgSrcOriginalHeight"];cgJsData[gid].vars.rawData[realId]["rThumb"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["rThumb"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["rThumb"];cgJsData[gid].vars.rawData[realId]["Exif"]=isRealIdSource?cgJsData[gid].vars.rawDataPreProcessed[realId]["Exif"]:cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[selectedOrder]["Exif"]}}};cgJsClass.gallery.views.singleViewFunctions.setSelectedFileInMultipleFiles=function(gid,realId,prev,next,$cgCenterDiv){var selectedOrder=1;for(var multipleFilesOrder in cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){if(!cgJsData[gid].vars.rawData[realId].MultipleFilesParsed.hasOwnProperty(multipleFilesOrder)){break}if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].selected){selectedOrder=multipleFilesOrder;break}}if(prev){if(selectedOrder>=2){selectedOrder--}$cgCenterDiv.find("cg-center-image-next-file").removeClass("cg_hide")}else if(next){if(!(multipleFilesOrder>Object.keys(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed).length)){selectedOrder++}$cgCenterDiv.find("cg-center-image-prev-file").removeClass("cg_hide")}for(var multipleFilesOrder in cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){if(!cgJsData[gid].vars.rawData[realId].MultipleFilesParsed.hasOwnProperty(multipleFilesOrder)){break}if(multipleFilesOrder==selectedOrder){cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].selected=true}else{cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].selected=false}}cgJsClass.gallery.views.singleViewFunctions.showNextPrevFileArrows(selectedOrder,gid,realId,$cgCenterDiv.find(".cg-center-image-next-file").addClass("cg_hide"),$cgCenterDiv.find(".cg-center-image-prev-file").addClass("cg_hide"));cgJsClass.gallery.views.singleViewFunctions.setSelectedFileDataIfMultipleFilesOrExif(gid,realId)};cgJsClass.gallery.views.singleViewFunctions.showNextPrevFileArrows=function(selectedOrder,gid,realId,$cgCenterImageNextFile,$cgCenterImagePrevFile){$cgCenterImageNextFile.addClass("cg_hide");$cgCenterImagePrevFile.addClass("cg_hide");if(selectedOrder==1||selectedOrder<Object.keys(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed).length){$cgCenterImageNextFile.removeClass("cg_hide")}if(selectedOrder>1){$cgCenterImagePrevFile.removeClass("cg_hide")}};cgJsClass.gallery.views.singleViewFunctions.setDownloadLink=function(gid,realId,$cgCenterDiv,imgSrcOriginal){if(cgJsData[gid].options.visual.OriginalSourceLinkInSlider=="1"){if(cgJsClass.gallery.vars.isInternetExplorer){$cgCenterDiv.find(".cg-center-image-download-link").attr("href",imgSrcOriginal)}else{$cgCenterDiv.find(".cg-center-image-download-link").attr({download:cgJsData[gid].vars.rawData[realId]["NamePic"]+"."+cgJsData[gid].vars.rawData[realId].ImgType,href:imgSrcOriginal})}}};cgJsClass.gallery.views.singleViewFunctions.$zoomImageDiv=null;cgJsClass.gallery.views.singleViewFunctions.addConsentRequiredClass=function(gid,realId,cgCenterDiv){if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){var hasNoEmbed=false;var hasEmbedConfirmed=false;for(var order in cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){if(!cgJsData[gid].vars.rawData[realId].MultipleFilesParsed.hasOwnProperty(order)){break}var ImgType=cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[order].ImgType;if(!cgJsClass.gallery.function.general.tools.isEmbed(gid,realId,undefined,ImgType)){hasNoEmbed=true}else{if(ImgType=="ytb"&&sessionStorage.getItem("cgYtbConsentAgreed")){hasEmbedConfirmed=true}if(ImgType=="twt"&&sessionStorage.getItem("cgTwtConsentAgreed")){hasEmbedConfirmed=true}if(ImgType=="tkt"&&sessionStorage.getItem("cgTktConsentAgreed")){hasEmbedConfirmed=true}if(ImgType=="inst"&&sessionStorage.getItem("cgInstConsentAgreed")){hasEmbedConfirmed=true}}}if(!hasNoEmbed&&!hasEmbedConfirmed){debugger;cgCenterDiv.addClass("cg_social_consent_required")}}else{debugger;cgCenterDiv.addClass("cg_social_consent_required")}};cgJsClass.gallery.views.singleViewFunctions.setEmbed=function(gid,realId,ImgType,$cgCenterImage,$cgCenterImageParent,cgCenterDiv,cgCenterDivWidth,cgCenterImageParentHeight){debugger;$cgCenterImage.addClass("cg_background_unset");$cgCenterImage.removeClass("cg-center-image-alternative-file-type cg-center-image-alternative-file-type-video");$cgCenterImage.css("background","");$cgCenterImage.find(".cg-center-image-video").remove();cgJsClass.gallery.upload.vars.allowedFileEndings.forEach(function(value){$cgCenterImage.removeClass("cg-center-image-"+value)});cgCenterDiv.find(".cg-center-image-name").remove();if(ImgType=="ytb"){$cgCenterImage.addClass("cg-center-image-social-entry");$cgCenterImage.addClass("cg-center-image-ytb-entry");$cgCenterImageParent.removeClass("cg_hide");$cgCenterImageParent.removeClass("cg_hide");$cgCenterImage.removeAttr("style");cgCenterDiv.find(".cg-center-image-ytb-entry-content").remove();cgCenterDiv.find(".cg_append_ytb_overlay_consent").remove();var cgCenterImageParentWidth=cgCenterDivWidth-parseInt(cgCenterDiv.css("padding-right"));var iframeHeight=cgCenterImageParentHeight;var iframeWidth=parseInt(iframeHeight/9*16);if(iframeWidth>cgCenterImageParentWidth){iframeWidth=cgCenterImageParentWidth;iframeHeight=iframeWidth/16*9}if(cgJsData[gid].options.pro.ConsentYoutube==1&&!sessionStorage.getItem("cgYtbConsentAgreed")){$cgCenterImage.prepend(cgJsClass.gallery.function.general.tools.getYtbOverlayConsentElement(jQuery,gid,realId,iframeWidth,iframeHeight));cgJsClass.gallery.views.singleViewFunctions.addConsentRequiredClass(gid,realId,cgCenterDiv,ImgType)}else{$cgCenterImage.prepend('<iframe class="cg-center-image-ytb-entry-content" width="'+iframeWidth+'" height="'+iframeHeight+'" src="'+cgJsData[gid].vars.rawData[realId]["guid"]+'" ></iframe>')}}else if(ImgType=="inst"){$cgCenterImage.addClass("cg-center-image-social-entry");$cgCenterImage.addClass("cg-center-image-inst-entry");$cgCenterImageParent.removeClass("cg_hide");$cgCenterImage.removeAttr("style");cgCenterDiv.find(".cg-center-image-inst-entry-content").remove();cgCenterDiv.find(".cg_append_inst_overlay_consent").remove();var cgCenterImageParentWidth=cgCenterDivWidth-parseInt(cgCenterDiv.css("padding-right"));var iframeHeight=cgCenterImageParentHeight;var iframeWidth=parseInt(iframeHeight/9*16);if(iframeWidth>cgCenterImageParentWidth){iframeWidth=cgCenterImageParentWidth;iframeHeight=iframeWidth/16*9}if(cgJsData[gid].options.pro.ConsentInstagram==1&&!sessionStorage.getItem("cgInstConsentAgreed")){$cgCenterImage.prepend(cgJsClass.gallery.function.general.tools.getInstOverlayConsentElement(jQuery,gid,realId,iframeWidth,iframeHeight));cgJsClass.gallery.views.singleViewFunctions.addConsentRequiredClass(gid,realId,cgCenterDiv,ImgType)}else{$cgCenterImage.prepend('<iframe class="cg-center-image-inst-entry-content" width="'+iframeWidth+'" height="'+iframeHeight+'" src="'+cgJsData[gid].vars.rawData[realId]["guid"]+'" ></iframe>')}}else if(ImgType=="twt"){$cgCenterImage.addClass("cg-center-image-twt-entry");$cgCenterImage.addClass("cg-center-image-social-entry");$cgCenterImageParent.removeClass("cg_hide");$cgCenterImage.removeAttr("style");cgCenterDiv.find(".cg-center-image-twt-entry-content").remove();cgCenterDiv.find(".cg_append_twt_overlay_consent").remove();var cgCenterImageParentWidth=cgCenterDivWidth-parseInt(cgCenterDiv.css("padding-right"));var iframeHeight=cgCenterImageParentHeight;var iframeWidth=parseInt(iframeHeight/9*16);if(iframeWidth>cgCenterImageParentWidth){iframeWidth=cgCenterImageParentWidth;iframeHeight=iframeWidth/16*9}if(cgJsData[gid].options.pro.ConsentTwitter==1&&!sessionStorage.getItem("cgTwtConsentAgreed")){$cgCenterImage.prepend(cgJsClass.gallery.function.general.tools.getTwtOverlayConsentElement(jQuery,gid,realId,iframeWidth,iframeHeight));cgJsClass.gallery.views.singleViewFunctions.addConsentRequiredClass(gid,realId,cgCenterDiv,ImgType)}else{console.log("post_content");var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent(jQuery,gid,realId);$cgCenterImage.prepend('<div class="cg-center-image-twt-entry-content" ></div>');$cgCenterImage.find(".cg-center-image-twt-entry-content").append($blockquote)}}else if(ImgType=="tkt"){$cgCenterImage.addClass("cg-center-image-tkt-entry");$cgCenterImage.addClass("cg-center-image-social-entry");$cgCenterImageParent.removeClass("cg_hide");$cgCenterImage.removeAttr("style");cgCenterDiv.find(".cg-center-image-tkt-entry-content").remove();cgCenterDiv.find(".cg_append_tkt_overlay_consent").remove();var cgCenterImageParentWidth=cgCenterDivWidth-parseInt(cgCenterDiv.css("padding-right"));var iframeHeight=cgCenterImageParentHeight;var iframeWidth=parseInt(iframeHeight/9*16);if(iframeWidth>cgCenterImageParentWidth){iframeWidth=cgCenterImageParentWidth;iframeHeight=iframeWidth/16*9}if(cgJsData[gid].options.pro.ConsentTikTok==1&&!sessionStorage.getItem("cgTktConsentAgreed")){$cgCenterImage.prepend(cgJsClass.gallery.function.general.tools.getTktOverlayConsentElement(jQuery,gid,realId,iframeWidth,iframeHeight));cgJsClass.gallery.views.singleViewFunctions.addConsentRequiredClass(gid,realId,cgCenterDiv,ImgType)}else{console.log("post_content");var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent(jQuery,gid,realId);$cgCenterImage.prepend('<div class="cg-center-image-tkt-entry-content" ></div>');$cgCenterImage.find(".cg-center-image-tkt-entry-content").append($blockquote)}}};cgJsClass.gallery.views.singleViewFunctions.removeEmbed=function(cgCenterDiv){cgCenterDiv.find(".cg-center-image-con-entry-content").remove();cgCenterDiv.find(".cg-center-image-ytb-entry-content").remove();cgCenterDiv.find(".cg-center-image-twt-entry-content").remove();cgCenterDiv.find(".cg-center-image-tkt-entry-content").remove();cgCenterDiv.find(".cg-center-image-inst-entry-content").remove();cgCenterDiv.find(".cg_append_ytb_overlay_consent").remove();cgCenterDiv.find(".cg_append_twt_overlay_consent").remove();cgCenterDiv.find(".cg_append_tkt_overlay_consent").remove();cgCenterDiv.find(".cg_append_inst_overlay_consent").remove()};cgJsClass.gallery.views.singleViewFunctions.removeClassEmbed=function($cgCenterImage){$cgCenterImage.removeClass("cg-center-image-social-entry");$cgCenterImage.removeClass("cg-center-image-ytb-entry");$cgCenterImage.removeClass("cg-center-image-twt-entry");$cgCenterImage.removeClass("cg-center-image-tkt-entry");$cgCenterImage.removeClass("cg-center-image-inst-entry")};cgJsClass.gallery.views.singleViewFunctions.setCenterImageDownloadLink=function(gid,realId,originalSource,ImgType,cgCenterDiv,$cgCenterImage){var $cgCenterImageDownload=cgCenterDiv.find(".cg-center-image-download");if($cgCenterImage.closest(".cg-center-image-download-link").length){$cgCenterImage.unwrap()}if(cgJsData[gid].options.visual.OriginalSourceLinkInSlider=="1"&&!cgJsData[gid].vars.isOnlyGalleryEcommerce){if($cgCenterImageDownload.parent().is("a")){$cgCenterImageDownload.unwrap()}if(ImgType=="con"){$cgCenterImageDownload.addClass("cg_hide")}else if(ImgType=="ytb"){$cgCenterImageDownload.addClass("cg_hide")}else if(ImgType=="inst"){$cgCenterImageDownload.addClass("cg_hide")}else if(ImgType=="twt"){$cgCenterImageDownload.addClass("cg_hide")}else if(ImgType=="tkt"){$cgCenterImageDownload.addClass("cg_hide")}else{if(cgJsClass.gallery.vars.isInternetExplorer){$cgCenterImageDownload.wrap("<a href='"+originalSource+"' class='cg-center-image-download-link' target='_blank'></a>")}else{$cgCenterImageDownload.wrap("<a download='"+cgJsData[gid].vars.rawData[realId]["NamePic"]+"."+cgJsData[gid].vars.rawData[realId].ImgType+"'  href='"+originalSource+"' class='cg-center-image-download-link' target='_blank'></a>")}$cgCenterImageDownload.removeClass("cg_hide")}}};;cgJsClass.gallery.views.singleViewFunctions.setAlternativeFileTypeOrVideo=function(gid,realId,$cgCenterImage,ImgType,originalSource,NamePic,isAlternativeFileType,$cgCenterDiv,isResizeBlogViewOnly,isFromClickNextPrevFile){var $cgCenterImageParent=$cgCenterDiv.find(".cg-center-image-parent");if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){$cgCenterImageParent.addClass("cg-center-image-parent-multiple-files-clicked");if(isFromClickNextPrevFile){$cgCenterImage.css("top","");$cgCenterImageParent.addClass("cg-center-image-parent-multiple-files-clicked")}}if(isFromClickNextPrevFile){$cgCenterImage.css("background","");$cgCenterImage.find(".cg-center-image-video,.cg-center-image-audio,.cg-center-image-name").remove();$cgCenterDiv.removeClass("cg-center-div-alternative-file-type cg-center-div-alternative-file-type-audio cg-center-div-alternative-file-type-video");$cgCenterImage.removeClass("cg-center-image-alternative-file-type cg-center-image-alternative-file-type-audio cg-center-image-alternative-file-type-video");cgJsClass.gallery.upload.vars.allowedFileEndings.forEach(function(value){$cgCenterImage.removeClass("cg-center-image-"+value)})}if(isAlternativeFileType){$cgCenterDiv.addClass("cg-center-div-alternative-file-type");if(isAlternativeFileType=="audio"){$cgCenterDiv.addClass("cg-center-div-alternative-file-type-audio")}else if(isAlternativeFileType=="video"){$cgCenterDiv.removeClass("cg-center-div-alternative-file-type")}$cgCenterImage.find(".cg-center-image-rotated").css("background","")}$cgCenterImage.css("background","").removeClass("cg_skeleton_loader");var $cgCenterImageRotated=$cgCenterImage.find(".cg-center-image-rotated");if($cgCenterImageRotated.length){$cgCenterImageRotated.addClass("cg_hide").removeClass("cg_skeleton_loader")}if(isAlternativeFileType!="video"){$cgCenterImage.addClass("cg-center-image-alternative-file-type cg-center-image-"+ImgType)}if($cgCenterImage.parent().is("a")){$cgCenterImage.unwrap()}if(isAlternativeFileType=="audio"){if($cgCenterImageParent.height()<295){$cgCenterImageParent.css({height:"295px","max-height":"295px"})}$cgCenterImage.addClass("cg-center-image-alternative-file-type-audio");$cgCenterImage.append('<div class="cg-center-image-audio"><audio onplay="cgJsClass.gallery.views.singleViewFunctions.audioOnplay(event)" controls>\n'+'  <source src="'+originalSource+'" type="audio/mpeg">\n'+"Your browser does not support the audio element.\n"+"</audio></div>");if(cgJsData[gid].options.visual["Field3IdGalleryView"]&&cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["Field3IdGalleryView"]]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["Field3IdGalleryView"]]["field-content"]){$cgCenterImage.append("<div class='cg-center-image-name'>"+cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["Field3IdGalleryView"]]["field-content"]+"</div>")}else{$cgCenterImage.append("<div class='cg-center-image-name'>"+NamePic+"</div>")}}else if(ImgType=="mp4"||ImgType=="mov"||ImgType=="avi"||ImgType=="webm"||ImgType=="wmv"){$cgCenterImage.addClass("cg-center-image-alternative-file-type-video");if(cgJsClass.gallery.ecommerce.functions.checkIfVideoForSale(ImgType,gid,realId)){$cgCenterImage.addClass("cg-center-image-alternative-file-type cg-center-image-"+ImgType);$cgCenterImage.append("<div class='cg-center-image-name'>"+NamePic+"</div>")}else{$cgCenterImage.append('<div class="cg-center-image-video"><video onplay="cgJsClass.gallery.views.singleViewFunctions.videoOnplay(event)"  controls src="'+originalSource+'" >'+'<source src="'+originalSource+'#t=0.001" type="video/mp4" />'+'<source src="'+originalSource+'#t=0.001" type="video/'+ImgType+'" /></video>'+"</div>");if(isFromClickNextPrevFile){cgJsClass.gallery.views.singleViewFunctions.setVideoWidthAndHeight($cgCenterImage,$cgCenterDiv,originalSource,gid,realId,undefined,isFromClickNextPrevFile)}}}else{if(cgJsClass.gallery.vars.isInternetExplorer){$cgCenterImage.wrap("<a class='cg-center-image-download-link' ></a>")}else{$cgCenterImage.wrap("<a download='"+NamePic+"."+ImgType+"' class='cg-center-image-download-link' ></a>")}if(cgJsData[gid].options.visual["Field3IdGalleryView"]&&cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["Field3IdGalleryView"]]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["Field3IdGalleryView"]]["field-content"]){$cgCenterImage.append("<div class='cg-center-image-name'>"+cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["Field3IdGalleryView"]]["field-content"]+"</div>")}else{$cgCenterImage.append("<div class='cg-center-image-name'>"+NamePic+"</div>")}}if(isFromClickNextPrevFile){cgJsClass.gallery.views.singleViewFunctions.setDownloadLink(gid,realId,$cgCenterDiv,originalSource)}$cgCenterImage.css("top","");if(realId==817){}if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed&&!isFromClickNextPrevFile){if(isResizeBlogViewOnly&&cgJsData[gid].vars.rawData[realId].MultipleFilesParsed&&cgJsData[gid].vars.rawData[realId].selectedOrder>=2){}else{var top=($cgCenterImageParent.height()-220)/2;if(isResizeBlogViewOnly&&$cgCenterImageParent.hasClass("cg-center-image-parent-multiple-files-clicked")){}else{if(top>0){}}}}if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed&&isFromClickNextPrevFile){var imgSrcOriginal=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId].full);if(cgJsData[gid].vars.currentLook=="slider"&&cgJsData[gid].options.visual["SliderThumbNav"]==1){var $cg_show=cgJsData[gid].vars.mainCGslider.find("#cg_show"+realId);var cg_append_file_type="";var imgType=cgJsData[gid].vars.rawData[realId].ImgType;var cgImageThumbRotation="cg"+cgJsData[gid].vars.rawData[realId].rThumb+"degree";var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);if(isAlternativeFileType){cg_append_file_type="cg_append_alternative_file_type cg_append_"+imgType}if(isAlternativeFileType&&isAlternativeFileType=="video"){var $imageObject=jQuery('<video width="100%" height="100%" class="cg_append cg_append_alternative_file_type_video" id="cg_append'+realId+'" controls>'+'<source src="'+imgSrcOriginal+'#t=0.001" type="video/mp4">'+'<source src="'+imgSrcOriginal+'#t=0.001" type="video/'+imgType+'">'+"</video>")}else{if(isAlternativeFileType=="audio"&&$cgCenterImageParent.height()<295){$cgCenterImageParent.css({height:"295px","max-height":"295px"})}var $imageObject=jQuery('<figure class="cg_figure"><div id="cg_append'+realId+'" class="cg_append cg_append_hundert_percent '+cg_append_file_type+" "+cgImageThumbRotation+'"></div><figcaption class="cg_figcaption"></figcaption></figure>')}$cg_show.find(">figure,>video").remove();$cg_show.prepend($imageObject)}if(isFromClickNextPrevFile){cgJsClass.gallery.views.singleViewFunctions.setDownloadLink(gid,realId,$cgCenterDiv,imgSrcOriginal)}}};;cgJsClass.gallery.views.singleViewFunctions.setImageWidthHeight=function(realId,gid,gidForCenterDivElements,selectedFile,sliderView,spaceForShowExif,cgCenterImageParentHeight,cgRotationThumbNumber,$cgCenterDiv,$cgCenterImage,minus,isResizeBlogViewOnly,isFromClickNextPrevFile){if(realId==257){}if(!cgRotationThumbNumber){cgRotationThumbNumber=0}$cgCenterImage.removeAttr("style");var $cgCenterImageParent;if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){var $cgCenterImageParent=$cgCenterImage.closest(".cg-center-image-parent");$cgCenterImageParent.addClass("cg-center-image-parent-multiple-files-clicked");if(isFromClickNextPrevFile){$cgCenterImage.css("top","");$cgCenterImageParent.removeClass("cg-center-image-parent-small-image")}}if(isFromClickNextPrevFile){if($cgCenterImage.parent().is("a")){$cgCenterImage.unwrap()}$cgCenterImage.find(".cg-center-image-video,.cg-center-image-audio,.cg-center-image-name").remove();$cgCenterImage.find(".cg-center-image-rotated").addClass("cg_hide");$cgCenterDiv.removeClass("cg-center-div-alternative-file-type cg-center-div-alternative-file-type-audio cg-center-div-alternative-file-type-video");$cgCenterImage.removeClass("cg-center-image-alternative-file-type cg-center-image-alternative-file-type-audio cg-center-image-alternative-file-type-video");cgJsClass.gallery.upload.vars.allowedFileEndings.forEach(function(value){$cgCenterImage.removeClass("cg-center-image-"+value)})}if(cgJsData[gid].vars.widthmainForCalculation>cgJsClass.gallery.vars.maxWidthBlogView){var cgCenterDivWidth=cgJsClass.gallery.vars.maxWidthBlogView}else{var cgCenterDivWidth=cgJsData[gid].vars.widthmainForCalculation}var widthImage=selectedFile["Width"];var heightImage=selectedFile["Height"];if(cgRotationThumbNumber=="270"||cgRotationThumbNumber=="90"){widthImage=selectedFile["Height"];heightImage=selectedFile["Width"]}var heightImageToSet;var newHeightImage=cgCenterImageParentHeight;var widthCgCenterImageDiv;widthCgCenterImageDiv=newHeightImage*widthImage/heightImage;var cgCenterImageParentWidth=cgCenterDivWidth-parseInt($cgCenterDiv.css("padding-right"))*2;var maxCenterImageWidth=1260;if(sliderView){maxCenterImageWidth=cgJsClass.gallery.vars.maxImageWidth+60}if(cgCenterImageParentWidth>maxCenterImageWidth){cgCenterImageParentWidth=maxCenterImageWidth}if(widthCgCenterImageDiv>cgCenterImageParentWidth){widthCgCenterImageDiv=cgCenterImageParentWidth;newHeightImage=widthCgCenterImageDiv*heightImage/widthImage}var cgCenterImageMargin=(cgCenterImageParentHeight-newHeightImage)/2;if(cgCenterImageMargin>=40){cgCenterImageMargin=cgCenterImageMargin-20}var sizeWidth=0;if(cgRotationThumbNumber=="270"||cgRotationThumbNumber=="90"){if(widthCgCenterImageDiv<parseInt(cgJsClass.gallery.vars.large_size_w)){var backGroundUrl=cgJsClass.gallery.function.general.tools.checkSsl(selectedFile["large"]);if(cgJsClass.gallery.vars.large_size_w){sizeWidth=parseInt(cgJsClass.gallery.vars.large_size_w)}}else{var backGroundUrl=cgJsClass.gallery.function.general.tools.checkSsl(selectedFile["full"]);if(cgJsClass.gallery.vars.large_size_w){sizeWidth=parseInt(cgJsClass.gallery.vars.large_size_w)}}}else{if(widthCgCenterImageDiv<parseInt(cgJsClass.gallery.vars.large_size_w)){var backGroundUrl=cgJsClass.gallery.function.general.tools.checkSsl(selectedFile["large"]);if(cgJsClass.gallery.vars.large_size_w){sizeWidth=parseInt(cgJsClass.gallery.vars.large_size_w)}}else{var backGroundUrl=cgJsClass.gallery.function.general.tools.checkSsl(selectedFile["full"]);if(cgJsClass.gallery.vars.large_size_w){sizeWidth=parseInt(cgJsClass.gallery.vars.large_size_w)}}}$cgCenterImage.attr("data-cg-size-width",sizeWidth);if(cgJsData[gid].vars.translateX){$cgCenterDiv.find("#cgCenterImageDiv"+gidForCenterDivElements).show()}else{if(cgJsData[gid].vars.currentLook!="blog"){$cgCenterDiv.find("#cgCenterImage"+gidForCenterDivElements).hide()}}var isBackgroundUrlNormal=false;var isBackgroundUrlRotated=false;if(typeof cgJsData[gid].vars.rawData[realId]["imgSrcOriginalWidth"]!="undefined"){if(cgRotationThumbNumber=="270"||cgRotationThumbNumber=="90"||cgRotationThumbNumber=="180"){isBackgroundUrlRotated=true;$cgCenterImage.css({background:"unset","max-width":widthCgCenterImageDiv+"px","max-height":newHeightImage+"px"});var $cgCenterImageRotated=$cgCenterImage.find(".cg-center-image-rotated");$cgCenterImageRotated.css({"max-width":newHeightImage+"px","max-height":widthCgCenterImageDiv+"px"})}else{isBackgroundUrlNormal=true;$cgCenterImage.css({"max-width":cgJsData[gid].vars.rawData[realId]["Width"]+"px","max-height":cgJsData[gid].vars.rawData[realId]["Height"]+"px"})}}else{if(cgRotationThumbNumber=="270"||cgRotationThumbNumber=="90"||cgRotationThumbNumber=="180"){isBackgroundUrlRotated=true;$cgCenterImage.css({background:"transparent","max-width":"none","max-height":"none"});var $cgCenterImageRotated=$cgCenterImage.find(".cg-center-image-rotated");$cgCenterImageRotated.css({"max-width":"none","max-height":"none"})}else{isBackgroundUrlNormal=true;$cgCenterImage.css({"max-width":"none","max-height":"none"})}}$cgCenterImage.attr("data-cg-image-src-onload",backGroundUrl);if(isBackgroundUrlNormal){cgJsClass.gallery.function.general.tools.appendImageOnLoadSingleView($cgCenterImage,backGroundUrl,realId,gid,isFromClickNextPrevFile)}else if(isBackgroundUrlRotated){$cgCenterImageRotated.removeClass("cg_hide");if(cgRotationThumbNumber=="180"){$cgCenterImageRotated.addClass("cg180degree").removeClass("cg90degree cg270degree cg0degree").show()}else if(cgRotationThumbNumber=="270"){$cgCenterImageRotated.addClass("cg270degree").removeClass("cg90degree cg180degree cg0degree").show()}else if(cgRotationThumbNumber=="90"){$cgCenterImageRotated.addClass("cg90degree").removeClass("cg270degree cg180degree cg0degree").show()}cgJsClass.gallery.function.general.tools.appendImageOnLoadSingleViewRotated($cgCenterImageRotated,backGroundUrl,realId,gid,isFromClickNextPrevFile)}if(realId==257){}if(realId==260){}if((cgRotationThumbNumber=="270"||cgRotationThumbNumber=="90")&&cgJsData[gid].vars.rawData[realId]["Width"]<newHeightImage||(cgRotationThumbNumber=="0"||cgRotationThumbNumber=="180")&&cgJsData[gid].vars.rawData[realId]["Height"]<newHeightImage){if(cgRotationThumbNumber=="270"||cgRotationThumbNumber=="90"){$cgCenterImage.height(cgJsData[gid].vars.rawData[realId]["Width"]).width(cgJsData[gid].vars.rawData[realId]["Height"]).find(".cg-center-image-rotated").height(cgJsData[gid].vars.rawData[realId]["Height"]).width(cgJsData[gid].vars.rawData[realId]["Width"]);heightImageToSet=cgJsData[gid].vars.rawData[realId]["Width"]}else if(cgRotationThumbNumber=="180"){$cgCenterImage.height(cgJsData[gid].vars.rawData[realId]["Height"]).width(cgJsData[gid].vars.rawData[realId]["Width"]).find(".cg-center-image-rotated").height("100%").width("100%");heightImageToSet=cgJsData[gid].vars.rawData[realId]["Height"]}else{$cgCenterImage.height(cgJsData[gid].vars.rawData[realId]["Height"]).width(cgJsData[gid].vars.rawData[realId]["Width"]);heightImageToSet=cgJsData[gid].vars.rawData[realId]["Height"]}$cgCenterImage.attr("data-cg-new-height-image",heightImageToSet);var cgCenterImageMargin=(cgCenterImageParentHeight-cgJsData[gid].vars.rawData[realId]["Height"])/2;if(cgCenterImageMargin>=40){cgCenterImageMargin=cgCenterImageMargin-20}$cgCenterDiv.css({"min-height":"unset",height:"auto"});if(cgJsData[gid].vars.translateX){var widthCgCenterImageDivTransform=cgJsData[gid].vars.rawData[realId]["Width"]+65;$cgCenterDiv.find("#cgCenterImage"+gidForCenterDivElements).css({"webkit-transform":"translateX("+minus+""+widthCgCenterImageDivTransform+"px)","-moz-transform":"translateX("+minus+""+widthCgCenterImageDivTransform+"px)","-ms-transform":"translateX("+minus+""+widthCgCenterImageDivTransform+"px)","-o-transform":"translateX("+minus+""+widthCgCenterImageDivTransform+"px)",transform:"translateX("+minus+""+widthCgCenterImageDivTransform+"px)"})}}else{if(cgRotationThumbNumber=="270"||cgRotationThumbNumber=="90"){$cgCenterImage.height(newHeightImage).width(widthCgCenterImageDiv).find(".cg-center-image-rotated").height(widthCgCenterImageDiv).width(newHeightImage);heightImageToSet=widthCgCenterImageDiv}else if(cgRotationThumbNumber=="180"){$cgCenterImage.height(newHeightImage).width(widthCgCenterImageDiv).find(".cg-center-image-rotated").height("100%").width("100%");heightImageToSet=newHeightImage}else{$cgCenterImage.height(newHeightImage).width(widthCgCenterImageDiv);heightImageToSet=newHeightImage}$cgCenterImage.attr("data-cg-new-height-image",heightImageToSet);if(cgJsData[gid].vars.translateX){var widthCgCenterImageDivTransform=widthCgCenterImageDiv+65;$cgCenterDiv.find("#cgCenterImage"+gidForCenterDivElements).css({"webkit-transform":"translateX("+minus+""+widthCgCenterImageDivTransform+"px)","-moz-transform":"translateX("+minus+""+widthCgCenterImageDivTransform+"px)","-ms-transform":"translateX("+minus+""+widthCgCenterImageDivTransform+"px)","-o-transform":"translateX("+minus+""+widthCgCenterImageDivTransform+"px)",transform:"translateX("+minus+""+widthCgCenterImageDivTransform+"px)"})}}if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed&&!isFromClickNextPrevFile){if(isResizeBlogViewOnly&&cgJsData[gid].vars.rawData[realId].MultipleFilesParsed&&cgJsData[gid].vars.rawData[realId].selectedOrder>=2){}else{if(isResizeBlogViewOnly&&$cgCenterImageParent.hasClass("cg-center-image-parent-multiple-files-clicked")){}else{var top=($cgCenterImageParent.height()-newHeightImage)/2;if(top>0){$cgCenterImage.css("top",top+"px")}}}}if(heightImageToSet<220){if(jQuery(window).width()>800){if(!$cgCenterImageParent){$cgCenterImageParent=$cgCenterDiv.find(".cg-center-image-parent")}$cgCenterImageParent.addClass("cg-center-image-parent-small-image");$cgCenterImage.css("top","unset")}}if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed&&isFromClickNextPrevFile){var imgSrcOriginal=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId].full);if(cgJsData[gid].vars.currentLook=="slider"&&cgJsData[gid].options.visual["SliderThumbNav"]==1){var $cg_show=cgJsData[gid].vars.mainCGslider.find("#cg_show"+realId);var cg_append_file_type="";var imgType=cgJsData[gid].vars.rawData[realId].ImgType;var cgImageThumbRotation="cg"+cgJsData[gid].vars.rawData[realId].rThumb+"degree";var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);if(isAlternativeFileType){cg_append_file_type="cg_append_alternative_file_type cg_append_"+imgType}var rotatedStyle="";var cg_append_hundert_percent_class="cg_append_hundert_percent";if(cgJsData[gid].vars.rawData[realId].rThumb=="90"||cgJsData[gid].vars.rawData[realId].rThumb=="270"){rotatedStyle='style="width:67.66%;height:150%;"';cg_append_hundert_percent_class=""}var $imageObject=jQuery('<figure class="cg_figure"><div id="cg_append'+realId+'" class="cg_append '+cg_append_hundert_percent_class+" "+cg_append_file_type+" "+cgImageThumbRotation+'" '+rotatedStyle+'></div><figcaption class="cg_figcaption"></figcaption></figure>');$cg_show.find(">figure,>video").remove();$cg_show.prepend($imageObject);var imgSrcLarge=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId].large);var imgSrc=imgSrcLarge;if(cgJsData[gid].vars.rawData[realId].rThumb=="270"||cgJsData[gid].vars.rawData[realId].rThumb=="90"){cgJsClass.gallery.function.general.tools.appendImageOnLoadGallery($cg_show,$cg_show.find(".cg_append"),imgSrcLarge,realId,gid,isFromClickNextPrevFile)}else{cgJsClass.gallery.function.general.tools.appendImageOnLoadGallery($cg_show,$cg_show.find(".cg_append"),imgSrc,realId,gid,isFromClickNextPrevFile)}}if(isFromClickNextPrevFile){cgJsClass.gallery.views.singleViewFunctions.setDownloadLink(gid,realId,$cgCenterDiv,imgSrcOriginal)}}};;cgJsClass.gallery.views.clickFurtherImagesStep={waitingInterval:null,init:function(){if(cgJsClass.gallery.vars.eventClickFurtherImagesStepInit){return}else{cgJsClass.gallery.vars.eventClickFurtherImagesStepInit=true}jQuery(document).on("change",".cg_further_images_select",function(){jQuery(this).closest(".cg_further_images_container").find('.cg_further_images[data-cg-step="'+jQuery(this).val()+'"]').click()});jQuery(document).on("click",".cg_further_images_select_nav_prev",function(){var gid=jQuery(this).attr("data-cg-gid");if(cgJsClass.gallery.vars.fullwindow&&cgJsData[gid].vars.currentLook=="blog"){var $step=cgJsData[gid].vars.mainCGdiv.find("> .cg_further_images_and_top_controls_container .cg_further_images_container").find(".cg_further_images_hidden_nav .cg_further_images.cg_further_images_selected")}else{var $step=jQuery(this).closest(".cg_further_images_container").find(".cg_further_images_hidden_nav .cg_further_images.cg_further_images_selected")}$step.prev().click()});jQuery(document).on("click",".cg_further_images_select_nav_next",function(){var gid=jQuery(this).attr("data-cg-gid");if(cgJsClass.gallery.vars.fullwindow&&cgJsData[gid].vars.currentLook=="blog"){var $step=cgJsData[gid].vars.mainCGdiv.find("> .cg_further_images_and_top_controls_container .cg_further_images_container").find(".cg_further_images_hidden_nav .cg_further_images.cg_further_images_selected")}else{var $step=jQuery(this).closest(".cg_further_images_container").find(".cg_further_images_hidden_nav .cg_further_images.cg_further_images_selected")}$step.next().click()});jQuery(document).on("click",".cg_further_images",function(){if(cgJsClass.gallery.vars.cgFurtherImagesStepClicked){return}else{cgJsClass.gallery.vars.cgFurtherImagesStepClicked=true;setTimeout(function(){cgJsClass.gallery.vars.cgFurtherImagesStepClicked=false},500)}cgJsClass.gallery.vars.cgFurtherImagesClickedInfoForCloneStep=true;if(jQuery(this).hasClass("cg_further_images_selected")&&!jQuery(this).hasClass("cg_view_change")){return}var $element=jQuery(this);var gid=$element.attr("data-cg-gid");if(cgJsClass.gallery.function.general.tools.setWaitingForValues(gid,$element,"click")){return}var $mainCGdivContainerParent=cgJsData[gid].vars.mainCGdivContainer.parent();if(!cgJsClass.gallery.vars.fullwindow){var widthParentBefore=$mainCGdivContainerParent.css("width");$mainCGdivContainerParent.css("width",cgJsData[gid].vars.mainCGdivContainer.width()+"px")}if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.reset(gid)}cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.addClass("cg_hide");cgJsClass.gallery.vars.dom.body.addClass("cg_body_overflow_hidden");cgJsClass.gallery.vars.dom.html.addClass("cg_no_scroll cg_body_overflow_hidden");var stepNumber=parseInt($element.attr("data-cg-step"));cgJsData[gid].vars.currentStep=stepNumber;var isViewChange=false;if($element.hasClass("cg_view_change")){$element.removeClass("cg_view_change");isViewChange=true}var cg_sorting_changed=false;if($element.hasClass("cg_sorting_changed")){$element.removeClass("cg_sorting_changed");cg_sorting_changed=true}var cg_random_button_clicked=false;if($element.hasClass("cg_random_button_clicked")){$element.removeClass("cg_random_button_clicked");cg_random_button_clicked=true}var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"&&cgJsData[gid].vars.currentLook!="blog"){sliderView=true}if(cgJsData[gid].vars.currentLook=="slider"&&cgJsData[gid].vars.currentLook!="blog"){var PicsPerSite=parseInt(cgJsData[gid].options.general.PicsPerSite);var order=stepNumber*PicsPerSite-PicsPerSite;var imageData=cgJsData[gid].image[order];var firstKey=Object.keys(imageData)[0];var realId=imageData[firstKey]["id"];if(!isViewChange&&!cg_sorting_changed&&!cg_random_button_clicked){cgJsData[gid].vars.openedRealId=realId}cgJsClass.gallery.views.singleViewFunctions.setFurtherSteps(gid,order);cgJsData[gid].vars.mainCGallery(" + .cg_further_images_container").remove();if(cg_random_button_clicked){cgJsClass.gallery.views.initOrderGallery(gid,null,null,true,true,null,true)}else{if(isViewChange){cgJsClass.gallery.views.initOrderGallery(gid,null,null,true,null,true)}else{cgJsClass.gallery.views.initOrderGallery(gid,null,null,true,true,null)}}}else{if($element.hasClass("cg_random_button_clicked")){$element.removeClass("cg_random_button_clicked")}cgJsClass.gallery.vars.hasToAppend=true;if(cgJsData[gid].vars.openedRealId>0&&cgJsData[gid].vars.currentLook!="blog"){cgJsClass.gallery.views.close(gid)}cgJsData[gid].vars.openedRealId=0;if(cgJsData[gid].vars.currentLook!="blog"&&!cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.mainCGallery.height(cgJsData[gid].vars.mainCGallery.height())}if($element.hasClass("cg-center-arrow-right-next-step")){var nextRealId=$element.attr("data-cg-step-next-real-id");cgJsData[gid].vars.openedRealId=nextRealId}if($element.hasClass("cg-center-arrow-left-prev-step")){var prevRealId=$element.attr("data-cg-step-prev-real-id");cgJsData[gid].vars.openedRealId=prevRealId}if($element.hasClass("cg-center-arrow-right-next-step")||$element.hasClass("cg-center-arrow-right-next-step")||$element.closest(".cg_further_images_container_bottom").length){setTimeout(function(){cgJsClass.gallery.vars.dom.html.addClass("cg_scroll_behaviour_initial");cgJsClass.gallery.vars.dom.body.addClass("cg_scroll_behaviour_initial");jQuery("html, body").animate({scrollTop:cgJsData[gid].vars.mainCGdiv.offset().top-10+"px"},0,function(){});cgJsData[gid].vars.mainCGdiv.find(".cg_header").addClass("cg_pointer_events_none");cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container").add("cg_pointer_events_none");cgJsData[gid].vars.mainCGallery.find(".cg_show").addClass("cg_pointer_events_none");cgJsClass.gallery.vars.dom.html.removeClass("cg_scroll_behaviour_initial");cgJsClass.gallery.vars.dom.body.removeClass("cg_scroll_behaviour_initial");setTimeout(function(){cgJsData[gid].vars.mainCGdiv.find(".cg_header").removeClass("cg_pointer_events_none");cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container").removeClass("cg_pointer_events_none");cgJsData[gid].vars.mainCGallery.find(".cg_show").removeClass("cg_pointer_events_none")},700)},1)}cgJsClass.gallery.dynamicOptions.checkStepsCutImageData(jQuery,stepNumber,true,false,gid,null,null,isViewChange);if(cgJsData[gid].vars.currentLook!="blog"&&!cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.mainCGallery.height("auto")}if(jQuery(this).hasClass("cg_cloned")){location.href="#cgFurtherImagesContainerDivPositionHelper"+gid}cgJsData[gid].vars.mainCGallery.next(".cg_further_images_container").remove();if(!cgJsClass.gallery.vars.fullwindow){cgJsClass.gallery.vars.dom.body.removeClass("cg_body_overflow_hidden");cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll cg_body_overflow_hidden")}cgJsData[gid].vars.mainCGallery.addClass("cg_fade_in");if(!cgJsClass.gallery.vars.fullwindow){$mainCGdivContainerParent.css("width",widthParentBefore)}if($element.closest(".cg_further_images_container_bottom").length){setTimeout(function(){jQuery("html, body").animate({scrollTop:cgJsData[gid].vars.mainCGdiv.offset().top-10+"px"},0,function(){jQuery("html, body").animate({scrollTop:cgJsData[gid].vars.mainCGdiv.offset().top-10+"px"},0,function(){})})},100)}}})},cloneStep:function(gid,$cg_further_images_container,isFromBlogLogicNotFromScroll){if($cg_further_images_container){if(cgJsData[gid].vars.$cg_further_images_container_bottom){cgJsData[gid].vars.$cg_further_images_container_bottom.remove();cgJsData[gid].vars.$cg_further_images_container_bottom=null}var timeout=80;if(cgJsClass.gallery.vars.fullwindow){cgJsClass.gallery.views.clickFurtherImagesStep.cloneStepProcess(gid,$cg_further_images_container,isFromBlogLogicNotFromScroll)}else{setTimeout(function(){cgJsClass.gallery.views.clickFurtherImagesStep.cloneStepProcess(gid,$cg_further_images_container,isFromBlogLogicNotFromScroll)},80)}}},cloneStepProcess:function(gid,$cg_further_images_container,isFromBlogLogicNotFromScroll){if(cgJsData[gid].vars.$cgVerticalSpaceCreatorThumbView){cgJsData[gid].vars.$cg_further_images_container_top=$cg_further_images_container;if(!cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container_bottom").remove();cgJsData[gid].vars.$cg_further_images_container_bottom=$cg_further_images_container.clone().removeAttr("id").addClass("cg_further_images_container_bottom").insertAfter(cgJsData[gid].vars.$cgVerticalSpaceCreatorThumbView);cgJsData[gid].vars.$cg_further_images_container_bottom.attr("id","cgFurtherImagesContainerDivBottom"+gid)}}else{cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container_bottom").remove();cgJsData[gid].vars.$cg_further_images_container_top=$cg_further_images_container;cgJsData[gid].vars.$cg_further_images_container_bottom=$cg_further_images_container.clone().removeAttr("id").addClass("cg_further_images_container_bottom").insertAfter(cgJsData[gid].vars.mainCGallery);cgJsData[gid].vars.$cg_further_images_container_bottom.attr("id","cgFurtherImagesContainerDivBottom"+gid)}if(cgJsData[gid].vars.currentLook=="blog"&&cgJsData[gid].vars.$cg_further_images_container_bottom&&!isFromBlogLogicNotFromScroll){cgJsData[gid].vars.$cg_further_images_container_bottom.addClass("cg_hide")}else if(cgJsData[gid].vars.currentLook=="blog"&&cgJsData[gid].vars.$cg_further_images_container_bottom&&isFromBlogLogicNotFromScroll){if(cgJsClass.gallery.vars.cgFurtherImagesClickedInfoForCloneStep){cgJsClass.gallery.vars.cgFurtherImagesClickedInfoForCloneStep=false;return}cgJsData[gid].vars.$cg_further_images_container_bottom.removeClass("cg_hide")}if(cgJsClass.gallery.vars.fullwindow){if(cgJsData[gid].vars.currentLook=="blog"){cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container_as_text").remove();cgJsClass.gallery.views.clickFurtherImagesStep.setBottomContainerAsText(gid)}}},setBottomContainerAsText:function(gid){if(cgJsData[gid].vars.lengthData>cgJsData[gid].options.general.PicsPerSite){cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container_fullwindow_nav").remove();cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container:not(.cg_further_images_container_bottom)").each(function(index){if(index==0){cgJsData[gid].vars.cgFurtherImagesContainerAsTextTop=jQuery(cgJsData[gid].vars.$cg_further_images_container_top.clone().addClass("cg_further_images_container_fullwindow_nav")).insertBefore(cgJsData[gid].vars.mainCGallery)}});cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container_bottom").each(function(index){if(index==0){cgJsData[gid].vars.cgFurtherImagesContainerAsTextBottom=jQuery(cgJsData[gid].vars.$cg_further_images_container_top.clone().addClass("cg_further_images_container_fullwindow_nav")).insertAfter(cgJsData[gid].vars.cgLdsDualRingCGcenterDivLazyLoader)}if(index!=0){jQuery(this).remove()}})}},setBottomContainerAsTextWidth:function(gid){}};;cgJsClass.gallery.views.keypress={init:function(){jQuery(document).keydown(function(e){if(jQuery("#cgEcommerceCheckoutBodyContainer").is(":visible")){if(e.which==27){if(cgJsClass.gallery.vars.fullscreen){cgJsClass.gallery.views.fullscreen.close(gid)}else{var $cgEcommerceCheckoutBodyContainerClose=jQuery("#cgEcommerceCheckoutBodyContainerClose");if($cgEcommerceCheckoutBodyContainerClose.is(":visible")){$cgEcommerceCheckoutBodyContainerClose.click()}}}}else if(jQuery(".cgCenterDiv").is(":visible")){if(jQuery(e.target).hasClass("cg-field-id-input-content")||jQuery(e.target).hasClass("cg-cat-id-input-content")){return}if(e.which==37||e.which==39||e.which==27){var gid=cgJsClass.gallery.vars.openedGallery;var sliderView=false;if(gid){var cgCenterDiv=cgJsData[gid].vars.mainCGallery.find("#cgCenterDiv"+gid);if(cgCenterDiv.find(".cg-field-id-input-content").length||cgCenterDiv.find(".cg-cat-id-input-content").length){return}if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}if(e.which==37){if(jQuery(e.target).hasClass("cg-center-image-comments-div-enter-contenteditable")){return}if(cgJsData[gid].vars.currentLook=="blog"){return}jQuery(window).off("hashchange");cgJsClass.gallery.vars.keypressStartInSeconds=(new Date).getTime()/1e3;var order=parseInt(cgJsData[gid].vars.openedGalleryImageOrder)-1;if(order<0){cgJsClass.gallery.views.singleViewFunctions.clickPrevStep(gid);return}cgJsClass.gallery.vars.showImageClicked=true;cgJsClass.gallery.views.functions.appendAndRemoveImagesInSlider(gid,order,cgJsData[gid].vars.maximumVisibleImagesInSlider,cgJsData[gid].vars.mainCGslider);cgJsClass.gallery.views.singleView.openImage(jQuery,order,false,gid,"left");cgJsClass.gallery.hashchange.activateHashChangeEvent()}if(e.which==39){if(jQuery(e.target).hasClass("cg-center-image-comments-div-enter-contenteditable")){return}if(cgJsData[gid].vars.currentLook=="blog"){return}jQuery(window).off("hashchange");cgJsClass.gallery.vars.keypressStartInSeconds=(new Date).getTime()/1e3;var length=cgJsData[gid].image.length;var order=parseInt(cgJsData[gid].vars.openedGalleryImageOrder)+1;if(order>=length){cgJsClass.gallery.views.singleViewFunctions.clickNextStep(gid);return}cgJsClass.gallery.vars.showImageClicked=true;cgJsClass.gallery.views.functions.appendAndRemoveImagesInSlider(gid,order,cgJsData[gid].vars.maximumVisibleImagesInSlider,cgJsData[gid].vars.mainCGslider);cgJsClass.gallery.views.singleView.openImage(jQuery,order,false,gid,"right");cgJsClass.gallery.hashchange.activateHashChangeEvent()}if(e.which==27){if(cgJsClass.gallery.vars.openedUploadFormGalleryId){cgJsClass.gallery.upload.functions.close(cgJsClass.gallery.vars.openedUploadFormGalleryId)}else{if(cgJsClass.gallery.vars.fullscreen){cgJsClass.gallery.views.fullscreen.close(gid)}else if(cgJsClass.gallery.vars.fullwindow){var gid=cgJsClass.gallery.vars.fullwindow;cgJsClass.gallery.views.fullwindow.closeFunction(gid,true)}}}}}}else{if(e.which==27){if(cgJsClass.gallery.vars.openedUploadFormGalleryId){cgJsClass.gallery.upload.functions.close(cgJsClass.gallery.vars.openedUploadFormGalleryId)}else{if(cgJsClass.gallery.vars.fullscreen){cgJsClass.gallery.views.fullscreen.close(gid)}else if(cgJsClass.gallery.vars.fullwindow){var gid=cgJsClass.gallery.vars.fullwindow;cgJsClass.gallery.views.fullwindow.closeFunction(gid,true)}}}}})}};;cgJsClass.gallery.function.search.init=function(){cgJsClass.gallery.function.search.input()};;cgJsClass.gallery.function.search.inputProcess=function($element){var gid=$element.attr("data-cg-gid");cgJsData[gid].vars.searchInputTstamp=(new Date).getTime()/1e3;var searchInputValue=$element.val();if(searchInputValue==cgJsData[gid].vars.searchInput){return}setTimeout(function(){if(cgJsClass.gallery.function.general.tools.setWaitingForValues(gid,$element,"input",true)){return}cgJsData[gid].vars.openedRealId=0;cgJsData[gid].vars.searchInputCollectedIds=null;cgJsClass.gallery.vars.inputWritten=true;cgJsClass.gallery.vars.hasToAppend=true;cgJsData[gid].vars.mainCGdiv.find(".cg_thumbs_and_categories_control").addClass("cg_pointer_events_none");if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.reset(gid);if(cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.mainCGdiv.addClass("cg_fullwindow_blog_view_search");cgJsData[gid].vars.cgCenterDivLoaderContainer.addClass("cg_is_on_search");cgJsData[gid].vars.cgCenterDivLoaderContainer.find(".cgCenterDiv.cgCenterDivLoader").removeClass("cg_hide");cgJsData[gid].vars.cgCenterDivLoaderContainer.removeClass("cg_hide cg_hidden").addClass("cg_visibility_visible");cgJsData[gid].vars.cgCenterDivLoaderContainerBackdrop.removeClass("cg_hidden").addClass("cg_visibility_visible");setTimeout(function(){if(cgJsData[gid].vars.searchInputTstamp<(new Date).getTime()/1e3){cgJsData[gid].vars.mainCGdiv.removeClass("cg_fullwindow_blog_view_search");cgJsData[gid].vars.cgCenterDivLoaderContainer.addClass("cg_hide cg_hidden").removeClass("cg_visibility_visible");cgJsData[gid].vars.cgCenterDivLoaderContainerBackdrop.addClass("cg_hide cg_hidden").removeClass("cg_visibility_visible");cgJsData[gid].vars.cgCenterDivLoaderContainer.removeClass("cg_is_on_search");cgJsData[gid].vars.searchInputTstamp=0;cgJsData[gid].vars.mainCGdiv.find(".cg_thumbs_and_categories_control").removeClass("cg_pointer_events_none")}},2e3)}else{cgJsData[gid].vars.mainCGdiv.addClass("cg_blog_view_search");cgJsData[gid].vars.cgCenterDivLoaderContainer.addClass("cg_is_on_search");cgJsData[gid].vars.cgCenterDivLoaderContainer.find(".cgCenterDiv.cgCenterDivLoader").removeClass("cg_hide");cgJsData[gid].vars.cgCenterDivLoaderContainer.removeClass("cg_hide cg_hidden").addClass("cg_visibility_visible");cgJsData[gid].vars.mainCGdiv.height(cgJsData[gid].vars.cgCenterDivLoaderContainer.height()+500);cgJsData[gid].vars.mainCGallery.css("min-height",cgJsData[gid].vars.cgCenterDivLoaderContainer.height()+250+"px");setTimeout(function(){if(cgJsData[gid].vars.searchInputTstamp<(new Date).getTime()/1e3){cgJsData[gid].vars.mainCGdiv.removeClass("cg_blog_view_search");cgJsData[gid].vars.mainCGdiv.css("height","unset");cgJsData[gid].vars.mainCGallery.css("min-height","");cgJsData[gid].vars.cgCenterDivLoaderContainer.removeClass("cg_is_on_search");cgJsData[gid].vars.cgCenterDivLoaderContainer.addClass("cg_hide cg_hidden").removeClass("cg_visibility_visible");cgJsData[gid].vars.cgCenterDivLoaderContainerBackdrop.addClass("cg_hide cg_hidden").removeClass("cg_visibility_visible");cgJsData[gid].vars.searchInputTstamp=0;cgJsData[gid].vars.mainCGdiv.find(".cg_thumbs_and_categories_control").removeClass("cg_pointer_events_none")}},2e3)}}cgJsData[gid].vars.mainCGallery.css("height",cgJsData[gid].vars.mainCGallery.height()+"px");cgJsData[gid].vars.searchInput=searchInputValue;if(cgJsData[gid].vars.openedRealId>0){cgJsClass.gallery.views.close(gid)}var ids=cgJsClass.gallery.function.search.collectData(gid);cgJsData[gid].vars.searchInputCollectedIds=ids;cgJsClass.gallery.categories.prepareAndAddCategoriesImagesCountAfterSearch(gid,cgJsData[gid].vars.searchInputCollectedIdsWithoutCategoryDependency,cgJsData[gid].vars.rawData);var fullImageDataFilteredAfterSearch=cgJsClass.gallery.sorting.initSort(gid);var step=1;cgJsClass.gallery.dynamicOptions.checkStepsCutImageData(jQuery,step,true,false,gid,undefined,undefined,undefined,undefined,true,fullImageDataFilteredAfterSearch);cgJsClass.gallery.vars.inputWritten=false;cgJsData[gid].vars.mainCGallery.css("height","auto");if(cgJsData[gid].vars.currentLook!="blog"){cgJsData[gid].vars.mainCGdiv.find(".cg_thumbs_and_categories_control").removeClass("cg_pointer_events_none")}},1)};cgJsClass.gallery.function.search.input=function(){if(cgJsClass.gallery.vars.eventCgSearchInput){return}else{cgJsClass.gallery.vars.eventCgSearchInput=true}jQuery(document).on("input",".cg_search_input",function(){cgJsClass.gallery.function.search.inputProcess(jQuery(this))});jQuery(document).on("focusin",".cg_search_input",function(){if(cgJsClass.gallery.vars.fullwindow){cgJsClass.gallery.vars.isHashJustChangedNewLogic=true;location.hash="#"}})};;cgJsClass.gallery.function.search.collectData=function(gid){var ids={};var noCategories=false;if(cgJsData[gid].options.pro.CatWidget!=1){noCategories=true}if(cgJsData[gid].vars.categoriesLength<1){noCategories=true}cgJsData[gid].vars.searchInput=cgJsData[gid].vars.searchInput==null?"":cgJsData[gid].vars.searchInput;cgJsData[gid].vars.searchInputCollectedIdsWithoutCategoryDependency=[];if(cgJsData[gid].vars.searchInput.trim()!=""&&cgJsData[gid].options.pro.Search==1){var val=cgJsData[gid].vars.searchInput;var valArray=val.split(" ");var valArrayNew=[];for(var key in valArray){if(!valArray.hasOwnProperty(key)){break}if(valArray[key]==""){}else{valArrayNew.push(valArray[key])}}for(var realId in cgJsData[gid].fullImageInfoData){if(!cgJsData[gid].fullImageInfoData.hasOwnProperty(realId)){break}for(var key in valArrayNew){if(!valArrayNew.hasOwnProperty(key)){break}if(cgJsData[gid].fullImageInfoData[realId].toLowerCase().indexOf(valArrayNew[key].toLowerCase())>=0){ids[realId]=val;cgJsData[gid].vars.searchInputCollectedIdsWithoutCategoryDependency.push(realId)}else{for(var WpUserId in cgJsData[gid].vars.nicknames){if(!cgJsData[gid].vars.nicknames.hasOwnProperty(WpUserId)){break}if(cgJsData[gid].vars.rawData[realId]["WpUserId"]==WpUserId&&cgJsData[gid].vars.nicknames[WpUserId].toLowerCase().indexOf(valArrayNew[key].toLowerCase())>=0){ids[realId]=val;cgJsData[gid].vars.searchInputCollectedIdsWithoutCategoryDependency.push(realId)}}}}if(cgJsData[gid].vars.categoriesLength>=1&&cgJsData[gid].options.pro.CatWidget==1){var imageCatId=cgJsData[gid].vars.rawData[realId]["Category"];var checkCatId=false;for(var categoryId in cgJsData[gid].vars.categories){if(!cgJsData[gid].vars.categories.hasOwnProperty(categoryId)){break}if(categoryId==imageCatId){checkCatId=true;if(cgJsData[gid].vars.categories[categoryId]["Checked"]==false){delete ids[realId]}break}}if(checkCatId==false){if(ids.hasOwnProperty(realId)){delete ids[realId]}}}}}else{for(var realId in cgJsData[gid].vars.rawData){if(!cgJsData[gid].vars.rawData.hasOwnProperty(realId)){break}ids[realId]="";cgJsData[gid].vars.searchInputCollectedIdsWithoutCategoryDependency.push(realId)}if(cgJsData[gid].vars.categoriesLength>=1&&cgJsData[gid].options.pro.CatWidget==1){for(var realId in cgJsData[gid].vars.rawData){if(!cgJsData[gid].vars.rawData.hasOwnProperty(realId)){break}var imageCatId=cgJsData[gid].vars.rawData[realId]["Category"];var checkCatId=false;for(var categoryId in cgJsData[gid].vars.categories){if(!cgJsData[gid].vars.categories.hasOwnProperty(categoryId)){break}if(categoryId==imageCatId){checkCatId=true;if(cgJsData[gid].vars.categories[categoryId]["Checked"]==false){delete ids[realId]}break}}if(checkCatId==false){if(ids.hasOwnProperty(realId)){delete ids[realId]}}}}}return ids};;cgJsClass.gallery.function.message.init=function(){cgJsClass.gallery.function.message.clickConfirm();cgJsClass.gallery.function.message.clickClose()};cgJsClass.gallery.function.message.show=function(gid,message,isShowConfirm,functionToProcess,processArguments,$clickedButton,isJustAddLoadingClass,isFromUploadOrRegistryForm,isHideCgMessagesClose,isFromGoogleLogin,isBorderRadius,isWhite){var colorStyleClass="cg_fe_controls_style_black";var borderStyleClass="";debugger;if(isBorderRadius){borderStyleClass="cg_border_radius_controls_and_containers"}if(isWhite){colorStyleClass="cg_fe_controls_style_white"}if(gid){if(isFromGoogleLogin){var $cgGoogleSignInContainerParent=jQuery("#cgGoogleSignInContainerParent");if($cgGoogleSignInContainerParent.length){if($cgGoogleSignInContainerParent.hasClass("cg_fe_controls_style_white")){colorStyleClass="cg_fe_controls_style_white"}if($cgGoogleSignInContainerParent.hasClass("cg_border_radius_controls_and_containers")){borderStyleClass="cg_border_radius_controls_and_containers"}}}else if(isFromUploadOrRegistryForm){var $mainCGdivUploadForm=jQuery('.mainCGdivUploadForm[data-cg-gid="'+gid+'"]');if($mainCGdivUploadForm.length){if($mainCGdivUploadForm.hasClass("cg_fe_controls_style_white")){colorStyleClass="cg_fe_controls_style_white"}if($mainCGdivUploadForm.hasClass("cg_border_radius_controls_and_containers")){borderStyleClass="cg_border_radius_controls_and_containers"}}}else{if(typeof cgJsData!="undefined"&&cgJsData[gid]&&cgJsData[gid].vars&&cgJsData[gid].vars.mainCGdiv){if(cgJsData[gid].vars.mainCGdiv.hasClass("cg_fe_controls_style_white")){colorStyleClass="cg_fe_controls_style_white"}if(cgJsData[gid].vars.mainCGdiv.hasClass("cg_border_radius_controls_and_containers")){borderStyleClass="cg_border_radius_controls_and_containers"}}}}var $cgMessagesContainer=cgJsClass.gallery.vars.cgMessagesContainer;$cgMessagesContainer.removeClass("cg_fe_controls_style_black cg_fe_controls_style_white cg_border_radius_controls_and_containers");$cgMessagesContainer.addClass(colorStyleClass);if(borderStyleClass){$cgMessagesContainer.addClass(borderStyleClass)}$cgMessagesContainer.removeClass("cg-lds-dual-ring-star-loading");$cgMessagesContainer.find("#cgMessagesClose").removeClass("cg_hide");if(isFromUploadOrRegistryForm){if(jQuery("#cgBorderRadiusForUploadFormFromGallerySettings").val()==1){$cgMessagesContainer.addClass("cg_border_radius_controls_and_containers")}$cgMessagesContainer.addClass(jQuery("#cgFeControlsStyleForUploadFormFromGallerySettings").val())}var $cgMessagesContent=$cgMessagesContainer.find("#cgMessagesContent");$cgMessagesContainer.css("height","unset");if(isJustAddLoadingClass){cgJsClass.gallery.function.message.resize();cgJsClass.gallery.function.general.tools.backdropShow(undefined,undefined,colorStyleClass);cgJsClass.gallery.function.message.containerDisplay($cgMessagesContainer);$cgMessagesContainer.removeClass("cg_confirm");$cgMessagesContainer.find("#cgMessagesClose").addClass("cg_hide");$cgMessagesContainer.find("#cgMessagesContent").empty();$cgMessagesContainer.find("#cgMessagesConfirm").remove();$cgMessagesContainer.addClass("cg-lds-dual-ring-star-loading");return $cgMessagesContainer}if(isShowConfirm){$cgMessagesContainer.find("#cgMessagesContent").css({display:"table-cell","padding-top":"15px"})}else{$cgMessagesContainer.find("#cgMessagesContent").css({display:"block","padding-top":"7px"})}if(cgJsClass.gallery.user.isEventinProcess){$cgMessagesContainer.find(".cg-lds-dual-ring-div-gallery-hide").remove();$cgMessagesContainer.removeClass("cg_confirm");$cgMessagesContainer.find("#cgMessagesClose, #cgMessagesContent").removeClass("cg_hide");$cgMessagesContent.html(message);cgJsClass.gallery.user.isEventinProcess=false;return}else{$cgMessagesContainer.find("#cgMessagesContent").removeAttr("style")}jQuery("body").addClass("cg_message_opened");if(message==""||message==0||message==null){message=""}cgJsClass.gallery.function.message.resize();$cgMessagesContainer.find("#cgMessagesConfirm").remove();$cgMessagesContent.html(message);if(isShowConfirm){$cgMessagesContainer.addClass("cg_confirm");if($cgMessagesContainer.find("#cgMessagesConfirm").length){$cgMessagesContainer.find("#cgMessagesConfirm").remove()}$cgMessagesContainer.append('<span id="cgMessagesConfirm">'+'<span class="cg_messages_confirm_answer cg_messages_confirm_answer_no cg_button">'+cgJsClass.gallery.language[$clickedButton.attr("data-cg-gid")].No+"</span>"+'<span class="cg_messages_confirm_answer cg_messages_confirm_answer_yes cg_button" data-cg-gid="'+$clickedButton.attr("data-cg-gid")+'" data-cg-real-id="'+$clickedButton.attr("data-cg-real-id")+'" data-function-to-process="'+functionToProcess+'">'+cgJsClass.gallery.language[$clickedButton.attr("data-cg-gid")].Yes+"</span>"+"</span>");$clickedButton.closest(".cg_show").addClass("cg_opacity_0_3")}cgJsClass.gallery.vars.messageContainerShown=true;cgJsClass.gallery.function.message.addCloseMessageFrameOnBodyClick();cgJsClass.gallery.function.general.tools.backdropShow();if(isHideCgMessagesClose){$cgMessagesContainer.find("#cgMessagesClose").addClass("cg_hide")}cgJsClass.gallery.function.message.containerDisplay($cgMessagesContainer)};cgJsClass.gallery.function.message.containerDisplay=function($cgMessagesContainer){if(cgJsClass.gallery.vars.fullscreen){cgJsData[cgJsClass.gallery.vars.fullscreen].vars.mainCGdivHelperParent.prepend($cgMessagesContainer)}else if(cgJsClass.gallery.vars.fullwindow){cgJsData[cgJsClass.gallery.vars.fullwindow].vars.mainCGdivHelperParent.prepend($cgMessagesContainer)}else{cgJsClass.gallery.vars.dom.body.prepend($cgMessagesContainer)}$cgMessagesContainer.removeClass("cg_messages_container_fade_in");cgJsClass.gallery.function.message.setScrollForContainerIfRequired($cgMessagesContainer,true);setTimeout(function(){$cgMessagesContainer.addClass("cg_messages_container_fade_in")},1)};cgJsClass.gallery.function.message.showPro=function(gid,message,isShowConfirm,functionToProcess,processArguments,$clickedButton,isJustAddLoadingClass,isShowGoogleSignIn,isWidthFitContent){var colorStyleClass="cg_fe_controls_style_black";var borderStyleClass="";debugger;if(gid){if(isShowGoogleSignIn){var $cgGoogleSignInContainerParent=jQuery('.cgGoogleSignInContainerParent[data-cg-gid="'+gid+'"]');if($cgGoogleSignInContainerParent.length){if($cgGoogleSignInContainerParent.hasClass("cg_fe_controls_style_white")){colorStyleClass="cg_fe_controls_style_white"}if($cgGoogleSignInContainerParent.hasClass("cg_border_radius_controls_and_containers")){borderStyleClass="cg_border_radius_controls_and_containers"}}}else{if(typeof cgJsData!="undefined"&&cgJsData[gid]&&cgJsData[gid].vars&&cgJsData[gid].vars.mainCGdiv){if(cgJsData[gid].vars.mainCGdiv.hasClass("cg_fe_controls_style_white")){colorStyleClass="cg_fe_controls_style_white"}if(cgJsData[gid].vars.mainCGdiv.hasClass("cg_border_radius_controls_and_containers")){borderStyleClass="cg_border_radius_controls_and_containers"}}}}if(isShowGoogleSignIn){message=jQuery("#cgGoogleSignInContainerParent").clone().removeClass("cgGoogleSignInContainerParentFirst")}else{if(typeof message!="object"){message=jQuery("<textarea />").html(message).text()}}var $cgMessagesContainer=cgJsClass.gallery.vars.cgMessagesContainerPro;cgJsClass.gallery.vars.cgMessagesContainerProIsVisible=true;$cgMessagesContainer.removeClass("cg_fe_controls_style_white cg_fe_controls_style_black cg_border_radius_controls_and_containers");if(borderStyleClass){$cgMessagesContainer.addClass(borderStyleClass)}$cgMessagesContainer.addClass(colorStyleClass);if(gid){$cgMessagesContainer.attr("data-cg-gid",gid)}else{$cgMessagesContainer.removeAttr("data-cg-gid")}if(isWidthFitContent){$cgMessagesContainer.addClass("cg_width_fit_content_important")}else{$cgMessagesContainer.removeClass("cg_width_fit_content_important")}var $cgMessagesContent=$cgMessagesContainer.find("#cgMessagesContent");$cgMessagesContainer.css("height","unset");if(isJustAddLoadingClass){cgJsClass.gallery.function.message.resize(true);cgJsClass.gallery.function.general.tools.backdropShow();cgJsClass.gallery.function.message.containerDisplay($cgMessagesContainer);$cgMessagesContainer.removeClass("cg_confirm");$cgMessagesContainer.find("#cgMessagesClose").addClass("cg_hide");$cgMessagesContainer.find("#cgMessagesContent").empty();$cgMessagesContainer.find("#cgMessagesConfirm").remove();$cgMessagesContainer.addClass("cg-lds-dual-ring-star-loading");return $cgMessagesContainer}if(isShowConfirm){$cgMessagesContainer.find("#cgMessagesContent").css({display:"table-cell","padding-top":"15px"})}else{$cgMessagesContainer.find("#cgMessagesContent").css({display:"block","padding-top":"7px"})}if(cgJsClass.gallery.user.isEventinProcess){$cgMessagesContainer.find(".cg-lds-dual-ring-div-gallery-hide").remove();$cgMessagesContainer.removeClass("cg_confirm");$cgMessagesContainer.find("#cgMessagesClose, #cgMessagesContent").removeClass("cg_hide");$cgMessagesContent.html(message);cgJsClass.gallery.user.isEventinProcess=false;return}else{$cgMessagesContainer.find("#cgMessagesContent").removeAttr("style")}jQuery("body").addClass("cg_message_opened");if(message==""||message==0||message==null){message=""}cgJsClass.gallery.function.message.resize(true);$cgMessagesContainer.find("#cgMessagesConfirm").remove();$cgMessagesContent.html(message);if(isShowConfirm){$cgMessagesContainer.addClass("cg_confirm");if($cgMessagesContainer.find("#cgMessagesConfirm").length){$cgMessagesContainer.find("#cgMessagesConfirm").remove()}$cgMessagesContainer.append('<span id="cgMessagesConfirm">'+'<span class="cg_messages_confirm_answer cg_button cg_messages_confirm_answer_no">'+cgJsClass.gallery.language[$clickedButton.attr("data-cg-gid")].No+"</span>"+'<span class="cg_messages_confirm_answer cg_button cg_messages_confirm_answer_yes" data-cg-gid="'+$clickedButton.attr("data-cg-gid")+'" data-cg-real-id="'+$clickedButton.attr("data-cg-real-id")+'" data-function-to-process="'+functionToProcess+'">'+cgJsClass.gallery.language[$clickedButton.attr("data-cg-gid")].Yes+"</span>"+"</span>");$clickedButton.closest(".cg_show").addClass("cg_opacity_0_3")}cgJsClass.gallery.vars.messageContainerShown=true;cgJsClass.gallery.function.message.addCloseMessageFrameOnBodyClick();cgJsClass.gallery.function.general.tools.backdropShow();cgJsClass.gallery.function.message.containerDisplay($cgMessagesContainer)};cgJsClass.gallery.function.message.loaderTemplate='<div class="cg-lds-dual-ring-div-gallery-hide"><div class="cg-lds-dual-ring-gallery-hide"></div></div>';cgJsClass.gallery.function.message.clickConfirm=function(){if(cgJsClass.gallery.vars.eventClickConfirm){return}else{cgJsClass.gallery.vars.eventClickConfirm=true}jQuery(document).on("click",".cg_messages_container .cg_messages_confirm_answer_yes",function(e){var $element=jQuery(this);var functionsArray=$element.attr("data-function-to-process").split(".");var fullLiteralFunctionObjectPath=window;var fullLiteralFunctionObjectPathFirstFromNameSpaceToDeleteLater;functionsArray.forEach(function(functionName){fullLiteralFunctionObjectPath=fullLiteralFunctionObjectPath[functionName];if(!fullLiteralFunctionObjectPathFirstFromNameSpaceToDeleteLater){fullLiteralFunctionObjectPathFirstFromNameSpaceToDeleteLater=functionName}});fullLiteralFunctionObjectPath.call(null,$element);return false});jQuery(document).on("click",".cg_messages_container .cg_messages_confirm_answer_no",function(e){cgJsClass.gallery.function.message.close();return false})};cgJsClass.gallery.function.message.addCloseMessageFrameOnBodyClick=function(){jQuery("body.cg_message_opened").on("click",function(e){if(cgJsClass.gallery.user.isEventinProcess){return}if(jQuery(e.target).closest("#cgMessagesContainer").length==1){return}if(jQuery(e.target).closest("#cgMessagesContainerPro").length==1){return}cgJsClass.gallery.function.message.close();return false})};cgJsClass.gallery.function.message.clickCloseInitieted=false;cgJsClass.gallery.function.message.clickClose=function(){if(!cgJsClass.gallery.function.message.clickCloseInitieted){cgJsClass.gallery.function.message.clickCloseInitieted=true;jQuery(document).on("click",".cg_messages_container",function(e){if(cgJsClass.gallery.user.isEventinProcess){return}if(jQuery(this).find(".cg_messages_confirm_answer").length>=1){return}cgJsClass.gallery.function.message.close()});jQuery(document).on("click",".cg_messages_container",function(e){if(cgJsClass.gallery.user.isEventinProcess){return}cgJsClass.gallery.function.message.close()});jQuery(document).on("click","#cgMessagesCloseProContainer",function(e){cgJsClass.gallery.vars.cgMessagesContainerPro.addClass("cg_hide");cgJsClass.gallery.vars.cgMessagesContainerProIsVisible=false;cgJsClass.gallery.function.general.tools.backdropHide()})}};jQuery(document).on("click","#cgMessagesClose",function(e){cgJsClass.gallery.function.message.close()});cgJsClass.gallery.function.message.close=function(isOnBlurIrrelevant){if(!isOnBlurIrrelevant){if(cgJsClass.gallery.vars.onBlurCg_messages_container_pro_select_label){setTimeout(function(){cgJsClass.gallery.vars.onBlurCg_messages_container_pro_select_label=false},500);return}}else{cgJsClass.gallery.vars.onBlurCg_messages_container_pro_select_label=false}var $cgMessagesContainer=jQuery(".cg_messages_container");var $cg_messages_confirm_answer_yes=$cgMessagesContainer.find(".cg_messages_confirm_answer_yes");if($cg_messages_confirm_answer_yes.length){var imageId=$cg_messages_confirm_answer_yes.attr("data-cg-real-id");var gid=$cg_messages_confirm_answer_yes.attr("data-cg-gid");jQuery("#mainCGallery"+gid).find("#cg_show"+imageId).removeClass("cg_opacity_0_3")}$cgMessagesContainer.addClass("cg_hide").removeAttr("style").removeClass("cg_confirm");$cgMessagesContainer.find("#cgMessagesContent").empty();$cgMessagesContainer.find("#cgMessagesConfirm").remove();$cgMessagesContainer.find(".cg-lds-dual-ring-div-gallery-hide").remove();$cgMessagesContainer.find("#cgMessagesClose, #cgMessagesContent").removeClass("cg_hide");$cgMessagesContainer.find("#cgMessagesContent").removeAttr("style");cgJsClass.gallery.vars.messageContainerShown=false;cgJsClass.gallery.function.message.removeCloseMessageFrameOnBodyClick();if(cgJsClass.gallery.vars.cgMessagesContainerPro){cgJsClass.gallery.vars.cgMessagesContainerPro.addClass("cg_hide")}cgJsClass.gallery.vars.cgMessagesContainerProIsVisible=false;cgJsClass.gallery.function.general.tools.backdropHide();if(cgJsClass.gallery.vars.dom.body.hasClass("cg_show_select_vote_multiple_stars_opened")){cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");cgJsClass.gallery.vars.dom.body.removeClass("cg_no_scroll")}};cgJsClass.gallery.function.message.removeCloseMessageFrameOnBodyClick=function(){jQuery("body.cg_message_opened").off("click");jQuery("body").removeClass("cg_message_opened")};cgJsClass.gallery.function.message.resize=function(isPro){if(isPro){var $cgMessagesContainerPro=cgJsClass.gallery.vars.cgMessagesContainerPro;var windowWidth=jQuery(window).width();if(windowWidth<500){$cgMessagesContainerPro.width(windowWidth-30)}else{$cgMessagesContainerPro.removeAttr("style")}cgJsClass.gallery.function.message.setScrollForContainerIfRequired($cgMessagesContainerPro,false)}else{var $cgMessagesContainer=cgJsClass.gallery.vars.cgMessagesContainer;var left=jQuery(window).width()/2-250/2;$cgMessagesContainer.css("left",left+"px")}};cgJsClass.gallery.function.message.setScrollForContainerIfRequired=function($cgMessagesContainer,isRemoveClassCgHide){var windowHeight=jQuery(window).height();var maxHeight=windowHeight/100*95-50;$cgMessagesContainer.find("#cgMessagesContent").css("max-height",maxHeight+"px");$cgMessagesContainer.addClass("cg_visibility_hidden");if(isRemoveClassCgHide){$cgMessagesContainer.removeClass("cg_hide")}var cgMessagesContainerCurrentMaxHeight=parseInt($cgMessagesContainer.find("#cgMessagesContent").css("max-height"));var $cgMessagesContent=$cgMessagesContainer.find("#cgMessagesContent");$cgMessagesContent.css("max-height","unset");var cgMessagesContainerHeight=$cgMessagesContainer.outerHeight();if(cgMessagesContainerHeight>windowHeight/100*75){$cgMessagesContent.addClass("cg_overflow_y_scroll")}else{$cgMessagesContent.removeClass("cg_overflow_y_scroll")}$cgMessagesContent.css("max-height",cgMessagesContainerCurrentMaxHeight+"px");var $cg_gallery_rating_div_five_star_details_con_entry=$cgMessagesContent.find(".cg_gallery_rating_div_five_star_details_con_entry");if($cg_gallery_rating_div_five_star_details_con_entry.length){$cg_gallery_rating_div_five_star_details_con_entry.css("max-height",cgMessagesContainerCurrentMaxHeight/2+"px")}$cgMessagesContainer.removeClass("cg_visibility_hidden")};;cgJsClass.gallery.function.general.tools={checkIfGalleryLoaded:function(gid){var isLoaded=false;for(var gidLoadedGalleries in cgJsData){if(!cgJsData.hasOwnProperty(gidLoadedGalleries)){break}if(gidLoadedGalleries.toString().indexOf(gid+"-ec")>-1){isLoaded=true;break}}return isLoaded},getLoadedGidBasedOnRealGid:function(gid){for(var gidLoadedGalleries in cgJsData){if(!cgJsData.hasOwnProperty(gidLoadedGalleries)){break}if(gidLoadedGalleries.toString().indexOf(gid+"-ec")>-1){gid=gidLoadedGalleries;break}}return gid},getGidToCompare:function(realGid,type){var gidToReturn=realGid;for(var gidLoadedGalleries in cgJsData){if(!cgJsData.hasOwnProperty(gidLoadedGalleries)){break}if(gidLoadedGalleries.indexOf(realGid+type)===0||gidLoadedGalleries.indexOf(realGid+type+"-ext")===0){gidToReturn=gidLoadedGalleries;break}}return gidToReturn},deepCopyValue:function(value){if(typeof value=="undefined"){return undefined}if(typeof value=="object"&&!value){return null}if(typeof value=="boolean"&&!value){return false}if(typeof value=="boolean"&&value){return true}if(typeof value=="number"&&!value){return 0}if(typeof value=="number"){return parseFloat(parseFloat((" "+value).slice(1)).toFixed(2))}return(" "+value).slice(1)},htmlEntities:function(str){return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},setHeightForInfoBlockInGallery:function(gid,$infoTitleDiv,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad,isPrependInfoTitleDiv,realId){if(cgJsData[gid].options.general.FbLike==1&&cgJsData[gid].options.general.FbLikeGallery==1&&$imageObject){$imageObject.find(".cg_gallery_info").removeClass("cg_justify_content_flex_start")}if($infoTitleDiv&&$imageObject){$infoTitleDiv.removeClass("cg_overflow_y_scroll").removeAttr("style")}if($imageObject&&widthFromImageObjectSetInViewLoad&&!$infoTitleDiv){cgJsClass.gallery.function.general.tools.checkIfSmallWidthImageObject(gid,$imageObject,null,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad)}else{if(heightFromImageObjectSetInViewLoad&&$infoTitleDiv&&cgJsData[gid].vars.modernHover&&$imageObject){if(cgJsData[gid].vars.currentLook=="slider"&&$infoTitleDiv.length){if(cgJsData[gid].vars.rawData[realId].ImgType=="con"){if(!$imageObject.find(".cg_gallery_info_title").length){$imageObject.find(".cg_gallery_info").prepend($infoTitleDiv)}}else{$infoTitleDiv.addClass("cg_hide");$imageObject.find(".cg_gallery_info").removeClass("cg_justify_content_flex_start")}}else{if($infoTitleDiv.length&&true){cgJsClass.gallery.function.general.tools.checkIfSmallWidthImageObject(gid,$imageObject,null,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad);var $cg_gallery_info=$imageObject.find(".cg_gallery_info");$cg_gallery_info.addClass("cg_visibility_hidden");if(cgJsData[gid].options.general.ShowAlways!=1){$cg_gallery_info.removeClass("cg_hide_till_hover")}$infoTitleDiv.removeAttr("style").removeClass("cg_hide cg_hide_till_hover");if(isPrependInfoTitleDiv){$cg_gallery_info.prepend($infoTitleDiv)}var heightCheck=0;var heightCheckWithoutInfoTitleDiv=0;if(cgJsData[gid].vars.isUserGallery){heightCheck=35;heightCheckWithoutInfoTitleDiv=35}if(cgJsData[gid].options.general.AllowRating==2||cgJsData[gid].options.general.AllowComments>=1){var $cg_gallery_info_rating_comments=$imageObject.find(".cg_gallery_info_rating_comments");if($cg_gallery_info_rating_comments.length){heightCheck=heightCheck+$cg_gallery_info_rating_comments.outerHeight()+parseInt($cg_gallery_info_rating_comments.css("marginBottom"));heightCheckWithoutInfoTitleDiv=heightCheck}}if(cgJsData[gid].options.general.AllowRatingDynamic){var $cg_gallery_rating_div=$imageObject.find(".cg_gallery_rating_div");if($cg_gallery_rating_div.length){heightCheck=heightCheck+$cg_gallery_rating_div.outerHeight()+parseInt($cg_gallery_rating_div.css("marginBottom"));heightCheckWithoutInfoTitleDiv=heightCheck}}if(cgJsData[gid].options.general.FbLike==1&&cgJsData[gid].options.general.FbLikeGallery==1){var $cg_gallery_facebook_div=$imageObject.find(".cg_gallery_facebook_div");if($cg_gallery_facebook_div.length){heightCheck=heightCheck+$cg_gallery_facebook_div.outerHeight()+5;heightCheckWithoutInfoTitleDiv=heightCheck}}heightCheck=heightCheck+$infoTitleDiv.outerHeight()+parseInt($infoTitleDiv.css("marginBottom"));var heightFromImageObjectSetInViewLoad=$imageObject.height();if(heightCheck>heightFromImageObjectSetInViewLoad){if(cgJsData[gid].options.general.AllowRatingDynamic&&(cgJsData[gid].options.general.FbLike==1&&cgJsData[gid].options.general.FbLikeGallery==1)){$infoTitleDiv.height(heightFromImageObjectSetInViewLoad-heightCheckWithoutInfoTitleDiv-15)}else if(cgJsData[gid].options.general.AllowRatingDynamic){$infoTitleDiv.height(heightFromImageObjectSetInViewLoad-heightCheckWithoutInfoTitleDiv-10)}else{if(cgJsData[gid].options.general.FbLike==1&&cgJsData[gid].options.general.FbLikeGallery==1){$infoTitleDiv.height(heightFromImageObjectSetInViewLoad-heightCheckWithoutInfoTitleDiv-15)}else{$infoTitleDiv.height(heightFromImageObjectSetInViewLoad-heightCheckWithoutInfoTitleDiv-10)}}$infoTitleDiv.css("max-height",heightFromImageObjectSetInViewLoad-heightCheckWithoutInfoTitleDiv-15+"px");$infoTitleDiv.addClass("cg_overflow_y_scroll");if(cgJsData[gid].options.general.FbLike==1&&cgJsData[gid].options.general.FbLikeGallery==1){$cg_gallery_info.addClass("cg_justify_content_flex_start")}}else{$infoTitleDiv.css("max-height",heightFromImageObjectSetInViewLoad-heightCheckWithoutInfoTitleDiv-15+"px")}if($imageObject){if($imageObject.attr("data-cg-id")=="12593"){}}if(cgJsData[gid].options.general.ShowAlways!=1){$cg_gallery_info.addClass("cg_hide_till_hover")}$cg_gallery_info.removeClass("cg_visibility_hidden")}}}}},checkIfSmallWidthImageObject:function(gid,$imageObject,$cg_gallery_rating_div,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad,isFromHover){return;if($imageObject){if(cgJsData[gid].vars.modernHover){if(cgJsData[gid].vars.currentLook=="row"){if(cgJsData[gid].options.general.AllowRatingDynamic){if(cgJsData[gid].vars.mainCGdiv.width()<=400&&cgJsData[gid].options.general.PicsInRow==2){$imageObject.addClass("cg_small_width_xs").removeClass("cg_small_width_xss")}else if(cgJsData[gid].vars.mainCGdiv.width()<=500&&cgJsData[gid].options.general.PicsInRow>2){$imageObject.addClass("cg_small_width_xss").removeClass("cg_small_width_xs")}else{$imageObject.removeClass("cg_small_width_xs cg_small_width_xss")}}}}}},correctNewAddedOptionsIfRequired:function(options){if(options.visual["ImageViewFullWindow"]===undefined||options.visual["ImageViewFullWindow"]===""){options.visual["ImageViewFullWindow"]=1}if(options.visual["ImageViewFullScreen"]===undefined||options.visual["ImageViewFullScreen"]===""){options.visual["ImageViewFullScreen"]=1}if(options.visual["SliderThumbNav"]===undefined||options.visual["SliderThumbNav"]===""){options.visual["SliderThumbNav"]=1}},resetGallery:function(gid){cgJsData[gid].vars.mainCGdiv.find("#cgSearchInput"+gid).val("");cgJsData[gid].vars.searchInput="";if(cgJsData[gid].vars.showCategories){for(var categoryId in cgJsData[gid].vars.categories){if(!cgJsData[gid].vars.categories.hasOwnProperty(categoryId)){break}cgJsData[gid].vars.categories[categoryId]["Checked"]=true}if(cgJsData[gid].options.pro.CatWidget==1){if(cgJsData[gid].options.pro.ShowCatsUnchecked==1){cgJsData[gid].vars.mainCGdiv.find("#cgCatSelectArea"+gid+" .cg_select_cat_label").removeClass("cg_cat_checkbox_checked").addClass("cg_cat_checkbox_unchecked")}else{cgJsData[gid].vars.mainCGdiv.find("#cgCatSelectArea"+gid+" .cg_select_cat_label").removeClass("cg_cat_checkbox_unchecked").addClass("cg_cat_checkbox_checked")}}}if(cgJsData[gid].vars.currentLook=="blog"){if(cgJsData[gid].vars.$cg_further_images_container_top){cgJsData[gid].vars.$cg_further_images_container_top.addClass("cg_hide")}if(cgJsData[gid].vars.$cg_further_images_container_bottom){cgJsData[gid].vars.$cg_further_images_container_bottom.addClass("cg_hide")}cgJsClass.gallery.function.general.tools.hideSkeletonLoader(gid);cgJsClass.gallery.views.scrollUp(gid);cgJsClass.gallery.blogLogic.reset(gid)}},setWaitingForValues:function(gid,$element,action,isWaitForInfoData){if(!cgJsClass.gallery.vars.isSortingDataAvailable&&!cgJsClass.gallery.views.clickFurtherImagesStep.waitingInterval||isWaitForInfoData&&!cgJsClass.gallery.vars.isInfoDataAvailable&&!cgJsClass.gallery.views.clickFurtherImagesStep.waitingInterval){var $mainCGdiv=jQuery("#mainCGdiv"+gid);var $mainCGslider=jQuery("#mainCGslider"+gid);$mainCGdiv.find("#mainCGallery"+gid).find(".cg_show").remove();cgJsClass.gallery.function.general.tools.checkSkeletonLoaderToShow(gid);cgJsClass.gallery.views.clickFurtherImagesStep.waitingInterval=setInterval(function(){if(action=="click"){$element.click()}if(action=="change"){$element.trigger("change")}},500);return true}if(cgJsClass.gallery.vars.isSortingDataAvailable&&cgJsClass.gallery.views.clickFurtherImagesStep.waitingInterval||isWaitForInfoData&&cgJsClass.gallery.vars.isInfoDataAvailable&&cgJsClass.gallery.views.clickFurtherImagesStep.waitingInterval){clearInterval(cgJsClass.gallery.views.clickFurtherImagesStep.waitingInterval);cgJsClass.gallery.views.clickFurtherImagesStep.waitingInterval=null;var $mainCGdiv=jQuery("#mainCGdiv"+gid);var $mainCGslider=jQuery("#mainCGslider"+gid);cgJsClass.gallery.function.general.tools.checkSkeletonLoaderToShow(gid);return false}else if(!cgJsClass.gallery.vars.isSortingDataAvailable||isWaitForInfoData&&!cgJsClass.gallery.vars.isInfoDataAvailable){return true}return false},modifyFullImageData:function(gid,realId,data){data["id"]=realId;for(var index in cgJsData[gid].fullImageData){if(!cgJsData[gid].fullImageData.hasOwnProperty(index)){break}var firstKey=Object.keys(cgJsData[gid].fullImageData[index])[0];var realIdToCompare=cgJsData[gid].fullImageData[index][firstKey]["id"];if(realId==realIdToCompare){cgJsData[gid].fullImageData[index][firstKey]=data;break}}for(var index in cgJsData[gid].fullImageDataFiltered){if(!cgJsData[gid].fullImageDataFiltered.hasOwnProperty(index)){break}var firstKey=Object.keys(cgJsData[gid].fullImageDataFiltered[index])[0];var realIdToCompare=cgJsData[gid].fullImageDataFiltered[index][firstKey]["id"];if(realId==realIdToCompare){cgJsData[gid].fullImageDataFiltered[index][firstKey]=data;break}}},isFullSizeSlideOutStartNormally:function(gid){if(cgJsData[gid].options.general.FullSizeSlideOutStart==1&&(cgJsData[gid].vars.currentLook=="thumb"||cgJsData[gid].vars.currentLook=="height"||cgJsData[gid].vars.currentLook=="row")){return true}else{return false}},checkSsl:function(imgUrl){if(typeof imgUrl=="undefined"){imgUrl=""}if(cgJsClass.gallery.vars.isSsl){if(imgUrl.indexOf("http://")===0){imgUrl=imgUrl.replace("http://","https://");return imgUrl}else{return imgUrl}}else{if(imgUrl.indexOf("https://")===0){imgUrl=imgUrl.replace("https://","http://");return imgUrl}else{return imgUrl}}},checkIfIsEdge:function(){var ua=window.navigator.userAgent;if(ua.indexOf("Edge/")>0||ua.indexOf("Edg/")){cgJsClass.gallery.vars.isEdge=true}},checkIfInternetExplorer:function(){cgJsClass.gallery.vars.isInternetExplorer=false;var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(msie>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){cgJsClass.gallery.vars.isInternetExplorer=true}},checkIfIsChrome:function(){var isChromium=window.chrome;var winNav=window.navigator;var vendorName=winNav.vendor;var isOpera=typeof window.opr!=="undefined";var isIEedge=winNav.userAgent.indexOf("Edge")>-1;var isIOSChrome=winNav.userAgent.match("CriOS");if(isIOSChrome){}else if(isChromium!==null&&typeof isChromium!=="undefined"&&vendorName==="Google Inc."&&isOpera===false&&isIEedge===false){cgJsClass.gallery.vars.isChrome=true}else{cgJsClass.gallery.vars.isChrome=false}},checkIfIsSafari:function(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("safari")!=-1){if(ua.indexOf("chrome")>-1){cgJsClass.gallery.vars.isSafari=false}else{cgJsClass.gallery.vars.isSafari=true}}},checkIfIsFF:function(){cgJsClass.gallery.vars.isFF=false;if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){cgJsClass.gallery.vars.isFF=true}},checkError:function($cgCenterDiv,gid,realId){cgJsData[gid].vars.jsonGetImageCheck.push(jQuery.getJSON(cgJsData[gid].vars.uploadFolderUrl+"/contest-gallery/gallery-id-"+cgJsData[gid].vars.gidReal+"/json/image-data/image-data-"+realId+".json",{_:(new Date).getTime()}).done(function(data){}).done(function(data){data.id=realId;data.imageObject=cgJsData[gid].imageObject[realId]}).fail(function(error){if(error.status=="404"){cgJsClass.gallery.function.general.tools.removeImageWhenError(gid,realId)}}))},checkErrorAbort:function(gid){for(var key in cgJsData[gid].vars.jsonGetImageCheck){if(!cgJsData[gid].vars.jsonGetImageCheck.hasOwnProperty(key)){break}cgJsData[gid].vars.jsonGetImageCheck[key].abort()}cgJsData[gid].vars.jsonGetImageCheck=[]},removeImageWhenError:function(gid,realId){cgJsClass.gallery.getJson.removeImageFromImageData(gid,realId);cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].ImageDeleted)},checkSetUserGalleryOptions:function(gid){if(cgJsData[gid].vars.isUserGallery){}},checkIfSettingsRequiredInFullWindow:function(gid){if((cgJsData[gid].options.pro.CatWidget==1||cgJsData[gid].options.pro.Search==1||cgJsData[gid].options.general.RandomSortButton==1||cgJsData[gid].options.general.AllowSort==1)==false&&cgJsData[gid].options.general.PicsPerSite<Object.keys(cgJsData[gid].vars.rawData).length){cgJsData[gid].vars.mainCGdiv.find("#cgCenterImageFullWindowConfiguration"+gid).remove();cgJsData[gid].vars.mainCGdiv.find("#cgCenterDivCenterImageFullWindowConfiguration"+gid).remove()}},bgColorOptimization:function(bgColor){if(bgColor.indexOf(",")){var parts=bgColor.split(",");if(parts.length>3){var opacityValue=parts[parts.length-1].split(")")[0].trim();if(opacityValue.indexOf("0")!=-1){var newBgColor="";parts.forEach(function(value,index){if(index==parts.length-1){newBgColor+="1)"}else{newBgColor+=value+","}});bgColor=newBgColor}}}return bgColor},setBackgroundColor:function(gid){if(!cgJsClass.gallery.vars.backgroundColor){var $mainCGdivContainer=jQuery("#mainCGdivContainer"+gid);cgJsClass.gallery.function.general.tools.getBackgroundColor($mainCGdivContainer)}if(cgJsClass.gallery.vars.backgroundColor){if(cgJsClass.gallery.vars.backgroundColor.indexOf(",")){cgJsClass.gallery.vars.backgroundColor=this.bgColorOptimization(cgJsClass.gallery.vars.backgroundColor)}}if(cgJsClass.gallery.vars.backgroundColorUploadForm){if(cgJsClass.gallery.vars.backgroundColorUploadForm.indexOf(",")){cgJsClass.gallery.vars.backgroundColorUploadForm=this.bgColorOptimization(cgJsClass.gallery.vars.backgroundColorUploadForm)}}},getBackgroundColor:function($mainCGdivContainer,$parent){if(!$parent){$parent=$mainCGdivContainer.parent()}else{$parent=$parent.parent()}var backgroundColor=$parent.css("backgroundColor");var tagName=$parent.prop("tagName").toLowerCase();if((backgroundColor=="rgba(0, 0, 0, 0)"||backgroundColor=="transparent")&&tagName!="html"){this.getBackgroundColor(undefined,$parent)}else{if($parent.is("html")){backgroundColor="white"}cgJsClass.gallery.vars.backgroundColor=backgroundColor;cgJsClass.gallery.vars.backgroundColorUploadForm=backgroundColor}},testTopControlsStyle:function($){if(cgJsClass.gallery.vars.eventTestTopControlsStyle){return}else{cgJsClass.gallery.vars.eventTestTopControlsStyle=true}$(document).on("click",".cg_gallery_thumbs_control .cg_switch_colors",function(e){var $element=$(this);var gid=$element.attr("data-cg-gid");var $mainCGdivHelperParent=$("#mainCGdivHelperParent"+gid);var isWhiteNow=0;var isBlackNow=0;if($mainCGdivHelperParent.hasClass("cg_fe_controls_style_white")){$element.attr("data-cg-tooltip",cgJsClass.gallery.language[gid].BrightStyle);isBlackNow=1;cgJsData[gid].vars.mainCGdiv.removeClass("cg_fe_controls_style_white");cgJsData[gid].vars.mainCGdiv.addClass("cg_fe_controls_style_black");$(".mainCGdivUploadFormAjax#mainCGdivUploadForm"+gid).find(".cg_fe_controls_style_white").addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white");$mainCGdivHelperParent.addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white");$mainCGdivHelperParent.find(".cg_fe_controls_style_white").addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white");$("#cgMessagesContainer").addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white");$("#cgMessagesContainerPro").addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white");cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white")}else{isWhiteNow=1;$element.attr("data-cg-tooltip",cgJsClass.gallery.language[gid].DarkStyle);cgJsData[gid].vars.mainCGdiv.addClass("cg_fe_controls_style_white");cgJsData[gid].vars.mainCGdiv.removeClass("cg_fe_controls_style_black");$(".mainCGdivUploadFormAjax#mainCGdivUploadForm"+gid).find(".cg_fe_controls_style_black").addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black");$mainCGdivHelperParent.addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black");$mainCGdivHelperParent.find(".cg_fe_controls_style_black").addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black");$("#cgMessagesContainer").addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black");$("#cgMessagesContainerPro").addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black");cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black")}cgJsData[gid].options.visual["SwitchStyleGalleryButtonOnlyTopControls"]=0;if(cgJsData[gid].options.visual["SwitchStyleGalleryButtonOnlyTopControls"]!=1){if(isWhiteNow){cgJsData[gid].vars.centerWhite=1;cgJsData[gid].vars.mainCGallery.addClass("cg_center_white");cgJsData[gid].vars.mainCGallery.find(".cgCenterDiv").addClass("cg_center_white").removeClass("cg_center_black");cgJsData[gid].vars.mainCGallery.find(".cg_switch_colors").attr("data-cg-tooltip",cgJsClass.gallery.language[gid].DarkStyle)}if(isBlackNow){cgJsData[gid].vars.centerWhite=0;cgJsData[gid].vars.mainCGallery.removeClass("cg_center_white");cgJsData[gid].vars.mainCGallery.find(".cgCenterDiv").removeClass("cg_center_white").addClass("cg_center_black");cgJsData[gid].vars.mainCGallery.find(".cg_switch_colors").attr("data-cg-tooltip",cgJsClass.gallery.language[gid].BrightStyle)}}});$(document).on("click",".mainCGdivHelperParent .cg_header .cg_sort_div  .cg_switch_colors",function(e){var $element=$(this);var gid=$element.attr("data-cg-gid");var isWhiteNow=0;var isBlackNow=0;if(cgJsData[gid].vars.centerWhite==1){isBlackNow=1;cgJsData[gid].vars.centerWhite=0;cgJsData[gid].vars.mainCGallery.removeClass("cg_center_white");cgJsData[gid].vars.mainCGallery.find(".cgCenterDiv").removeClass("cg_center_white").addClass("cg_center_black");cgJsData[gid].vars.mainCGallery.find(".cg_switch_colors").attr("data-cg-tooltip",cgJsClass.gallery.language[gid].BrightStyle)}else{isWhiteNow=1;cgJsData[gid].vars.centerWhite=1;cgJsData[gid].vars.mainCGallery.addClass("cg_center_white");cgJsData[gid].vars.mainCGallery.find(".cgCenterDiv").addClass("cg_center_white").removeClass("cg_center_black");cgJsData[gid].vars.mainCGallery.find(".cg_switch_colors").attr("data-cg-tooltip",cgJsClass.gallery.language[gid].DarkStyle)}if(cgJsData[gid].options.visual["SwitchStyleImageViewButtonOnlyImageView"]!=1){var $mainCGdivHelperParent=$("#mainCGdivHelperParent"+gid);if(isBlackNow){cgJsData[gid].vars.mainCGdiv.removeClass("cg_fe_controls_style_white");$(".mainCGdivUploadFormAjax#mainCGdivUploadForm"+gid).find(".cg_fe_controls_style_white").addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white");$mainCGdivHelperParent.addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white");$mainCGdivHelperParent.find(".cg_fe_controls_style_white").addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white");$("#cgMessagesContainer").addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white");$("#cgMessagesContainerPro").addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white");cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white");cgJsData[gid].vars.mainCGdiv.find(".cg_gallery_thumbs_control .cg_switch_colors").attr("data-cg-tooltip",cgJsClass.gallery.language[gid].BrightStyle)}if(isWhiteNow){cgJsData[gid].vars.mainCGdiv.addClass("cg_fe_controls_style_white");$(".mainCGdivUploadFormAjax#mainCGdivUploadForm"+gid).find(".cg_fe_controls_style_black").addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black");$mainCGdivHelperParent.addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black");$mainCGdivHelperParent.find(".cg_fe_controls_style_black").addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black");$("#cgMessagesContainer").addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black");$("#cgMessagesContainerPro").addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black");cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black");cgJsData[gid].vars.mainCGdiv.find(".cg_gallery_thumbs_control .cg_switch_colors").attr("data-cg-tooltip",cgJsClass.gallery.language[gid].DarkStyle)}}});cgJsClass.gallery.function.general.ajax.changesRecognized($)},getScrollbarWidthDependsOnBrowser:function(){if(cgJsClass.gallery.vars.isMobile){return 0}if(cgJsClass.gallery.vars.isChrome){return 13}else if(cgJsClass.gallery.vars.isSafari){return 16}else if(cgJsClass.gallery.vars.isFF){return 17}else if(cgJsClass.gallery.vars.isEdge){return 16}else{return 16}},getValueForPreselectSort:function(valueForPreselectSort){if(valueForPreselectSort=="custom"){return"custom"}if(valueForPreselectSort=="date-desc"){return"date_descend"}if(valueForPreselectSort=="date-asc"){return"date_ascend"}if(valueForPreselectSort=="comments-desc"){return"comments_descend"}if(valueForPreselectSort=="comments-asc"){return"comments_ascend"}if(valueForPreselectSort=="rating-desc"){return"rating_descend"}if(valueForPreselectSort=="rating-asc"){return"rating_ascend"}if(valueForPreselectSort=="rating-desc-sum"){return"rating_sum_descend"}if(valueForPreselectSort=="rating-asc-sum"){return"rating_sum_ascend"}return"custom"},checkHasNoBottomSpace:function(gid,data){var hasNoFieldContent=true;for(var property in data){if(!data.hasOwnProperty(property)){break}if(data[property]["field-content"]){hasNoFieldContent=false;break}}if(hasNoFieldContent&&cgJsData[gid].options.general.FbLike!=1&&cgJsData[gid].options.general.AllowComments!=1){return true}else{return false}},getOrderByGidAndRealId:function(gid,realId){var order=0;for(var index in cgJsData[gid].image){if(!cgJsData[gid].image.hasOwnProperty(index)){break}var firstKey=Object.keys(cgJsData[gid].image[index])[0];var id=cgJsData[gid].image[index][firstKey]["id"];if(id==realId){order=index;break}}return order},calculateSize:function(imagePath,fallbackSize,data,type,realId,gid){try{var splitImagePath=imagePath.split("x");var splitWidthPart=splitImagePath[splitImagePath.length-2].split("-");var width=splitWidthPart[splitWidthPart.length-1];if(isNaN(width)){width=fallbackSize}else{width=parseInt(width)}}catch(e){width=fallbackSize;try{jQuery("<img/>",{load:function(){if(cgJsData[gid].vars.rawData[realId]){cgJsData[gid].vars.rawData[realId][type]=this.width}},src:imagePath})}catch(e){console.log(e)}}return width},checkAndSetCustomIconsStyle:function($,data,gid){if(data.icons){var $style=$("<style>").prop("type","text/css");var hasStyleToAppend=false;var cgCenterDivIconBackgroundColor="";if(!cgJsData[gid].vars.centerWhite){}if(data.icons.iconVoteUndoneGalleryViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+' .cg_show .cg_gallery_rating_div_one_star_off{background: url("'+data.icons.iconVoteUndoneGalleryViewBase64+'") no-repeat center;background-size:contain;}')}if(data.icons.iconVoteDoneGalleryViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+' .cg_show .cg_gallery_rating_div_one_star_on{background: url("'+data.icons.iconVoteDoneGalleryViewBase64+'") no-repeat center;background-size:contain;}')}if(data.icons.iconVoteHalfStarGalleryViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+' .cg_show .cg_gallery_rating_div_one_star_half_off{background: url("'+data.icons.iconVoteHalfStarGalleryViewBase64+'") no-repeat center;background-size:contain;}')}if(data.icons.iconVoteUndoneImageViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+' .cgCenterDiv .cg_gallery_rating_div_one_star_off{background: url("'+data.icons.iconVoteUndoneImageViewBase64+'") no-repeat center;background-size:24px 24px;'+cgCenterDivIconBackgroundColor+"}");$style.append("#cgMessagesContainerPro[data-cg-gid='"+gid+"'] .cg_gallery_rating_div .cg_gallery_rating_div_total_count .cg_gallery_rating_div_one_star_off{background: url(\""+data.icons.iconVoteUndoneImageViewBase64+'") no-repeat center;background-size:24px 24px;}')}if(data.icons.iconVoteDoneImageViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+' .cgCenterDiv .cg_gallery_rating_div_one_star_on{background: url("'+data.icons.iconVoteDoneImageViewBase64+'") no-repeat center;background-size:contain;'+cgCenterDivIconBackgroundColor+"}");$style.append("#cgMessagesContainerPro[data-cg-gid='"+gid+"'] .cg_messages_container_pro_select_container .cg_messages_container_pro_select_star{background: url(\""+data.icons.iconVoteDoneImageViewBase64+'") no-repeat center;background-size: 24px 24px;}');$style.append("#cgMessagesContainerPro[data-cg-gid='"+gid+"'] .cg_gallery_rating_div .cg_gallery_rating_div_total_count .cg_gallery_rating_div_one_star_on{background: url(\""+data.icons.iconVoteDoneImageViewBase64+'") no-repeat center;background-size:24px 24px;}')}if(data.icons.iconVoteHalfStarImageViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+' .cgCenterDiv .cg_gallery_rating_div_one_star_half_off{background: url("'+data.icons.iconVoteHalfStarImageViewBase64+'") no-repeat center;background-size:contain;'+cgCenterDivIconBackgroundColor+"}")}if(data.icons.iconVoteFiveStarsPercentageOverviewDoneImageViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+" .cg_gallery_rating_div .cg_gallery_rating_div_five_star_details .cg_five_star_details_row .cg_five_star_details_row_star,#cgMessagesContainerPro[data-cg-gid='"+gid+"'] .cg_gallery_rating_div .cg_gallery_rating_div_five_star_details .cg_five_star_details_row .cg_five_star_details_row_star{background: url(\""+data.icons.iconVoteFiveStarsPercentageOverviewDoneImageViewBase64+'") no-repeat center;background-size:contain;}')}if(data.icons.iconVoteRemoveImageViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+' .cgCenterDiv .cg_gallery_rating_div .cg_rate_minus{background: url("'+data.icons.iconVoteRemoveImageViewBase64+'") no-repeat center;background-size:contain;'+cgCenterDivIconBackgroundColor+"}")}if(data.icons.iconVoteRemoveGalleryOnlyViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+'.cg_only_gallery_view .cg_gallery_rating_div  .cg_rate_minus{background: url("'+data.icons.iconVoteRemoveGalleryOnlyViewBase64+'") no-repeat center;background-size:contain;}')}if(data.icons.iconCommentUndoneGalleryViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+' .cg_show .cg_gallery_comments_div .cg_gallery_comments_div_icon_off{background: url("'+data.icons.iconCommentUndoneGalleryViewBase64+'") no-repeat center;background-size:contain;}')}if(data.icons.iconCommentDoneGalleryViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+' .cg_show .cg_gallery_comments_div .cg_gallery_comments_div_icon_on{background: url("'+data.icons.iconCommentDoneGalleryViewBase64+'") no-repeat center;background-size:contain;}')}if(data.icons.iconCommentUndoneImageViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+' .cgCenterDiv .cg_gallery_comments_div .cg_gallery_comments_div_icon_off{background: url("'+data.icons.iconCommentUndoneImageViewBase64+'") no-repeat center;background-size:contain;'+cgCenterDivIconBackgroundColor+"}")}if(data.icons.iconCommentDoneImageViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+' .cgCenterDiv .cg_gallery_comments_div .cg_gallery_comments_div_icon_on{background: url("'+data.icons.iconCommentDoneImageViewBase64+'") no-repeat center;background-size:contain;'+cgCenterDivIconBackgroundColor+"}")}if(data.icons.iconCommentAddImageViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+' .cgCenterDiv .cg-center-image-comments-div-add-comment{background: url("'+data.icons.iconCommentAddImageViewBase64+'") no-repeat center;background-size:contain;'+cgCenterDivIconBackgroundColor+"}")}if(data.icons.iconInfoImageViewBase64){hasStyleToAppend=true;$style.append("#mainCGallery"+gid+' .cgCenterDiv .cg-center-info-div .cg-center-image-info-div-title .cg-center-image-info-icon{background-image: url("'+data.icons.iconInfoImageViewBase64+'");background-repeat: no-repeat;background-position: center;background-size:contain;'+cgCenterDivIconBackgroundColor+"}")}if(hasStyleToAppend){$style.appendTo("head")}}},backdropShow:function($mainCGdivUploadForm,isFullWindowOrFullScreenAndForUploadFormBackdrop,colorStyleClass){var $cgModalBackdrop=jQuery("#cgModalBackdrop");if($cgModalBackdrop.hasClass("cg_modal_backdrop_fade_in")){}else{var $cgModalBackdrop=jQuery('<div id="cgModalBackdrop" class="cgModalBackdrop"></div>');if(!colorStyleClass){colorStyleClass="cg_fe_controls_style_black"}$cgModalBackdrop.removeClass("cg_fe_controls_style_black cg_fe_controls_style_white");$cgModalBackdrop.addClass(colorStyleClass);cgJsClass.gallery.vars.$cgModalBackdrop=$cgModalBackdrop;cgJsClass.gallery.function.general.tools.backdropHide();if(cgJsClass.gallery.vars.fullscreen){cgJsData[cgJsClass.gallery.vars.fullscreen].vars.mainCGdiv.prepend($cgModalBackdrop)}else if(cgJsClass.gallery.vars.fullwindow){cgJsData[cgJsClass.gallery.vars.fullwindow].vars.mainCGdiv.prepend($cgModalBackdrop)}else{cgJsClass.gallery.vars.dom.body.prepend($cgModalBackdrop)}setTimeout(function(){cgJsClass.gallery.vars.$cgModalBackdrop.addClass("cg_modal_backdrop_fade_in")},1)}},backdropHide:function(){jQuery(".cgModalBackdrop").remove()},checkIfNoRating:function(gid){if(cgJsData[gid].options.general.RatingOutGallery!="1"||cgJsData[gid].options.general.AllowRating==0||cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.RatingVisibleForGalleryNoVoting){return true}else{return false}},replaceStateOnCloseOrMinimize:function(locationHash){if(!locationHash){locationHash=""}history.replaceState("",document.title,location.pathname+location.search+locationHash)},getHeightTillElement:function($object,classNameToBreak,idNameToBreak,classNamesToAvoidArray){var height=0;$object.find("div:visible").each(function(){var $element=jQuery(this);var isAvoidClass=false;if(classNamesToAvoidArray){classNamesToAvoidArray.forEach(function(className){if($element.hasClass(className)){isAvoidClass=true}})}if(isAvoidClass){return}if($element.hasClass(classNameToBreak)){height=height-$element.outerHeight();return false}height=height+$element.outerHeight()});return height},tooltip:null,initTooltip:function($){var div=$('<div id="cgTooltip" class="cg_hide"></div>');cgJsClass.gallery.vars.dom.body.append(div);cgJsClass.gallery.function.general.tools.tooltip=div;$(document).on("mouseenter",".mainCGdivHelperParent [data-cg-tooltip],.mainCGdivUploadForm [data-cg-tooltip],#cgEcommerceCheckoutBodyContainer [data-cg-tooltip]",function(e){if(cgJsClass.gallery.vars.isMobile){return}cgJsClass.gallery.function.general.tools.tooltipMouseenterFunction($(this),e)});$(document).on("mouseleave",".mainCGdivHelperParent [data-cg-tooltip],.mainCGdivUploadForm [data-cg-tooltip],#cgEcommerceCheckoutBodyContainer [data-cg-tooltip]",function(e){if(cgJsClass.gallery.vars.isMobile){return}cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_hide")});$(document).on("click",".mainCGdivHelperParent [data-cg-tooltip],.mainCGdivUploadForm [data-cg-tooltip],#cgEcommerceCheckoutBodyContainer [data-cg-tooltip]",function(e){if(cgJsClass.gallery.vars.isMobile){return}cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_hide")})},tooltipAddedToFullscreen:false,tooltipMouseenterFunction:function($element,e){if(cgJsClass.gallery.function.general.tools.tooltip.hasClass("cg_do_not_show_tooltip")||cgJsClass.gallery.vars.isMobile){return}var $eTarget=jQuery(e.target);var $cg_show=$eTarget.closest(".cg_show");var $mainCGslider=$eTarget.closest(".mainCGslider");if($cg_show.length&&$mainCGslider.length){return}var $cgCenterDiv=$element.closest(".cgCenterDiv");var $mainCGdivUploadForm=undefined;var $cgEcommerceCheckoutBodyContainer=undefined;if($cgCenterDiv.length){var gid=$cgCenterDiv.attr("data-cg-gid")}else{var $mainCGdivHelperParent=$element.closest(".mainCGdivHelperParent");if($mainCGdivHelperParent.length){var gid=$mainCGdivHelperParent.attr("data-cg-gid")}else{if($element.closest(".mainCGdivUploadForm").length){$mainCGdivUploadForm=$element.closest(".mainCGdivUploadForm");var gid=$mainCGdivUploadForm.attr("data-cg-gid")}else{$cgEcommerceCheckoutBodyContainer=jQuery("#cgEcommerceCheckoutBodyContainer");var gid=$cgEcommerceCheckoutBodyContainer.attr("data-cg-gid")}}}if(cgJsClass.gallery.vars.fullscreen&&e){if($eTarget.hasClass("mainCGdivFullWindowConfigurationArea")||$eTarget.closest(".mainCGdivFullWindowConfigurationArea").length){return}if(!$mainCGdivHelperParent){var $mainCGdivHelperParent=$element.closest(".mainCGdivHelperParent")}if($cgCenterDiv.length){$cgCenterDiv.append(cgJsClass.gallery.function.general.tools.tooltip)}else{$mainCGdivHelperParent.append(cgJsClass.gallery.function.general.tools.tooltip)}this.tooltipAddedToFullscreen=true}else{if(this.tooltipAddedToFullscreen){cgJsClass.gallery.vars.dom.body.append(cgJsClass.gallery.function.general.tools.tooltip);this.tooltipAddedToFullscreen=false}}if($eTarget.hasClass("cg_gallery_rating_div_five_stars")||$eTarget.closest(".cg_gallery_rating_div_five_stars").length){if(!$eTarget.hasClass("cg_rate_minus")&&!$eTarget.hasClass("cg_voted_confirm")){return}}if($element.hasClass("cg_gallery_rating_div_star")&&cgJsData[gid].vars.isUserGallery){return}if($element.hasClass("cg_gallery_rating_div_star")&&!$cgCenterDiv.length){if(cgJsData[$element.attr("data-cg-gid")].options.general.RatingOutGallery!="1"){return}}if(cgJsData[gid].vars.isOnlyGalleryWinner){if($eTarget.hasClass("cg_gallery_rating_div")||$eTarget.closest(".cg_gallery_rating_div").length){return}}if($eTarget.hasClass("cg_rate_minus_five_star")){var $cg_gallery_rating_div=$eTarget.closest(".cg_gallery_rating_div");$cg_gallery_rating_div.find(".cg_gallery_rating_div_five_star_details").addClass("cg_hide");$cg_gallery_rating_div.find(".cg_gallery_rating_div").removeClass("cg_opacity_1")}if($element.hasClass("cg_gallery_rating_div_star")){if(cgJsData[gid].vars.allVotesUsed==1){$element.attr("data-cg-tooltip",cgJsClass.gallery.language[gid].AllVotesUsed)}else{$element.attr("data-cg-tooltip",cgJsClass.gallery.language[gid].VoteNow)}}if(cgJsData[gid].options.visual.BorderRadius){cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_border_radius_controls_and_containers")}else{cgJsClass.gallery.function.general.tools.tooltip.removeClass("cg_border_radius_controls_and_containers")}if($cgCenterDiv.length){if(cgJsData[gid].vars.mainCGallery.hasClass("cg_center_white")){cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_fe_controls_style_white")}else{cgJsClass.gallery.function.general.tools.tooltip.removeClass("cg_fe_controls_style_white")}}else if($mainCGdivHelperParent.length){if($mainCGdivHelperParent.hasClass("cg_fe_controls_style_white")){cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_fe_controls_style_white")}else{cgJsClass.gallery.function.general.tools.tooltip.removeClass("cg_fe_controls_style_white")}}else if($mainCGdivUploadForm&&$mainCGdivUploadForm.length){if($mainCGdivUploadForm.hasClass("cg_fe_controls_style_white")){cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_fe_controls_style_white")}else{cgJsClass.gallery.function.general.tools.tooltip.removeClass("cg_fe_controls_style_white")}}else{if($cgEcommerceCheckoutBodyContainer){if($cgEcommerceCheckoutBodyContainer.hasClass("cg_fe_controls_style_white")){cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_fe_controls_style_white")}else{cgJsClass.gallery.function.general.tools.tooltip.removeClass("cg_fe_controls_style_white")}}else{cgJsClass.gallery.function.general.tools.tooltip.removeClass("cg_fe_controls_style_white")}}var isShowFiveStarOnTop=false;if(cgJsData[gid].vars.currentLook=="blog"&&cgJsClass.gallery.vars.fullwindow&&e){var $eTarget=jQuery(e.target);if($element.hasClass("cg_further_images_container_bottom")||$eTarget.closest(".cg_further_images_container_bottom").length){isShowFiveStarOnTop=true}}if(cgJsClass.gallery.vars.fullscreen){var x=$element.offset().left;var y=$element.offset().top;if($cgCenterDiv.length){y=y-$cgCenterDiv.offset().top}else{y=y-$mainCGdivHelperParent.offset().top}}else{var x=$element.offset().left;var y=$element.offset().top}var top;var elementHeight=$element.outerHeight();if(isShowFiveStarOnTop){top=y-elementHeight-5;if(!$cgCenterDiv.length){if($element.closest(".cg_small_width_xs").length||$element.closest(".cg_small_width_xss").length){top=top-10}}}else{top=y+elementHeight+13}var elementWidth=$element.outerWidth();cgJsClass.gallery.function.general.tools.tooltip.text($element.attr("data-cg-tooltip")).addClass("cg_visibility_hidden").removeClass("cg_hide");var widthTootip=cgJsClass.gallery.function.general.tools.tooltip.outerWidth();if(elementWidth>widthTootip){var left=x+(elementWidth-widthTootip)/2}else{var left=x-(widthTootip-elementWidth)/2}if(left<10){left=5}else{var windowWidth=jQuery(window).width();if(elementWidth>widthTootip){}else{if(left+elementWidth>windowWidth){left=windowWidth-10+elementWidth}}}cgJsClass.gallery.function.general.tools.tooltip.css({top:top,left:left});if(!cgJsClass.gallery.vars.fullscreen){var newTop=cgJsClass.gallery.function.general.tools.tooltip.offset().top;if(newTop>top&&!cgJsClass.gallery.vars.fullscreen){top=top-(newTop-top)+3;cgJsClass.gallery.function.general.tools.tooltip.css("top",top+"px")}}cgJsClass.gallery.function.general.tools.tooltip.removeClass("cg_visibility_hidden")},encodeHTML(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},appendImageOnLoadGallery($cgShow,$cgAppend,imgSrc,realId,gid,isFromClickNextPrevFile){var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);var isEmbed=cgJsClass.gallery.function.general.tools.isEmbed(gid,realId);if(isAlternativeFileType||isEmbed){return}var img=new Image;img.src=imgSrc;if(cgJsClass.gallery.vars.alreadyLoadedImages.indexOf(imgSrc)>-1){$cgShow.removeClass("cg_skeleton_loader");$cgAppend.css("background",'url("'+imgSrc+'") no-repeat center center')}else if(img.complete||img.width+img.height>0){$cgShow.removeClass("cg_skeleton_loader");$cgAppend.css("background",'url("'+imgSrc+'") no-repeat center center')}else{$cgShow.css("background","");$cgShow.addClass("cg_skeleton_loader");img.onload=function(){var timeout=cgJsClass.gallery.function.general.tools.appendImageOnLoadGallerySetTimeoutGetTimeout();cgJsClass.gallery.function.general.tools.appendImageOnLoadGallerySetTimeout($cgShow,$cgAppend,imgSrc,realId,timeout,gid)};img.onerror=function(e){$cgShow.removeClass("cg_skeleton_loader")}}},appendImageOnLoadGallerySetTimeoutGetTimeout(){var start=Date.now();var end=Date.now();var timeout;if((end-start)/1e3>=1750){timeout=0}else{timeout=1750-(end-start)/1e3}return timeout},appendImageOnLoadGallerySetTimeout($cgShow,$cgAppend,imgSrc,realId,timeout,gid){var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);var isEmbed=cgJsClass.gallery.function.general.tools.isEmbed(gid,realId);if(isAlternativeFileType||isEmbed){return}setTimeout(function(){$cgShow.removeClass("cg_skeleton_loader");$cgAppend.css("background",'url("'+imgSrc+'") no-repeat center center');cgJsClass.gallery.vars.alreadyLoadedImages.push(imgSrc)},timeout)},appendImageOnLoadSingleView($cgCenterImage,backGroundUrl,realId,gid,isFromClickNextPrevFile){var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);var isEmbed=cgJsClass.gallery.function.general.tools.isEmbed(gid,realId);if(isAlternativeFileType||isEmbed){return}var img=new Image;img.src=backGroundUrl;if(isFromClickNextPrevFile&&cgJsClass.gallery.vars.alreadyLoadedImages.indexOf(backGroundUrl)>-1){$cgCenterImage.removeClass("cg_skeleton_loader");$cgCenterImage.css("background",'url("'+backGroundUrl+'") no-repeat center center')}else if(img.complete||img.width+img.height>0){$cgCenterImage.removeClass("cg_skeleton_loader");$cgCenterImage.css("background",'url("'+backGroundUrl+'") no-repeat center center')}else{$cgCenterImage.css("background","");$cgCenterImage.addClass("cg_skeleton_loader");var start=Date.now();img.onload=function(){var end=Date.now();var timeout;if((end-start)/1e3>=1750){timeout=0}else{timeout=1750-(end-start)/1e3}cgJsClass.gallery.function.general.tools.appendImageOnLoadSingleViewSetTimeout($cgCenterImage,backGroundUrl,realId,timeout,gid,isFromClickNextPrevFile)};img.onerror=function(){$cgCenterImage.removeClass("cg_skeleton_loader");$cgCenterImage.css("background",'url("'+backGroundUrl+'") no-repeat center center')}}},appendImageOnLoadSingleViewSetTimeout($cgCenterImage,backGroundUrl,realId,timeout,gid,isFromClickNextPrevFile){var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);var isEmbed=cgJsClass.gallery.function.general.tools.isEmbed(gid,realId);if(isAlternativeFileType||isEmbed){return}setTimeout(function(){if($cgCenterImage.hasClass("cg-center-image-alternative-file-type")||$cgCenterImage.find("video").length){$cgCenterImage.css("background","");$cgCenterImage.removeClass("cg_skeleton_loader");return}if($cgCenterImage.attr("data-cg-real-id")==realId){if($cgCenterImage.attr("data-cg-image-src-onload")){if($cgCenterImage.attr("data-cg-image-src-onload")==backGroundUrl){$cgCenterImage.removeClass("cg_skeleton_loader");if(cgJsClass.gallery.vars.alreadyLoadedImages.indexOf(backGroundUrl)==-1){cgJsClass.gallery.vars.alreadyLoadedImages.push(backGroundUrl)}$cgCenterImage.css("background",'url("'+backGroundUrl+'") no-repeat center center')}}else{$cgCenterImage.removeClass("cg_skeleton_loader");if(cgJsClass.gallery.vars.alreadyLoadedImages.indexOf(backGroundUrl)==-1){cgJsClass.gallery.vars.alreadyLoadedImages.push(backGroundUrl)}$cgCenterImage.css("background",'url("'+backGroundUrl+'") no-repeat center center')}}},timeout)},appendImageOnLoadSingleViewRotated($cgCenterImageRotated,backGroundUrl,realId,gid,isFromClickNextPrevFile){var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);var isEmbed=cgJsClass.gallery.function.general.tools.isEmbed(gid,realId);if(isAlternativeFileType||isEmbed){return}var img=new Image;img.src=backGroundUrl;if(isFromClickNextPrevFile&&cgJsClass.gallery.vars.alreadyLoadedImages.indexOf(backGroundUrl)>-1){$cgCenterImageRotated.removeClass("cg_skeleton_loader");$cgCenterImageRotated.css("background",'url("'+backGroundUrl+'") no-repeat center center')}else if(img.complete||img.width+img.height>0){$cgCenterImageRotated.removeClass("cg_skeleton_loader");$cgCenterImageRotated.css("background",'url("'+backGroundUrl+'") no-repeat center center')}else{$cgCenterImageRotated.css("background","");$cgCenterImageRotated.addClass("cg_skeleton_loader");var start=Date.now();img.onload=function(){var end=Date.now();var timeout;if((end-start)/1e3>=1750){timeout=0}else{timeout=1750-(end-start)/1e3}cgJsClass.gallery.function.general.tools.appendImageOnLoadSingleViewRotatedSetTimeout($cgCenterImageRotated,backGroundUrl,realId,timeout,gid)};img.onerror=function(){$cgCenterImageRotated.removeClass("cg_skeleton_loader");$cgCenterImageRotated.css("background",'url("'+backGroundUrl+'") no-repeat center center')}}},appendImageOnLoadSingleViewRotatedSetTimeout($cgCenterImageRotated,backGroundUrl,realId,timeout,gid){var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);var isEmbed=cgJsClass.gallery.function.general.tools.isEmbed(gid,realId);if(isAlternativeFileType||isEmbed){return}setTimeout(function(){var $cgCenterImage=$cgCenterImageRotated.closest(".cg-center-image");if($cgCenterImage.hasClass("cg-center-image-alternative-file-type")||$cgCenterImage.find("video").length){$cgCenterImageRotated.addClass("cg_hide");$cgCenterImageRotated.css("background","");$cgCenterImageRotated.removeClass("cg_skeleton_loader");return}if($cgCenterImage.attr("data-cg-real-id")==realId){if($cgCenterImage.attr("data-cg-image-src-onload")){if($cgCenterImage.attr("data-cg-image-src-onload")==backGroundUrl){$cgCenterImageRotated.removeClass("cg_skeleton_loader");if(cgJsClass.gallery.vars.alreadyLoadedImages.indexOf(backGroundUrl)==-1){cgJsClass.gallery.vars.alreadyLoadedImages.push(backGroundUrl)}$cgCenterImageRotated.css("background",'url("'+backGroundUrl+'") no-repeat center center')}}else{$cgCenterImageRotated.removeClass("cg_skeleton_loader");if(cgJsClass.gallery.vars.alreadyLoadedImages.indexOf(backGroundUrl)==-1){cgJsClass.gallery.vars.alreadyLoadedImages.push(backGroundUrl)}$cgCenterImageRotated.css("background",'url("'+backGroundUrl+'") no-repeat center center')}}},timeout)},isImageType(gid,realId,selectedFile){var isImageType=false;if(selectedFile){var imgType=selectedFile.ImgType}else{var imgType=cgJsData[gid].vars.rawData[realId].ImgType}if(imgType=="jpg"||imgType=="jpeg"||imgType=="png"||imgType=="gif"){isImageType=true}return isImageType},isAlternativeFileType(gid,realId,selectedFile,imgType){var isAlternativeFileType=false;if(imgType){imgType=imgType}else if(selectedFile){imgType=selectedFile.ImgType}else{imgType=cgJsData[gid].vars.rawData[realId].ImgType}if(imgType=="pdf"||imgType=="zip"||imgType=="txt"||imgType=="doc"||imgType=="docx"||imgType=="xls"||imgType=="xlsx"||imgType=="csv"||imgType=="ppt"||imgType=="pptx"){isAlternativeFileType="file"}else if(imgType=="mp3"||imgType=="m4a"||imgType=="ogg"||imgType=="wav"){isAlternativeFileType="audio"}else if(imgType=="mp4"||imgType=="mov"||imgType=="avi"||imgType=="webm"||imgType=="wmv"){isAlternativeFileType="video"}return isAlternativeFileType},isEmbed(gid,realId,selectedFile,ImgType){if(ImgType){ImgType=ImgType}else if(selectedFile){ImgType=selectedFile.ImgType}else{ImgType=cgJsData[gid].vars.rawData[realId].ImgType}if(ImgType=="tkt"||ImgType=="twt"||ImgType=="ytb"||ImgType=="inst"){return true}return false},setHeaderWidth(gid){cgJsData[gid].vars.mainCGdiv.find(".cg_header").width(cgJsData[gid].vars.mainCGdiv.outerWidth(true)-parseInt(cgJsData[gid].vars.mainCGdiv.css("padding-left"))-parseInt(cgJsData[gid].vars.mainCGdiv.css("padding-right")))},checkSkeletonLoaderToShow(gid,isOnPageLoadOrCallFromUpload){if(gid.indexOf("-uf")>-1||gid.indexOf("-cf")>-1){if(cgJsData[gid].vars.mainCGdivUploadForm.hasClass("mainCGdivShowUncollapsed")){cgJsData[gid].vars.mainCGdivHelperParent.find(".cg_skeleton_loader_on_page_load_div_uncollapsed").removeClass("cg_hide");if(isOnPageLoadOrCallFromUpload){cgJsData[gid].vars.mainCGdiv.css("height",cgJsData[gid].vars.mainCGdivHelperParent.find(".cg_skeleton_loader_on_page_load_div_uncollapsed").height()+"px")}}else{cgJsData[gid].vars.mainCGdivHelperParent.find(".cg_skeleton_loader_on_page_load_div_form_collapsed").removeClass("cg_hide");if(isOnPageLoadOrCallFromUpload){cgJsData[gid].vars.mainCGdiv.css("height",cgJsData[gid].vars.mainCGdivHelperParent.find(".cg_skeleton_loader_on_page_load_div_form_collapsed").height()+"px")}}}else{if(cgJsData[gid].vars.currentLook=="height"){cgJsData[gid].vars.mainCGdivHelperParent.find(".cg_skeleton_loader_on_page_load_div_height_view").removeClass("cg_hide");if(isOnPageLoadOrCallFromUpload){cgJsData[gid].vars.mainCGdiv.css("height",cgJsData[gid].vars.mainCGdivHelperParent.find(".cg_skeleton_loader_on_page_load_div_height_view").height()+"px")}}if(cgJsData[gid].vars.currentLook=="thumb"){cgJsData[gid].vars.mainCGdivHelperParent.find(".cg_skeleton_loader_on_page_load_div_thumb_view").removeClass("cg_hide");if(isOnPageLoadOrCallFromUpload){cgJsData[gid].vars.mainCGdiv.css("height",cgJsData[gid].vars.mainCGdivHelperParent.find(".cg_skeleton_loader_on_page_load_div_thumb_view").height()+"px")}}if(cgJsData[gid].vars.currentLook=="blog"||cgJsData[gid].vars.currentLook=="slider"){cgJsData[gid].vars.mainCGdivHelperParent.find(".cg_skeleton_loader_on_page_load_div_blog_and_slider_view").removeClass("cg_hide");if(isOnPageLoadOrCallFromUpload){cgJsData[gid].vars.mainCGdiv.css("height",cgJsData[gid].vars.mainCGdivHelperParent.find(".cg_skeleton_loader_on_page_load_div_blog_and_slider_view").height()+"px")}}}},hideSkeletonLoader(gid,isOnPageLoadOrCallFromUpload){if(isOnPageLoadOrCallFromUpload){cgJsData[gid].vars.mainCGdiv.css("height","")}cgJsData[gid].vars.mainCGdivHelperParent.find(".cg_skeleton_loader_on_page_load_div").addClass("cg_hide")},getYtbOverlayConsentElement($,gid,realId,cgCenterDivWidth,cgCenterDivHeight){return $('<div class="cg_append_ytb_overlay_consent cg_append_social_overlay_consent cg_append cg_append_social" data-ytb-src="'+cgJsData[gid].vars.rawData[realId]["guid"]+'" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'" id="cg_append'+realId+'"  data-cg-center-div-width="'+cgCenterDivWidth+'" data-cg-center-div-height="'+cgCenterDivHeight+'" ><span class="cg_ytb_logo cg_social_logo"></span><span>YouTube '+cgJsClass.gallery.language.general.contentBlocked+'.</span><span><a href="https://policies.google.com/privacy" target="_blank" class="cg_extern_privacy_policy">'+cgJsClass.gallery.language.general.ToViewTheContentYouMustAgreePrivacyPolicy+' (YouTube)</a>.</span><span class="cg_ytb_consent_agree cg_social_consent_agree" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'"  >'+cgJsClass.gallery.language.general.IAgree+"</span><span>"+cgJsClass.gallery.language.general.ByAgreeingAllContentUnblocked+" (YouTube "+cgJsClass.gallery.language.general.content+"). </span><span>"+cgJsClass.gallery.language.general.UntilCurrentTabGetsClosed+".</span></div>")},getInstOverlayConsentElement($,gid,realId,cgCenterDivWidth,cgCenterDivHeight){return $('<div class="cg_append_inst_overlay_consent cg_append_social_overlay_consent cg_append cg_append_social" data-inst-src="'+cgJsData[gid].vars.rawData[realId]["guid"]+'" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'" id="cg_append'+realId+'"  data-cg-center-div-width="'+cgCenterDivWidth+'" data-cg-center-div-height="'+cgCenterDivHeight+'" ><span class="cg_inst_logo cg_social_logo"></span><span>Instagram '+cgJsClass.gallery.language.general.contentBlocked+'.</span><span><a href="https://privacycenter.instagram.com/policy" target="_blank" class="cg_extern_privacy_policy">'+cgJsClass.gallery.language.general.ToViewTheContentYouMustAgreePrivacyPolicy+' (Instagram)</a>.</span><span class="cg_inst_consent_agree cg_social_consent_agree" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'"  >'+cgJsClass.gallery.language.general.IAgree+"</span><span>"+cgJsClass.gallery.language.general.ByAgreeingAllContentUnblocked+" (Instagram "+cgJsClass.gallery.language.general.content+"). </span><span>"+cgJsClass.gallery.language.general.UntilCurrentTabGetsClosed+".</span></div>")},getTwtOverlayConsentElement($,gid,realId,cgCenterDivWidth,cgCenterDivHeight){return $('<div class="cg_append_twt_overlay_consent cg_append_social_overlay_consent cg_append cg_append_twt cg_append_social" data-twt-src="'+cgJsData[gid].vars.rawData[realId]["guid"]+'" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'" id="cg_append'+realId+'"  data-cg-center-div-width="'+cgCenterDivWidth+'" data-cg-center-div-height="'+cgCenterDivHeight+'" ><span class="cg_twt_logo cg_social_logo"></span><span>X '+cgJsClass.gallery.language.general.contentBlocked+'.</span><span><a href="https://x.com/privacy" target="_blank" class="cg_extern_privacy_policy">'+cgJsClass.gallery.language.general.ToViewTheContentYouMustAgreePrivacyPolicy+' (X)</a>.</span><span class="cg_twt_consent_agree cg_social_consent_agree" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'"  >'+cgJsClass.gallery.language.general.IAgree+"</span><span>"+cgJsClass.gallery.language.general.ByAgreeingAllContentUnblocked+" (X "+cgJsClass.gallery.language.general.content+"). </span><span>"+cgJsClass.gallery.language.general.UntilCurrentTabGetsClosed+".</span></div>")},getTktOverlayConsentElement($,gid,realId,cgCenterDivWidth,cgCenterDivHeight){return $('<div class="cg_append_tkt_overlay_consent cg_append_social_overlay_consent cg_append cg_append_tkt cg_append_social" data-tkt-src="'+cgJsData[gid].vars.rawData[realId]["guid"]+'" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'" id="cg_append'+realId+'"  data-cg-center-div-width="'+cgCenterDivWidth+'" data-cg-center-div-height="'+cgCenterDivHeight+'" ><span class="cg_tkt_logo cg_social_logo"></span><span>TikTok '+cgJsClass.gallery.language.general.contentBlocked+'.</span><span><a href="https://www.tiktok.com/legal/privacy-policy-row" target="_blank" class="cg_extern_privacy_policy">'+cgJsClass.gallery.language.general.ToViewTheContentYouMustAgreePrivacyPolicy+' (TikTok)</a>.</span><span class="cg_tkt_consent_agree cg_social_consent_agree" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'"  >'+cgJsClass.gallery.language.general.IAgree+"</span><span>"+cgJsClass.gallery.language.general.ByAgreeingAllContentUnblocked+" (TikTok "+cgJsClass.gallery.language.general.content+"). </span><span>"+cgJsClass.gallery.language.general.UntilCurrentTabGetsClosed+".</span></div>")},getBlockquoteFromPostContent($,gid,realId){var blockquote=cgJsData[gid].vars.rawData[realId]["post_content"].split("blockquote:")[1];blockquote=blockquote.substring(0,blockquote.length-1);blockquote=$("<textarea />").html(blockquote).text();return $(blockquote)}};;cgJsClass.gallery.function.general.checkFiltered=function(gid){var filtered=false;var checkedCategories=[];if(cgJsData[gid].options.pro.CatWidget>=1){var allCategoriesLength=Object.keys(cgJsData[gid].vars.categories).length;for(var catId in cgJsData[gid].vars.categories){if(!cgJsData[gid].vars.categories.hasOwnProperty(catId)){break}if(cgJsData[gid].vars.categories[catId]["Checked"]){checkedCategories.push(catId)}}if(checkedCategories.length!=allCategoriesLength){filtered=true}}cgJsData[gid].vars.searchInput=cgJsData[gid].vars.searchInput==null?"":cgJsData[gid].vars.searchInput;if(cgJsData[gid].vars.searchInput!=""){filtered=true}return filtered};;cgJsClass.gallery.function.general.mobile={check:function(){cgJsClass.gallery.vars.isMobile=false;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))){cgJsClass.gallery.vars.isMobile=true}}};;cgJsClass.gallery.function.general.time={photoContestStartTimeCheck:function(gid,ActualTimeSecondsFromPhp,ContestStartTimeFromPhp,cg_ContestStart){if(ActualTimeSecondsFromPhp<ContestStartTimeFromPhp&&cg_ContestStart==1){cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].ThePhotoContestHasNotStartedYet);return false}else{return true}},photoContestEndTimeCheck:function(gid,ActualTimeSecondsFromPhp,ContestStartTimeFromPhp,cg_ContestEnd){if(ContestStartTimeFromPhp>=ActualTimeSecondsFromPhp&&cg_ContestEnd==1||cg_ContestEnd==2){cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].ThePhotoContestIsOver);return false}else{return true}},correctTimezoneOffset:function(gid,ActualTimeSeconds,ContestEndTimeFromPhp){if(typeof ContestEndTimeFromPhp!="undefined"){var cg_ContestEndTime=parseInt(ContestEndTimeFromPhp)}else{var cg_ContestEndTime=parseInt(cgJsData[gid].options.general.ContestEndTime)}if(cg_ContestEndTime!=""&&cg_ContestEndTime>0){var date=new Date;var timezoneOffsetBrowser=date.getTimezoneOffset();var timezoneServer=cgJsClass.gallery.vars.timezoneOffset;var correctTimezone=0;var correctSeconds=0;if(timezoneOffsetBrowser==timezoneServer){correctTimezone=0}if(timezoneOffsetBrowser<timezoneServer){correctTimezone=(timezoneServer-timezoneOffsetBrowser)*-1}if(timezoneOffsetBrowser>timezoneServer){correctTimezone=timezoneOffsetBrowser-timezoneServer}if(correctTimezone!=0){correctSeconds=correctTimezone*60}cg_ContestEndTime=cg_ContestEndTime+correctSeconds;return cg_ContestEndTime}else{cg_ContestEndTime=0;return cg_ContestEndTime}},getTime:function(cg_ContestEndTime,ActualTimeSeconds){var date=new Date(ActualTimeSeconds*1e3);var hours=date.getHours();var minutes="0"+date.getMinutes();var seconds="0"+date.getSeconds();ActualTimeSeconds=hours+":"+minutes.substr(-2)+":"+seconds.substr(-2);var date=new Date(cg_ContestEndTime*1e3);var hours=date.getHours();var minutes="0"+date.getMinutes();var seconds="0"+date.getSeconds();cg_ContestEndTime=hours+":"+minutes.substr(-2)+":"+seconds.substr(-2);alert(ActualTimeSeconds);alert(cg_ContestEndTime)}};;cgJsClass.gallery.views.fullscreen={init:function(){if(cgJsClass.gallery.vars.eventViewsFullScreenInit){return}else{cgJsClass.gallery.vars.eventViewsFullScreenInit=true}jQuery(document).on("click",".cg-fullscreen-button",function(){var gid=jQuery(this).attr("data-cg-gid");jQuery(this).addClass("cg_hide");cgJsClass.gallery.views.fullscreen.openFullScreen(gid)});cgJsClass.gallery.views.fullscreen.initExitEventListener()},openFullScreen:function(gid){cgJsClass.gallery.vars.fullscreen=gid;cgJsClass.gallery.vars.lastFullscreen=gid;cgJsData[gid].vars.mainCGdiv.find(".cg-fullscreen-button").addClass("cg_hide");cgJsData[gid].vars.cgCenterDiv.find(".cg-fullscreen-button").addClass("cg_hide");var element=document.getElementById("mainCGdivHelperParent"+gid);if(element.webkitRequestFullscreen){element.webkitRequestFullscreen();this.fullScreenCheck=true}else if(element.mozRequestFullScreen){element.mozRequestFullScreen();this.fullScreenCheck=true}else if(element.msRequestFullscreen){element.msRequestFullscreen();this.fullScreenCheck=true}else if(element.requestFullscreen){element.requestFullscreen();this.fullScreenCheck=true}else{alert("Your browser do not support full screen")}},initExitEventListener:function(){if(cgJsClass.gallery.vars.eventInitExitEventListener){return}else{cgJsClass.gallery.vars.eventInitExitEventListener=true}document.addEventListener("fullscreenchange",function(){if(cgJsClass.gallery.views.fullscreen.isFullscreen()){}else{cgJsClass.gallery.views.fullscreen.close(cgJsClass.gallery.vars.fullscreen,true)}});document.addEventListener("mozfullscreenchange",function(){if(cgJsClass.gallery.views.fullscreen.isFullscreen()){}else{cgJsClass.gallery.views.fullscreen.close(cgJsClass.gallery.vars.fullscreen,true)}});document.addEventListener("webkitfullscreenchange",function(){if(cgJsClass.gallery.views.fullscreen.isFullscreen()){}else{cgJsClass.gallery.views.fullscreen.close(cgJsClass.gallery.vars.fullscreen,true)}});document.addEventListener("msfullscreenchange",function(){if(cgJsClass.gallery.views.fullscreen.isFullscreen()){}else{cgJsClass.gallery.views.fullscreen.close(cgJsClass.gallery.vars.fullscreen,true)}})},isFullscreen:function(){var state=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if((state==true||window.fullScreen||window.innerWidth==screen.width&&window.innerHeight==screen.height)&&!cgJsClass.gallery.vars.isMobile){return true}return false},close:function(gid,isDoNotExitFullScreenAlreadyExited){var $mainCGdivHelperParent=jQuery("#mainCGdivHelperParent"+gid);if($mainCGdivHelperParent.find("#cgEcommerceCheckoutBodyContainer").length){$mainCGdivHelperParent.find("#cgEcommerceCheckoutBodyContainer").insertBefore($mainCGdivHelperParent)}cgJsClass.gallery.vars.fullscreen=false;setTimeout(function(){cgJsClass.gallery.vars.lastFullscreen=false});if(gid){cgJsData[gid].vars.cg_sort_div_blogLookFullWindow.find(".cg-fullscreen-button").removeClass("cg_hide");if(cgJsData[gid].options.general.FullSize==1){if(cgJsData[gid].options.pro.SliderFullWindow!=1&&cgJsData[gid].options.visual.BlogLookFullWindow!=1){cgJsData[gid].vars.mainCGdiv.find(".cg-fullsize-div .cg-fullscreen-button").removeClass("cg_hide")}}if(cgJsData[gid].vars.currentLook=="blog"){cgJsData[gid].vars.mainCGdiv.find(".cg_header .cg_sort_div .cg-fullscreen-button").removeClass("cg_hide")}}if(isDoNotExitFullScreenAlreadyExited){return}if(document.exitFullscreen){document.exitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}},goBackToFullscreen:function(){if(cgJsClass.gallery.vars.fullscreen){cgJsClass.gallery.views.fullscreen.openFullScreen(cgJsClass.gallery.vars.fullscreen)}},fullScreenBodyCheck:function($body){if($body.hasClass("cg_browser_input_button_upload_modal_triggered")){cgJsClass.gallery.views.fullscreen.goBackToFullscreen();$body.removeClass("cg_browser_input_button_upload_modal_triggered")}}};;cgJsClass.gallery.views.fullwindow.init=function(){cgJsClass.gallery.views.fullwindow.openEvent();cgJsClass.gallery.views.fullwindow.closeEvent()};cgJsClass.gallery.views.fullwindow.checkAndHideFullWindowConfigurationButton=function(gid,$cgCenterDiv){var categoriesCheck=false;if(cgJsData[gid].vars.showCategories){if(Object.keys(cgJsData[gid].vars.categories).length>=2){categoriesCheck=true}}if(!categoriesCheck&&cgJsData[gid].options.general.AllowSort!=1&&cgJsData[gid].options.pro.Search!=1&&cgJsData[gid].options.general.RandomSortButton!=1){if($cgCenterDiv){$cgCenterDiv.find(".cg-fullwindow-configuration-button").addClass("cg_hide")}else{cgJsData[gid].vars.mainCGdivHelperParent.find(".cg-fullwindow-configuration-button").addClass("cg_hide")}}else{if($cgCenterDiv){$cgCenterDiv.find(".cg-fullwindow-configuration-button").removeClass("cg_hide")}}};cgJsClass.gallery.views.fullwindow.checkIfGalleryAlreadyFullWindow=function(gid){if(cgJsClass.gallery.vars.isMobile){var windowWidth=screen.width}else{var windowWidth=jQuery(window).width()}var mainCGdivContainerWidth=jQuery("#mainCGdivContainer"+gid).width();var widthDifferenceCheck=windowWidth-mainCGdivContainerWidth;if(widthDifferenceCheck<100){cgJsData[gid].vars.galleryAlreadyFullWindow=true;jQuery("#cgCenterImageFullwindowHeader"+gid).hide();jQuery("#cgCenterImageFullwindow"+gid).hide()}else{cgJsData[gid].vars.galleryAlreadyFullWindow=false;if(!cgJsClass.gallery.vars.fullwindow){jQuery("#cgCenterImageFullwindowHeader"+gid).show()}jQuery("#cgCenterImageFullwindow"+gid).show()}};;cgJsClass.gallery.views.fullwindow.openEvent=function(){if(cgJsClass.gallery.vars.eventFullWindowOpenEvent){return}else{cgJsClass.gallery.vars.eventFullWindowOpenEvent=true}jQuery(document).on("click",".cg-center-image-fullwindow",function(){var gid=jQuery(this).attr("data-cg-gid");var $mainCGdivContainer=jQuery("#mainCGdivContainer"+gid);cgJsData[gid].vars.cgCenterDiv.hide();$mainCGdivContainer.css("height","1200px");cgJsData[gid].vars.mainCGdivHelperParent.animate({scrollTop:$mainCGdivContainer.offset().top-70+"px"},0,function(){});cgJsClass.gallery.views.fullwindow.openFunction(gid,jQuery(this))});jQuery(document).on("click","body > .mainCGdivHelperParent .mainCGdiv .cg-cat-select-area-show-less",function(){jQuery(this).closest(".mainCGdiv").find(".cg_sort_div_mobile_left .cg-fullwindow-configuration-button").click()});jQuery(document).on("click",".cg-fullwindow-configuration-button",function(){var $element=jQuery(this);var gid=$element.attr("data-cg-gid");cgJsClass.gallery.upload.functions.close(gid,true);var $mainCGdivHelperParent=$element.closest(".mainCGdivHelperParent");var $mainCGdivFullWindowConfigurationArea=$mainCGdivHelperParent.find(".mainCGdivFullWindowConfigurationArea");if(cgJsClass.gallery.vars.fullWindowConfigurationAreaIsOpened){$mainCGdivFullWindowConfigurationArea.removeClass("cg_opened");cgJsClass.gallery.vars.fullWindowConfigurationAreaIsOpened=false}else{$mainCGdivFullWindowConfigurationArea.addClass("cg_opened");cgJsData[gid].vars.mainCGdivFullWindowConfigurationArea=$mainCGdivFullWindowConfigurationArea;cgJsClass.gallery.blogLogic.setWidthMainCGdivFullWindowConfigurationArea(gid);cgJsClass.gallery.blogLogic.setTopMainCGdivFullWindowConfigurationArea(gid);setTimeout(function(){cgJsClass.gallery.vars.fullWindowConfigurationAreaIsOpened=true},10)}});jQuery(document).on("click","body > .mainCGdivHelperParent",function(e){if(cgJsClass.gallery.vars.fullWindowConfigurationAreaIsOpened){var $eTarget=jQuery(e.target);var gid=jQuery(this).attr("data-cg-gid");var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}if($eTarget.hasClass("cg_further_images_select_nav_prev")||$eTarget.hasClass("cg_further_images_select_nav_next")){return}if(!$eTarget.is(".mainCGdivFullWindowConfigurationArea")&&$eTarget.closest(".mainCGdivFullWindowConfigurationArea").length==0&&!$eTarget.hasClass("cg_further_images")&&!$eTarget.hasClass("cg_fe_controls_style_white")&&!($eTarget.hasClass("cg_append")&&sliderView==true)&&!$eTarget.hasClass("cgChangeTopControlsStyleOptionTest")){var $element=jQuery(this);var gid=$element.attr("data-cg-gid");if(!$element.find("#mainCGdivFullWindowConfigurationArea"+gid).hasClass("cg_cant_be_closed")){$element.find("#mainCGdivFullWindowConfigurationArea"+gid).removeClass("cg_opened")}cgJsClass.gallery.vars.fullWindowConfigurationAreaIsOpened=false}}})};cgJsClass.gallery.views.fullwindow.closeEvent=function(gid){jQuery(document).on("click",".cg-center-image-close-fullwindow",function(){cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");var gid=jQuery(this).attr("data-cg-gid");if(cgJsClass.gallery.vars.fullscreen){cgJsClass.gallery.views.fullscreen.close(gid);cgJsData[gid].vars.cgCenterDivLastHeight=null;cgJsClass.gallery.vars.fullscreen=false}else{var $element=jQuery(this);cgJsClass.gallery.views.fullwindow.closeFunction(gid,true,$element);cgJsClass.gallery.vars.fullscreen=false}})};;cgJsClass.gallery.views.fullwindow.openFunction=function(gid,$openButton){if(cgJsData[gid].vars.currentLook=="blog"){cgJsData[gid].vars.cgCenterDiv.addClass("cg_hide_cg_center_div")}cgJsData[gid].vars.firstPushSateDone=false;cgJsData[gid].vars.mainCGallery.removeClass("cg_thumb_view cg_height_view cg_slider");cgJsData[gid].vars.mainCGdiv.find(".mainCGBackToGalleryButtonHrefContainer.isCGalleries,.cgGalleryName").addClass("cg_hide");if(cgJsData[gid].options.pro.SliderFullWindow==1||cgJsData[gid].options.visual.BlogLookFullWindow==1){cgJsData[gid].vars.previousLook=cgJsData[gid].vars.currentLook}cgJsData[gid].vars.widthmainPrevious=cgJsData[gid].vars.widthmain;var BlogLookFullWindowInitiated=false;if(cgJsData[gid].options.visual.BlogLookFullWindow==1&&cgJsData[gid].vars.currentLook!="slider"){BlogLookFullWindowInitiated=true;cgJsData[gid].vars.currentLook="blog"}else if(cgJsData[gid].options.pro.SliderFullWindow==1&&cgJsData[gid].vars.currentLook!="blog"){cgJsData[gid].vars.currentLook="slider";sliderView=true}cgJsData[gid].vars.mainCGdiv.addClass("mainCGdivFullWindowBlogView");if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.addVisibilityHiddenToCgCenterDivBlogObjects(gid)}cgJsData[gid].vars.mainCGdiv.addClass("cg_display_inline_block");cgJsData[gid].vars.mainCGallery.addClass("cg_full_window");cgJsClass.gallery.vars.fullwindow=gid;cgJsClass.gallery.vars.fullWindowConfigurationAreaIsOpened=false;cgJsClass.gallery.vars.isInitFullWindowOpen=true;cgJsData[gid].vars.cgCenterDivLastHeight=null;if(cgJsData[gid].vars.currentLook=="blog"){var prepareResizeFullWindow=cgJsClass.gallery.blogLogic.prepareResizeFullWindow(gid)}var $mainCGdivHelperParent=cgJsData[gid].vars.mainCGdivHelperParent;var $mainCGdivHelperChild=$mainCGdivHelperParent.find(".mainCGdivHelperChild");cgJsData[gid].vars.mainCGdivHelperChild=$mainCGdivHelperChild;$mainCGdivHelperParent.find("#mainCGslider"+gid).addClass("cg_hide_override");$mainCGdivHelperParent.appendTo("body");var $mainCGdivFullWindowConfigurationArea=jQuery("#mainCGdivFullWindowConfigurationArea"+gid);$mainCGdivFullWindowConfigurationArea.removeClass("cg_opened");var $cg_sort_div=$mainCGdivHelperParent.find(".cg_sort_div");var $cg_sort_div_clone_blogLookFullWindow=$cg_sort_div.clone();cgJsData[gid].vars.mainCGdiv.find(".cg_header").removeClass("cg_hide").find("#cgGalleryViewSortControl"+gid).removeClass("cg_hide");cgJsData[gid].vars.cg_sort_div_original_source=$cg_sort_div;$mainCGdivHelperParent.find(".cg-cat-select-area").appendTo($mainCGdivFullWindowConfigurationArea);$mainCGdivHelperParent.find(".cg-cat-select-area-show-less").clone().removeClass("cg_hide").removeAttr("data-cg-tooltip").appendTo($mainCGdivFullWindowConfigurationArea);$cg_sort_div_clone_blogLookFullWindow.insertAfter($cg_sort_div);$cg_sort_div_clone_blogLookFullWindow.removeClass("cg_hidden");$mainCGdivFullWindowConfigurationArea.prepend($cg_sort_div);cgJsData[gid].vars.cg_sort_div_blogLookFullWindow=$cg_sort_div_clone_blogLookFullWindow;cgJsData[gid].vars.mainCGdivFullWindowConfigurationArea=$mainCGdivFullWindowConfigurationArea;if(cgJsData[gid].vars.currentLook=="blog"){$mainCGdivFullWindowConfigurationArea.addClass("cg_hidden");$cg_sort_div_clone_blogLookFullWindow.addClass("cg_hidden")}$cg_sort_div_clone_blogLookFullWindow.find(".cg_search_input_div").remove();$cg_sort_div_clone_blogLookFullWindow.find(".cg_select_order_label").remove();$cg_sort_div_clone_blogLookFullWindow.find(".cg_random_button").remove();cgJsData[gid].vars.cgCenterDivLoaderContainer.removeClass("cg_is_on_search");cgJsData[gid].vars.cg_sort_div_blogLookFullWindow.addClass("cg_sticky");var barWidth=15;if(jQuery.position&&jQuery.position.scrollbarWidth){barWidth=jQuery.position.scrollbarWidth()}cgJsData[gid].vars.cg_sort_div_blogLookFullWindow.css("width",cgJsData[gid].vars.mainCGdivHelperParent.outerWidth(true)-barWidth+"px");if(cgJsData[gid].options.pro.CatWidget!=1){cgJsData[gid].vars.mainCGdivFullWindowConfigurationArea.find(".cg-cat-select-area").addClass("cg_hide")}var $cg_sort_div_mobile_left=jQuery('<div class="cg_sort_div_mobile_left"></div>');var $cg_sort_div_mobile_right=jQuery('<div class="cg_sort_div_mobile_right"></div>');var $searchButton=jQuery("<div class='cg_hover_effect cg-fullwindow-configuration-button cg-header-controls-show-only-full-window'"+" id='cgCenterImageFullWindowConfiguration"+gid+"' data-cg-gid='"+gid+"' data-cg-tooltip='"+cgJsClass.gallery.language[gid].SearchOrSort+"'></div>");cgJsData[gid].vars.mainCGdivFullWindowConfigurationButton=$searchButton;$cg_sort_div_mobile_left.prepend($searchButton);$cg_sort_div_mobile_left.append($cg_sort_div_clone_blogLookFullWindow.find(".cg-gallery-upload"));if(cgJsData[gid].options.visual.EnableSwitchStyleGalleryButton=="1"){$cg_sort_div_mobile_left.append($mainCGdivHelperParent.find(".cg_gallery_thumbs_control .cg_switch_colors").clone())}$searchButton.removeClass("cg_hide cg_visibility_hidden");$cg_sort_div_clone_blogLookFullWindow.append($cg_sort_div_mobile_left);$cg_sort_div_clone_blogLookFullWindow.append($cg_sort_div_mobile_right);$cg_sort_div_clone_blogLookFullWindow.removeClass("cg_hide");if(cgJsData[gid].options.general.FullSize==1){$cg_sort_div_mobile_right.append($mainCGdivHelperParent.find(".cg_header .cg-fullsize-div .cg-fullscreen-button").clone().removeClass("cg_hide"))}$cg_sort_div_mobile_right.append($mainCGdivHelperParent.find(".cg_header .cg-fullsize-div .cg-center-image-close-fullwindow").clone().removeClass("cg_hide"));$mainCGdivHelperParent.find(".cg_header").css("width","inherit");if(cgJsData[gid].vars.$cg_further_images_container_bottom){cgJsData[gid].vars.$cg_further_images_container_bottom.addClass("cg_hide")}cgJsData[gid].vars.mainCGdiv.find(".mainCGdivFullWindowConfigurationAreaSub").remove();$mainCGdivFullWindowConfigurationArea.wrapInner("<div class='mainCGdivFullWindowConfigurationAreaSub'></div>");var $mainCGdivFullWindowConfigurationAreaSub=cgJsData[gid].vars.mainCGdiv.find(".mainCGdivFullWindowConfigurationAreaSub");cgJsData[gid].vars.$mainCGdivFullWindowConfigurationAreaSub=$mainCGdivFullWindowConfigurationAreaSub;$mainCGdivFullWindowConfigurationAreaSub.prepend($mainCGdivHelperParent.find(".cg_further_images_and_top_controls_container").clone());if(cgJsData[gid].vars.currentLook=="blog"||cgJsData[gid].vars.currentLook=="slider"){$searchButton.addClass("cg_blog_view");if(cgJsData[gid].vars.lengthData==0){cgJsData[gid].vars.cgNoImagesFound.removeClass("cg_hide");cgJsData[gid].vars.$mainCGdivFullWindowConfigurationAreaSub.find(".cg_further_images_and_top_controls_container .cgNoEntriesFound").remove();cgJsData[gid].vars.$mainCGdivFullWindowConfigurationAreaSub.find(".cg_further_images_and_top_controls_container").prepend('<div class="cgNoEntriesFound">'+cgJsClass.gallery.language[gid].NoEntriesFound+"</div>");$searchButton.text("0").removeClass("cg_visibility_hidden")}else{var currentIndex=cgJsClass.gallery.views.singleView.getCurrentRealIdIndexForFullWindow(gid,$openButton.attr("data-cg-real-id"));$searchButton.text(currentIndex+" "+cgJsClass.gallery.language[gid].of+" "+cgJsData[gid].vars.lengthData).removeClass("cg_visibility_hidden")}}if((cgJsData[gid].options.pro.CatWidget==1||cgJsData[gid].options.pro.Search==1||cgJsData[gid].options.general.RandomSortButton==1||cgJsData[gid].options.general.AllowSort==1)==false){$mainCGdivFullWindowConfigurationArea.find(".cg_sort_div").addClass("cg_hide");if(cgJsData[gid].vars.currentLook=="slider"){$searchButton.addClass("cg_no_action")}else{if(cgJsData[gid].vars.currentLook=="blog"&&cgJsData[gid].options.general.PicsPerSite>Object.keys(cgJsData[gid].vars.rawData).length){$searchButton.addClass("cg_no_action")}}}if(Object.keys(cgJsData[gid].vars.rawData).length<=cgJsData[gid].options.general.PicsPerSite){$mainCGdivFullWindowConfigurationAreaSub.find(".cg_further_images_and_top_controls_container").addClass("cg_hide_override")}cgJsClass.gallery.views.addRemoveSticky(cgJsData[gid].vars.mainCGdivHelperParent,cgJsData[gid].vars.mainCGdivHelperParent.scrollTop(),true);cgJsClass.gallery.blogLogic.setWidthMainCGdivFullWindowConfigurationArea(gid);cgJsClass.gallery.categories.setRemoveTitleAttributeForSmallWindow();cgJsClass.gallery.sorting.showRandomButtonInstantly(gid);var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}if(sliderView){if(cgJsData[gid].options.pro.SliderFullWindow==1){}cgJsClass.gallery.views.switchView.sortViewSlider(gid);$mainCGdivHelperParent.find(".cg_further_images_container").addClass("cg_hide")}$mainCGdivHelperParent.find(".cg-cat-select-area-container").addClass("cg_hide");$mainCGdivHelperParent.find(".cg_header .cg-center-image-close").removeClass("cg_hide");$mainCGdivHelperParent.find(".cg-center-image-fullwindow.cg_gallery_control_element").addClass("cg_hide");$mainCGdivHelperParent.find(".cg-inside-center-image-div").addClass("cg-center-image-close-fullwindow").removeClass("cg-center-image-fullwindow");cgJsClass.gallery.vars.dom.body.addClass("cg_body_overflow_hidden");cgJsClass.gallery.vars.dom.html.addClass("cg_no_scroll cg_body_overflow_hidden");cgJsData[gid].vars.cgCenterDivAppearenceHelper.addClass("cg_hide");if(cgJsData[gid].vars.currentLook!="blog"){cgJsClass.gallery.views.initOrderGallery(gid,false,null,$openButton.attr("data-cg-real-id"),false,false,false,sliderView)}$mainCGdivHelperParent.find("#mainCGdiv"+gid).removeClass("cg_hide_override");$mainCGdivHelperParent.find("#mainCGslider"+gid).removeClass("cg_hide_override");$mainCGdivHelperChild.find("> .mainCGdivFullWindowConfigurationArea").removeClass("cg_hide");if(!cgJsClass.gallery.vars.fullscreen&&cgJsData[gid].options.general.FullSize==1&&cgJsData[gid].options.general.FullSizeGallery==1){$mainCGdivHelperParent.find(".cgCenterDiv .cg-fullscreen-button").removeClass("cg_hide");if(cgJsData[gid].vars.currentLook=="slider"){}}if(cgJsClass.gallery.vars.isMobile==true){$mainCGdivHelperParent.find("#cgFullScreenButton"+gid).addClass("cg_hide");if(cgJsData[gid].vars.currentLook=="blog"){$mainCGdivHelperParent.find(".cgCenterDiv .cg-fullscreen-button").addClass("cg_hide")}}var isBlogLogicChangeWidthOnly=false;if(cgJsData[gid].vars.currentLook=="blog"&&!BlogLookFullWindowInitiated){cgJsClass.gallery.blogLogic.changeWidth(prepareResizeFullWindow.widthNowForBlogView,prepareResizeFullWindow.factor,$mainCGdivHelperParent,gid);isBlogLogicChangeWidthOnly=true}if(cgJsData[gid].vars.currentLook=="blog"){cgJsData[gid].vars.cgCenterDiv.addClass("cg_hide_cg_center_div")}if(cgJsData[gid].vars.currentLook=="blog"){if(cgJsData[gid].vars.currentLook=="slider"){}$mainCGdivHelperParent.find(".cg_gallery_thumbs_control").addClass("cg_hide");if(cgJsData[gid].vars.currentLook=="slider"){}cgJsClass.gallery.blogLogic.reset(gid);cgJsData[gid].vars.mainCGdiv.removeClass("cg_display_inline_block").addClass("cg_margin_0_auto");cgJsClass.gallery.blogLogic.init(jQuery,gid,null,null,null,true,false,false,false,false,$openButton.attr("data-cg-real-id"),false,BlogLookFullWindowInitiated);cgJsClass.gallery.vars.isInitFullWindowOpen=false}if(cgJsData[gid].options.pro.SliderFullWindow==1||cgJsData[gid].options.visual.BlogLookFullWindow==1){if(cgJsData[gid].vars.currentLook=="slider"){}$mainCGdivHelperParent.find(".cg_gallery_thumbs_control").addClass("cg_hide");if(cgJsData[gid].options.pro.SliderFullWindow==1){}}else{if(cgJsData[gid].options.general.FullSizeGallery==1){$mainCGdivHelperParent.find(".cg_header .cg-center-image-close-fullwindow").removeClass("cg_hide")}else{$mainCGdivHelperParent.find(".cg_header .cg-center-image-close-fullwindow").addClass("cg_hide")}}cgJsClass.gallery.views.fullwindow.checkAndHideFullWindowConfigurationButton(gid);if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.views.clickFurtherImagesStep.setBottomContainerAsText(gid);if(cgJsData[gid].vars.cgFurtherImagesContainerAsTextTop){cgJsData[gid].vars.cgFurtherImagesContainerAsTextTop.addClass("cg_visibility_hidden")}if(cgJsData[gid].vars.cgFurtherImagesContainerAsTextBottom){cgJsData[gid].vars.cgFurtherImagesContainerAsTextBottom.addClass("cg_visibility_hidden")}}if(cgJsData[gid].vars.currentLook=="blog"&&$openButton.attr("data-cg-real-id")){cgJsClass.gallery.blogLogic.scrollToElement(gid,$openButton,isBlogLogicChangeWidthOnly)}else if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.hideLoader(gid);cgJsClass.gallery.blogLogic.removeVisibilityHiddenFromCgCenterDivBlogObjects(gid)}cgJsData[gid].vars.mainCGdiv.css("height","unset");cgJsData[gid].vars.cg_sort_div_blogLookFullWindow.css("width",cgJsData[gid].vars.mainCGdivHelperParent.outerWidth(true)-barWidth+"px");if(cgJsData[gid].vars.mainCGallery.hasClass("cgShowNormalFormConfirmationTextInFullWindow")){if(cgJsData[gid].options.input&&cgJsData[gid].options.input.Confirmation_Text){setTimeout(function(){cgJsClass.gallery.vars.dom.html.addClass("cg_pointer_events_none");cgJsClass.gallery.function.message.showPro(gid,cgJsData[gid].options.input.Confirmation_Text,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined);setTimeout(function(){cgJsClass.gallery.vars.dom.html.removeClass("cg_pointer_events_none")},1500)},500)}cgJsData[gid].vars.mainCGallery.removeClass("cgShowNormalFormConfirmationTextInFullWindow")}};;cgJsClass.gallery.views.fullwindow.closeFunction=function(gid,openImage,$closeButton,isNoInitOrder){console.trace();debugger;cgJsData[gid].vars.mainCGdiv.removeClass("mainCGdivFullWindowBlogView");cgJsData[gid].vars.mainCGdiv.find(".cg-close-full-window-if-no-content").remove();cgJsClass.gallery.function.message.close();if(cgJsData[gid].options.pro.SliderFullWindow==1||cgJsData[gid].options.visual.BlogLookFullWindow==1){cgJsData[gid].vars.currentLook=cgJsData[gid].vars.previousLook}if(!$closeButton){cgJsData[gid].vars.closeEventInitWithDataCGrealIdCloseButton=true}if(cgJsData[gid].vars.cgFurtherImagesContainerAsTextTop){cgJsData[gid].vars.cgFurtherImagesContainerAsTextTop.remove()}if(cgJsData[gid].vars.cgFurtherImagesContainerAsTextBottom){cgJsData[gid].vars.cgFurtherImagesContainerAsTextBottom.remove()}cgJsData[gid].vars.mainCGdiv.find(".mainCGdivFullWindowConfigurationAreaSub .cg_further_images_and_top_controls_container").remove();cgJsData[gid].vars.cg_sort_div_blogLookFullWindow.remove();cgJsData[gid].vars.openedGalleryImageOrder=null;cgJsClass.gallery.vars.switchViewsClicked=true;cgJsData[gid].vars.openedRealIdOnClose=cgJsData[gid].vars.openedRealId;var sliderView=false;if(cgJsData[gid].options.pro.SliderFullWindow==1){cgJsData[gid].vars.mainCGdiv.find(".cg_header").removeClass("cg_hide")}if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}if(sliderView){if(cgJsData[gid].vars.lengthData>0){cgJsData[gid].vars.isClosedFullWindowAndSliderViewOpened=true}else{cgJsData[gid].vars.isClosedFullWindowAndSliderViewOpened=false}}else{cgJsData[gid].vars.isClosedFullWindowAndSliderViewOpened=false}cgJsData[gid].vars.mainCGdiv.addClass("cg_center_pointer_event_none");cgJsClass.gallery.upload.functions.close(gid);cgJsData[gid].vars.mainCGdiv.removeClass("cg_display_inline_block cg_margin_0_auto");cgJsData[gid].vars.mainCGallery.removeClass("cg_thumb_view");history.replaceState({},"",cgJsData[gid].vars.startLocation);cgJsData[gid].vars.firstPushSateDone=false;cgJsData[gid].vars.isWpEntryPageURLshown=false;cgJsClass.gallery.vars.fullwindow=null;cgJsData[gid].vars.cgCenterDivLastHeight=null;cgJsClass.gallery.vars.isInitFullWindowClose=true;cgJsClass.gallery.vars.fullWindowConfigurationAreaIsOpened=false;cgJsData[gid].vars.mainCGallery.addClass("cg_invisible").css("height","1000px");cgJsData[gid].vars.mainCGdivContainer.css("height","1200px");cgJsData[gid].vars.mainCGallery.removeClass("cgShowNormalFormConfirmationTextInFullWindow");cgJsData[gid].vars.cgCenterDiv.hide();var $mainCGdivHelperParent=jQuery("#mainCGdivHelperParent"+gid);var $mainCGdivFullWindowConfigurationArea=jQuery("#mainCGdivFullWindowConfigurationArea"+gid);$mainCGdivFullWindowConfigurationArea.find(".cg_sort_div").appendTo($mainCGdivHelperParent.find(".cg_gallery_view_sort_control"));$mainCGdivFullWindowConfigurationArea.find(".cg-cat-select-area").prependTo($mainCGdivHelperParent.find(".cg-cat-select-area-container"));$mainCGdivFullWindowConfigurationArea.removeClass("cg_opened");cgJsClass.gallery.categories.removeTitleAttributeGeneral(gid);cgJsClass.gallery.function.general.tools.replaceStateOnCloseOrMinimize();$mainCGdivHelperParent.prependTo(cgJsData[gid].vars.mainCGdivContainer).slideDown();$mainCGdivHelperParent.find(".cg_gallery_thumbs_control").removeClass("cg_hide");var $mainCGslider=$mainCGdivHelperParent.find(".mainCGslider");$mainCGslider.addClass("cg_hide");$mainCGdivHelperParent.find("#cgCenterImageFullwindowHeader"+gid).removeClass("cg_hide");if(cgJsData[gid].vars.currentLook=="blog"){$mainCGdivHelperParent.find(".cgCenterDiv .cg-center-image-close-fullwindow").addClass("cg-center-image-fullwindow").removeClass("cg-center-image-close-fullwindow")}else{$mainCGdivHelperParent.find("#cgCenterImageFullwindow"+gid).addClass("cg-center-image-fullwindow").removeClass("cg-center-image-close-fullwindow")}$mainCGdivHelperParent.find("#cgCenterImageClose"+gid).addClass("cg_hide");cgJsClass.gallery.vars.dom.body.removeClass("cg_body_overflow_hidden");cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll cg_body_overflow_hidden");cgJsData[gid].vars.cgCenterDivLastHeight=undefined;$mainCGdivHelperParent.find(".cg-center-image-fullwindow").show().removeClass("cg_hide");var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}if(cgJsData[gid].vars.openedRealIdOnClose&&sliderView&&!$closeButton){cgJsData[gid].vars.mainCGallery.addClass("cg_slider_view_hidden");cgJsData[gid].vars.cgCenterDiv.addClass("cg_slider_view_hidden")}if((cgJsData[gid].options.pro.SliderFullWindow==1||cgJsData[gid].options.visual.BlogLookFullWindow==1)&&cgJsData[gid].vars.previousLook!="blog"){if(cgJsData[gid].options.visual.BlogLookFullWindow==1){cgJsClass.gallery.blogLogic.reset(gid)}if(!sliderView){var step=cgJsClass.gallery.dynamicOptions.getCurrentStep(gid,cgJsData[gid].vars.openedRealIdOnClose);cgJsClass.gallery.dynamicOptions.checkStepsCutImageData(jQuery,step,false,true,gid);$mainCGslider.find(".cg_show").remove();cgJsClass.gallery.vars.hasToAppend=true;cgJsData[gid].vars.openedRealIdOnClose=0}}if(sliderView){if(cgJsData[gid].vars.$cg_further_images_container_top){cgJsData[gid].vars.$cg_further_images_container_top.addClass("cg_hide")}if(cgJsData[gid].vars.$cg_further_images_container_bottom){cgJsData[gid].vars.$cg_further_images_container_bottom.addClass("cg_hide")}}if(cgJsData[gid].vars.previousLookSlider==false){}$mainCGdivHelperParent.find(".mainCGdiv").css("width","100%");$mainCGdivHelperParent.find(".mainCGallery ").css("width","100%");$mainCGdivHelperParent.find(".mainCGdivHelperChild ").css("width","100%");$mainCGdivHelperParent.find(".cg-slider-range-container").remove();$mainCGdivHelperParent.find(".cg_further_images_container_as_text").addClass("cg_hide");$mainCGdivHelperParent.find(".cgCenterDiv").css("width","100%");cgJsData[gid].vars.mainCGdiv.find(".mainCGBackToGalleryButtonHrefContainer.isCGalleries,.cgGalleryName").removeClass("cg_hide");cgJsData[gid].vars.mainCGdiv.find(".cg_header").css("width","100%");if(cgJsData[gid].vars.currentLook!="blog"){cgJsClass.gallery.views.close(gid,false,false,true);if(sliderView&&!isNoInitOrder){cgJsClass.gallery.views.initOrderGallery(gid,true,null,openImage,false,false,false,sliderView,false,false)}else{var openPage=false;var isFromFullWindowSliderOrBlogView=false;if(cgJsData[gid].options.pro.SliderFullWindow==1||cgJsData[gid].options.visual.BlogLookFullWindow==1||cgJsClass.gallery.function.general.tools.isFullSizeSlideOutStartNormally(gid)){openPage=true;isFromFullWindowSliderOrBlogView=true}if(!isNoInitOrder){cgJsClass.gallery.views.initOrderGallery(gid,openPage,null,openImage,false,false,false,sliderView,false,isFromFullWindowSliderOrBlogView)}}}cgJsClass.gallery.vars.dom.html.addClass("cg_scroll_behaviour_initial");cgJsClass.gallery.vars.dom.body.addClass("cg_scroll_behaviour_initial");if(cgJsData[gid].vars.currentLook=="slider"){}$mainCGdivHelperParent.find("#cgViewHelper"+gid).get(0).scrollIntoView();cgJsClass.gallery.vars.dom.html.removeClass("cg_scroll_behaviour_initial");cgJsClass.gallery.vars.dom.body.removeClass("cg_scroll_behaviour_initial");cgJsData[gid].vars.mainCGdiv.removeClass("cg_fade_in cg_fade_in_2");cgJsData[gid].vars.mainCGdivFullWindowConfigurationArea.find(".cg-cat-select-area-show-less").remove();cgJsClass.gallery.views.functions.resetHeader(gid);cgJsClass.gallery.views.functions.checkHeader(gid);setTimeout(function(){if(cgJsData[gid].vars.currentLook!="blog"){cgJsData[gid].vars.mainCGdivContainer.css("height","unset");if(cgJsData[gid].vars.currentLook!="slider"){cgJsData[gid].vars.mainCGallery.removeClass("cg_hidden cg_invisible cg_blog_view_hidden cg_blog_view_hidden cg_slider_view_hidden");cgJsData[gid].vars.mainCGdiv.removeClass("cg_center_pointer_event_none")}}else{setTimeout(function(){cgJsClass.gallery.vars.dom.html.addClass("cg_scroll_behaviour_initial");cgJsClass.gallery.vars.dom.body.addClass("cg_scroll_behaviour_initial");cgJsClass.gallery.vars.dom.html.addClass("cg_no_scroll");cgJsData[gid].vars.mainCGdiv.addClass("cg_fade_in_2");setTimeout(function(){cgJsData[gid].vars.mainCGdiv.removeClass("cg_fade_in_2")},2200);cgJsData[gid].vars.mainCGdivContainer.css("height","unset");cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");cgJsClass.gallery.vars.dom.html.animate({},0,function(){cgJsClass.gallery.vars.dom.html.removeClass("cg_scroll_behaviour_initial");cgJsClass.gallery.vars.dom.body.removeClass("cg_scroll_behaviour_initial")})},50)}if(!cgJsData[gid].vars.openedRealIdOnClose&&cgJsData[gid].vars.currentLook!="blog"){cgJsData[gid].vars.mainCGallery.removeClass("cg_invisible").css("height","unset").addClass("cg_fade_in")}else if($closeButton&&cgJsData[gid].vars.currentLook=="blog"){cgJsData[gid].vars.mainCGallery.removeClass("cg_invisible").css("height","unset").addClass("cg_fade_in")}else if(cgJsData[gid].vars.currentLook=="blog"){cgJsData[gid].vars.mainCGallery.removeClass("cg_invisible").css("height","unset").addClass("cg_fade_in")}else{}if(cgJsData[gid].vars.openedRealIdOnClose&&sliderView&&!$closeButton){cgJsData[gid].vars.mainCGallery.removeClass("cg_slider_view_hidden");cgJsData[gid].vars.cgCenterDiv.removeClass("cg_slider_view_hidden")}},100);$mainCGdivHelperParent.find(".cg_sort_div .cg-gallery-upload").removeClass("cg_hide");$mainCGdivHelperParent.find(".cg-fullwindow-configuration-button").addClass("cg_hide");$mainCGdivHelperParent.find(".cg-fullscreen-button").addClass("cg_hide");$mainCGdivHelperParent.find(".cg-gallery-upload.cg-header-controls-show-only-full-window").addClass("cg_hide");if(cgJsData[gid].options.general.FullSize==1&&cgJsData[gid].options.general.FullSizeGallery==1){$mainCGdivHelperParent.find(".cgCenterDiv .cg-fullscreen-button").addClass("cg_hide")}cgJsData[gid].vars.mainCGallery.removeClass("cg_full_window");if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.init(jQuery,gid,null,null,null,true,false,false,false,true);var factor=cgJsData[gid].vars.widthmain/cgJsData[gid].vars.widthmainPrevious;cgJsClass.gallery.blogLogic.changeWidth(cgJsData[gid].vars.widthmain,factor,$mainCGdivHelperParent,gid)}cgJsData[gid].vars.cgCenterDivLastHeight=null;if(cgJsData[gid].vars.openedRealIdOnClose){cgJsData[gid].vars.mainCGallery.addClass("cg_invisible cg_hidden cg_blog_view_hidden cg_slider_view_hidden");if(sliderView){cgJsData[gid].vars.cgCenterDiv.addClass("cg_slider_view_hidden")}cgJsClass.gallery.function.general.tools.checkSkeletonLoaderToShow(gid);if(sliderView){}cgJsClass.gallery.vars.dom.html.addClass("cg_scroll_behaviour_initial");cgJsClass.gallery.vars.dom.body.addClass("cg_scroll_behaviour_initial");cgJsClass.gallery.vars.dom.html.animate({},0,function(){cgJsClass.gallery.vars.dom.html.addClass("cg_no_scroll")});var timeout=200;if(sliderView){timeout=1e3}if(cgJsData[gid].vars.currentLook=="blog"){var $cgCenterDiv=cgJsData[gid].vars.mainCGdiv.find('.cgCenterDivForBlogView[data-cg-real-id="'+cgJsData[gid].vars.openedRealIdOnClose+'"]').removeClass("cg_center_pointer_event_none");setTimeout(function(){cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");if(cgJsData[gid].vars.currentLook=="thumb"&&!sliderView){cgJsData[gid].vars.mainCGallery.addClass("cg_thumb_view")}cgJsData[gid].vars.mainCGallery.css("height","unset");if(sliderView){}cgJsData[gid].vars.mainCGallery.removeClass("cg_hide cg_hidden cg_invisible cg_blog_view_hidden cg_slider_view_hidden").addClass("cg_fade_in");if(sliderView){cgJsData[gid].vars.cgCenterDiv.removeClass("cg_slider_view_hidden")}cgJsData[gid].vars.closeEventInitWithDataCGrealIdCloseButton=false;cgJsData[gid].vars.mainCGdiv.removeClass("cg_center_pointer_event_none");cgJsClass.gallery.vars.dom.html.removeClass("cg_scroll_behaviour_initial");cgJsClass.gallery.vars.dom.body.removeClass("cg_scroll_behaviour_initial");$mainCGdivHelperParent.find("#cgViewHelper"+gid).get(0).scrollIntoView();cgJsData[gid].vars.mainCGdiv.addClass("cg_fade_in_2");setTimeout(function(){cgJsData[gid].vars.mainCGdiv.removeClass("cg_fade_in_2")},2200);cgJsData[gid].vars.mainCGdivContainer.css("height","unset");if(Object.keys(cgJsData[gid].vars.rawData).length<=cgJsData[gid].options.general.PicsPerSite&&cgJsData[gid].vars.lengthData!=0){cgJsData[gid].vars.$cg_further_images_container_top.addClass("cg_hide");cgJsData[gid].vars.$cg_further_images_container_bottom.addClass("cg_hide")}else{if(cgJsData[gid].vars.lengthData!=0){cgJsData[gid].vars.$cg_further_images_container_top.removeClass("cg_hide");cgJsData[gid].vars.$cg_further_images_container_bottom.removeClass("cg_hide")}}setTimeout(function(){if($cgCenterDiv.length){$cgCenterDiv.get(0).scrollIntoView();if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.removeVisibilityHiddenFromCgCenterDivBlogObjects(gid)}}},200);setTimeout(function(){cgJsClass.gallery.categories.checkIfShowMoreForCatAreaRequired(gid,true)},0)},0)}else{cgJsClass.gallery.vars.isFromFullWindowAndDataCgRealIdHasToBeOpened=true;if(cgJsData[gid].options.visual.BlogLookFullWindow==1){cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.addClass("cg_hide")}var $divToScroll=cgJsData[gid].vars.cgCenterDiv;if((cgJsData[gid].options.pro.SliderFullWindow==1||cgJsData[gid].options.visual.BlogLookFullWindow==1)&&!sliderView){$divToScroll=cgJsData[gid].imageObject[cgJsData[gid].vars.openedRealIdOnClose]}else if(cgJsClass.gallery.function.general.tools.isFullSizeSlideOutStartNormally(gid)&&!sliderView){$divToScroll=cgJsData[gid].imageObject[cgJsData[gid].vars.openedRealIdOnClose]}if(sliderView){$divToScroll=cgJsData[gid].vars.mainCGdiv}setTimeout(function(){cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");if(cgJsData[gid].vars.currentLook=="thumb"&&!sliderView){cgJsData[gid].vars.mainCGallery.addClass("cg_thumb_view")}cgJsData[gid].vars.mainCGallery.css("height","unset");cgJsData[gid].vars.mainCGdivContainer.css("height","unset");cgJsData[gid].vars.mainCGallery.removeClass("cg_hidden cg_invisible cg_blog_view_hidden cg_blog_view_hidden cg_slider_view_hidden");var setRemoveClassClasses=function(){if(sliderView){}cgJsClass.gallery.function.general.tools.hideSkeletonLoader(gid);if(sliderView){cgJsData[gid].vars.cgCenterDiv.removeClass("cg_slider_view_hidden")}cgJsData[gid].vars.mainCGallery.removeClass("cg_fade_in");cgJsData[gid].vars.mainCGallery.addClass("cg_fade_in");cgJsData[gid].vars.cgCenterDiv.addClass("cg_fade_in");cgJsData[gid].vars.closeEventInitWithDataCGrealIdCloseButton=false;cgJsData[gid].vars.mainCGdiv.removeClass("cg_center_pointer_event_none");cgJsClass.gallery.vars.dom.html.removeClass("cg_scroll_behaviour_initial");cgJsClass.gallery.vars.dom.body.removeClass("cg_scroll_behaviour_initial")};if(cgJsData[gid].vars.currentLook=="slider"){cgJsClass.gallery.vars.dom.html.animate({},0,function(){setRemoveClassClasses()})}else{if(cgJsData[gid].options.pro.SliderFullWindow==1||cgJsData[gid].options.visual.BlogLookFullWindow==1||cgJsClass.gallery.function.general.tools.isFullSizeSlideOutStartNormally(gid)){cgJsClass.gallery.vars.dom.html.animate({scrollTop:$divToScroll.offset().top-50+"px"},0,function(){setRemoveClassClasses()})}else{setRemoveClassClasses()}}cgJsClass.gallery.vars.isFromFullWindowAndDataCgRealIdHasToBeOpened=false;setTimeout(function(){cgJsClass.gallery.categories.checkIfShowMoreForCatAreaRequired(gid,true)},0)},timeout)}}else{if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.removeVisibilityHiddenFromCgCenterDivBlogObjects(gid)}setTimeout(function(){cgJsClass.gallery.categories.checkIfShowMoreForCatAreaRequired(gid,true)},0)}if(cgJsData[gid].vars.currentLook=="thumb"||cgJsData[gid].vars.currentLook=="height"){setTimeout(function(){cgJsData[gid].vars.mainCGdiv.get(0).scrollIntoView()},50)}setTimeout(function(){cgJsData[gid].vars.mainCGdiv.removeClass("cg_center_pointer_event_none")},2e3)};;cgJsClass.gallery.info.getInfo=function(realId,gid,setInfoSingleView,arrIndex,openPage,collectInfo,gidForSingleViewElements,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad){var uploadFolderUrl=cgJsData[gid].vars.uploadFolderUrl;if(cgJsData[gid].vars.openedRealId){cgJsData[gid].vars.jsonGetInfo=[]}console.trace();cgJsData[gid].vars.jsonGetInfo.push(jQuery.getJSON(uploadFolderUrl+"/contest-gallery/gallery-id-"+cgJsData[gid].vars.gidReal+"/json/image-info/image-info-"+realId+".json",{_:(new Date).getTime()}).done(function(data){cgJsClass.gallery.info.setInfo(realId,gid,setInfoSingleView,arrIndex,data,openPage,collectInfo,gidForSingleViewElements,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad)}))};;cgJsClass.gallery.info.setInfoFromEditImageData=function(gid,realId,data,catId,entryUrlAfterEdit){debugger;cgJsData[gid].vars.info[realId]=data;if(catId!==null){cgJsData[gid].vars.rawData[realId]["Category"]=catId}if(entryUrlAfterEdit){var url=location.origin+location.pathname;var lastChar=url.substr(url.length-1);if(lastChar=="/"){url=url.slice(0,-1)}if(url!=entryUrlAfterEdit){window.history.replaceState({},document.title,entryUrlAfterEdit)}}};cgJsClass.gallery.info.setInfoAll=function(gid,data,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues){var hasMainTitleGalleriesView=false;var hasSubTitleGalleriesView=false;var hasThirdTitleGalleriesView=false;for(var realId in cgJsData[gid].vars.rawData){if(!cgJsData[gid].vars.rawData.hasOwnProperty(realId)){break}if(cgJsData[gid].vars.isCGalleries){if(cgJsData[gid].vars.rawData[realId].MainTitleGalleriesView){hasMainTitleGalleriesView=true;cgJsData[gid].options.visual["Field1IdGalleryView"]="MainTitleGalleriesView"}if(cgJsData[gid].vars.rawData[realId].SubTitleGalleriesView){hasSubTitleGalleriesView=true;cgJsData[gid].options.visual["SubTitle"]="SubTitleGalleriesView"}if(cgJsData[gid].vars.rawData[realId].ThirdTitleGalleriesView){hasThirdTitleGalleriesView=true;cgJsData[gid].options.visual["ThirdTitle"]="ThirdTitleGalleriesView"}}}for(var realId in cgJsData[gid].vars.rawData){if(!cgJsData[gid].vars.rawData.hasOwnProperty(realId)){break}if(cgJsData[gid].vars.isCGalleries){if(!cgJsData[gid].vars.info[realId]){cgJsData[gid].vars.info[realId]={}}if(cgJsData[gid].vars.rawData[realId].MainTitleGalleriesView){cgJsData[gid].vars.info[realId]["MainTitleGalleriesView"]={"field-type":"text-f","field-title":"MainTitleGalleriesView","field-content":cgJsData[gid].vars.rawData[realId].MainTitleGalleriesView}}if(cgJsData[gid].vars.rawData[realId].SubTitleGalleriesView){cgJsData[gid].vars.info[realId]["SubTitleGalleriesView"]={"field-type":"text-f","field-title":"SubTitleGalleriesView","field-content":cgJsData[gid].vars.rawData[realId].SubTitleGalleriesView}}if(cgJsData[gid].vars.rawData[realId].ThirdTitleGalleriesView){cgJsData[gid].vars.info[realId]["ThirdTitleGalleriesView"]={"field-type":"text-f","field-title":"ThirdTitleGalleriesView","field-content":cgJsData[gid].vars.rawData[realId].ThirdTitleGalleriesView}}}else{cgJsClass.gallery.info.collectInfo(gid,realId,data[realId]);cgJsData[gid].vars.info[realId]=data[realId]}}cgJsClass.gallery.vars.isInfoDataAvailable=true;if(cgJsData[gid].vars.imageDataLengthAfterPreProcess){cgJsClass.gallery.sorting.showRandomButtonDelayed(gid,1500)}if(imageDataPassedArgumentsWithoutIsDoNotCheckSortValues){imageDataPassedArgumentsWithoutIsDoNotCheckSortValues.push(true);cgJsClass.gallery.getJson.imageData.apply(null,imageDataPassedArgumentsWithoutIsDoNotCheckSortValues)}};cgJsClass.gallery.info.setInfo=function(realId,gid,setInfoSingleView,arrIndex,data,firstLoad,collectInfo,gidForSingleViewElements,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad){var cgCenterDiv=cgJsData[gid].vars.cgCenterDiv;cgCenterDiv.find(".cg-top-bottom-arrow").addClass("cg_hide");debugger;if(data==null){data=[]}var infoSetDone=false;if(typeof cgJsData[gid].imageCheck[realId]=="undefined"){cgJsData[gid].imageCheck[realId]={};cgJsData[gid].imageCheck[realId]["has-no-bottom-space"]=cgJsClass.gallery.function.general.tools.checkHasNoBottomSpace(gid,data)}if($imageObject){if($imageObject.attr("data-cg-id")=="12590"){}}if(true){infoSetDone=true;cgJsData[gid].vars.info[realId]=data;cgJsClass.gallery.info.collectInfo(gid,realId,data);if(typeof cgJsData[gid].imageObject[realId]!="undefined"){var imageObject=cgJsData[gid].imageObject[realId];for(var fieldId in data){if(!data.hasOwnProperty(fieldId)){break}imageObject.find("figcaption").append(jQuery("<h4>"+data[fieldId]["field-title"]+"</h4>"));imageObject.find("figcaption").append(jQuery("<p>"+data[fieldId]["field-content"]+"</p>"));imageObject.find("figcaption").append(jQuery("<hr>"))}if(cgJsData[gid].options.visual["Field2IdGalleryView"]>=1){if(typeof data[cgJsData[gid].options.visual["Field2IdGalleryView"]]=="object"){if(typeof data[cgJsData[gid].options.visual["Field2IdGalleryView"]]["field-content"]!="undefined"){imageObject.find(".cg_append").attr("title",data[cgJsData[gid].options.visual["Field2IdGalleryView"]]["field-content"])}else{imageObject.find(".cg_append").attr("title","")}}else{if(cgJsData[gid].vars.isShowTagInGallery){var categoryId=cgJsData[gid].vars.rawData[realId]["Category"];if(categoryId>0){var title=cgJsData[gid].vars.categories[categoryId].Name}else{var title=cgJsClass.gallery.language[gid].Other}imageObject.find(".cg_append").attr("title",title)}else{imageObject.find(".cg_append").attr("title","")}}}}cgJsClass.gallery.info.setWatermarkGalleryView(realId,gid);if(collectInfo!==true){cgJsClass.gallery.info.setInfoGalleryView(realId,gid,false,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad)}else{cgJsClass.gallery.function.general.tools.checkIfSmallWidthImageObject(gid,$imageObject,null,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad)}if(setInfoSingleView==true){cgJsClass.gallery.views.setInfoSingleImageView(realId,gid,true,gidForSingleViewElements)}cgJsClass.gallery.info.setDeleteImageIcon(realId,gid);return}else{cgJsData[gid].vars.info[realId]=null;cgJsData[gid].fullImageInfoData[realId]=null;cgJsClass.gallery.info.collectInfo(gid,realId,data);if(cgJsData[gid].options.visual["Field2IdGalleryView"]>=1){if(typeof cgJsData[gid].imageObject[realId]!="undefined"){var imageObject=cgJsData[gid].imageObject[realId];imageObject.find(".cg_append").attr("title","")}}}cgJsClass.gallery.info.setDeleteImageIcon(realId,gid);cgJsClass.gallery.info.setWatermarkGalleryView(realId,gid);if(cgJsData[gid].options.visual["Field1IdGalleryView"]==cgJsData[gid].vars.categoriesUploadFormId&&infoSetDone==false&&firstLoad!=true||cgJsData[gid].vars.showCategories==true){cgJsClass.gallery.info.setInfoGalleryView(realId,gid,false,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad);return}else{cgJsClass.gallery.function.general.tools.checkIfSmallWidthImageObject(gid,$imageObject,null,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad)}};cgJsClass.gallery.info.setDeleteImageIcon=function(realId,gid,gidForSingleViewElements,isForCenterDivImage){var imageObject=cgJsData[gid].imageObject[realId];if(imageObject&&!isForCenterDivImage){if(cgJsData[gid].vars.isUserGallery){if(!imageObject.find(".cg_delete_user_image").length){var hideTillHover="";if(cgJsData[gid].options.general.ShowAlways!=1){hideTillHover="cg_hide_till_hover"}var infoTitleDiv=imageObject.find(".cg_gallery_info_title");if(!infoTitleDiv.length){infoTitleDiv=jQuery('<div data-cg-id="'+realId+'" data-cg-gid="'+gid+'" class="cg_gallery_info_title '+hideTillHover+'"></div>');infoTitleDiv.addClass("cg_gallery_info_title_no_title")}if(imageObject.find(".cg_gallery_info_content").length){infoTitleDiv.append('<div class="cg_delete_user_image_container" data-cg-tooltip="'+(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed?cgJsClass.gallery.language[gid].DeleteImages:cgJsClass.gallery.language[gid].DeleteImage)+'"><div class="cg_delete_user_image" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'"></div></div>')}else{infoTitleDiv.addClass("cg_is_user_gallery").append('<div class="cg_gallery_info_content"></div><div class="cg_delete_user_image_container" data-cg-tooltip="'+(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed?cgJsClass.gallery.language[gid].DeleteImages:cgJsClass.gallery.language[gid].DeleteImage)+'"><div class="cg_delete_user_image" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'"></div></div>');if(cgJsData[gid].vars.modernHover){imageObject.find(".cg_gallery_info ").prepend(infoTitleDiv)}else{imageObject.find("figure").append(infoTitleDiv)}}}}}else{if(cgJsData[gid].vars.isUserGallery&&isForCenterDivImage){var hideTillHover="";if(cgJsData[gid].options.general.ShowAlways!=1){hideTillHover="cg_hide_till_hover"}infoTitleDiv=jQuery('<div data-cg-id="'+realId+'" data-cg-gid="'+gid+'" class="cg_gallery_info_title '+hideTillHover+'"></div>');infoTitleDiv.addClass("cg_gallery_info_title_no_title");infoTitleDiv.addClass("cg_is_user_gallery").append('<div class="cg_delete_user_image_container" data-cg-tooltip="'+cgJsClass.gallery.language[gid].DeleteImage+'"><div class="cg_delete_user_image" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'"></div></div>');if(cgJsData[gid].vars.currentLook=="blog"){if(cgJsData[gid].cgCenterDivBlogObject[realId]){if(cgJsData[gid].cgCenterDivBlogObject[realId].find("#cgCenterImage"+gidForSingleViewElements+" .cg_gallery_info_title").length){cgJsData[gid].cgCenterDivBlogObject[realId].find("#cgCenterImage"+gidForSingleViewElements+" .cg_gallery_info_title").remove()}cgJsData[gid].cgCenterDivBlogObject[realId].find("#cgCenterImage"+gidForSingleViewElements).prepend(infoTitleDiv)}}else{if(cgJsData[gid].vars.cgCenterDiv.find("#cgCenterImage"+gidForSingleViewElements+" .cg_gallery_info_title").length){cgJsData[gid].vars.cgCenterDiv.find("#cgCenterImage"+gidForSingleViewElements+" .cg_gallery_info_title").remove()}cgJsData[gid].vars.cgCenterDiv.find("#cgCenterImage"+gidForSingleViewElements).prepend(infoTitleDiv)}}}};;cgJsClass.gallery.info.setWatermarkGalleryView=function(realId,gid){var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);if(isAlternativeFileType){return}var infoData=cgJsData[gid].vars.info[realId];for(var uploadFieldId in infoData){if(!infoData.hasOwnProperty(uploadFieldId)){break}if(cgJsData[gid].options.visual["WatermarkPosition"]){if(cgJsData[gid].forms.upload[uploadFieldId]){if(cgJsData[gid].imageObject[realId]&&cgJsData[gid].forms.upload[uploadFieldId]["WatermarkPosition"]){cgJsData[gid].imageObject[realId].find(".cg_watermark").remove();if(infoData[uploadFieldId]["field-content"]){var content=infoData[uploadFieldId]["field-content"].replace(/\\/g,"");var watermarkClass="cg_watermark-"+cgJsData[gid].options.visual["WatermarkPosition"];cgJsData[gid].imageObject[realId].find(".cg_figure").append('<div class="cg_watermark '+watermarkClass+'">'+content+"</div>")}}}}}for(var uploadFieldId in cgJsData[gid].forms.upload){if(!cgJsData[gid].forms.upload.hasOwnProperty(uploadFieldId)){break}if(cgJsData[gid].options.visual["WatermarkPosition"]){if(cgJsData[gid].forms.upload[uploadFieldId]){if(cgJsData[gid].forms.upload[uploadFieldId]["WatermarkPosition"]){if(cgJsData[gid].imageObject[realId]&&cgJsData[gid].forms.upload[uploadFieldId]["Field_Type"]=="selectc-f"){cgJsData[gid].imageObject[realId].find(".cg_watermark").remove();var Category=cgJsData[gid].vars.rawData[realId]["Category"];if(Category>0){var content=cgJsData[gid].vars.categories[Category].Name}else{var content=cgJsClass.gallery.language[gid].Other}content=content.replace(/\\/g,"");content=jQuery("<textarea />").html(content).text();var watermarkClass="cg_watermark-"+cgJsData[gid].options.visual["WatermarkPosition"];cgJsData[gid].imageObject[realId].find(".cg_figure").append('<div class="cg_watermark '+watermarkClass+'">'+content+"</div>")}}}}}};cgJsClass.gallery.info.setInfoGalleryView=function(realId,gid,isJustChangeTextAfterEdit,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad){if(typeof cgJsData[gid].infoGalleryViewAppended[realId]=="undefined"&&typeof cgJsData[gid].imageObject[realId]!="undefined"){var i=0;var titleVariant={};if(cgJsData[gid].options.visual["Field1IdGalleryView"]){i++;titleVariant[i]="main"}if(cgJsData[gid].options.visual["SubTitle"]){i++;titleVariant[i]="sub"}if(cgJsData[gid].options.visual["ThirdTitle"]){i++;titleVariant[i]="third"}var infoData=cgJsData[gid].vars.info[realId];var hideTillHover="";if(cgJsData[gid].options.general.ShowAlways!=1){hideTillHover="cg_hide_till_hover"}var position='class="cg_gallery_info_content"';if(cgJsData[gid].options.visual["TitlePositionGallery"]==2){position='class="cg_gallery_info_content cg_center"'}if(cgJsData[gid].options.visual["TitlePositionGallery"]==3){position='class="cg_gallery_info_content cg_right"'}var hadDeleteUserImageButton=false;var deleteUserImageButtonRemoved=false;var $deleteUserImageButtonClone=null;if($imageObject.find(".cg_gallery_info_title").length&&$imageObject.find(".cg_delete_user_image_container").length){hadDeleteUserImageButton=true;$deleteUserImageButtonClone=$imageObject.find(".cg_delete_user_image_container").clone()}$imageObject.find(".cg_gallery_info_title").remove();if(hadDeleteUserImageButton){deleteUserImageButtonRemoved=true}var $infoTitleDiv=jQuery('<div data-cg-id="'+realId+'" data-cg-gid="'+gid+'" class="cg_gallery_info_title cg_gallery_info_main_title '+hideTillHover+'"></div>');if(cgJsData[gid].vars.isCGalleries){cgJsData[gid].vars.mainCGdiv.find(".cg_header").addClass("cg_hide")}if(i==1){var $infoContent=jQuery('<div class="cg_gallery_info_content"></div>');if(titleVariant[1]=="main"){$infoContent.addClass("cg_gallery_info_content_main")}if(titleVariant[1]=="sub"){$infoContent.addClass("cg_gallery_info_content_sub")}if(titleVariant[1]=="third"){$infoContent.addClass("cg_gallery_info_content_third")}$infoTitleDiv.append($infoContent);$imageObject.find(".cg_gallery_info").prepend($infoTitleDiv)}if(i==2){$infoContent=jQuery('<div class="cg_gallery_info_content"></div>');if(titleVariant[1]=="main"){$infoContent.addClass("cg_gallery_info_content_main")}if(titleVariant[1]=="sub"){$infoContent.addClass("cg_gallery_info_content_sub")}if(titleVariant[1]=="third"){$infoContent.addClass("cg_gallery_info_content_third")}$infoTitleDiv.append($infoContent);var $infoContent=jQuery('<div class="cg_gallery_info_content"></div>');if(titleVariant[2]=="sub"){if(titleVariant[1]=="main"){$infoTitleDiv.prepend($infoContent);$infoContent.addClass("cg_gallery_info_content_sub")}else{$infoTitleDiv.append($infoContent)}}if(titleVariant[2]=="third"){$infoTitleDiv.append($infoContent);$infoContent.addClass("cg_gallery_info_content_third")}$imageObject.find(".cg_gallery_info").prepend($infoTitleDiv)}if(i==3){$infoContent=jQuery('<div class="cg_gallery_info_content"></div>');if(titleVariant[1]=="main"){$infoContent.addClass("cg_gallery_info_content_main")}$infoTitleDiv.append($infoContent);var $infoContent=jQuery('<div class="cg_gallery_info_content"></div>');if(titleVariant[2]=="sub"){$infoTitleDiv.prepend($infoContent);$infoContent.addClass("cg_gallery_info_content_sub")}var $infoContent=jQuery('<div class="cg_gallery_info_content"></div>');if(titleVariant[3]=="third"){$infoTitleDiv.append($infoContent);$infoContent.addClass("cg_gallery_info_content_third")}$imageObject.find(".cg_gallery_info").prepend($infoTitleDiv)}cgJsClass.gallery.info.setCategoryGalleryDiv(gid,realId,cgJsData[gid].options.visual["Field1IdGalleryView"],hideTillHover,isJustChangeTextAfterEdit,position,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad,"cg_gallery_info_content_main");cgJsClass.gallery.info.setCategoryGalleryDiv(gid,realId,cgJsData[gid].options.visual["SubTitle"],hideTillHover,isJustChangeTextAfterEdit,position,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad,"cg_gallery_info_content_sub");cgJsClass.gallery.info.setCategoryGalleryDiv(gid,realId,cgJsData[gid].options.visual["ThirdTitle"],hideTillHover,isJustChangeTextAfterEdit,position,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad,"cg_gallery_info_content_third");cgJsClass.gallery.info.setInfoGalleryDiv(infoData,cgJsData[gid].options.visual["Field1IdGalleryView"],gid,realId,hideTillHover,isJustChangeTextAfterEdit,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad,"cg_gallery_info_content_main");cgJsClass.gallery.info.setInfoGalleryDiv(infoData,cgJsData[gid].options.visual["SubTitle"],gid,realId,hideTillHover,isJustChangeTextAfterEdit,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad,"cg_gallery_info_content_sub");cgJsClass.gallery.info.setInfoGalleryDiv(infoData,cgJsData[gid].options.visual["ThirdTitle"],gid,realId,hideTillHover,isJustChangeTextAfterEdit,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad,"cg_gallery_info_content_third");if(deleteUserImageButtonRemoved){$infoTitleDiv.append($deleteUserImageButtonClone)}}};cgJsClass.gallery.info.setCategoryGalleryDiv=function(gid,realId,inputId,hideTillHover,isJustChangeTextAfterEdit,position,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad,infoContentClassName){if(inputId==cgJsData[gid].vars.categoriesUploadFormId){var infoTitleDiv=cgJsData[gid].imageObject[realId].find(".cg_gallery_info_title");if(cgJsData[gid].vars.isUserGallery){infoTitleDiv.addClass("cg_is_user_gallery")}var categoryId=cgJsData[gid].vars.rawData[realId]["Category"];if(categoryId>0&&cgJsData[gid].vars.categories[categoryId]){var content=cgJsData[gid].vars.categories[categoryId].Name}else{var content=cgJsClass.gallery.language[gid].Other}content=content.replace(/\\/g,"");content=jQuery("<textarea />").html(content).text();if(isJustChangeTextAfterEdit){if(cgJsData[gid].imageObject[realId]){if(cgJsData[gid].imageObject[realId].find(".cg_gallery_info_content."+infoContentClassName).length){cgJsData[gid].imageObject[realId].find(".cg_gallery_info_content."+infoContentClassName).empty().html(content)}else{cgJsData[gid].imageObject[realId].find(".cg_gallery_info_content."+infoContentClassName+" .cg_gallery_info_title").removeClass("cg_gallery_info_title_no_title").prepend("<div "+position+">"+content+"</div>")}}return}else{if(!cgJsData[gid].imageObject[realId].find(".cg_gallery_info_content."+infoContentClassName).length){infoTitleDiv.removeClass("cg_gallery_info_title_no_title").prepend("<div "+position+">"+content+"</div>")}else{infoTitleDiv.removeClass("cg_gallery_info_title_no_title").find(".cg_gallery_info_content."+infoContentClassName).html(content)}}var cgShowObject=cgJsData[gid].imageObject[realId];if(cgJsData[gid].vars.modernHover){cgJsClass.gallery.function.general.tools.setHeightForInfoBlockInGallery(gid,infoTitleDiv,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad,true,realId)}else{cgShowObject.find("figure").append(infoTitleDiv)}cgJsData[gid].infoGalleryViewAppended[realId]=true;return}};cgJsClass.gallery.info.setInfoGalleryDiv=function(infoData,inputFieldId,gid,realId,hideTillHover,isJustChangeTextAfterEdit,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad,infoContentClassName){var infoTitleDiv=cgJsData[gid].imageObject[realId].find(".cg_gallery_info_title");if(cgJsData[gid].vars.isUserGallery){infoTitleDiv.addClass("cg_is_user_gallery")}if(infoData){if(infoData[inputFieldId]&&infoData[inputFieldId]["field-content"]){infoTitleDiv.removeClass("cg_gallery_info_title_no_title");var content=infoData[inputFieldId]["field-content"].replace(/\\/g,"");content=jQuery("<textarea />").html(content).text();var position='class="cg_gallery_info_content '+infoContentClassName+' "';if(cgJsData[gid].options.visual["TitlePositionGallery"]==2){position='class="cg_gallery_info_content cg_center"'}if(cgJsData[gid].options.visual["TitlePositionGallery"]==3){position='class="cg_gallery_info_content cg_right"'}if(isJustChangeTextAfterEdit){if(cgJsData[gid].imageObject[realId]){if(infoData[inputFieldId]["field-type"]=="url-f"){cgJsData[gid].imageObject[realId].find(".cg_gallery_info_href").attr("href",content)}else{if(cgJsData[gid].imageObject[realId].find(".cg_gallery_info_content."+infoContentClassName).length){cgJsData[gid].imageObject[realId].find(".cg_gallery_info_content."+infoContentClassName).empty().html(content)}else{cgJsData[gid].imageObject[realId].find(".cg_gallery_info_title").removeClass("cg_gallery_info_title_no_title").find(".cg_gallery_info_content."+infoContentClassName).html(content)}}}return}if(infoData[inputFieldId]["field-content"]!=""){if(infoData[inputFieldId]["field-type"]=="url-f"){if(infoData[inputFieldId]["field-content"].indexOf("http")==-1){infoData[inputFieldId]["field-content"]="http://"+infoData[inputFieldId]["field-content"].trim()}infoTitleDiv.removeClass("cg_gallery_info_title_no_title").find(".cg_gallery_info_content."+infoContentClassName).wrap("<div "+position+'><a class="cg_gallery_info_href" href="'+infoData[inputFieldId]["field-content"]+'" target="_href">'+infoData[inputFieldId]["field-title"].trim()+"</a></div>")}else{infoTitleDiv.removeClass("cg_gallery_info_title_no_title").find(".cg_gallery_info_content."+infoContentClassName).html(content)}}else{if(!cgJsData[gid].vars.isUserGallery){infoTitleDiv.removeClass("cg_gallery_info_title_no_title").find(".cg_gallery_info_content."+infoContentClassName).text("");infoTitleDiv.css({height:0,padding:0})}if(cgJsData[gid].vars.isUserGallery){infoTitleDiv.removeClass("cg_gallery_info_title_no_title").find(".cg_gallery_info_content."+infoContentClassName).text("")}cgJsClass.gallery.info.setBackgroundNoneIfRequired(gid,realId)}var cgShowObject=cgJsData[gid].imageObject[realId];if(cgJsData[gid].vars.modernHover){cgJsClass.gallery.function.general.tools.setHeightForInfoBlockInGallery(gid,infoTitleDiv,$imageObject,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad,true,realId)}else{cgShowObject.find("figure").append(infoTitleDiv)}cgJsData[gid].infoGalleryViewAppended[realId]=true;return}else{cgJsClass.gallery.function.general.tools.checkIfSmallWidthImageObject(gid,$imageObject,null,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad)}}else{cgJsClass.gallery.function.general.tools.checkIfSmallWidthImageObject(gid,$imageObject,null,heightFromImageObjectSetInViewLoad,widthFromImageObjectSetInViewLoad)}};cgJsClass.gallery.info.setBackgroundNoneIfRequired=function(gid,realId){if(cgJsData[gid].options.general.AllowComments==0&&cgJsData[gid].options.general.AllowRating==0&&cgJsData[gid].options.general.FbLikeGallery==0&&cgJsData[gid].vars.modernHover){if(cgJsData[gid].imageObject[realId]){cgJsData[gid].imageObject[realId].find(".cg_gallery_info").addClass("cg_background_none")}}};;cgJsClass.gallery.info.checkInfoSingleImageView=function(realId,gid,order,isBlogView,gidForElements){if(typeof cgJsData[gid].vars.info[realId]=="undefined"){cgJsClass.gallery.info.getInfo(realId,gid,true,order,false,false,gidForElements)}else{cgJsClass.gallery.views.setInfoSingleImageView(realId,gid,order,gidForElements)}};cgJsClass.gallery.views.setWatermarkSingleImageView=function(realId,gid,data,$cgCenterDiv){var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);if(isAlternativeFileType){return}for(var uploadFieldId in data){if(!data.hasOwnProperty(uploadFieldId)){break}if(cgJsData[gid].options.visual["WatermarkPosition"]){if(cgJsData[gid].forms.upload[uploadFieldId]){if(cgJsData[gid].forms.upload[uploadFieldId]["WatermarkPosition"]){$cgCenterDiv.find(".cg_watermark").remove();if(data[uploadFieldId]["field-content"]){var content=data[uploadFieldId]["field-content"].replace(/\\/g,"");var watermarkClass="cg_watermark-"+cgJsData[gid].options.visual["WatermarkPosition"];$cgCenterDiv.find(".cg-center-image").append('<div class="cg_watermark '+watermarkClass+'">'+content+"</div>")}}}}}for(var uploadFieldId in cgJsData[gid].forms.upload){if(!cgJsData[gid].forms.upload.hasOwnProperty(uploadFieldId)){break}if(cgJsData[gid].options.visual["WatermarkPosition"]){if(cgJsData[gid].forms.upload[uploadFieldId]){if(cgJsData[gid].forms.upload[uploadFieldId]["WatermarkPosition"]){if(cgJsData[gid].forms.upload[uploadFieldId]["Field_Type"]=="selectc-f"){$cgCenterDiv.find(".cg_watermark").remove();var Category=cgJsData[gid].vars.rawData[realId]["Category"];if(Category>0&&cgJsData[gid].vars.categories[Category]){var content=cgJsData[gid].vars.categories[Category].Name}else{var content=cgJsClass.gallery.language[gid].Other}content=content.replace(/\\/g,"");content=jQuery("<textarea />").html(content).text();var watermarkClass="cg_watermark-"+cgJsData[gid].options.visual["WatermarkPosition"];$cgCenterDiv.find(".cg-center-image").append('<div class="cg_watermark '+watermarkClass+'">'+content+"</div>")}}}}}};cgJsClass.gallery.views.setInfoSingleImageView=function(realId,gid,infoCatched,gidForElements){var $cgCenterDiv=cgJsData[gid].vars.mainCGdiv.find("#cgCenterDiv"+gidForElements);$cgCenterDiv.find("#cgCenterImageInfoDiv"+gidForElements).addClass("cg_hide");$cgCenterDiv.find("#cgCenterImageInfoDiv"+gidForElements).empty();$cgCenterDiv.find("#cgCenterImageInfoDivTitle"+gidForElements).addClass("cg_hide");var append=false;var thereIsImageInfo=false;if(typeof cgJsData[gid].vars.info[realId]=="undefined"&&infoCatched!==true){cgJsClass.gallery.info.getInfo(realId,gid,true);return}var data=cgJsData[gid].vars.info[realId];if(!cgJsData[gid].vars.isUserGalleryAndHasFieldsToEdit){$cgCenterDiv.find("#cgCenterImageInfoEditIcon"+gid).addClass("cg_hide")}else{$cgCenterDiv.find("#cgCenterImageInfoEditIcon"+gid).removeClass("cg_hide")}for(var index in cgJsData[gid].singleViewOrder){if(!cgJsData[gid].singleViewOrder.hasOwnProperty(index)){break}cgJsData[gid].singleViewOrder[index].append=null}cgJsClass.gallery.views.setWatermarkSingleImageView(realId,gid,data,$cgCenterDiv);for(var i in data){if(!data.hasOwnProperty(i)){break}var fieldId=i;if(data[i]["field-content"]){if(cgJsData[gid].forms.upload.hasOwnProperty(i)){if(cgJsData[gid].forms.upload[i].Show_Slider==1){thereIsImageInfo=true;cgJsClass.gallery.vars.thereIsImageInfo=true;if(append==false){append=true}var title=data[i]["field-title"].replace(/\\/g,"");var content=data[i]["field-content"].replace(/\\/g,"");content=jQuery("<textarea />").html(content).text();if(data[i]["field-type"]=="url-f"){if(content.indexOf("http")==-1){content="http://"+content}var $infoContent=jQuery('<div class="cg-center-image-info-div"><p><a href="'+content+'" target="_blank">'+title+"</a></p></div>")}else{var $infoContent=jQuery('<div class="cg-center-image-info-div"><p>'+title+':</p><p class="cg-center-image-info-div-content">'+content+"</p></div>")}for(var index in cgJsData[gid].singleViewOrder){if(!cgJsData[gid].singleViewOrder.hasOwnProperty(index)){break}if(cgJsData[gid].singleViewOrder[index].id==fieldId){cgJsData[gid].singleViewOrder[index].append=$infoContent.attr("data-cg-single-view-order",index)}}}}}}var Category=cgJsData[gid].vars.rawData[realId]["Category"];var categoryContentToAppear="";if((Category>0&&cgJsData[gid].vars.showCategories==true||cgJsData[gid].vars.showCategories==true&&Category==0)&&cgJsData[gid].vars.categoriesUploadFormField_Show_Slider==1){var title=cgJsData[gid].vars.categoriesUploadFormTitle.replace(/\\/g,"");if(Category>0&&cgJsData[gid].vars.categories[Category]){var content=cgJsData[gid].vars.categories[Category].Name}else{var content=cgJsClass.gallery.language[gid].Other}var content=content.replace(/\\/g,"");content=jQuery("<textarea />").html(content).text();categoryContentToAppear=content;var $infoContent=jQuery('<div class="cg-center-image-info-div"><p>'+title+':</p><p class="cg-center-image-info-div-content">'+content+"</p></div>");for(var index in cgJsData[gid].singleViewOrder){if(!cgJsData[gid].singleViewOrder.hasOwnProperty(index)){break}if(cgJsData[gid].singleViewOrder[index].id==cgJsData[gid].vars.categoriesUploadFormId){cgJsData[gid].singleViewOrder[index].append=$infoContent.attr("data-cg-single-view-order",index);append=true}}}if(append==true){for(var index in cgJsData[gid].singleViewOrder){if(!cgJsData[gid].singleViewOrder.hasOwnProperty(index)){break}if(cgJsData[gid].singleViewOrder[index].append!=null){$cgCenterDiv.find("#cgCenterImageInfoDiv"+gidForElements).append(jQuery(cgJsData[gid].singleViewOrder[index].append))}}if(cgJsData[gid].vars.translateX){$cgCenterDiv.find("#cgCenterImageInfoDivTitle"+gidForElements).removeClass("cg_hide")}else{$cgCenterDiv.find("#cgCenterImageInfoDivTitle"+gidForElements).removeClass("cg_hide")}$cgCenterDiv.find("#cgCenterImageInfoDiv"+gidForElements).removeClass("cg_hide")}if(cgJsData[gid].vars.isUserGallery&&cgJsData[gid].vars.isUserGalleryAndHasFieldsToEdit){$cgCenterDiv.find("#cgCenterImageInfoDiv"+gidForElements).empty();for(var fieldOrder in cgJsData[gid].forms.uploadUserEditFieldsSortedByFieldOrder){if(!cgJsData[gid].forms.uploadUserEditFieldsSortedByFieldOrder.hasOwnProperty(fieldOrder)){break}var fieldId=cgJsData[gid].forms.uploadUserEditFieldsSortedByFieldOrder[fieldOrder]["fieldId"];var Field_Type=cgJsData[gid].forms.uploadUserEditFieldsSortedByFieldOrder[fieldOrder]["Field_Type"];var titleForUserSingleImageView=cgJsData[gid].forms.uploadUserEditFieldsSortedByFieldOrder[fieldOrder].Field_Content.titel;titleForUserSingleImageView=titleForUserSingleImageView.replace(/\\/g,"");var $infoContent=jQuery('<div class="cg-center-image-info-div"><p>'+titleForUserSingleImageView+":</p></div>");if(Field_Type=="selectc-f"){if(categoryContentToAppear){categoryContentToAppear=categoryContentToAppear.replace(/\\/g,"");$infoContent.append('<p class="cg-center-image-info-div-content">'+categoryContentToAppear+"</p>")}else{$infoContent.append('<p class="cg-center-image-info-div-content">...</p>')}}else{if(cgJsData[gid].vars.info[realId]){if(cgJsData[gid].vars.info[realId][fieldId]){if(cgJsData[gid].vars.info[realId][fieldId]["field-content"]){var contentToAppear=cgJsData[gid].vars.info[realId][fieldId]["field-content"];contentToAppear=contentToAppear.replace(/\\/g,"");$infoContent.append('<p class="cg-center-image-info-div-content">'+contentToAppear+"</p>")}else{$infoContent.append('<p class="cg-center-image-info-div-content">...</p>')}}else{$infoContent.append('<p class="cg-center-image-info-div-content">...</p>')}}else{$infoContent.append('<p class="cg-center-image-info-div-content">...</p>')}}$cgCenterDiv.find("#cgCenterImageInfoDiv"+gidForElements).append($infoContent);$cgCenterDiv.find("#cgCenterImageInfoDiv"+gidForElements).removeClass("cg_hide")}}if(thereIsImageInfo==true){cgJsClass.gallery.views.checkIfTopBottomArrowsRequired(gid,gidForElements)}else{if(cgJsData[gid].vars.isUserGallery){cgJsClass.gallery.views.checkIfTopBottomArrowsRequired(gid,gidForElements)}}if($cgCenterDiv.find("#cgCenterImageInfoDiv"+gidForElements).find(".cg-center-image-info-div").length){$cgCenterDiv.find("#cgCenterImageInfoDivParent"+gidForElements).removeClass("cgCenterImageNoInfo");$cgCenterDiv.find("#cgCenterImageCommentsDivParent"+gidForElements).removeClass("cgCenterImageNoInfo")}else{$cgCenterDiv.find("#cgCenterImageInfoDivParent"+gidForElements).addClass("cgCenterImageNoInfo");$cgCenterDiv.find("#cgCenterImageCommentsDivParent"+gidForElements).addClass("cgCenterImageNoInfo")}};cgJsClass.gallery.views.checkIfTopBottomArrowsRequired=function(gid,gidForElements,isMakeInstant){var timeout=300;if(isMakeInstant){timeout=0}var $cgCenterDiv=cgJsData[gid].vars.mainCGdiv.find("#cgCenterDiv"+gidForElements);$cgCenterDiv.find(".cg-center-image-info-info-separator").removeClass("cg_hide");setTimeout(function(){var collectedHeight=0;var paddingTop=parseInt($cgCenterDiv.find("#cgCenterImageInfoDiv"+gidForElements).css("paddingTop"));var paddingBottom=parseInt($cgCenterDiv.find("#cgCenterImageInfoDiv"+gidForElements).css("paddingBottom"));$cgCenterDiv.find(".cg-center-image-info-div").each(function(){collectedHeight=collectedHeight+jQuery(this).outerHeight(true)});collectedHeight=collectedHeight+paddingTop+paddingBottom;if(collectedHeight>300){$cgCenterDiv.find(".cg-center-image-comments-div-show-more-info").removeClass("cg_hide");$cgCenterDiv.find(".cg-center-image-info-div-container").addClass("cg-center-image-comments-div-show-more-available");if(!$cgCenterDiv.find(".cg-center-image-info-div-parent").hasClass("cg_edit")){$cgCenterDiv.find(".cg-center-image-info-save-icon-text-container").addClass("cg_hide")}}else{if(isMakeInstant){$cgCenterDiv.find(".cg-center-image-comments-div-show-more-info").addClass("cg_hide");$cgCenterDiv.find(".cg-center-image-info-div-container").removeClass("cg-center-image-comments-div-show-more-available")}}},timeout)};;cgJsClass.gallery.info.collectInfo=function(gid,realId,data){if(!data){data=[]}if(typeof cgJsData[gid].vars.rawData[realId]!="undefined"){if(Object.keys(data).length>0){var collectDataInfo=realId+";";for(var fieldId in data){if(!data.hasOwnProperty(fieldId)){break}if(collectDataInfo==""){collectDataInfo+=data[fieldId]["field-content"]}else{collectDataInfo+=" ; "+data[fieldId]["field-content"]}}if(Object.keys(cgJsData[gid].vars.categories).length>=1){collectDataInfo=cgJsClass.gallery.info.collectCategory(gid,realId,collectDataInfo)}collectDataInfo+=" ; "+cgJsData[gid].vars.rawData[realId]["NamePic"];collectDataInfo+=" ; "+cgJsData[gid].vars.rawData[realId]["post_name"];collectDataInfo+=" ; "+cgJsData[gid].vars.rawData[realId]["post_title"];if(cgJsData[gid].vars.rawData[realId]["Exif"]){if(cgJsData[gid].vars.rawData[realId]["Exif"].hasOwnProperty("ApertureFNumber")){collectDataInfo+=" ; "+cgJsData[gid].vars.rawData[realId]["Exif"]["ApertureFNumber"]}if(cgJsData[gid].vars.rawData[realId]["Exif"].hasOwnProperty("ExposureTime")){collectDataInfo+=" ; "+cgJsData[gid].vars.rawData[realId]["Exif"]["ExposureTime"]}if(cgJsData[gid].vars.rawData[realId]["Exif"].hasOwnProperty("FocalLength")){collectDataInfo+=" ; "+cgJsData[gid].vars.rawData[realId]["Exif"]["FocalLength"]}if(cgJsData[gid].vars.rawData[realId]["Exif"].hasOwnProperty("ISOSpeedRatings")){collectDataInfo+=" ; "+cgJsData[gid].vars.rawData[realId]["Exif"]["ISOSpeedRatings"]}if(cgJsData[gid].vars.rawData[realId]["Exif"].hasOwnProperty("MakeAndModel")){collectDataInfo+=" ; "+cgJsData[gid].vars.rawData[realId]["Exif"]["MakeAndModel"]}if(cgJsData[gid].vars.rawData[realId]["Exif"].hasOwnProperty("Model")){collectDataInfo+=" ; "+cgJsData[gid].vars.rawData[realId]["Exif"]["Model"]}}cgJsData[gid].fullImageInfoData[realId]=collectDataInfo}else{cgJsData[gid].vars.info[realId]=null;cgJsData[gid].fullImageInfoData[realId]=null;var collectDataInfo=realId+";";if(Object.keys(cgJsData[gid].vars.categories).length>=1){collectDataInfo=cgJsClass.gallery.info.collectCategory(gid,realId,collectDataInfo)}collectDataInfo+=" ; "+cgJsData[gid].vars.rawData[realId]["NamePic"];collectDataInfo+=" ; "+cgJsData[gid].vars.rawData[realId]["post_name"];collectDataInfo+=" ; "+cgJsData[gid].vars.rawData[realId]["post_title"];cgJsData[gid].fullImageInfoData[realId]=collectDataInfo}}};cgJsClass.gallery.info.collectCategory=function(gid,realId,collectDataInfo){if(typeof cgJsData[gid].vars.rawData[realId]!="undefined"){if(cgJsData[gid].vars.rawData[realId]["Category"]>0){var category=cgJsData[gid].vars.rawData[realId]["Category"];if(typeof cgJsData[gid].vars.categories[category]!="undefined"){collectDataInfo+=" ; "+cgJsData[gid].vars.categories[category]["Name"]}}else if(cgJsData[gid].vars.categoriesLength>=1&&cgJsData[gid].options.pro.ShowOther==1){collectDataInfo+=" ; "+cgJsClass.gallery.language[gid].Other}return collectDataInfo}};;cgJsClass.gallery.views.switchView={init:function(){if(cgJsClass.gallery.vars.eventSwitchViewInit){return}else{cgJsClass.gallery.vars.eventSwitchViewInit=true}jQuery(document).on("click",".cg_header .cg_gallery_thumbs_control .cg_view_switcher",function(){var $element=jQuery(this);if($element.hasClass("cg_view_switcher_on")){return}$element.closest(".cg_gallery_thumbs_control").addClass("cg_pointer_events_none");var mainCGallery=$element.closest(".mainCGdiv");var gid=mainCGallery.attr("data-cg-gid");if(cgJsData[gid].vars.openedRealId>0&&cgJsData[gid].vars.currentLook!="blog"){cgJsClass.gallery.views.close(gid)}cgJsData[gid].vars.openedRealId=0;cgJsData[gid].vars.mainCGallery.removeClass("cg_thumb_view");cgJsData[gid].vars.mainCGdiv.removeClass("cg_margin_0_auto");cgJsData[gid].vars.cgCenterDivLastHeight=null;cgJsClass.gallery.vars.switchViewsClicked=true;cgJsData[gid].vars.openedGalleryImageOrder=null;var $mainCGdiv=cgJsData[gid].vars.mainCGdiv;if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.reset(gid)}if(cgJsData[gid].vars.lengthData==0){$mainCGdiv.find("#cgFurtherImagesContainerDivBottom"+gid).addClass("cg_hide")}var $mainCGdivContainerParent=cgJsData[gid].vars.mainCGdivContainer.parent();if(!cgJsClass.gallery.vars.fullwindow){var widthParentBefore=$mainCGdivContainerParent.css("width");$mainCGdivContainerParent.css("width",cgJsData[gid].vars.mainCGdivContainer.width()+"px")}var previousLook=cgJsData[gid].vars.currentLook;$mainCGdiv.find(".cg_gallery_thumbs_control").height($mainCGdiv.find(".cg_gallery_thumbs_control").height());cgJsData[gid].vars.cgCenterDivLastHeight=null;mainCGallery.find(".cg_view_switcher_on").addClass("cg_hide");mainCGallery.find(".cg_view_switcher_off").removeClass("cg_hide");mainCGallery.find(".mainCGslider").addClass("cg_hide");$element.addClass("cg_hide");var $step=cgJsData[gid].vars.mainCGdiv.find("#cgFurtherImagesContainerDiv"+gid).find('.cg_further_images[data-cg-step="1"]').removeClass("cg_further_images_selected");if(!$element.hasClass("cg_view_slider")){cgJsData[gid].vars.mainCGdiv.removeClass("cg-slider-view");cgJsData[gid].vars.mainCGallery.removeClass("cg_slider")}if($element.hasClass("cg_view_height")){$mainCGdiv.find(".cg_further_images_container").removeClass("cg_hide");var id=mainCGallery.find(".cg_view_switcher.cg_view_height.cg_view_switcher_on").removeClass("cg_hide").attr("id");$element.closest(".cg_gallery_thumbs_control").find(".cg_view_switcher:not(#"+id+")").addClass("cg_skeleton_loader");cgJsData[gid].vars.currentLook="height";if($step.length>=1&&cgJsData[gid].vars.sorting!="search"){$step.addClass("cg_view_change").click()}else{if(previousLook=="slider"){cgJsClass.gallery.vars.hasToAppend=true}cgJsClass.gallery.heightLogic.init(jQuery,gid,null,null,null,true);cgJsClass.gallery.vars.hasToAppend=false}}if($element.hasClass("cg_view_thumb")){$mainCGdiv.find(".cg_further_images_container").removeClass("cg_hide");var id=mainCGallery.find(".cg_view_switcher.cg_view_thumb.cg_view_switcher_on").removeClass("cg_hide").attr("id");$element.closest(".cg_gallery_thumbs_control").find(".cg_view_switcher:not(#"+id+")").addClass("cg_skeleton_loader");cgJsData[gid].vars.currentLook="thumb";if($step.length>=1&&cgJsData[gid].vars.sorting!="search"){$step.addClass("cg_view_change").click()}else{if(previousLook=="slider"){cgJsClass.gallery.vars.hasToAppend=true}cgJsClass.gallery.thumbLogic.init(jQuery,gid,null,null,null,true);cgJsClass.gallery.vars.hasToAppend=false}}if($element.hasClass("cg_view_blog")){if(cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.mainCGdiv.removeClass("cg_display_inline_block");cgJsData[gid].vars.mainCGdiv.addClass("cg_margin_0_auto")}$mainCGdiv.find(".cg_further_images_container").removeClass("cg_hide");var id=mainCGallery.find(".cg_view_switcher.cg_view_blog.cg_view_switcher_on").removeClass("cg_hide").attr("id");$element.closest(".cg_gallery_thumbs_control").find(".cg_view_switcher:not(#"+id+")").addClass("cg_skeleton_loader");cgJsData[gid].vars.currentLook="blog";cgJsData[gid].vars.openedRealId=0;if($step.length>=1&&cgJsData[gid].vars.sorting!="search"){$step.addClass("cg_view_change").click()}else{cgJsClass.gallery.blogLogic.init(jQuery,gid,null,null,null,true)}}if($element.hasClass("cg_view_row")){$mainCGdiv.find(".cg_further_images_container").removeClass("cg_hide");var id=mainCGallery.find(".cg_view_switcher.cg_view_row.cg_view_switcher_on").removeClass("cg_hide").attr("id");$element.closest(".cg_gallery_thumbs_control").find(".cg_view_switcher:not(#"+id+")").addClass("cg_skeleton_loader");cgJsData[gid].vars.currentLook="row";if($step.length>=1&&cgJsData[gid].vars.sorting!="search"){$step.addClass("cg_view_change").click()}else{if(previousLook=="slider"){cgJsClass.gallery.vars.hasToAppend=true}cgJsClass.gallery.rowLogic.init(jQuery,gid,null,null,null,true);cgJsClass.gallery.vars.hasToAppend=false}}if($element.hasClass("cg_view_slider")){cgJsData[gid].vars.cgCenterDiv.find("#cgCenterArrowLeft"+gid).addClass("cg-center-arrow-left").removeClass("cg-center-arrow-left-prev-step");$mainCGdiv.find(".cg_further_images_container").addClass("cg_hide");var id=mainCGallery.find(".cg_view_switcher.cg_view_slider.cg_view_switcher_on").removeClass("cg_hide").attr("id");$element.closest(".cg_gallery_thumbs_control").find(".cg_view_switcher:not(#"+id+")").addClass("cg_skeleton_loader");cgJsData[gid].vars.currentLook="slider";cgJsClass.gallery.vars.hasToAppend=true;cgJsClass.gallery.views.switchView.sortViewSlider(gid);cgJsClass.gallery.thumbLogic.init(jQuery,gid,true,null,null,null,true)}cgJsClass.gallery.vars.switchViewsClicked=false;if(!cgJsClass.gallery.vars.fullwindow){$mainCGdivContainerParent.css("width","")}setTimeout(function(){$element.closest(".cg_gallery_thumbs_control").find(".cg_view_switcher").removeClass("cg_skeleton_loader");$element.closest(".cg_gallery_thumbs_control").removeClass("cg_pointer_events_none")},2500)})},sortViewSlider:function(gid,fullImageDataToUseForSingleImageView){if(typeof fullImageDataToUseForSingleImageView!=="undefined"){if(cgJsData[gid].vars.sorting=="random"){fullImageDataToUseForSingleImageView=cgJsData[gid].vars.sortedRandomFullData}else if(cgJsData[gid].vars.sorting=="custom"){fullImageDataToUseForSingleImageView=cgJsData[gid].vars.sortedCustomFullData}else if(cgJsData[gid].vars.sorting=="date-desc"){fullImageDataToUseForSingleImageView=cgJsData[gid].vars.sortedDateDescFullData}else if(cgJsData[gid].vars.sorting=="date-asc"){fullImageDataToUseForSingleImageView=cgJsData[gid].vars.sortedDateAscFullData}else if(cgJsData[gid].vars.sorting=="rating-desc"){fullImageDataToUseForSingleImageView=cgJsData[gid].vars.sortedRatingDescFullData}else if(cgJsData[gid].vars.sorting=="rating-asc"){fullImageDataToUseForSingleImageView=cgJsData[gid].vars.sortedRatingAscFullData}else if(cgJsData[gid].vars.sorting=="rating-desc-average"){fullImageDataToUseForSingleImageView=cgJsData[gid].vars.sortedRatingDescAverageFullData}else if(cgJsData[gid].vars.sorting=="rating-asc-average"){fullImageDataToUseForSingleImageView=cgJsData[gid].vars.sortedRatingAscAverageFullData}else if(cgJsData[gid].vars.sorting=="rating-desc-sum"){fullImageDataToUseForSingleImageView=cgJsData[gid].vars.sortedRatingDescSumFullData}else if(cgJsData[gid].vars.sorting=="rating-asc-sum"){fullImageDataToUseForSingleImageView=cgJsData[gid].vars.sortedRatingAscSumFullData}else if(cgJsData[gid].vars.sorting=="comments-desc"){fullImageDataToUseForSingleImageView=cgJsData[gid].vars.sortedCommentsDescFullData}else if(cgJsData[gid].vars.sorting=="comments-asc"){fullImageDataToUseForSingleImageView=cgJsData[gid].vars.sortedCommentsAscFullData}else{fullImageDataToUseForSingleImageView=cgJsData[gid].fullImageDataFiltered}return fullImageDataToUseForSingleImageView}else{if(cgJsData[gid].vars.sorting=="random"){cgJsData[gid].image=cgJsData[gid].vars.sortedRandomFullData}else if(cgJsData[gid].vars.sorting=="custom"){cgJsData[gid].image=cgJsData[gid].vars.sortedCustomFullData}else if(cgJsData[gid].vars.sorting=="date-desc"){cgJsData[gid].image=cgJsData[gid].vars.sortedDateDescFullData}else if(cgJsData[gid].vars.sorting=="date-asc"){cgJsData[gid].image=cgJsData[gid].vars.sortedDateAscFullData}else if(cgJsData[gid].vars.sorting=="rating-desc"){cgJsData[gid].image=cgJsData[gid].vars.sortedRatingDescFullData}else if(cgJsData[gid].vars.sorting=="rating-asc"){cgJsData[gid].image=cgJsData[gid].vars.sortedRatingAscFullData}else if(cgJsData[gid].vars.sorting=="rating-desc-average"){cgJsData[gid].image=cgJsData[gid].vars.sortedRatingDescAverageFullData}else if(cgJsData[gid].vars.sorting=="rating-asc-average"){cgJsData[gid].image=cgJsData[gid].vars.sortedRatingAscAverageFullData}else if(cgJsData[gid].vars.sorting=="rating-desc-sum"){cgJsData[gid].image=cgJsData[gid].vars.sortedRatingDescSumFullData}else if(cgJsData[gid].vars.sorting=="rating-asc-sum"){cgJsData[gid].image=cgJsData[gid].vars.sortedRatingAscSumFullData}else if(cgJsData[gid].vars.sorting=="comments-desc"){cgJsData[gid].image=cgJsData[gid].vars.sortedCommentsDescFullData}else if(cgJsData[gid].vars.sorting=="comments-asc"){cgJsData[gid].image=cgJsData[gid].vars.sortedCommentsAscFullData}else{cgJsClass.gallery.sorting.reset(gid)}}},switch:function(){}};;cgJsClass.gallery.heightLogic={init:function(jQuery,gid,openPage,calledFromUpload,openImage,stepChange,viewChange,randomButtonClicked,isCopyUploadToAnotherGallery,isFromResize,isFromFullWindowSliderOrBlogView){var gid=gid;cgJsData[gid].vars.mainCGdiv.addClass("cg_height_view");cgJsData[gid].vars.mainCGallery.css("gap","");cgJsData[gid].vars.mainCGallery.css("column-gap","");cgJsData[gid].vars.currentLook="height";if(cgJsData[gid].image.length<1){return}var $=jQuery;var HeightLookHeight=parseInt(cgJsData[gid].options.general.HeightLookHeight);cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.addClass("cg_hide");var newHeight=0;var $mainCGallery=cgJsData[gid].vars.mainCGallery;var $mainCGslider=cgJsData[gid].vars.mainCGallery.find("#mainCGslider"+gid);var $mainCGdiv=cgJsData[gid].vars.mainCGdiv;$mainCGallery.removeClass("cg_blog cg_slider");$mainCGallery.addClass("cg_height_view");$mainCGallery.removeClass("cg_thumb_view");var cg_horizontalSpace=parseInt(cgJsData[gid].options.visual.HeightViewSpaceWidth);var cg_verticalSpace=parseInt(cgJsData[gid].options.visual.HeightViewSpaceHeight);cgJsData[gid].vars.mainCGdiv.css("width","100%");if(cgJsClass.gallery.vars.fullwindow==gid){var widthMainCGallery=$(window).width()-cgJsClass.gallery.function.general.tools.getScrollbarWidthDependsOnBrowser()}else{var widthMainCGallery=cgJsData[gid].vars.mainCGdivContainer.width()}if(widthMainCGallery<247){widthMainCGallery=247}cgJsData[gid].vars.$cgVerticalSpaceCreatorThumbView=null;var widthmain=widthMainCGallery;var widthmainForCalculation=widthmain-parseInt($mainCGallery.css("padding-left"))-parseInt($mainCGallery.css("padding-right"));cgJsData[gid].vars.widthmainForCalculation=widthmainForCalculation;cgJsClass.gallery.views.functions.destroyRangeSlider(gid);var widthArray=[];var heightArray=[];var widthDivArray=[];var realHeightArray=[];var realWidthArray=[];var last=[];var n=Object.keys(cgJsData[gid].image).length;var opacity=parseInt(cgJsData[gid].options.visual.HeightViewBorderOpacity);var borderColor=cgJsData[gid].options.visual.HeightViewBorderColor;var border=0;var hex2rgb=function(hexStr){var hex=parseInt(hexStr.substring(1),16);var r=(hex&16711680)>>16;var g=(hex&65280)>>8;var b=hex&255;return[r,g,b]};if(borderColor==""){borderColor="#000000"}var rcolor=hex2rgb(borderColor);var rgba="("+rcolor[0]+","+rcolor[1]+","+rcolor[2]+", "+opacity+")";if(cgJsData[gid].options.visual.HeightViewBorderRadius>5){var cg_CircleImages=1}else{var cg_CircleImages=0}if(cg_horizontalSpace==0&&cg_CircleImages==0){var aggregateWidth=border}else{var aggregateWidth=0}var aggregateAcceptableReducedSize=0;var r=0;var widthDone=0;var countRowPics=1;$mainCGallery.removeClass("cg_fade_in_new");cgJsData[gid].vars.widthmain=widthmain;$mainCGallery.removeClass("cg_thumb_view");cgJsClass.gallery.views.functions.checkAndAppendFromSliderToGallery($mainCGallery,$mainCGslider);if(openPage==true||viewChange==true){$mainCGallery.removeClass("cg_fade_in_new").addClass("cg_hidden")}if(openPage===true){}else{$mainCGallery.addClass("cg_hidden");$mainCGallery.removeClass("cg_fade_in");$mainCGallery.css("visibility","visible")}$mainCGallery.find("#cgVerticalSpaceCreator"+gid).remove();cgJsClass.gallery.resize.galleryIcons($mainCGallery,openPage,true,gid,widthmain);var realIdBefore;var offsetNow;var offsetTopBefore;var offsetLeftBefore;var offsetNowNew=false;var collectRealIdsLastRow=[];var collectRealIdsForMarginTop0=[];var collectRealIdsForMarginRight0=[];var lengthCgJsDataGidImage=Object.keys(cgJsData[gid].image).length;var overhang=0;var overhangInPercent=0;var wholePercent=0;$.each(cgJsData[gid].image,function(index,value){var firstKey=Object.keys(value)[0];var objectKey=firstKey;var categoryId=cgJsData[gid].image[index][firstKey]["Category"];var realId=cgJsData[gid].image[index][firstKey]["id"];if(cgJsData[gid].imageObject[realId]){cgJsData[gid].imageObject[realId].removeClass("cg_margin_top_0");cgJsData[gid].imageObject[realId].css({border:"none",width:"unset","vertical-align":"unset","margin-top":"unset","margin-left":"unset","margin-bottom":"unset","margin-right":"unset","flex-basis":"unset","max-width":"unset",height:"unset"})}if(typeof cgJsData[gid].vars.categories[categoryId]!="undefined"){if(cgJsData[gid].vars.showCategories==true&&cgJsData[gid].vars.categories[categoryId]["Checked"]==false){return}}var cgRotationThumbNumber=parseInt(cgJsData[gid].image[index][objectKey].rThumb);var width=parseInt(cgJsData[gid].image[index][objectKey].Width);var height=parseInt(cgJsData[gid].image[index][objectKey].Height);if(cgRotationThumbNumber=="90"||cgRotationThumbNumber=="270"){width=parseInt(cgJsData[gid].image[index][objectKey].Height);height=parseInt(cgJsData[gid].image[index][objectKey].Width)}realHeightArray.push(height);realWidthArray.push(width);var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);var imgType=cgJsData[gid].vars.rawData[realId].ImgType;if(isAlternativeFileType||imgType=="con"){var width=HeightLookHeight*1.5;var height=HeightLookHeight;var newWidth=width*HeightLookHeight/height}else{var newWidth=width*HeightLookHeight/height}widthArray.push(newWidth);heightArray.push(HeightLookHeight);widthDivArray.push(newWidth);widthDone=0;aggregateWidth=aggregateWidth+newWidth+cg_horizontalSpace;if(realId==78){}if(aggregateWidth<widthmainForCalculation/100*90&&cgJsData[gid].image.length==r){countRowPics=1;last[r]="on"}else if(aggregateWidth>=widthmainForCalculation/100*90&&aggregateWidth<=widthmainForCalculation){newWidth=newWidth+(widthmainForCalculation-aggregateWidth);widthArray[r]=newWidth;widthDivArray[r]=newWidth;aggregateWidth=0;widthDone=1;last[r]="on";countRowPics=1}else if(aggregateWidth>widthmainForCalculation){overhang=aggregateWidth-widthmainForCalculation;overhangInPercent=overhang*100/widthmainForCalculation;if(overhangInPercent<=10){wholePercent=100+overhangInPercent;for(i=1;i<=countRowPics;i++){newWidth=widthArray[r-countRowPics+i]/wholePercent*100;newHeight=heightArray[r-countRowPics+i]/wholePercent*100;widthArray[r-countRowPics+i]=newWidth;heightArray[r-countRowPics+i]=newHeight;widthDivArray[r-countRowPics+i]=newWidth}}if(overhangInPercent>10&&overhangInPercent<=46){wholePercent=100+overhangInPercent;for(i=1;i<=countRowPics;i++){newWidth=widthArray[r-countRowPics+i]/wholePercent*100;newHeight=heightArray[r-countRowPics+i]/wholePercent*100;widthArray[r-countRowPics+i]=newWidth;heightArray[r-countRowPics+i]=newHeight;widthDivArray[r-countRowPics+i]=newWidth}}if(overhangInPercent>46){wholePercent=100+overhangInPercent;for(i=1;i<=countRowPics;i++){newWidth=widthArray[r-countRowPics+i]/wholePercent*100;newHeight=heightArray[r-countRowPics+i]/wholePercent*100;widthArray[r-countRowPics+i]=newWidth;heightArray[r-countRowPics+i]=newHeight;widthDivArray[r-countRowPics+i]=newWidth}}if(cg_horizontalSpace==0){aggregateWidth=border}else{aggregateWidth=0}widthDone=1;countRowPics=1;last[r]="on"}else{countRowPics++}r++});var i=0;var r=0;if(cg_horizontalSpace==0&&cg_CircleImages==0){var aggregateWidth=border}else{var aggregateWidth=0}var firstRow=0;var cg_imgOffsetHTML=0;var cg_pagination=0;var rowsDone=0;var rInRow=0;var classCounter=0;var firstRealId;$.each(cgJsData[gid].image,function(index,value){var arrIndex=index;var firstKey=Object.keys(value)[0];var objectKey=firstKey;var categoryId=cgJsData[gid].image[index][firstKey]["Category"];if(typeof cgJsData[gid].vars.categories[categoryId]!="undefined"){if(cgJsData[gid].vars.showCategories==true&&cgJsData[gid].vars.categories[categoryId]["Checked"]==false){return}}classCounter++;i=r;rInRow++;var cgImageThumbRotation="cg"+cgJsData[gid].image[index][objectKey].rThumb+"degree";var realId=cgJsData[gid].image[index][firstKey]["id"];if(!firstRealId){firstRealId=realId}var imgSrcMediumWidth=parseInt(cgJsClass.gallery.vars.medium_size_w);var imgSrcLarge=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId].large);var imgType=cgJsData[gid].vars.rawData[realId].ImgType;var imgSrcLargeWidth=parseInt(cgJsClass.gallery.vars.large_size_w);var imgSrcOriginal=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId].full);var imgSrc=imgSrcLarge;var cg_Use_as_URL=cgJsData[gid].vars.formHasUrlField;var cg_ForwardToURL=cgJsData[gid].options.general.ForwardToURL;var cg_ForwardType=cgJsData[gid].options.general.ForwardType;var cg_ForwardFrom=cgJsData[gid].options.general.ForwardFrom;var cg_FullSizeImageOutGalleryNewTab=cgJsData[gid].options.general.FullSizeImageOutGalleryNewTab;var cg_FullSizeImageOutGallery=cgJsData[gid].options.general.FullSizeImageOutGallery;if(realId==78){}var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);var realId=cgJsData[gid].image[index][firstKey]["id"];var imgDataWidth=parseInt(cgJsData[gid].vars.rawData[realId].Width);if(typeof cgJsData[gid].imageObject[realId]==="undefined"||cgJsData[gid].imageObject[realId].isAdditionalFileChanged){var imageTarget="";var imageHref="";if(cgJsData[gid].options.general.FullSizeImageOutGallery==1){imageTarget='target="_blank"';imageHref=imgSrcOriginal}if(cgJsData[gid].options.visual.ForwardToWpPageEntry==1){imageHref=imgSrcOriginal;imageHref=cgJsData[gid].vars.rawData[realId]["entryGuid"];if(cgJsData[gid].options.visual.ForwardToWpPageEntryInNewTab==1){imageTarget='target="_blank"'}}if(cgJsData[gid].imageObject[realId]&&cgJsData[gid].imageObject[realId].isAdditionalFileChanged){cgJsData[gid].imageObject[realId].remove()}var cgShowObject=$("<div data-cg-cat-id='"+categoryId+"' data-cg-id='"+realId+"' data-cg-gid='"+gid+"' data-cg-order='"+index+"' class='cg_show cg-cat-"+categoryId+"' id='cg_show"+realId+"'>");if(cgJsData[gid].vars.rawData[realId].ImgType=="con"){cgShowObject.addClass("cg_show_con_entry")}if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){var furtherFilesCount=Object.keys(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed).length-1;cgShowObject.prepend('<div class="cg_multiple_files_prev"></div><div class="cg_multiple_files">+'+furtherFilesCount+"</div>")}}else{var cgShowObject=cgJsData[gid].imageObject[realId].removeClass("cg_hide").removeClass("cg_blink_image_disappear").removeClass("cg_fade_in");cgJsData[gid].image[index][firstKey]["imageObject"]=cgJsData[gid].imageObject[realId]}if(cgJsClass.gallery.vars.switchViewsClicked==true){cgShowObject.removeAttr("style width height");if(isAlternativeFileType!="video"){cgShowObject.find(".cg_append").removeAttr("style width height")}}var cg_a_href_title="";var width=Math.floor(widthArray[i]);var height=Math.floor(heightArray[i])-3;var cgRotationThumbNumber=parseInt(cgJsData[gid].image[index][objectKey].rThumb);var cgRotateRatio=1;var widthOriginalImg=cgJsData[gid].image[index][objectKey].Width;var heightOriginalImg=cgJsData[gid].image[index][objectKey].Height;var widthDiv=Math.floor(widthDivArray[i]);if(realId==78){}if(last[r]=="on"){if(cg_horizontalSpace==0&&cg_CircleImages==0){aggregateWidth=border}else{aggregateWidth=0}}else{if(cg_horizontalSpace==0&&cg_CircleImages==0){aggregateWidth=aggregateWidth+widthDiv+border}else{aggregateWidth=aggregateWidth+widthDiv+border*2+cg_horizontalSpace}}cgShowObject.removeClass("cg_margin_top_0");cgShowObject.css({border:"none",width:"unset","vertical-align":"unset","margin-top":"unset","margin-left":"unset","margin-bottom":"unset","margin-right":"unset","flex-basis":"unset","max-width":"unset",height:"unset"});var marginRight=cg_horizontalSpace;if(last[r]=="on"){if(cg_horizontalSpace>=1){marginRight="-"+cg_horizontalSpace}else if(cg_horizontalSpace==0){marginRight="-2"}}cgShowObject.css({border:"none",margin:"unset",width:widthDiv,height:height,"margin-right":marginRight+"px",float:"left",display:"inline"});if(cg_CircleImages==1){cgShowObject.css({"border-radius":""+cgJsData[gid].options.visual.HeightViewBorderRadius+"%"})}if(r==1){cgShowObject.css({"border-left":"rgba"+rgba+"  solid "+border+"px"})}var rCheck=r-1;if(last[rCheck]=="on"||r==1){if(border>0){cgShowObject.css({"border-left":"rgba"+rgba+"  solid "+border+"px"})}}else{if(cg_horizontalSpace>0){}if(border>0){cgShowObject.css({"border-left":"rgba"+rgba+"  solid "+border+"px"})}}cgShowObject.css({"border-right":"rgba"+rgba+"  solid "+border+"px"});if(cgJsData[gid].options.general.TitlePositionGallery==2){cgShowObject.find("div[id*=cg_hide]").find(".cg_info_depend_on_radius").css("text-align","center");cgShowObject.find("[id*=cg_Field1IdGallery]").css("text-align","center")}else if(cgJsData[gid].options.general.TitlePositionGallery==3){cgShowObject.find("div[id*=cg_hide]").find(".cg_info_depend_on_radius").css("text-align","right");cgShowObject.find("[id*=cg_Field1IdGallery]").css("text-align","right")}else{cgShowObject.find("div[id*=cg_hide]").find(".cg_info_depend_on_radius").css("text-align","left");cgShowObject.find("[id*=cg_Field1IdGallery]").css("text-align","left")}if(cgJsData[gid].options.general.TitlePositionGallery==2){cgShowObject.find("div[id*=cg_hide]").find(".cg_gallery_comments_div").css("text-align","center")}else if(cgJsData[gid].options.general.TitlePositionGallery==3){cgShowObject.find("div[id*=cg_hide]").find(".cg_gallery_comments_div").css("text-align","right")}else{}if(cgJsData[gid].options.general.TitlePositionGallery==2){cgShowObject.find("div[id*=cg_hide]").find(".cg_gallery_rating_div").css("text-align","center")}else if(cgJsData[gid].options.general.TitlePositionGallery==3){cgShowObject.find("div[id*=cg_hide]").find(".cg_gallery_rating_div").css("text-align","right")}else{}if(border!=0){cgShowObject.css({"border-top":"rgba"+rgba+"  solid "+border+"px"})}if(rowsDone==0){if(cg_verticalSpace!=0||cg_verticalSpace==0&&cg_horizontalSpace!=0||cg_CircleImages==1){cgShowObject.css({"border-top":"rgba"+rgba+"  solid "+border+"px"})}else{if(rowsDone==0){cgShowObject.css({"border-top":"rgba"+rgba+"  solid "+border+"px"})}}cgShowObject.css({"border-bottom":"rgba"+rgba+"  solid "+border+"px"});if(cg_verticalSpace!=0||cg_verticalSpace==0&&cg_horizontalSpace!=0){cgShowObject.css({"margin-top":""+cg_verticalSpace+"px"})}}else{if(cg_verticalSpace!=0||cg_verticalSpace==0&&cg_horizontalSpace!=0||cg_CircleImages==1){cgShowObject.css({"margin-top":""+cg_verticalSpace+"px"});cgShowObject.css({"border-top":"rgba"+rgba+"  solid "+border+"px"});cgShowObject.css({"border-bottom":"rgba"+rgba+"  solid "+border+"px"})}else{cgShowObject.css({"border-bottom":"rgba"+rgba+"  solid "+border+"px"})}}if(cg_CircleImages==1){cgShowObject.find("[id*=cg_hide]").css("margin-bottom",height/2-45.75/2)}if(cg_Use_as_URL==1&&cg_ForwardToURL==1&&cg_ForwardFrom==2){var cg_img_url_entry=$("#cg_img_url"+realId+"").val();if(typeof cg_img_url_entry==="undefined"){}else if(cg_img_url_entry.indexOf("http")>-1){cg_img_url_entry=cg_img_url_entry}else{cg_img_url_entry="http://"+cg_img_url_entry}var cg_a_href_img="href='"+cg_img_url_entry+"'";if(cg_ForwardType==2){var cg_href_img_blank="target='_blank'"}else{var cg_href_img_blank=""}}else{if(cg_FullSizeImageOutGallery==1){if(cg_FullSizeImageOutGalleryNewTab==1){}else{}}}if(last[r]=="on"){rowsDone++}var hideTillHover="";var imgType=cgJsData[gid].vars.rawData[realId].ImgType;if(cgJsData[gid].options.general.ShowAlways!=1){hideTillHover="cg_hide_till_hover"}if(imgType=="con"){hideTillHover="cg_hide_till_hover cg_hide_till_hover_con"}var cg_no_target_blank="";if(imgType=="con"&&cgJsData[gid].options.general.FullSizeImageOutGallery==1){cg_no_target_blank="cg_no_target_blank"}if(imgType=="con"&&cgJsData[gid].options.general.OnlyGalleryView==1){cg_no_target_blank="cg_no_target_blank"}var $infoRatingCommentDiv=$('<div data-cg_image_id="'+realId+'" class="cg_image'+classCounter+" cg_gallery_info "+hideTillHover+'" id="cgGalleryInfo'+realId+'">'+"</div>");var inputSubTitleId=cgJsData[gid].options.visual["SubTitle"];var inputThirdTitleId=cgJsData[gid].options.visual["ThirdTitle"];if(inputSubTitleId&&inputThirdTitleId){cgShowObject.addClass("has_sub_and_third_title")}else if(inputSubTitleId||inputThirdTitleId){cgShowObject.addClass("has_sub_or_third_title")}if(cgJsData[gid].vars.isUserGallery&&cgJsData[gid].options.general.ShowAlways==3||cgJsData[gid].options.general.ShowAlways==3&&(cgJsData[gid].options.general.AllowComments||cgJsData[gid].options.general.AllowRating||cgJsData[gid].options.visual["Field1IdGalleryView"]||cgJsData[gid].options.visual["SubTitle"]!=0||cgJsData[gid].options.visual["ThirdTitle"]!=0)){cgShowObject.addClass("cg_show_info_bottom");if(!cgJsData[gid].options.general.AllowComments){cgShowObject.addClass("cg_no_comments")}if(width<160){cgShowObject.addClass("cg_show_info_bottom_small")}else{cgShowObject.removeClass("cg_show_info_bottom_small")}if(imgType=="con"){cgShowObject.addClass("cg_show_info_bottom_con")}}if((cgJsData[gid].options.general.AllowComments>=1||cgJsData[gid].options.general.AllowRating>=1)&&cgJsData[gid].vars.modernHover){$infoRatingCommentDiv.append('<div  class="cg_gallery_info_rating_comments"></div>')}if(cgRotationThumbNumber=="270"||cgRotationThumbNumber=="90"){}var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);var isImageType=cgJsClass.gallery.function.general.tools.isImageType(gid,realId);if(cgJsData[gid].options.general.FbLikeGallery>=1&&!isAlternativeFileType){cgShowObject.find("#cgFacebookGalleryDiv"+realId).removeClass("cg_hide")}if(typeof cgJsData[gid].imageObject[realId]==="undefined"||cgJsData[gid].imageObject[realId].isAdditionalFileChanged){var postTitle="",postAlt="";var cg_append_file_type="";var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);if(isAlternativeFileType){cg_append_file_type="cg_append_alternative_file_type cg_append_"+imgType}if(isAlternativeFileType&&isAlternativeFileType=="video"){var imageObject=$('<video width="100%" height="100%"  class="cg_append cg_append_alternative_file_type_video" id="cg_append'+realId+'" >'+'<source src="'+imgSrcOriginal+'#t=0.001" type="video/mp4">'+'<source src="'+imgSrcOriginal+'#t=0.001" type="video/'+imgType+'">'+"</video>")}else{var imageObject=$('<figure class="cg_figure"><div id="cg_append'+realId+'" class="cg_append '+cg_append_file_type+" "+cgImageThumbRotation+'" '+postTitle+" "+postAlt+'></div><figcaption class="cg_figcaption"></figcaption></figure>')}if((cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90")&&isAlternativeFileType!="video"){imageObject.find(".cg_append").css({width:""+height+"px",height:""+widthDiv+"px"})}else{imageObject.find(".cg_append").addClass("cg_append_hundert_percent")}var cgShowPositionHelper=$('<span id="cgShowPositionHelper'+realId+'" class="cg_show_position_helper" data-cg-gid="'+gid+'"></span>');if(width<=imgSrcMediumWidth&&imgSrcMediumWidth>=500){imgSrc=imgSrcLarge}else if(width<=imgSrcLargeWidth&&imgSrcLargeWidth>=500){imgSrc=imgSrcLarge}else{imgSrc=imgSrcOriginal}if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){var $cgAppend=imageObject.find(".cg_append");if(isImageType){cgJsClass.gallery.function.general.tools.appendImageOnLoadGallery(cgShowObject,$cgAppend,imgSrcLarge,realId,gid)}}else{var $cgAppend=imageObject.find(".cg_append");if(isImageType){cgJsClass.gallery.function.general.tools.appendImageOnLoadGallery(cgShowObject,$cgAppend,imgSrc,realId,gid)}}if(cgJsData[gid].vars.isUserGallery&&cgJsData[gid].options.general.ShowAlways==3||cgJsData[gid].options.general.ShowAlways==3&&(cgJsData[gid].options.general.AllowComments||cgJsData[gid].options.general.AllowRating||cgJsData[gid].options.visual["Field1IdGalleryView"]||cgJsData[gid].options.visual["SubTitle"]!=0||cgJsData[gid].options.visual["ThirdTitle"]!=0)){cgShowObject.addClass("cg_show_info_bottom");if(!cgJsData[gid].options.general.AllowComments){cgShowObject.addClass("cg_no_comments")}if(width<160){cgShowObject.addClass("cg_show_info_bottom_small")}else{cgShowObject.removeClass("cg_show_info_bottom_small")}if(imgType=="con"){cgShowObject.addClass("cg_show_info_bottom_con")}}if(cgJsData[gid].options.general.FullSizeImageOutGallery==1){imageTarget='target="_blank"';imageHref=imgSrcOriginal;var contentWrapped=$("<a href='"+imageHref+"' class='"+cg_no_target_blank+"  cg_show_href_target_blank' "+imageTarget+"></a>");contentWrapped.append(imageObject);contentWrapped.append($infoRatingCommentDiv);cgShowObject.append(contentWrapped)}else if(cgJsData[gid].options.visual.ForwardToWpPageEntry==1){var imageTarget="";if(cgJsData[gid].options.visual.ForwardToWpPageEntryInNewTab==1){imageTarget='target="_blank"'}imageHref=cgJsData[gid].vars.rawData[realId]["entryGuid"];var contentWrapped=$("<a href='"+imageHref+"' "+imageTarget+" ></a>");contentWrapped.append(imageObject);contentWrapped.append($infoRatingCommentDiv);cgShowObject.append(contentWrapped)}else{cgShowObject.append(imageObject).append($infoRatingCommentDiv);cgShowObject.append(cgShowPositionHelper)}if(calledFromUpload===true){$mainCGallery.append(cgShowObject)}else{$mainCGallery.append(cgShowObject)}cgShowObject.addClass("cg_fade_in");cgJsData[gid].imageObject[realId]=cgShowObject;cgJsData[gid].imageObject[realId].isAdditionalFileChanged=false;cgJsData[gid].image[index][firstKey]["imageObject"]=cgJsData[gid].imageObject[realId];if(typeof cgJsData[gid].rateAndCommentNumbers[realId]=="undefined"){cgJsClass.gallery.dynamicOptions.getRatingAndComments(realId,arrIndex,objectKey,gid,calledFromUpload)}else{cgJsClass.gallery.dynamicOptions.setRatingAndComments(realId,arrIndex,objectKey,gid,calledFromUpload)}if(typeof cgJsData[gid].vars.info[realId]=="undefined"){if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){cgJsClass.gallery.info.getInfo(realId,gid,false,arrIndex,false,false,false,cgJsData[gid].imageObject[realId],widthDiv,height)}else{cgJsClass.gallery.info.getInfo(realId,gid,false,arrIndex,false,false,false,cgJsData[gid].imageObject[realId],height,widthDiv)}}else{if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){cgJsClass.gallery.info.setInfo(realId,gid,false,arrIndex,cgJsData[gid].vars.info[realId],false,false,false,cgJsData[gid].imageObject[realId],widthDiv,height)}else{cgJsClass.gallery.info.setInfo(realId,gid,false,arrIndex,cgJsData[gid].vars.info[realId],false,false,false,cgJsData[gid].imageObject[realId],height,widthDiv)}}if(isImageType){if(imgSrc==imgSrcOriginal||imgDataWidth<width){if(typeof cgJsData[gid].vars.rawData["imgSrcOriginalWidth"]=="undefined"){var img=new Image;img.src=imgSrc;img.onload=function(){if(cgShowObject.attr("data-cg-id")=="12641"){}cgJsData[gid].vars.rawData[realId]["imgSrcOriginalWidth"]=this.width;cgJsData[gid].vars.rawData[realId]["imgSrcOriginalHeight"]=this.height;var differenceCheck=width-this.width;if(differenceCheck>20){cgJsData[gid].imageObject[realId].find(".cg_append").addClass("cg_background_size_unset")}}}}}}else{if(cgJsData[gid].vars.isUserGallery&&cgJsData[gid].options.general.ShowAlways==3||cgJsData[gid].options.general.ShowAlways==3&&(cgJsData[gid].options.general.AllowComments||cgJsData[gid].options.general.AllowRating||cgJsData[gid].options.visual["Field1IdGalleryView"])){cgShowObject.addClass("cg_show_info_bottom");if(!cgJsData[gid].options.general.AllowComments){cgShowObject.addClass("cg_no_comments")}if(width<160){cgShowObject.addClass("cg_show_info_bottom_small")}else{cgShowObject.removeClass("cg_show_info_bottom_small")}if(imgType=="con"){cgShowObject.addClass("cg_show_info_bottom_con")}}if(cgJsData[gid].options.general.FullSizeImageOutGallery==1){if(!cgJsData[gid].image[index][firstKey]["imageObject"].find(">a").length){imageTarget='target="_blank"';imageHref=imgSrcOriginal;cgJsData[gid].image[index][firstKey]["imageObject"].find("figure").wrap("<a href='"+imageHref+"' class='"+cg_no_target_blank+"  cg_show_href_target_blank' "+imageTarget+"></a>")}}if(width<=imgSrcMediumWidth){imgSrc=imgSrcLarge}else if(width<=imgSrcLargeWidth){imgSrc=imgSrcLarge}else{imgSrc=imgSrcOriginal}if(cgJsClass.gallery.vars.hasToAppend==true||calledFromUpload===true){cgShowObject.appendTo($mainCGallery);cgShowObject.removeClass("hide")}if(width<160){cgShowObject.addClass("cg_show_info_bottom_small")}else{cgShowObject.removeClass("cg_show_info_bottom_small")}if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){if(isAlternativeFileType!="video"){var $cgAppend=cgShowObject.find(".cg_append");$cgAppend.css({width:""+height+"px",height:""+widthDiv+"px",border:"none"})}if(isImageType){cgJsClass.gallery.function.general.tools.appendImageOnLoadGallery(cgShowObject,$cgAppend,imgSrcLarge,realId,gid)}}else{if(isAlternativeFileType!="video"){var $cgAppend=cgShowObject.find(".cg_append");$cgAppend.css({width:""+width+"px",height:""+height+"px",border:"none"})}if(isImageType){cgJsClass.gallery.function.general.tools.appendImageOnLoadGallery(cgShowObject,$cgAppend,imgSrc,realId,gid)}}if(cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.modernHover){if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){cgJsClass.gallery.function.general.tools.setHeightForInfoBlockInGallery(gid,cgJsData[gid].imageObject[realId].find(".cg_gallery_info_title"),cgJsData[gid].imageObject[realId],widthDiv,height,undefined,realId)}else{cgJsClass.gallery.function.general.tools.setHeightForInfoBlockInGallery(gid,cgJsData[gid].imageObject[realId].find(".cg_gallery_info_title"),cgJsData[gid].imageObject[realId],height,widthDiv,undefined,realId)}}else if(!cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.modernHover){if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){cgJsClass.gallery.function.general.tools.checkIfSmallWidthImageObject(gid,cgJsData[gid].imageObject[realId],null,widthDiv,height)}else{cgJsClass.gallery.function.general.tools.checkIfSmallWidthImageObject(gid,cgJsData[gid].imageObject[realId],null,height,widthDiv)}}cgShowObject.attr({"data-cg-order":index})}r++;i++});cgJsData[gid].vars.mainCGdiv.width(cgJsData[gid].vars.mainCGdiv.width());$mainCGallery.append('<div id="cgVerticalSpaceCreator'+gid+'" class="cgVerticalSpaceCreator" style="clear:both;display:block;height:'+cg_verticalSpace+'px;"></div>');cgJsClass.gallery.vars.isInitFullWindowOpen=false;cgJsClass.gallery.vars.isInitFullWindowClose=false;cgJsData[gid].vars.mainCGallery.find(".cg_position_hr_1, .cg_position_hr_2, .cg_position_hr_3").remove();cgJsData[gid].vars.mainCGallery.find(".cg-slider-range-container").remove();cgJsClass.gallery.function.general.tools.hideSkeletonLoader(gid);$mainCGallery.removeClass("cg_hide").addClass("cg_fade_in");cgJsData[gid].vars.cgCenterDivAppearenceHelper.addClass("cg_hide");cgJsClass.gallery.vars.switchViewsClicked=false;if(openPage==true||viewChange==true){setTimeout(function(){$mainCGallery.css("visibility","visible").removeClass("cg_hidden");if(!isCopyUploadToAnotherGallery){if(cgJsData[gid].vars.openedRealId>=1&&!isFromFullWindowSliderOrBlogView){setTimeout(function(){if(cgJsData[gid].options.general.FullSizeImageOutGallery==1||cgJsData[gid].options.general.OnlyGalleryView==1){$mainCGallery.find("#cg_append"+cgJsData[gid].vars.openedRealId).get(0).scrollIntoView()}else{if(openPage==true){if(cgJsData[gid].options.visual.ForwardToWpPageEntry==1&&calledFromUpload){return}$mainCGallery.find("#cg_append"+cgJsData[gid].vars.openedRealId).addClass("cg_open_gallery").click()}else{if(cgJsData[gid].options.visual.ForwardToWpPageEntry==1&&calledFromUpload){return}$mainCGallery.find("#cg_append"+cgJsData[gid].vars.openedRealId).click()}}},600)}}},100)}else{$mainCGallery.removeClass("cg_fade_in");setTimeout(function(){$mainCGallery.css("visibility","visible").removeClass("cg_hidden");if(cgJsData[gid].vars.openedRealId>=1&&cgJsData[gid].options.pro.SliderFullWindow!=1){$mainCGallery.addClass("cg_fade_in");setTimeout(function(){if(!isCopyUploadToAnotherGallery&&!isFromFullWindowSliderOrBlogView&&!calledFromUpload){if(cgJsData[gid].options.general.FullSizeImageOutGallery==1||cgJsData[gid].options.general.OnlyGalleryView==1){$mainCGallery.find("#cg_append"+cgJsData[gid].vars.openedRealId).get(0).scrollIntoView()}else{if(cgJsData[gid].options.visual.ForwardToWpPageEntry==1&&calledFromUpload){return}$mainCGallery.find("#cg_append"+cgJsData[gid].vars.openedRealId).click()}}cgJsData[gid].vars.mainCGdiv.find(".cg_header").removeClass("cg_pointer_events_none");cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container").removeClass("cg_pointer_events_none")},600)}},100)}}};;cgJsClass.gallery.thumbLogic={init:function(jQuery,gid,openPage,calledFromUpload,openImage,stepChange,viewChange,randomButtonClicked,isCopyUploadToAnotherGallery,isFromResize,isFromFullWindowSliderOrBlogView){if(typeof openPage=="undefined"){openPage=false}var gid=gid;cgJsData[gid].vars.mainCGdiv.removeClass("cg_height_view");var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}else{cgJsData[gid].vars.currentLook="thumb";cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.addClass("cg_hide")}cgJsData[gid].vars.mainCGallery.removeClass("cg_height_view");var $=jQuery;var $mainCGallery=cgJsData[gid].vars.mainCGallery;var $mainCGslider=cgJsData[gid].vars.mainCGallery.find("#mainCGslider"+gid);var $mainCGdiv=cgJsData[gid].vars.mainCGdiv;var DistancePicsX=parseInt(cgJsData[gid].options.general.DistancePics);if(isNaN(DistancePicsX)){DistancePicsX=0}else{DistancePicsX=parseInt(DistancePicsX)}var DistancePicsV=parseInt(cgJsData[gid].options.general.DistancePicsV);if(isNaN(DistancePicsV)){DistancePicsV=0}else{DistancePicsV=parseInt(DistancePicsV)}if(sliderView){cgJsData[gid].vars.mainCGallery.css("gap","");cgJsData[gid].vars.mainCGallery.css("column-gap","")}else{cgJsData[gid].vars.mainCGallery.css("gap",DistancePicsV+"px "+DistancePicsX+"px")}var DistancePicsV=0;var DistancePicsX=0;$mainCGallery.removeClass("cg_blog cg_slider cg_height_view");cgJsData[gid].vars.mainCGdiv.css("width","100%");if(sliderView){$mainCGallery.addClass("cg_slider");$mainCGallery.removeClass("cg_thumb_view")}else{$mainCGallery.addClass("cg_thumb_view")}if(cgJsClass.gallery.vars.fullwindow==gid){var widthMainCGallery=$(window).width()-cgJsClass.gallery.function.general.tools.getScrollbarWidthDependsOnBrowser()}else{var widthMainCGallery=cgJsData[gid].vars.mainCGdivContainer.width()}if(widthMainCGallery<247){widthMainCGallery=247}var widthmain=widthMainCGallery;var widthmainForCalculation=widthmain-parseInt($mainCGdiv.css("padding-left"))-parseInt($mainCGdiv.css("padding-right"));cgJsData[gid].vars.widthmainForCalculation=widthmainForCalculation;cgJsData[gid].vars.widthmain=widthmain;cgJsClass.gallery.views.functions.destroyRangeSlider(gid);cgJsData[gid].vars.mainCGslider=$mainCGslider;if(cgJsData[gid].image.length<1){cgJsClass.gallery.function.general.tools.hideSkeletonLoader(gid);$mainCGslider.addClass("cg_hide");if(sliderView){$mainCGallery.find(".cgCenterDiv").addClass("cg_hide")}cgJsClass.gallery.function.general.tools.hideSkeletonLoader(gid);if(sliderView==true){if(cgJsData[gid].vars.cgSliderRangeContainer){cgJsData[gid].vars.cgSliderRangeContainer.addClass("cg_hide")}}return}else{if(sliderView){}}if(cgJsData[gid].options.visual["SliderThumbNav"]!=1){$mainCGslider.addClass("cg_hide_slider")}if(sliderView==true){cgJsData[gid].vars.$cgVerticalSpaceCreatorThumbView=null;if(cgJsData[gid].image.length==0){$mainCGslider.addClass("cg_hide")}else{$mainCGslider.removeClass("cg_hide")}var approximateWidth=150;if(widthmainForCalculation<800){approximateWidth=130}var maximumVisibleImagesInSlider=Math.round(widthmainForCalculation/approximateWidth);if(maximumVisibleImagesInSlider%2==0){maximumVisibleImagesInSlider=maximumVisibleImagesInSlider+1}cgJsData[gid].vars.maximumVisibleImagesInSlider=maximumVisibleImagesInSlider;var newWidth=widthmainForCalculation/maximumVisibleImagesInSlider;var newWidthMultiplikator=newWidth/approximateWidth;var newHeight=100*newWidthMultiplikator;var widthSlider=newWidth;cgJsData[gid].vars.widthSliderPreview=widthSlider;var heightSlider=newHeight;var heightSliderContainer=heightSlider+10;if(cgJsClass.gallery.vars.isEdge){heightSliderContainer=heightSliderContainer+7}if(cgJsClass.gallery.vars.isFF){heightSliderContainer=heightSliderContainer+7}var countImages=Object.keys(cgJsData[gid].image).length;if(countImages*cgJsData[gid].vars.widthSliderPreview<cgJsData[gid].vars.widthmainForCalculation){var paddingLeftSlider=(cgJsData[gid].vars.widthmainForCalculation-countImages*cgJsData[gid].vars.widthSliderPreview)/2;$mainCGslider.css("padding-left","0")}else{$mainCGslider.css("padding-left","0")}if($mainCGallery.find(".cg_show").length>=1){$mainCGallery.find(".cg_show").appendTo($mainCGslider)}}else{cgJsClass.gallery.views.functions.checkAndAppendFromSliderToGallery($mainCGallery,$mainCGslider)}cgJsData[gid].vars.thumbViewWidthFromLastImageInRow=widthmainForCalculation;if(openPage==true||viewChange==true){$("#mainCGallery"+gid).removeClass("cg_fade_in_new").addClass("cg_hidden")}if(calledFromUpload){$("#mainCGallery"+gid).removeClass("cg_fade_in_new").addClass("cg_hidden")}$mainCGallery.removeClass("cg_fade_in_new");if(openPage===true&&sliderView==false){}else{$mainCGallery.addClass("cg_hidden");$mainCGallery.removeClass("cg_fade_in");$mainCGallery.css("visibility","visible")}if(sliderView==true&&viewChange===true){}var opacity=parseFloat(cgJsData[gid].options.visual.ThumbViewBorderOpacity);var borderColor=cgJsData[gid].options.visual.ThumbViewBorderColor;var hex2rgb=function(hexStr){var hex=parseInt(hexStr.substring(1),16);var r=(hex&16711680)>>16;var g=(hex&65280)>>8;var b=hex&255;return[r,g,b]};if(borderColor==""){borderColor="#000000"}var rcolor=hex2rgb(borderColor);var rgba="("+rcolor[0]+","+rcolor[1]+","+rcolor[2]+", "+opacity+")";var aggregateWidth=0;var i=0;var r=0;if(!cgJsData[gid].options.general.WidthThumb||!cgJsData[gid].options.general.HeightThumb){cgJsData[gid].options.general.WidthThumb=300;cgJsData[gid].options.general.HeightThumb=200}var WidthThumb=parseInt(cgJsData[gid].options.general.WidthThumb);var HeightThumb=parseInt(cgJsData[gid].options.general.HeightThumb);var WidthThumbReal=parseInt(cgJsData[gid].options.general.WidthThumb);var HeightThumbReal=parseInt(cgJsData[gid].options.general.HeightThumb);var border=0;if(sliderView==true){DistancePicsX=0;DistancePicsV=0;border=0}if(border>0){if(DistancePicsX==0){DistancePicsX=0}if(DistancePicsV==0){DistancePicsV=0}}WidthThumbReal=WidthThumbReal-DistancePicsX;if(parseInt(cgJsData[gid].options.visual.ThumbViewBorderRadius)>5){var cg_CircleImages=1}else{var cg_CircleImages=0}widthmainForCalculation=parseInt(widthmainForCalculation);var xMultiFull=(widthmainForCalculation+DistancePicsX)/(WidthThumb+2*border+DistancePicsX);if(xMultiFull<=1){var xMulti1=xMultiFull;var xMultiFull1=0}else{xMultiFull1=xMultiFull.toString();var xMulti=xMultiFull1.split(".");var picsInRow=parseInt(xMulti[0]);var xMulti1=(widthmainForCalculation+DistancePicsX)/((WidthThumb+2*border+DistancePicsX)*picsInRow)}var xMultiFull1Adjustment=Math.ceil(xMultiFull1);WidthThumb=WidthThumb*xMulti1;WidthThumb=Math.floor(WidthThumb)-xMultiFull1Adjustment;HeightThumb=HeightThumb*xMulti1;border=border*xMulti1;var firstRow=0;var classCounter=0;var firstRealId=null;$mainCGdiv.find("#cgVerticalSpaceCreator"+gid).remove();cgJsClass.gallery.resize.galleryIcons($mainCGallery,openPage,true,gid,widthmain);if(sliderView==true){cgJsClass.gallery.resize.galleryIconsSlider($mainCGslider,openPage,false,gid,widthmain)}var realIdBefore;var offsetNow;var offsetLeftBefore;var offsetNowNew=false;var collectRealIdsForMarginTop0=[];var collectRealIdsForMarginRight0=[];if(sliderView){$mainCGallery.removeClass("cg_thumb_view")}else{$mainCGallery.addClass("cg_thumb_view")}var lengthCgJsDataGidImage=Object.keys(cgJsData[gid].image).length;$.each(cgJsData[gid].image,function(index,value){var arrIndex=index;var firstKey=Object.keys(value)[0];var objectKey=firstKey;var categoryId=cgJsData[gid].image[index][firstKey]["Category"];if(typeof cgJsData[gid].vars.categories[categoryId]!="undefined"){if(cgJsData[gid].vars.showCategories==true&&cgJsData[gid].vars.categories[categoryId]["Checked"]==false){return}}classCounter++;r++;var realId=cgJsData[gid].image[index][firstKey]["id"];if(cgJsData[gid].imageObject[realId]){cgJsData[gid].imageObject[realId].removeClass("cg_margin_top_0");cgJsData[gid].imageObject[realId].css({border:"none",width:"unset","vertical-align":"unset","margin-top":"unset","margin-left":"unset","margin-bottom":"unset","margin-right":"unset","flex-basis":"unset","max-width":"unset",height:"unset"})}var imgSrcMediumWidth=parseInt(cgJsClass.gallery.vars.medium_size_w);var imgSrcLarge=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId].large);var imgType=cgJsData[gid].vars.rawData[realId].ImgType;var imgSrcLargeWidth=parseInt(cgJsClass.gallery.vars.large_size_w);var imgSrcOriginal=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId].full);var imgSrc=imgSrcLarge;var cg_Use_as_URL=cgJsData[gid].vars.formHasUrlField;var cg_ForwardToURL=cgJsData[gid].options.general.ForwardToURL;var cg_ForwardFrom=cgJsData[gid].options.general.ForwardFrom;var cg_FullSizeImageOutGalleryNewTab=cgJsData[gid].options.general.FullSizeImageOutGalleryNewTab;var cg_FullSizeImageOutGallery=cgJsData[gid].options.general.FullSizeImageOutGallery;var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);var isImageType=cgJsClass.gallery.function.general.tools.isImageType(gid,realId);var realId=cgJsData[gid].image[index][firstKey]["id"];if(!firstRealId){firstRealId=realId}var imgDataWidth=parseInt(cgJsData[gid].vars.rawData[realId].Width);if(typeof cgJsData[gid].imageObject[realId]==="undefined"||cgJsData[gid].imageObject[realId].isAdditionalFileChanged){var imageTarget="";var imageHref="";if(cgJsData[gid].options.general.FullSizeImageOutGallery==1){imageTarget='target="_blank"';imageHref=imgSrcOriginal}if(cgJsData[gid].options.visual.ForwardToWpPageEntry==1&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){imageHref=imgSrcOriginal;imageHref=cgJsData[gid].vars.rawData[realId]["entryGuid"];if(cgJsData[gid].options.visual.ForwardToWpPageEntryInNewTab==1){imageTarget='target="_blank"'}}if(cgJsData[gid].imageObject[realId]&&cgJsData[gid].imageObject[realId].isAdditionalFileChanged){cgJsData[gid].imageObject[realId].remove()}var cgShowObject=$("<div data-cg-cat-id='"+categoryId+"' data-cg-gid='"+gid+"' data-cg-id='"+realId+"' data-cg-cat-gid='"+gid+"' data-cg-order='"+index+"' class='cg_show cg-cat-"+categoryId+"' id='cg_show"+realId+"'>");if(cgJsData[gid].vars.rawData[realId].ImgType=="con"&&!cgJsData[gid].galleriesOptions.infoToShowIfCon){cgShowObject.addClass("cg_show_con_entry")}if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){var furtherFilesCount=Object.keys(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed).length-1;cgShowObject.prepend('<div class="cg_multiple_files_prev"></div><div class="cg_multiple_files">+'+furtherFilesCount+"</div>")}}else{var cgShowObject=cgJsData[gid].imageObject[realId].removeClass("cg_hide").removeClass("cg_blink_image_disappear").removeClass("cg_fade_in");cgJsData[gid].image[index][firstKey]["imageObject"]=cgJsData[gid].imageObject[realId]}if(cgJsClass.gallery.vars.switchViewsClicked==true){cgShowObject.removeAttr("style width height");if(isAlternativeFileType!="video"){cgShowObject.find(".cg_append").removeAttr("style width height")}}var widthOriginalImg=parseInt(cgJsData[gid].image[index][objectKey].Width);var heightOriginalImg=parseInt(cgJsData[gid].image[index][objectKey].Height);var cgRotationThumbNumber=parseInt(cgJsData[gid].image[index][objectKey].rThumb);var cgImageThumbRotation="cg"+cgJsData[gid].image[index][objectKey].rThumb+"degree";if(cgRotationThumbNumber=="90"||cgRotationThumbNumber=="270"){var cgRotateRatio=widthOriginalImg/heightOriginalImg;var cgWidthOriginalImgContainer=widthOriginalImg;widthOriginalImg=heightOriginalImg;heightOriginalImg=cgWidthOriginalImgContainer}var cg_a_href_title="";var heightScaledThumb=WidthThumb*heightOriginalImg/widthOriginalImg;if(heightScaledThumb<=HeightThumb){var WidthThumbPic=HeightThumb*widthOriginalImg/heightOriginalImg;var WidthThumbPic=WidthThumbPic+2;var paddingLeftRight=(WidthThumbPic-WidthThumb)/2;if(cgRotationThumbNumber=="90"||cgRotationThumbNumber=="270"){WidthThumbPic=WidthThumbPic*cgRotateRatio;var paddingLeftRight=(WidthThumbPic-WidthThumb*cgRotateRatio)/2}paddingLeftRight=paddingLeftRight+"px";var padding="left: -"+paddingLeftRight+";right: -"+paddingLeftRight+"";var HeightThumbImageValue=HeightThumb+"px"}if(heightScaledThumb>HeightThumb){if(cgRotationThumbNumber=="90"||cgRotationThumbNumber=="270"){var WidthThumbPic=(WidthThumb+2)*cgRotateRatio}else{var WidthThumbPic=WidthThumb+2}var heightImageThumb=WidthThumb*heightOriginalImg/widthOriginalImg;var paddingTopBottom=(heightImageThumb-HeightThumb)/2;paddingTopBottom=paddingTopBottom+"px";var padding="top: -"+paddingTopBottom+";bottom: -"+paddingTopBottom+"";var HeightThumbImageValue="auto"}var putDistancePicsX=DistancePicsX;var widthToAggregateToCheck=WidthThumb+border*2;aggregateWidth=aggregateWidth+WidthThumb+border*2;var check3849=r-1;if(check3849%picsInRow==0){putDistancePicsX=0;if(r-1!=0){firstRow++}}if(r==1&&xMultiFull<=1){putDistancePicsX=0}if(r==2&&xMultiFull<=1){firstRow++}cgShowObject.removeClass("cg_margin_top_0");cgShowObject.css({border:"none",width:"unset","vertical-align":"unset","margin-top":"unset","margin-left":"unset","margin-bottom":"unset","margin-right":"unset","flex-basis":"unset","max-width":"unset",height:"unset"});cgShowObject.css({border:"none","margin-top":DistancePicsV,"margin-right":DistancePicsX,"flex-basis":WidthThumbReal+"px",height:HeightThumbReal+"px"});if(cg_CircleImages==1){cgShowObject.css({"border-radius":""+cgJsData[gid].options.visual.ThumbViewBorderRadius+"%"});var circleImagesOverflow="overflow:hidden"}cgShowObject.css("display","inline-block");cgShowObject.css("vertical-align","top");widthToAggregateToCheck=widthToAggregateToCheck+DistancePicsX;aggregateWidth=aggregateWidth+DistancePicsX;var heightInfoDiv=cgShowObject.find("div[id*=cg_hide]").height();cgShowObject.find("div[id*=cg_hide]").children("div").css("position","relative !important");var heightInfoDivInfo=cgShowObject.find("div[id*=cg_hide]").children(".cg_info_depend_on_radius").height();if(cg_CircleImages==1){cgShowObject.find("[id*=cg_hide]").css("margin-bottom",HeightThumb/2-heightInfoDiv/2)}if(cgJsData[gid].options.visual.TitlePositionGallery==2){cgShowObject.find("div[id*=cg_hide]").find(".cg_info_depend_on_radius").css("text-align","center");cgShowObject.find("[id*=cg_Field1IdGallery]").css("text-align","center")}else if(cgJsData[gid].options.visual.TitlePositionGallery==3){cgShowObject.find("div[id*=cg_hide]").find(".cg_info_depend_on_radius").css("text-align","right");cgShowObject.find("[id*=cg_Field1IdGallery]").css("text-align","right")}else{cgShowObject.find("div[id*=cg_hide]").find(".cg_info_depend_on_radius").css("text-align","left");cgShowObject.find("[id*=cg_Field1IdGallery]").css("text-align","left")}if(cgJsData[gid].options.visual.CommentPositionGallery==2){cgShowObject.find("div[id*=cg_hide]").find(".cg_info_comment_gallery_div").css("text-align","center")}else if(cgJsData[gid].options.visual.CommentPositionGallery==3){cgShowObject.find("div[id*=cg_hide]").find(".cg_info_comment_gallery_div").css("text-align","right")}else{}if(cgJsData[gid].options.visual.RatingPositionGallery==2){cgShowObject.find("div[id*=cg_hide]").find(".cg_gallery_rating_div").css("text-align","center")}else if(cgJsData[gid].options.visual.RatingPositionGallery==3){cgShowObject.find("div[id*=cg_hide]").find(".cg_gallery_rating_div").css("text-align","right")}else{}if(cg_Use_as_URL==1&&cg_ForwardToURL==1&&cg_ForwardFrom==2){var cg_img_url_entry=$("#cg_img_url"+realId+"").val();if(typeof cg_img_url_entry==="undefined"){}else if(cg_img_url_entry.indexOf("http")>-1){cg_img_url_entry=cg_img_url_entry}else{cg_img_url_entry="http://"+cg_img_url_entry}}else{if(cg_FullSizeImageOutGallery==1){if(cg_FullSizeImageOutGalleryNewTab==1){var cg_href_img_blank="target='_blank'"}else{var cg_href_img_blank=""}}}var hideTillHover="";if(cgJsData[gid].options.general.ShowAlways!=1){hideTillHover="cg_hide_till_hover"}if(imgType=="con"&&!cgJsData[gid].galleriesOptions.infoToShowIfCon){hideTillHover="cg_hide_till_hover cg_hide_till_hover_con"}var cg_no_target_blank="";if(imgType=="con"&&cgJsData[gid].options.general.FullSizeImageOutGallery==1){cg_no_target_blank="cg_no_target_blank"}if(imgType=="con"&&cgJsData[gid].options.general.OnlyGalleryView==1){cg_no_target_blank="cg_no_target_blank"}var $infoRatingCommentDiv=$('<div data-cg_image_id="'+realId+'" class="cg_image'+classCounter+" cg_gallery_info "+hideTillHover+'" id="cgGalleryInfo'+realId+'">'+"</div>");if(cgJsData[gid].options.general.AllowComments>=1||cgJsData[gid].options.general.AllowRating>=1){$infoRatingCommentDiv.append('<div  class="cg_gallery_info_rating_comments"></div>')}var inputSubTitleId=cgJsData[gid].options.visual["SubTitle"];var inputThirdTitleId=cgJsData[gid].options.visual["ThirdTitle"];if(inputSubTitleId&&inputThirdTitleId){cgShowObject.addClass("has_sub_and_third_title")}else if(inputSubTitleId||inputThirdTitleId){cgShowObject.addClass("has_sub_or_third_title")}if(sliderView){cgShowObject.removeClass("cg_show_info_bottom");if(!cgJsData[gid].options.general.AllowComments){$infoRatingCommentDiv.removeClass("cg_no_comments")}}else{if(!sliderView&&cgJsData[gid].vars.isUserGallery&&cgJsData[gid].options.general.ShowAlways==3||!sliderView&&cgJsData[gid].options.general.ShowAlways==3&&(cgJsData[gid].options.general.AllowComments||cgJsData[gid].options.general.AllowRating||cgJsData[gid].options.visual["Field1IdGalleryView"]!=0||cgJsData[gid].options.visual["SubTitle"]!=0||cgJsData[gid].options.visual["ThirdTitle"]!=0)){cgShowObject.addClass("cg_show_info_bottom");if(!cgJsData[gid].options.general.AllowComments){$infoRatingCommentDiv.addClass("cg_no_comments")}if(WidthThumb<160){cgShowObject.addClass("cg_show_info_bottom_small")}else{cgShowObject.removeClass("cg_show_info_bottom_small")}if(imgType=="con"&&!cgJsData[gid].galleriesOptions.infoToShowIfCon){cgShowObject.addClass("cg_show_info_bottom_con")}}}if(sliderView==true){cgShowObject.css({width:widthSlider+"px",height:heightSlider+"px",float:"none"});cgShowObject.removeClass("cg_show_info_bottom cg_show_info_bottom_small");WidthThumb=widthSlider;HeightThumb=heightSlider;if(cgJsData[gid].options.general.FbLikeGallery>=1){cgShowObject.find("#cgFacebookGalleryDiv"+realId).addClass("cg_hide")}}else{if(cgJsData[gid].options.general.FbLikeGallery>=1&&!cg_append_file_type){cgShowObject.find("#cgFacebookGalleryDiv"+realId).removeClass("cg_hide")}}if(cgRotationThumbNumber=="270"||cgRotationThumbNumber=="90"){}if(typeof cgJsData[gid].imageObject[realId]==="undefined"||cgJsData[gid].imageObject[realId].isAdditionalFileChanged){var postTitle="",postAlt="";var cg_append_file_type="";var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);if(isAlternativeFileType){cg_append_file_type="cg_append_alternative_file_type cg_append_"+imgType}if(isAlternativeFileType&&isAlternativeFileType=="video"){if(cgJsClass.gallery.ecommerce.functions.checkIfVideoForSale(imgType,gid,realId)){cg_append_file_type+=" cg-file-type-"+imgType;var imageObject=$('<figure class="cg_figure"><div id="cg_append'+realId+'" class="cg_append '+cg_append_file_type+" "+cgImageThumbRotation+'"></div><figcaption class="cg_figcaption"></figcaption></figure>')}else{var imageObject=$('<video width="100%" height="100%" class="cg_append cg_append_alternative_file_type_video" id="cg_append'+realId+'" >'+'<source src="'+imgSrcOriginal+'#t=0.001" type="video/mp4">'+'<source src="'+imgSrcOriginal+'#t=0.001" type="video/'+imgType+'">'+"</video>")}}else{if(imgType=="ytb"){if((!cgJsData[gid].vars.isCGalleries&&cgJsData[gid].options.pro.ConsentYoutube==1||cgJsData[gid].vars.isCGalleries&&cgJsData[gid].vars.rawData[realId].isCGalleriesConsentYoutube==1)&&!sessionStorage.getItem("cgYtbConsentAgreed")){imageObject=cgJsClass.gallery.function.general.tools.getYtbOverlayConsentElement($,gid,realId);cgShowObject.addClass("cg_social_consent_required")}else{var imageObject=$('<iframe  class="cg_append cg_append_social" id="cg_append'+realId+'" width="100%" height="100%" src="'+cgJsData[gid].vars.rawData[realId]["guid"]+'" ></iframe>');if(sliderView){if(!cgShowObject.find(".cg_append_social_overlay").length){cgShowObject.append('<div class="cg_append_ytb_overlay cg_append_social_overlay"></div>')}}else{if(!cgJsData[gid].vars.isGalleriesMainPage&&cgJsData[gid].options.visual.ForwardToWpPageEntry!=1&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){cgShowObject.append('<div class="cg_append cg_append_iframe_overlay_for_click"></div>')}}}}else if(imgType=="inst"){if((!cgJsData[gid].vars.isCGalleries&&cgJsData[gid].options.pro.ConsentInstagram==1||cgJsData[gid].vars.isCGalleries&&cgJsData[gid].vars.rawData[realId].isCGalleriesConsentInstagram==1)&&!sessionStorage.getItem("cgInstConsentAgreed")){imageObject=cgJsClass.gallery.function.general.tools.getInstOverlayConsentElement($,gid,realId);cgShowObject.addClass("cg_social_consent_required")}else{var imageObject=$('<iframe  class="cg_append cg_append_social" id="cg_append'+realId+'" width="100%" height="100%" src="'+cgJsData[gid].vars.rawData[realId]["guid"]+'" ></iframe>');if(sliderView){if(!cgShowObject.find(".cg_append_social_overlay").length){cgShowObject.append('<div class="cg_append_inst_overlay cg_append_social_overlay"></div>')}}else{if(!cgJsData[gid].vars.isGalleriesMainPage&&cgJsData[gid].options.visual.ForwardToWpPageEntry!=1&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){cgShowObject.append('<div class="cg_append cg_append_iframe_overlay_for_click"></div>')}}}}else if(imgType=="twt"){if((!cgJsData[gid].vars.isCGalleries&&cgJsData[gid].options.pro.ConsentTwitter==1||cgJsData[gid].vars.isCGalleries&&cgJsData[gid].vars.rawData[realId].isCGalleriesConsentTwitter==1)&&!sessionStorage.getItem("cgTwtConsentAgreed")){imageObject=cgJsClass.gallery.function.general.tools.getTwtOverlayConsentElement($,gid,realId);cgShowObject.addClass("cg_social_consent_required")}else{var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent($,gid,realId);var imageObject=$('<div  class="cg_append cg_append_twt" id="cg_append'+realId+'" ></div>');imageObject.append($blockquote);if(sliderView){if(!cgShowObject.find(".cg_append_social_overlay").length){cgShowObject.append('<div class="cg_append_twt_overlay cg_append_social_overlay"></div>')}}else{if(!cgJsData[gid].vars.isGalleriesMainPage&&cgJsData[gid].options.visual.ForwardToWpPageEntry!=1&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){cgShowObject.append('<div class="cg_append cg_append_iframe_overlay_for_click"></div>')}}}}else if(imgType=="tkt"){if((!cgJsData[gid].vars.isCGalleries&&cgJsData[gid].options.pro.ConsentTikTok==1||cgJsData[gid].vars.isCGalleries&&cgJsData[gid].vars.rawData[realId].isCGalleriesConsentTikTok==1)&&!sessionStorage.getItem("cgTktConsentAgreed")){imageObject=cgJsClass.gallery.function.general.tools.getTktOverlayConsentElement($,gid,realId);cgShowObject.addClass("cg_social_consent_required")}else{var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent($,gid,realId);var imageObject=$('<div  class="cg_append cg_append_tkt" id="cg_append'+realId+'" ></div>');imageObject.append($blockquote);if(sliderView){if(!cgShowObject.find(".cg_append_social_overlay").length){cgShowObject.append('<div class="cg_append_tkt_overlay cg_append_social_overlay"></div>')}}else{if(!cgJsData[gid].vars.isGalleriesMainPage&&cgJsData[gid].options.visual.ForwardToWpPageEntry!=1&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){cgShowObject.append('<div class="cg_append cg_append_iframe_overlay_for_click"></div>')}}}}else{var imageObject=$('<figure class="cg_figure"><div id="cg_append'+realId+'" class="cg_append '+cg_append_file_type+" "+cgImageThumbRotation+'"></div><figcaption class="cg_figcaption"></figcaption></figure>')}}imageObject.find(".cg_append").css({border:"rgba"+rgba+" solid "+border+"px"});var cgShowPositionHelper=$('<span id="cgShowPositionHelper'+realId+'" class="cg_show_position_helper" data-cg-gid="'+gid+'"></span>');if(WidthThumbPic<=imgSrcMediumWidth&&imgSrcMediumWidth>=500){imgSrc=imgSrcLarge}else if(WidthThumbPic<=imgSrcLargeWidth&&imgSrcLargeWidth>=500){imgSrc=imgSrcLarge}else{imgSrc=imgSrcOriginal}if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){var $cgAppend=imageObject.find(".cg_append");$cgAppend.css({width:67.66+"%",height:150+"%"});imgSrc=imgSrcLarge}else{var $cgAppend=imageObject.find(".cg_append");$cgAppend.addClass("cg_append_hundert_percent")}if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){if(isImageType){cgJsClass.gallery.function.general.tools.appendImageOnLoadGallery(cgShowObject,$cgAppend,imgSrcLarge,realId,gid)}}else{if(isImageType){cgJsClass.gallery.function.general.tools.appendImageOnLoadGallery(cgShowObject,$cgAppend,imgSrc,realId,gid)}}if(cgJsData[gid].options.general.FullSizeImageOutGallery==1&&sliderView==false){imageTarget='target="_blank"';imageHref=imgSrcOriginal;var contentWrapped=$("<a class='"+cg_no_target_blank+"  cg_show_href_target_blank' href='"+imageHref+"' "+imageTarget+"></a>");contentWrapped.append(imageObject);contentWrapped.append($infoRatingCommentDiv);cgShowObject.append(contentWrapped)}else if(cgJsData[gid].options.visual.ForwardToWpPageEntry==1&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){var imageTarget="";if(cgJsData[gid].options.visual.ForwardToWpPageEntryInNewTab==1){imageTarget='target="_blank"'}imageHref=cgJsData[gid].vars.rawData[realId]["entryGuid"];var is_cg_galleries_main_page="";if(cgJsData[gid].vars.isGalleriesMainPage){is_cg_galleries_main_page="is_cg_galleries_main_page"}var is_forward_to_wp_page_entry="";if(cgJsData[gid].options.visual.ForwardToWpPageEntry==1){is_forward_to_wp_page_entry="is_forward_to_wp_page_entry"}var contentWrapped=$("<a href='"+imageHref+"' class='"+is_cg_galleries_main_page+" "+is_forward_to_wp_page_entry+"'  "+imageTarget+" ></a>");contentWrapped.append(imageObject);contentWrapped.append($infoRatingCommentDiv);cgShowObject.append(contentWrapped)}else{cgShowObject.append(imageObject).append($infoRatingCommentDiv);cgShowObject.append(cgShowPositionHelper)}if(sliderView==true){cgShowObject.removeClass("cg_show_info_bottom cg_show_info_bottom_small");if(i<maximumVisibleImagesInSlider){$mainCGslider.append(cgShowObject)}}else{if(calledFromUpload===true){$mainCGallery.append(cgShowObject)}else{$mainCGallery.append(cgShowObject)}}cgShowObject.addClass("cg_fade_in");cgJsData[gid].imageObject[realId]=cgShowObject;cgJsData[gid].imageObject[realId].isAdditionalFileChanged=false;cgJsData[gid].image[index][firstKey]["imageObject"]=cgJsData[gid].imageObject[realId];if(!cgJsData[gid].vars.isCGalleries){if(typeof cgJsData[gid].rateAndCommentNumbers[realId]=="undefined"){cgJsClass.gallery.dynamicOptions.getRatingAndComments(realId,arrIndex,objectKey,gid,calledFromUpload)}else{cgJsClass.gallery.dynamicOptions.setRatingAndComments(realId,arrIndex,objectKey,gid,calledFromUpload)}}else{cgShowObject.attr("data-cg-gid-to-show",cgJsData[gid].vars.rawData[realId]["gidToShow"])}if(typeof cgJsData[gid].vars.info[realId]=="undefined"){if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){cgJsClass.gallery.info.getInfo(realId,gid,false,arrIndex,false,false,false,cgJsData[gid].imageObject[realId],WidthThumbReal,HeightThumbReal)}else{cgJsClass.gallery.info.getInfo(realId,gid,false,arrIndex,false,false,false,cgJsData[gid].imageObject[realId],HeightThumbReal,WidthThumbReal)}}else{if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){cgJsData[gid].infoGalleryViewAppended[realId]=undefined;cgJsClass.gallery.info.setInfo(realId,gid,false,arrIndex,cgJsData[gid].vars.info[realId],false,false,false,cgJsData[gid].imageObject[realId],WidthThumbReal,HeightThumbReal)}else{cgJsData[gid].infoGalleryViewAppended[realId]=undefined;cgJsClass.gallery.info.setInfo(realId,gid,false,arrIndex,cgJsData[gid].vars.info[realId],false,false,false,cgJsData[gid].imageObject[realId],HeightThumbReal,WidthThumbReal)}}if(isImageType){if(imgSrc==imgSrcOriginal||imgDataWidth<WidthThumbPic){if(typeof cgJsData[gid].vars.rawData["imgSrcOriginalWidth"]=="undefined"){var img=new Image;img.src=imgSrc;img.onload=function(){cgJsData[gid].vars.rawData[realId]["imgSrcOriginalWidth"]=this.width;cgJsData[gid].vars.rawData[realId]["imgSrcOriginalHeight"]=this.height;var differenceCheck=WidthThumbPic-this.width;if(differenceCheck>20){cgJsData[gid].imageObject[realId].find(".cg_append").addClass("cg_background_size_unset")}}}}}}else{cgShowObject.find(".cg_append_ytb_overlay").remove();if(sliderView){if(imgType=="ytb"||imgType=="twt"||imgType=="tkt"||imgType=="inst"){if(!cgShowObject.find(".cg_append_social_overlay").length){cgShowObject.append('<div class="cg_append_ytb_overlay cg_append_social_overlay"></div>')}}}cgJsClass.gallery.views.functions.appendTikTokException($,imgType,sliderView,cgShowObject,gid,realId);if(!sliderView&&cgJsData[gid].vars.isUserGallery&&cgJsData[gid].options.general.ShowAlways==3||!sliderView&&cgJsData[gid].options.general.ShowAlways==3&&(cgJsData[gid].options.general.AllowComments||cgJsData[gid].options.general.AllowRating||cgJsData[gid].options.visual["Field1IdGalleryView"]||cgJsData[gid].options.visual["SubTitle"]!=0||cgJsData[gid].options.visual["ThirdTitle"]!=0)){cgShowObject.addClass("cg_show_info_bottom");if(!cgJsData[gid].options.general.AllowComments){cgShowObject.addClass("cg_no_comments")}if(WidthThumb<160){cgShowObject.addClass("cg_show_info_bottom_small")}else{cgShowObject.removeClass("cg_show_info_bottom_small")}if(imgType=="con"&&!cgJsData[gid].galleriesOptions.infoToShowIfCon){cgShowObject.addClass("cg_show_info_bottom_con")}}if(cgJsData[gid].options.general.FullSizeImageOutGallery==1){if(!cgJsData[gid].image[index][firstKey]["imageObject"].find(">a").length){imageTarget='target="_blank"';imageHref=imgSrcOriginal;cgJsData[gid].image[index][firstKey]["imageObject"].find("figure").wrap("<a class='"+cg_no_target_blank+"  cg_show_href_target_blank'  href='"+imageHref+"' "+imageTarget+"></a>")}}if(WidthThumbPic<=imgSrcMediumWidth){imgSrc=imgSrcLarge}else if(WidthThumbPic<=imgSrcLargeWidth){imgSrc=imgSrcLarge}else{imgSrc=imgSrcOriginal}if(cgJsClass.gallery.vars.hasToAppend==true||calledFromUpload===true){if(sliderView==true){cgShowObject.removeClass("cg_show_info_bottom cg_show_info_bottom_small");cgShowObject.appendTo($mainCGslider)}else{cgShowObject.appendTo($mainCGallery)}cgShowObject.removeClass("hide")}if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){var $cgAppend=cgShowObject.find(".cg_append");$cgAppend.css({border:"rgba"+rgba+" solid "+border+"px",width:67.66+"%",height:150+"%"});if(isImageType){cgJsClass.gallery.function.general.tools.appendImageOnLoadGallery(cgShowObject,$cgAppend,imgSrcLarge,realId,gid)}}else{var $cgAppend=cgShowObject.find(".cg_append");$cgAppend.css({border:"rgba"+rgba+" solid "+border+"px",width:100+"%",height:100+"%"});if(isImageType){cgJsClass.gallery.function.general.tools.appendImageOnLoadGallery(cgShowObject,$cgAppend,imgSrc,realId,gid)}}if(cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.modernHover){if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){cgJsClass.gallery.function.general.tools.setHeightForInfoBlockInGallery(gid,cgJsData[gid].imageObject[realId].find(".cg_gallery_info_title"),cgJsData[gid].imageObject[realId],WidthThumbReal,HeightThumbReal,undefined,realId)}else{cgJsClass.gallery.function.general.tools.setHeightForInfoBlockInGallery(gid,cgJsData[gid].imageObject[realId].find(".cg_gallery_info_title"),cgJsData[gid].imageObject[realId],HeightThumbReal,WidthThumbReal,undefined,realId)}}else if(!cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.modernHover){if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){cgJsClass.gallery.function.general.tools.checkIfSmallWidthImageObject(gid,cgJsData[gid].imageObject[realId],null,WidthThumbReal,HeightThumbReal)}else{cgJsClass.gallery.function.general.tools.checkIfSmallWidthImageObject(gid,cgJsData[gid].imageObject[realId],null,HeightThumbReal,WidthThumbReal)}}cgShowObject.css({border:"none"});cgShowObject.attr({"data-cg-order":index})}if(cgJsData[gid].vars.isOnlyGalleryEcommerce&&cgJsData[gid].vars.rawData[realId].ecommerceData&&!cgJsData[gid].vars.isCGalleries){var $priceTag=cgShowObject.find(".cg-center-sale-price");var priceSplitted=cgJsData[gid].vars.rawData[realId].ecommerceData["Price"].split(".");var priceSymbol=cgJsClass.gallery.vars.ecommerce.currenciesArray[cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort];var $cg_gallery_info=cgShowObject.find(".cg_gallery_info");var heightToAdd=34;if(!$priceTag.length){var priceTag='<div class="cg-center-sale-price">'+'<div class="cg-center-sale-price-left-symbol"></div>'+'<div class="cg-center-sale-price-left">37</div>'+'<div class="cg-center-sale-price-right">99</div>'+'<div class="cg-center-sale-price-right-symbol">'+"</div>"+""+"</div>";var marginBottom=parseInt(cgShowObject.css("margin-bottom"))+heightToAdd;cgShowObject.attr("style",cgShowObject.attr("style")+";margin-bottom:"+marginBottom+"px !important;");var bottomString=parseInt($cg_gallery_info.css("bottom"))-heightToAdd+"px";$cg_gallery_info.css({height:$cg_gallery_info.height()+heightToAdd+"px",bottom:bottomString}).append(priceTag);$cg_gallery_info.find(".cg-center-sale-price-left").text(cgJsClass.gallery.ecommerce.functions.priceToShowLeft(priceSplitted[0]));$cg_gallery_info.find(".cg-center-sale-price-right").text(priceSplitted[1]);if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyPosition=="left"){$cg_gallery_info.find(".cg-center-sale-price-left-symbol").text(priceSymbol)}else{$cg_gallery_info.find(".cg-center-sale-price-right-symbol").text(priceSymbol)}if(cgJsData[gid].vars.rawData[realId].ecommerceData["IsShipping"]=="1"){$cg_gallery_info.find(".cg-center-sale-price-type").text("Shipping")}else{$cg_gallery_info.find(".cg-center-sale-price-type").text("Download")}}else{var marginBottom=parseInt(cgShowObject.css("margin-bottom"))+heightToAdd;cgShowObject.attr("style",cgShowObject.attr("style")+";margin-bottom:"+marginBottom+"px !important;")}}if(cgJsData[gid].vars.rawData[realId].isCGalleriesNoGalleryEntriesText){var infoToSet=cgJsData[gid].vars.rawData[realId].isCGalleriesNoGalleryEntriesText;if(cgShowObject.find("> a").length){cgShowObject.find("> a").prepend('<div class="cg_show_text">'+infoToSet+"</div>")}else{cgShowObject.prepend('<div class="cg_show_text">'+infoToSet+"</div>")}cgShowObject.removeClass("cg_show_con_entry cg_show_info_bottom_con")}else if(cgJsData[gid].vars.rawData[realId].infoToShowIfGalleriesCon&&!sliderView){var infoToSet=cgJsData[gid].vars.rawData[realId].infoToShowIfGalleriesCon;if(cgShowObject.find("> a").length){cgShowObject.find("> a").prepend('<div class="cg_show_text">'+infoToSet+"</div>")}else{cgShowObject.prepend('<div class="cg_show_text">'+infoToSet+"</div>")}cgShowObject.removeClass("cg_show_con_entry cg_show_info_bottom_con")}i++});var offsetTopBefore=0;var collectRealIdsLastRow=[];$.each(cgJsData[gid].image,function(index,value){var firstKey=Object.keys(value)[0];var cgShowObject=cgJsData[gid].image[index][firstKey]["imageObject"];var realId=cgJsData[gid].image[index][firstKey]["id"];if(cgShowObject.offset().top>offsetTopBefore){collectRealIdsLastRow=[];collectRealIdsLastRow.push(realId)}else{collectRealIdsLastRow.push(realId)}offsetTopBefore=cgShowObject.offset().top});if(cgJsData[gid].vars.$cg_further_images_container_bottom){cgJsData[gid].vars.$cgVerticalSpaceCreatorThumbView=$('<div id="cgVerticalSpaceCreator'+gid+'" class="cgVerticalSpaceCreator" style="clear:both;display:block;height:'+DistancePicsV+'px;"></div>').insertBefore(cgJsData[gid].vars.$cg_further_images_container_bottom)}else{cgJsData[gid].vars.$cgVerticalSpaceCreatorThumbView=$('<div id="cgVerticalSpaceCreator'+gid+'" class="cgVerticalSpaceCreator" style="clear:both;display:block;height:'+DistancePicsV+'px;"></div>').insertAfter($mainCGallery)}var collectLastRow=function(){var widthFirstImage=cgJsData[gid].imageObject[firstRealId].width();collectRealIdsLastRow.forEach(function(realId){if(collectRealIdsLastRow.length==cgJsData[gid].image.length){cgJsData[gid].imageObject[realId].css("max-width",WidthThumb+"px")}else{cgJsData[gid].imageObject[realId].css("max-width",widthFirstImage+"px")}});if(picsInRow>cgJsData[gid].image.length){if(xMulti1){var factor=xMulti1}else{var factor=1}}else{var factor=widthFirstImage/WidthThumbReal}var aggregateWidth=0;var offsetTopBefore=0;var isAllImagesOneRow=true;$.each(cgJsData[gid].image,function(index,value){var firstKey=Object.keys(value)[0];var realId=cgJsData[gid].image[index][firstKey]["id"];var width=cgJsData[gid].imageObject[firstRealId].width();var offset=cgJsData[gid].imageObject[realId].offset().top;if(offsetTopBefore==offset){isAllImagesOneRow=false}aggregateWidth=aggregateWidth+width;if(picsInRow>cgJsData[gid].image.length){cgJsData[gid].imageObject[realId].height(HeightThumbReal*factor);cgJsData[gid].imageObject[realId].css({})}else{cgJsData[gid].imageObject[realId].height(HeightThumbReal*factor);cgJsData[gid].imageObject[realId].css({})}if(cgJsData[gid].image[index+1]){var nextFirstKey=Object.keys(cgJsData[gid].image[index+1])[0];var nextRealId=cgJsData[gid].image[index+1][nextFirstKey]["id"];var nextWidth=cgJsData[gid].imageObject[nextRealId].width();if(aggregateWidth+nextWidth>widthmainForCalculation){cgJsData[gid].imageObject[realId].css({});aggregateWidth=0}}offsetTopBefore=offset;var cg_galleries_real_id_clicked=sessionStorage.getItem("cg_galleries_real_id_clicked");if(cgJsData[gid].vars.isCGalleries&&cg_galleries_real_id_clicked){sessionStorage.removeItem("cg_galleries_real_id_clicked");cgJsData[gid].vars.mainCGdivContainer.find("#cg_show"+cg_galleries_real_id_clicked).get(0).scrollIntoView()}});$.each(cgJsData[gid].image,function(index,value){var firstKey=Object.keys(value)[0];var realId=cgJsData[gid].image[index][firstKey]["id"];var isImageType=cgJsClass.gallery.function.general.tools.isImageType(gid,realId);var alternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);if((isImageType||alternativeFileType=="video")&&cgJsData[gid].vars.rawData[realId]["Width"]&&cgJsData[gid].vars.rawData[realId]["Height"]&&!cgJsData[gid].vars.rawData[realId]["MultipleFilesParsed"]&&isAllImagesOneRow){var imageObjectHeight=cgJsData[gid].imageObject[realId].height();var imageObjectWidth=cgJsData[gid].imageObject[realId].width();var compareHeight=imageObjectWidth*cgJsData[gid].vars.rawData[realId]["Height"]/cgJsData[gid].vars.rawData[realId]["Width"];if(compareHeight<imageObjectHeight){cgJsData[gid].imageObject[realId].attr("data-cg-background-height",compareHeight);cgJsData[gid].imageObject[realId].height(compareHeight)}}if((alternativeFileType=="file"||alternativeFileType=="audio")&&!cgJsData[gid].vars.rawData[realId]["MultipleFilesParsed"]&&isAllImagesOneRow){cgJsData[gid].imageObject[realId].height(160)}})};if(isFromResize){setTimeout(function(){collectLastRow()},10)}else{setTimeout(function(){collectLastRow()},10)}cgJsData[gid].vars.mainCGallery.find(".cg_position_hr_1, .cg_position_hr_2, .cg_position_hr_3").remove();cgJsData[gid].vars.mainCGallery.find(".cg-slider-range-container").remove();if(sliderView==true){var $cgSliderRangeContainer=$("<div id='cgSliderRangeContainer"+gid+"' class='cg-slider-range-container'><div id='cgSliderRange"+gid+"' class='cg-slider-range'></div></div>");var $cgSliderRange=$cgSliderRangeContainer.find(".cg-slider-range");if(cgJsData[gid].options.visual["SliderThumbNav"]!=1){$cgSliderRangeContainer.addClass("cg_hide_slider")}var countImages=Object.keys(cgJsData[gid].image).length;cgJsData[gid].vars.cgSliderRange=$cgSliderRange;if(countImages>=maximumVisibleImagesInSlider){var widthSliderHandlePercentage=maximumVisibleImagesInSlider*100/countImages}else{widthSliderHandlePercentage=100}if(countImages<=maximumVisibleImagesInSlider){$cgSliderRangeContainer.addClass("cg_hidden")}else{$cgSliderRangeContainer.removeClass("cg_hidden")}if(widthSliderHandlePercentage!=100){var widthSliderHandle=Math.floor(widthmainForCalculation/100*widthSliderHandlePercentage)}else{widthSliderHandle=0}if(widthSliderHandle<13&&widthSliderHandlePercentage!=100){widthSliderHandle=13}$cgSliderRangeContainer.insertAfter($mainCGslider);cgJsData[gid].vars.cgSliderRangeContainer=$cgSliderRangeContainer;$cgSliderRange.slider({value:0,step:1,max:Object.keys(cgJsData[gid].image).length-1,stop:function(event,ui){},start:function(event,ui){},slide:function(event,ui){cgJsClass.gallery.views.functions.appendAndRemoveImagesInSlider(gid,ui.value,maximumVisibleImagesInSlider,$mainCGslider,true)}});cgJsData[gid].vars.mainCGdiv.width(cgJsData[gid].vars.mainCGdiv.width());var cgSliderRangeWidth=widthmainForCalculation-widthSliderHandle;$cgSliderRange.find(".ui-slider-handle").css({});if(Object.keys(cgJsData[gid].image).length<=cgJsData[gid].vars.maximumVisibleImagesInSlider){$cgSliderRangeContainer.addClass("cg_hide")}if(cgJsData[gid].vars.openedRealId){var order=cgJsClass.gallery.function.general.tools.getOrderByGidAndRealId(gid,cgJsData[gid].vars.openedRealId);cgJsClass.gallery.views.functions.appendAndRemoveImagesInSlider(gid,order,maximumVisibleImagesInSlider,$mainCGslider)}}cgJsClass.gallery.vars.switchViewsClicked=false;if(sliderView==true){$mainCGslider.removeClass("cg_hide");if(!cgJsData[gid].vars.centerWhite){$mainCGdiv.find("#cgSliderRangeContainer"+gid).removeClass("cg_hide")}$mainCGdiv.find(".cg_gallery_thumbs_control .cg_view_switcher").addClass("cg_disabled")}if((openPage==true||viewChange==true)&&cgJsClass.gallery.vars.fullwindow==false){setTimeout(function(){$mainCGallery.css("visibility","visible").addClass("cg_fade_in_new cg_animation").removeClass("cg_hidden")},100)}else{}if(sliderView==false){setTimeout(function(){$mainCGallery.css("visibility","visible").addClass("cg_fade_in cg_animation").removeClass("cg_hidden")},1)}if(sliderView==false){$mainCGallery.removeClass("cg_hide").addClass("cg_fade_in")}cgJsData[gid].vars.cgCenterDivAppearenceHelper.addClass("cg_hide");if(cgJsData[gid].options.general.FullSizeImageOutGallery==1&&!sliderView){return}if(cgJsData[gid].options.general.OnlyGalleryView==1&&!sliderView){return}if(sliderView==true&&openPage!=true){if(cgJsData[gid].vars.openedRealId>=1&&randomButtonClicked!=true){setTimeout(function(){$mainCGallery.css("visibility","visible").removeClass("cg_hidden");$mainCGallery.removeClass("cg_hide").addClass("cg_fade_in");if(!isCopyUploadToAnotherGallery&&!isFromFullWindowSliderOrBlogView){$mainCGslider.find("#cg_append"+cgJsData[gid].vars.openedRealId).addClass("cg_open_gallery_slider_look").click()}if(cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.mainCGdivFullWindowConfigurationArea.removeClass("cg_hidden")}},200)}else{$mainCGallery.removeClass("cg_hide").addClass("cg_fade_in");if(!isCopyUploadToAnotherGallery&&!isFromFullWindowSliderOrBlogView){$mainCGslider.find(".cg_show:first-child .cg_append").addClass("cg_open_gallery_slider_look").click()}}return}else if(sliderView==true&&openPage==true){if(openPage==true){if(!cgJsData[gid].vars.closeEventInitWithDataCGrealIdCloseButton){}if(sliderView&&calledFromUpload){$mainCGallery.addClass("cg_hide cg_called_from_upload")}else{$mainCGallery.removeClass("cg_hide").addClass("cg_fade_in")}var $imageToClick;if(cgJsData[gid].vars.openedRealId<1){$imageToClick=$mainCGslider.find(".cg_show:first-child .cg_append").addClass("cg_open_gallery_slider_look")}if(cgJsData[gid].vars.openedRealId>=1){$imageToClick=$mainCGslider.find("#cg_append"+cgJsData[gid].vars.openedRealId).addClass("cg_open_gallery")}$mainCGallery.addClass("cg_hide cg_called_from_upload");if(!cgJsData[gid].vars.isRemoveImageSliderViewCheck){if(!isCopyUploadToAnotherGallery&&!isFromFullWindowSliderOrBlogView){if($imageToClick){setTimeout(function(){$imageToClick.click()},10)}else{$imageToClick=$mainCGslider.find(".cg_show:first-child .cg_append").addClass("cg_open_gallery_slider_look");$imageToClick.click()}}}else{if(!isCopyUploadToAnotherGallery&&!isFromFullWindowSliderOrBlogView){if($imageToClick){$imageToClick.click();$imageToClick.click()}else{$imageToClick=$mainCGslider.find(".cg_show:first-child .cg_append").addClass("cg_open_gallery_slider_look");$imageToClick.click();$imageToClick.click()}}cgJsData[gid].vars.isRemoveImageSliderViewCheck=false;if(Object.keys(cgJsData[gid].vars.rawData).length>=1){jQuery($mainCGslider).removeClass("cg_hide")}}}else{$mainCGallery.removeClass("cg_hide").addClass("cg_fade_in");if(!isCopyUploadToAnotherGallery&&!isFromFullWindowSliderOrBlogView){$mainCGslider.find(".cg_show:first-child .cg_append").click()}}return}if((openPage==true||viewChange==true)&&sliderView==false){setTimeout(function(){$mainCGallery.css("visibility","visible").removeClass("cg_hidden");if(!isCopyUploadToAnotherGallery){if(cgJsData[gid].vars.openedRealId>=1&&!isFromFullWindowSliderOrBlogView){setTimeout(function(){if(cgJsData[gid].options.general.FullSizeImageOutGallery==1||cgJsData[gid].options.general.OnlyGalleryView==1){$mainCGallery.find("#cg_append"+cgJsData[gid].vars.openedRealId).get(0).scrollIntoView()}else{if(openPage==true){if(cgJsData[gid].options.visual.ForwardToWpPageEntry==1&&calledFromUpload&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){return}$mainCGallery.find("#cg_append"+cgJsData[gid].vars.openedRealId).addClass("cg_open_gallery").click()}else{if(cgJsData[gid].options.visual.ForwardToWpPageEntry==1&&calledFromUpload&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){return}$mainCGallery.find("#cg_append"+cgJsData[gid].vars.openedRealId).click()}}},600)}}},100)}else{$mainCGallery.removeClass("cg_fade_in");setTimeout(function(){$mainCGallery.css("visibility","visible").removeClass("cg_hidden");if(cgJsData[gid].vars.openedRealId>=1&&cgJsData[gid].options.pro.SliderFullWindow!=1){$mainCGallery.addClass("cg_fade_in");setTimeout(function(){if(!isCopyUploadToAnotherGallery&&!isFromFullWindowSliderOrBlogView&&!calledFromUpload){if(cgJsData[gid].options.general.FullSizeImageOutGallery==1||cgJsData[gid].options.general.OnlyGalleryView==1){$mainCGallery.find("#cg_append"+cgJsData[gid].vars.openedRealId).get(0).scrollIntoView()}else{if(cgJsData[gid].options.visual.ForwardToWpPageEntry==1&&calledFromUpload&&cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){return}if(!isFromResize){$mainCGallery.find("#cg_append"+cgJsData[gid].vars.openedRealId).click()}}}cgJsData[gid].vars.mainCGdiv.find(".cg_header").removeClass("cg_pointer_events_none");cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container").removeClass("cg_pointer_events_none")},600)}},100)}},setDistanceTopRightTo0:function(){}};;cgJsClass.gallery.rowLogic={init:function(jQuery,gid,openPage,calledFromUpload,openImage,stepChange,viewChange,randomButtonClicked,isCopyUploadToAnotherGallery,isFromResize,isFromFullWindowSliderOrBlogView){var gid=gid;cgJsData[gid].vars.currentLook="row";if(cgJsData[gid].image.length<1){return}var $=jQuery;var newHeight1=[];var newHeight2=0;var ratio=0;var denominator1=[];var a=0;var newNumerator=0;var numerator=0;var divArray=[];var newHeight=0;var partNumerator=0;var n=Object.keys(cgJsData[gid].image).length;var picsInRow=parseInt(cgJsData[gid].options.general.PicsInRow);var opacity=parseFloat(cgJsData[gid].options.visual.RowViewBorderOpacity);var borderColor=cgJsData[gid].options.visual.RowViewBorderColor;var border=parseInt(cgJsData[gid].options.visual.RowViewBorderWidth);var border=0;var hex2rgb=function(hexStr){var hex=parseInt(hexStr.substring(1),16);var r=(hex&16711680)>>16;var g=(hex&65280)>>8;var b=hex&255;return[r,g,b]};if(borderColor==""){borderColor="#000000"}var rcolor=hex2rgb(borderColor);var rgba="("+rcolor[0]+","+rcolor[1]+","+rcolor[2]+", "+opacity+")";cgJsData[gid].vars.$cgVerticalSpaceCreatorThumbView=null;var cg_horizontalSpace=parseInt(cgJsData[gid].options.visual.RowViewSpaceWidth);var cg_verticalSpace=parseInt(cgJsData[gid].options.visual.RowViewSpaceHeight);if(border>0){if(cg_horizontalSpace==0){cg_horizontalSpace=1}if(cg_verticalSpace==0){cg_verticalSpace=1}}var $mainCGallery=cgJsData[gid].vars.mainCGallery;var $mainCGslider=cgJsData[gid].vars.mainCGallery.find("#mainCGslider"+gid);var $mainCGdiv=cgJsData[gid].vars.mainCGdiv;if(cgJsClass.gallery.vars.fullwindow==gid){var widthMainCGallery=$(window).width()-cgJsClass.gallery.function.general.tools.getScrollbarWidthDependsOnBrowser()}else{var widthMainCGallery=$("#mainCGdivContainer"+gid).width()}if(widthMainCGallery<247){widthMainCGallery=247}var widthmain=widthMainCGallery;var widthmainForCalculation=widthmain-parseInt($mainCGdiv.css("padding-left"))-parseInt($mainCGdiv.css("padding-right"))-3;cgJsData[gid].vars.widthmainForCalculation=widthmainForCalculation;cgJsClass.gallery.views.functions.destroyRangeSlider(gid);$mainCGdiv.css("width",widthmain+"px");$mainCGallery.css("width",100+"%");$mainCGallery.css("visibility","hidden");$mainCGallery.removeClass("cg_fade_in_new");cgJsData[gid].vars.cgCenterDiv.css("width",widthmain+"px");cgJsData[gid].vars.widthmain=widthmain;$mainCGallery.removeClass("cg_thumb_view");cgJsClass.gallery.views.functions.checkAndAppendFromSliderToGallery($mainCGallery,$mainCGslider);if(openPage==true||viewChange==true){$mainCGallery.removeClass("cg_fade_in_new").addClass("cg_hidden")}if(openPage===true){if($mainCGdiv.css("width")!=true){$mainCGallery.css("visibility","hidden");setTimeout(function(){$mainCGdiv.css("width",cgJsData[gid].vars.widthmain+"px");setTimeout(function(){},100)},100)}}else{$mainCGallery.addClass("cg_hidden");$mainCGallery.removeClass("cg_fade_in");$mainCGallery.css("visibility","visible")}if(parseInt(cgJsData[gid].options.visual.RowViewBorderRadius)>5){var cg_CircleImages=1}else{var cg_CircleImages=0}if(cg_horizontalSpace!=0||cg_CircleImages==1){widthmainForCalculation=widthmainForCalculation-(border*2+cg_horizontalSpace)*picsInRow+cg_horizontalSpace}else{widthmainForCalculation=widthmainForCalculation-(border+cg_horizontalSpace)*picsInRow+cg_horizontalSpace-border}if(n<picsInRow){widthmainForCalculation=widthmainForCalculation/picsInRow*n;picsInRow=n}var widthLastRow=widthmainForCalculation/picsInRow*(n-Math.floor(n/picsInRow)*picsInRow);var width2=0;var lastRowLeft=n-(n-Math.floor(n/picsInRow)*picsInRow);var picsInLastRow=n-lastRowLeft;var lastImages=1;var r=0;var classCounter=0;$mainCGallery.find("#cgVerticalSpaceCreator"+gid).remove();cgJsClass.gallery.resize.galleryIcons($mainCGallery,openPage,false,gid,widthmain);var realIdBefore;var offsetNow;var offsetTopBefore;var offsetLeftBefore;var offsetNowNew=false;var collectRealIdsLastRow=[];var collectRealIdsForMarginTop0=[];var collectRealIdsForMarginRight0=[];var lengthCgJsDataGidImage=Object.keys(cgJsData[gid].image).length;$.each(cgJsData[gid].image,function(index,value){var arrIndex=index;var firstKey=Object.keys(value)[0];var objectKey=firstKey;var categoryId=cgJsData[gid].image[index][firstKey]["Category"];var realId=cgJsData[gid].image[index][firstKey]["realId"];if(cgJsData[gid].imageObject[realId]){cgJsData[gid].imageObject[realId].removeClass("cg_margin_top_0");cgJsData[gid].imageObject[realId].css({border:"none",width:"unset","vertical-align":"unset","margin-top":"unset","margin-left":"unset","margin-bottom":"unset","margin-right":"unset","flex-basis":"unset","max-width":"unset",height:"unset"})}if(typeof cgJsData[gid].vars.categories[categoryId]!="undefined"){if(cgJsData[gid].vars.showCategories==true&&cgJsData[gid].vars.categories[categoryId]["Checked"]==false){return}}classCounter++;r++;var width=parseInt(cgJsData[gid].image[index][objectKey].Width);var height=parseInt(cgJsData[gid].image[index][objectKey].Height);var div=width/height;ratio=ratio+div;if(r%picsInRow==0){denominator1.push(ratio);newHeight=Math.floor(widthmainForCalculation/ratio);newHeight1.push(newHeight);newHeight2=newHeight;a++;newNumerator=0;newHeight=0;ratio=0;divArray.length=0;partNumerator=0}if(n/r==1){denominator1.push(ratio);var newWidthmain=widthmainForCalculation/picsInRow*picsInLastRow;newHeight=Math.floor(newWidthmain/ratio);newHeight1.push(newHeight);newHeight2=newHeight}});cgJsData[gid].vars.mainCGallery.find(".cg_position_hr_1, .cg_position_hr_2, .cg_position_hr_3").remove();cgJsData[gid].vars.mainCGallery.find(".cg-slider-range-container").remove();if(cgJsData[gid].vars.rowLogicCount==0){var h=0}else{var h=(cgJsData[gid].vars.rowLogicCount+1)/picsInRow;var firstRow=cgJsData[gid].vars.rowLogicCount;var onlyFirstTime=cgJsData[gid].vars.rowLogicCount}var g=0;var r=0;var aggregateWidth=border;var rowsDone=0;var onlyFirstTime=0;var count=0;var cg_imgOffsetHTML=0;var cg_pagination=0;var firstRealId;$.each(cgJsData[gid].image,function(index,value){var arrIndex=index;var firstKey=Object.keys(value)[0];var objectKey=firstKey;var categoryId=cgJsData[gid].image[index][firstKey]["Category"];if(typeof cgJsData[gid].vars.categories[categoryId]!="undefined"){if(cgJsData[gid].vars.showCategories==true&&cgJsData[gid].vars.categories[categoryId]["Checked"]==false){return}}r++;g++;var setNewHeight=newHeight1[h];var widthOriginalImg=parseInt(cgJsData[gid].image[index][objectKey].Width);var heightOriginalImg=parseInt(cgJsData[gid].image[index][objectKey].Height);var realId=cgJsData[gid].image[index][firstKey]["id"];if(!firstRealId){firstRealId=realId}var imgSrcMedium=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId].medium);var imgSrcMediumWidth=parseInt(cgJsClass.gallery.vars.medium_size_w);var imgSrcLarge=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId].large);var imgSrcLargeWidth=parseInt(cgJsClass.gallery.vars.large_size_w);var imgSrcOriginal=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId].full);var imgSrc=imgSrcLarge;if(cg_CircleImages==1){$(this).css({"border-radius":""+cgJsClass.gallery.options.visual.RowViewBorderRadius+"%"});var circleImagesOverflow="overflow:hidden"}var cg_Use_as_URL=cgJsData[gid].vars.formHasUrlField;var cg_ForwardToURL=cgJsData[gid].options.general.ForwardToURL;var cg_ForwardFrom=cgJsData[gid].options.general.ForwardFrom;var cg_FullSizeImageOutGallery=cgJsData[gid].options.general.FullSizeImageOutGallery;var imgDataWidth=parseInt(cgJsData[gid].vars.rawData[realId].Width);if(typeof cgJsData[gid].imageObject[realId]==="undefined"){var imageTarget="";var imageHref="";if(cgJsData[gid].options.general.FullSizeImageOutGallery==1){imageTarget='target="_blank"';imageHref=imgSrcOriginal}var cgShowObject=$("<div data-cg-cat-id='"+categoryId+"' data-cg-id='"+realId+"'  data-cg-order='"+index+"' data-cg-gid='"+gid+"' class='cg_show cg-cat-"+categoryId+"' id='cg_show"+realId+"'>")}else{var cgShowObject=cgJsData[gid].imageObject[realId].removeClass("cg_hide").removeClass("cg_blink_image_disappear").removeClass("cg_fade_in");cgJsData[gid].image[index][firstKey]["imageObject"]=cgJsData[gid].imageObject[realId]}if(cgJsClass.gallery.vars.switchViewsClicked==true){cgShowObject.removeAttr("style width height");cgShowObject.find(".cg_append").removeAttr("style width height")}var newWidthDiv=Math.ceil(widthOriginalImg*newHeight1[h]/heightOriginalImg);aggregateWidth=aggregateWidth+newWidthDiv;if(g%picsInRow==0){if(onlyFirstTime==0){var newWidthDiv=newWidthDiv+(widthmainForCalculation-aggregateWidth)+border}else{var newWidthDiv=newWidthDiv+(widthmainForCalculation-aggregateWidth)}var setNewHeight=newWidthDiv*heightOriginalImg/widthOriginalImg;aggregateWidth=0;onlyFirstTime++}cgShowObject.removeClass("cg_margin_top_0");cgShowObject.css({border:"none",width:"unset","vertical-align":"unset","margin-top":"unset","margin-left":"unset","margin-bottom":"unset","margin-right":"unset","flex-basis":"unset","max-width":"unset",height:"unset"});cgShowObject.css({border:"none",margin:"unset",height:newHeight1[h],width:newWidthDiv,float:"left"});if(r==1){cgShowObject.css({"border-left":"rgba"+rgba+"  solid "+border+"px"})}if((r-1)%picsInRow==0){if(border>0){cgShowObject.css({"border-left":"rgba"+rgba+"  solid "+border+"px"})}cgShowObject.css({"margin-left":0})}else{if(cg_horizontalSpace>0){cgShowObject.css({"margin-left":""+cg_horizontalSpace+"px"})}if(border>0){cgShowObject.css({"border-left":"rgba"+rgba+"  solid "+border+"px"})}}$(cgShowObject).css({"border-right":"rgba"+rgba+"  solid "+border+"px"});if(rowsDone==0){if(cg_verticalSpace!=0||cg_verticalSpace==0&&cg_horizontalSpace!=0||cg_CircleImages==1){cgShowObject.css({"border-top":"rgba"+rgba+"  solid "+border+"px"})}else{if(rowsDone==0){cgShowObject.css({"border-top":"rgba"+rgba+"  solid "+border+"px"})}}cgShowObject.css({"border-bottom":"rgba"+rgba+"  solid "+border+"px"});if(cg_verticalSpace!=0||cg_verticalSpace==0&&cg_horizontalSpace!=0){cgShowObject.css({"margin-top":""+cg_verticalSpace+"px"})}}else{if(cg_verticalSpace!=0||cg_verticalSpace==0&&cg_horizontalSpace!=0||cg_CircleImages==1){cgShowObject.css({"margin-top":""+cg_verticalSpace+"px"});cgShowObject.css({"border-top":"rgba"+rgba+"  solid "+border+"px"});cgShowObject.css({"border-bottom":"rgba"+rgba+"  solid "+border+"px"})}else{cgShowObject.css({"border-bottom":"rgba"+rgba+"  solid "+border+"px"})}}if(cg_CircleImages==1){}var width=parseInt(cgJsData[gid].image[index][objectKey].Width);var height=parseInt(cgJsData[gid].image[index][objectKey].Height);var cgImageThumbRotation="cg"+cgJsData[gid].image[index][objectKey].rThumb+"degree";var heightDependOnNewWidth=newWidthDiv*height/width;if(heightDependOnNewWidth<newHeight1[h]){var newWidthImage=newHeight1[h]*width/height+2}else{var newWidthImage=newWidthDiv+2}if(cgJsData[gid].options.visual.TitlePositionGallery==2){}else if(cgJsData[gid].options.visual.TitlePositionGallery==3){}else{}if(cgJsData[gid].options.visual.CommentPositionGallery==2){}else if(cgJsData[gid].options.visual.CommentPositionGallery==3){}else{}if(cgJsData[gid].options.visual.RatingPositionGallery==2){}else if(cgJsData[gid].options.visual.RatingPositionGallery==3){}else{}if(cg_Use_as_URL==1&&cg_ForwardToURL==1&&cg_ForwardFrom==2){var cg_img_url_entry=$("#cg_img_url"+realId+"").val();if(typeof cg_img_url_entry==="undefined"){}else if(cg_img_url_entry.indexOf("http")>-1){cg_img_url_entry=cg_img_url_entry}else{cg_img_url_entry="http://"+cg_img_url_entry}}else{}if(r%picsInRow==0){rowsDone++}cgShowObject.css("display","inline");var hideTillHover="";if(cgJsData[gid].options.general.ShowAlways!=1){hideTillHover="cg_hide_till_hover"}var $infoRatingCommentDiv=$('<div data-cg_image_id="'+realId+'" class="cg_image'+classCounter+" cg_gallery_info "+hideTillHover+'" id="cgGalleryInfo'+realId+'">'+"</div>");if(cgJsData[gid].options.general.AllowComments>=1||cgJsData[gid].options.general.AllowRating>=1){$infoRatingCommentDiv.append('<div  class="cg_gallery_info_rating_comments"></div>')}var cgRotationThumbNumber=parseInt(cgJsData[gid].image[index][objectKey].rThumb);if(cgRotationThumbNumber=="270"||cgRotationThumbNumber=="90"){}if(cgJsData[gid].options.general.FbLikeGallery>=1){cgShowObject.find("#cgFacebookGalleryDiv"+realId).removeClass("cg_hide")}if(typeof cgJsData[gid].imageObject[realId]=="undefined"){var postTitle="",postAlt="";var imageObject=$('<figure class="cg_figure"><div id="cg_append'+realId+'" class="cg_append '+cgImageThumbRotation+'" '+postTitle+" "+postAlt+'></div><figcaption class="cg_figcaption"></figcaption></figure>');var cgShowPositionHelper=$('<span id="cgShowPositionHelper'+realId+'" class="cg_show_position_helper" data-cg-gid="'+gid+'"></span>');if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){imageObject.find(".cg_append").css({width:newHeight1[h]+"px",height:newWidthDiv+"px"})}else{imageObject.find(".cg_append").addClass("cg_append_hundert_percent")}if(newWidthImage<=imgSrcMediumWidth&&imgSrcMediumWidth>=500){imgSrc=imgSrcMedium}else if(newWidthImage<=imgSrcLargeWidth&&imgSrcLargeWidth>=500){imgSrc=imgSrcLarge}else{imgSrc=imgSrcOriginal}if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){imageObject.find(".cg_append").css("background",'url("'+imgSrcLarge+'") no-repeat center center')}else{imageObject.find(".cg_append").css("background",'url("'+imgSrc+'") no-repeat center center')}if(cgJsData[gid].options.general.FullSizeImageOutGallery==1){imageTarget='target="_blank"';imageHref=imgSrcOriginal;var contentWrapped=$("<a href='"+imageHref+"' "+imageTarget+"></a>");contentWrapped.append(imageObject);contentWrapped.append($infoRatingCommentDiv);cgShowObject.append(contentWrapped)}else{cgShowObject.append(imageObject).append($infoRatingCommentDiv);cgShowObject.append(cgShowPositionHelper)}if(calledFromUpload===true){$mainCGallery.append(cgShowObject)}else{$mainCGallery.append(cgShowObject)}cgShowObject.addClass("cg_fade_in");cgJsData[gid].imageObject[realId]=cgShowObject;cgJsData[gid].image[index][firstKey]["imageObject"]=cgJsData[gid].imageObject[realId];if(typeof cgJsData[gid].rateAndCommentNumbers[realId]=="undefined"){cgJsClass.gallery.dynamicOptions.getRatingAndComments(realId,arrIndex,objectKey,gid,calledFromUpload)}else{cgJsClass.gallery.dynamicOptions.setRatingAndComments(realId,arrIndex,objectKey,gid,calledFromUpload)}if(typeof cgJsData[gid].vars.info[realId]=="undefined"){if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){cgJsClass.gallery.info.getInfo(realId,gid,false,arrIndex,false,false,false,cgJsData[gid].imageObject[realId],newWidthDiv,newHeight1[h])}else{cgJsClass.gallery.info.getInfo(realId,gid,false,arrIndex,false,false,false,cgJsData[gid].imageObject[realId],newHeight1[h],newWidthDiv)}}else{if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){cgJsClass.gallery.info.setInfo(realId,gid,false,arrIndex,cgJsData[gid].vars.info[realId],false,false,false,cgJsData[gid].imageObject[realId],newWidthDiv,newHeight1[h])}else{cgJsClass.gallery.info.setInfo(realId,gid,false,arrIndex,cgJsData[gid].vars.info[realId],false,false,false,cgJsData[gid].imageObject[realId],newHeight1[h],newWidthDiv)}}if(imgSrc==imgSrcOriginal||imgDataWidth<newWidthImage){if(typeof cgJsData[gid].vars.rawData["imgSrcOriginalWidth"]=="undefined"){var img=new Image;img.src=imgSrc;img.onload=function(){cgJsData[gid].vars.rawData[realId]["imgSrcOriginalWidth"]=this.width;cgJsData[gid].vars.rawData[realId]["imgSrcOriginalHeight"]=this.height;var differenceCheck=newWidthImage-this.width;if(differenceCheck>20){cgJsData[gid].imageObject[realId].find(".cg_append").addClass("cg_background_size_unset")}}}}}else{if(cgJsData[gid].options.general.FullSizeImageOutGallery==1){if(!cgJsData[gid].image[index][firstKey]["imageObject"].find(">a").length){imageTarget='target="_blank"';imageHref=imgSrcOriginal;cgJsData[gid].image[index][firstKey]["imageObject"].find("figure").wrap("<a href='"+imageHref+"' "+imageTarget+"></a>")}}if(newWidthImage<=imgSrcMediumWidth){imgSrc=imgSrcMedium}else if(newWidthImage<=imgSrcLargeWidth){imgSrc=imgSrcLarge}else{imgSrc=imgSrcOriginal}if(cgJsClass.gallery.vars.hasToAppend==true||calledFromUpload===true){cgShowObject.appendTo($mainCGallery);cgShowObject.removeClass("hide")}if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){cgShowObject.find(".cg_append").css({background:'url("'+imgSrcLarge+'") no-repeat center center',width:""+newHeight1[h]+"px",height:""+newWidthDiv+"px",border:"none"})}else{cgShowObject.find(".cg_append").css({background:'url("'+imgSrc+'") no-repeat center center',width:""+newWidthDiv+"px",height:""+newHeight1[h]+"px",border:"none"})}if(cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.modernHover){if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){cgJsClass.gallery.function.general.tools.setHeightForInfoBlockInGallery(gid,cgJsData[gid].imageObject[realId].find(".cg_gallery_info_title"),cgJsData[gid].imageObject[realId],newWidthDiv,newHeight1[h],undefined,realId)}else{cgJsClass.gallery.function.general.tools.setHeightForInfoBlockInGallery(gid,cgJsData[gid].imageObject[realId].find(".cg_gallery_info_title"),cgJsData[gid].imageObject[realId],newHeight1[h],newWidthDiv,undefined,realId)}}else if(!cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.modernHover){if(cgJsData[gid].image[index][objectKey].rThumb=="270"||cgJsData[gid].image[index][objectKey].rThumb=="90"){cgJsClass.gallery.function.general.tools.checkIfSmallWidthImageObject(gid,cgJsData[gid].imageObject[realId],null,newWidthDiv,newHeight1[h])}else{cgJsClass.gallery.function.general.tools.checkIfSmallWidthImageObject(gid,cgJsData[gid].imageObject[realId],null,newHeight1[h],newWidthDiv)}}cgShowObject.attr({"data-cg-order":index})}if(g%picsInRow==0){h++}});cgJsData[gid].vars.mainCGallery.find(".cg_position_hr_1, .cg_position_hr_2, .cg_position_hr_3").remove();$mainCGallery.append('<div id="cgVerticalSpaceCreator'+gid+'" class="cgVerticalSpaceCreator" style="clear:both;display:block;height:'+cg_verticalSpace+'px;"></div>');cgJsClass.gallery.vars.isInitFullWindowOpen=false;cgJsClass.gallery.vars.isInitFullWindowClose=false;cgJsClass.gallery.function.general.tools.checkSkeletonLoaderToShow(gid);$mainCGallery.removeClass("cg_hide").addClass("cg_fade_in");cgJsData[gid].vars.cgCenterDivAppearenceHelper.addClass("cg_hide");cgJsClass.gallery.vars.switchViewsClicked=false;if(openPage==true||viewChange==true){setTimeout(function(){$mainCGallery.css("visibility","visible").removeClass("cg_hidden");if(!isCopyUploadToAnotherGallery&&!isFromFullWindowSliderOrBlogView){if(cgJsData[gid].vars.openedRealId>=1){setTimeout(function(){if(openPage==true){$mainCGallery.find("#cg_append"+cgJsData[gid].vars.openedRealId).addClass("cg_open_gallery").click()}else{$mainCGallery.find("#cg_append"+cgJsData[gid].vars.openedRealId).click()}},600)}}},100)}else{$mainCGallery.removeClass("cg_fade_in");setTimeout(function(){$mainCGallery.css("visibility","visible").removeClass("cg_hidden");if(cgJsData[gid].vars.openedRealId>=1&&cgJsData[gid].options.pro.SliderFullWindow!=1){$mainCGallery.addClass("cg_fade_in");setTimeout(function(){if(!isCopyUploadToAnotherGallery&&!isFromFullWindowSliderOrBlogView&&!calledFromUpload){$mainCGallery.find("#cg_append"+cgJsData[gid].vars.openedRealId).click()}cgJsData[gid].vars.mainCGdiv.find(".cg_header").removeClass("cg_pointer_events_none");cgJsData[gid].vars.mainCGdiv.find(".cg_further_images_container").removeClass("cg_pointer_events_none")},600)}},100)}}};;cgJsClass.gallery.blogLogic={init:function(jQuery,gid,openPage,calledFromUpload,openImage,stepChange,viewChange,randomButtonClicked,isCopyUploadToAnotherGallery,isJustSetWidth,fullWindowBlogLogicRealIdToShow,isFromCheckStepsCutImageData,BlogLookFullWindowInitiated){var gid=gid;cgJsData[gid].vars.mainCGdiv.removeClass("cg_height_view");cgJsData[gid].vars.mainCGallery.css("gap","");cgJsData[gid].vars.mainCGallery.css("column-gap","");cgJsData[gid].vars.currentLook="blog";if(cgJsData[gid].image.length<1){return}var $=jQuery;var $mainCGallery=cgJsData[gid].vars.mainCGallery;var $mainCGslider=cgJsData[gid].vars.mainCGallery.find("#mainCGslider"+gid);var $mainCGdiv=cgJsData[gid].vars.mainCGdiv;$mainCGallery.addClass("cg_blog").removeClass("cg_slider");if(cgJsClass.gallery.vars.fullwindow==gid){var widthMainCGallery=$(window).width()-cgJsClass.gallery.function.general.tools.getScrollbarWidthDependsOnBrowser()}else{var widthMainCGallery=$("#mainCGdivContainer"+gid).width()}if(widthMainCGallery<247){widthMainCGallery=247}var widthmain=widthMainCGallery;if(widthmain>cgJsClass.gallery.vars.maxWidthBlogView){}var widthmainForCalculation=widthmain-parseInt($mainCGdiv.css("padding-left"))-parseInt($mainCGdiv.css("padding-right"));cgJsData[gid].vars.widthmainForCalculation=widthmainForCalculation;if(cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.mainCGdivHelperChild.width(cgJsData[gid].vars.widthmainForCalculation+2)}cgJsClass.gallery.views.functions.destroyRangeSlider(gid);if(cgJsData[gid].vars.cgCenterDiv){if(cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.cgCenterDiv.addClass("cg_hide");cgJsData[gid].vars.cgCenterDiv.addClass("cg_hide_cg_center_div")}}cgJsData[gid].vars.$cgVerticalSpaceCreatorThumbView=null;cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.addClass("cg_hide");$mainCGdiv.css("width",widthmain+"px");$mainCGallery.css("width",100+"%");$mainCGallery.removeClass("cg_fade_in_new");cgJsData[gid].vars.cgCenterDiv.css("width",widthmainForCalculation+"px");cgJsData[gid].vars.widthmain=widthmain;$mainCGallery.removeClass("cg_thumb_view");$mainCGallery.find(".cg_show").addClass("cg_hide");$mainCGslider.find(".cg_show").addClass("cg_hide");cgJsClass.gallery.views.functions.checkAndAppendFromSliderToGallery($mainCGallery,$mainCGslider);if(openPage==true||viewChange==true){$mainCGallery.removeClass("cg_fade_in_new").addClass("cg_hidden")}if(openPage===true){}else{if(!cgJsData[gid].vars.cgCenterDivLoaderContainer.hasClass("cg_is_on_search")){$mainCGallery.addClass("cg_hidden");$mainCGallery.removeClass("cg_fade_in");$mainCGallery.css("visibility","visible")}}$mainCGdiv.find("#cgVerticalSpaceCreator"+gid).remove();var indexToStart=0;if(fullWindowBlogLogicRealIdToShow){$.each(cgJsData[gid].image,function(index,value){var firstKey=Object.keys(value)[0];var realId=cgJsData[gid].image[index][firstKey]["id"];if(realId==fullWindowBlogLogicRealIdToShow){indexToStart=index;return false}})}if(isFromCheckStepsCutImageData&&cgJsClass.gallery.vars.fullwindow){$.each(cgJsData[gid].image,function(index,value){var firstKey=Object.keys(value)[0];var realId=cgJsData[gid].image[index][firstKey]["id"];cgJsClass.gallery.views.singleView.createImageUrl(gid,realId);return false})}if(indexToStart>5){indexToStart=indexToStart-5;cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.removeClass("cg_hide")}var indexTotal;var blogViewImagesLoadedCount=0;var isLoopStarted=false;if(!isJustSetWidth){cgJsData[gid].cgCenterDivBlogObjects=[];$.each(cgJsData[gid].image,function(index,value){if(index<indexToStart&&!(indexToStart<=5)){return}if(!isLoopStarted){cgJsData[gid].vars.blogViewImagesLoadedFirstOrder=index;isLoopStarted=true}cgJsClass.gallery.views.singleView.openImage($,index,false,gid,"right",true,false,true,false,false,blogViewImagesLoadedCount,false,fullWindowBlogLogicRealIdToShow,BlogLookFullWindowInitiated);blogViewImagesLoadedCount=blogViewImagesLoadedCount+1;indexTotal=index})}if(cgJsData[gid].vars.blogViewImagesLoadedFirstOrder===0){cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.addClass("cg_hide")}else{cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.removeClass("cg_hide")}cgJsData[gid].vars.mainCGallery.find(".cg_position_hr_1, .cg_position_hr_2, .cg_position_hr_3").remove();cgJsData[gid].vars.mainCGallery.find(".cg-slider-range-container").remove();cgJsClass.gallery.function.general.tools.hideSkeletonLoader(gid);if(!cgJsData[gid].vars.closeEventInitWithDataCGrealIdCloseButton){$mainCGallery.removeClass("cg_hide cg_hidden").addClass("cg_fade_in")}cgJsData[gid].vars.cgCenterDivAppearenceHelper.addClass("cg_hide");cgJsClass.gallery.vars.switchViewsClicked=false;if(cgJsData[gid].vars.blogViewImagesLoadedLastOrder+1==Object.keys(cgJsData[gid].image).length){cgJsData[gid].vars.cgLdsDualRingCGcenterDivLazyLoader.addClass("cg_hide")}if(!cgJsData[gid].vars.blogViewImagesLoopOneTimeLoaded&&indexTotal+1==Object.keys(cgJsData[gid].image).length){cgJsData[gid].vars.cgLdsDualRingCGcenterDivLazyLoader.addClass("cg_hide")}if(Object.keys(cgJsData[gid].image).length<=10){}if(Object.keys(cgJsData[gid].image).length==11){}if(Object.keys(cgJsData[gid].image).length<=21&&isFromCheckStepsCutImageData){cgJsClass.gallery.views.clickFurtherImagesStep.cloneStep(gid,cgJsData[gid].vars.$cg_further_images_container_top,true)}cgJsData[gid].vars.cgCenterDiv.addClass("cg_hide_cg_center_div");if(calledFromUpload&&!isCopyUploadToAnotherGallery||openPage){var $openButton=$('<div data-cg-real-id="'+cgJsData[gid].vars.openedRealIdAfterUploadOrOnPageLoad+'"></div>');var $cgCenterDivBlogObject=cgJsData[gid].cgCenterDivBlogObject[$openButton.attr("data-cg-real-id")];if($cgCenterDivBlogObject&&$cgCenterDivBlogObject.length){if(cgJsClass.gallery.vars.fullwindow){cgJsData[gid].vars.mainCGdivHelperParent.animate({scrollTop:cgJsData[gid].cgCenterDivBlogObject[$openButton.attr("data-cg-real-id")].position().top+cgJsData[gid].vars.mainCGallery.position().top+10+"px"},0,function(){})}else{var $cgCenterDivBlogObject=cgJsData[gid].cgCenterDivBlogObject[$openButton.attr("data-cg-real-id")];$cgCenterDivBlogObject.css("scroll-margin","300px");$cgCenterDivBlogObject.get(0).scrollIntoView();$cgCenterDivBlogObject.css("scroll-margin","")}}}},scrollToElement:function(gid,$openButton,isBlogLogicChangeWidthOnly){cgJsData[gid].vars.cgCenterDiv.addClass("cg_hide_cg_center_div");cgJsData[gid].vars.mainCGdivHelperParent.addClass("cg_no_scroll");cgJsData[gid].vars.mainCGdivHelperParent.find(".cg_header .cg_thumbs_and_categories_control").addClass("cg_visibility_hidden");cgJsData[gid].vars.stepsNavigationTop.addClass("cg_visibility_hidden");cgJsClass.gallery.blogLogic.showLoader(gid);if(cgJsData[gid].cgCenterDivBlogObject[$openButton.attr("data-cg-real-id")]){cgJsData[gid].vars.cgLdsDualRingDivGalleryHide.addClass("cg_hide").removeClass("cg_padding_top_75");setTimeout(function(){cgJsData[gid].vars.cgCenterDiv.addClass("cg_hide_cg_center_div");cgJsData[gid].vars.mainCGdivHelperParent.animate({scrollTop:cgJsData[gid].cgCenterDivBlogObject[$openButton.attr("data-cg-real-id")].attr("data-cg-order")==0?0:cgJsData[gid].cgCenterDivBlogObject[$openButton.attr("data-cg-real-id")].position().top+cgJsData[gid].vars.mainCGallery.position().top+10+"px"},0,function(){cgJsClass.gallery.blogLogic.hideLoader(gid);cgJsData[gid].vars.stepsNavigationTop.removeClass("cg_visibility_hidden");cgJsData[gid].vars.mainCGdivHelperParent.find(".cg_header .cg_thumbs_and_categories_control").removeClass("cg_visibility_hidden");cgJsClass.gallery.blogLogic.removeVisibilityHiddenFromCgCenterDivBlogObjects(gid);cgJsData[gid].vars.mainCGdivHelperParent.removeClass("cg_no_scroll");setTimeout(function(){cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_hide")},50)})},1e3)}else{cgJsClass.gallery.blogLogic.hideLoader(gid);cgJsData[gid].vars.mainCGdiv.removeClass("cg_hidden");cgJsClass.gallery.blogLogic.removeVisibilityHiddenFromCgCenterDivBlogObjects(gid);cgJsData[gid].vars.cgLdsDualRingDivGalleryHide.addClass("cg_hide").removeClass("cg_padding_top_75");cgJsData[gid].vars.mainCGdivHelperParent.removeClass("cg_no_scroll");setTimeout(function(){cgJsClass.gallery.function.general.tools.tooltip.addClass("cg_hide")},50)}cgJsClass.gallery.views.singleView.createImageUrl(gid,$openButton.attr("data-cg-real-id"));cgJsClass.gallery.views.currentScrollImageDataImageIdBlogViewFullWindow=0;cgJsClass.gallery.views.currentScrollImageDataOrderBlogViewFullWindow=undefined},addVisibilityHiddenToCgCenterDivBlogObjects:function(gid){if(cgJsData[gid].cgCenterDivBlogObjects){cgJsData[gid].cgCenterDivBlogObjects.forEach(function($object){$object.addClass("cg_visibility_hidden")})}},removeVisibilityHiddenFromCgCenterDivBlogObjects:function(gid){if(cgJsData[gid].cgCenterDivBlogObjects){cgJsData[gid].cgCenterDivBlogObjects.forEach(function($object,index){if(index==0&&cgJsData[gid].image.length){cgJsClass.gallery.views.singleView.createImageUrl(gid,$object.attr("data-cg-real-id"))}$object.removeClass("cg_visibility_hidden")})}},prepareResizeFullWindow:function(gid){var widthBeforeForBlogView=cgJsData[gid].vars.widthmain;var widthNowForBlogView=jQuery(window).width()-cgJsClass.gallery.function.general.tools.getScrollbarWidthDependsOnBrowser();if(widthNowForBlogView>cgJsClass.gallery.vars.maxWidthBlogView){widthNowForBlogView=cgJsClass.gallery.vars.maxWidthBlogView}var factor=widthNowForBlogView/widthBeforeForBlogView;cgJsData[gid].vars.widthmain=widthNowForBlogView;cgJsData[gid].vars.widthmainForCalculation=cgJsData[gid].vars.widthmain-parseInt(cgJsData[gid].vars.mainCGdiv.css("padding-left"))-parseInt(cgJsData[gid].vars.mainCGdiv.css("padding-right"));cgJsData[gid].vars.mainCGdiv.width(widthNowForBlogView).removeClass("cg_display_inline_block").addClass("cg_display_block");if(!cgJsClass.gallery.vars.isMobile){}return{factor:factor,widthNowForBlogView:widthNowForBlogView}},showLoader:function(gid){if(cgJsData[gid].vars.cgCenterDivLoaderContainer.hasClass("cg_is_on_search")){return}cgJsData[gid].vars.cgCenterDivLoaderContainer.find(".cgCenterDiv.cgCenterDivLoader").removeClass("cg_hide");cgJsData[gid].vars.cgCenterDivLoaderContainer.addClass("cg_hidden").removeClass("cg_hide cg_visibility_visible");cgJsData[gid].vars.cgCenterDivLoaderContainerBackdrop.addClass("cg_hidden").removeClass("cg_hide cg_visibility_visible");var multiplikator=60;if(cgJsClass.gallery.vars.isMobile==true){multiplikator=40}cgJsData[gid].vars.cgCenterDivLoaderContainer.find(".cg-center-image.cg-center-div-skeleton-box").height(jQuery(window).height()/100*multiplikator);cgJsData[gid].vars.cgCenterDivLoaderContainer.removeClass("cg_hidden").addClass("cg_visibility_visible");cgJsData[gid].vars.cgCenterDivLoaderContainerBackdrop.removeClass("cg_hidden").addClass("cg_visibility_visible")},hideLoader:function(gid){if(cgJsData[gid].vars.cgCenterDivLoaderContainer.hasClass("cg_is_on_search")){return}cgJsData[gid].vars.cgCenterDivLoaderContainer.addClass("cg_hide cg_hidden").removeClass("cg_visibility_visible");cgJsData[gid].vars.cgCenterDivLoaderContainerBackdrop.addClass("cg_hide cg_hidden").removeClass("cg_visibility_visible");cgJsData[gid].vars.cg_sort_div_blogLookFullWindow.removeClass("cg_hidden");cgJsData[gid].vars.mainCGdivFullWindowConfigurationArea.removeClass("cg_hidden");if(cgJsData[gid].vars.cgFurtherImagesContainerAsTextTop){cgJsData[gid].vars.cgFurtherImagesContainerAsTextTop.removeClass("cg_visibility_hidden")}if(cgJsData[gid].vars.cgFurtherImagesContainerAsTextBottom){cgJsData[gid].vars.cgFurtherImagesContainerAsTextBottom.removeClass("cg_visibility_hidden")}},setWidthMainCGdivFullWindowConfigurationArea:function(gid){var barWidth=15;if(jQuery.position&&jQuery.position.scrollbarWidth){barWidth=jQuery.position.scrollbarWidth()}if(cgJsClass.gallery.vars.isMobile){cgJsData[gid].vars.mainCGdivFullWindowConfigurationArea.css("width",cgJsData[gid].vars.mainCGdivHelperParent.outerWidth(true)-barWidth+4+"px")}else{cgJsData[gid].vars.mainCGdivFullWindowConfigurationArea.css("width",cgJsData[gid].vars.mainCGdivHelperParent.outerWidth(true)-barWidth+"px")}},setTopMainCGdivFullWindowConfigurationArea:function(gid){cgJsData[gid].vars.mainCGdivFullWindowConfigurationArea.css("top",cgJsData[gid].vars.cg_sort_div_blogLookFullWindow.outerHeight(true)+"px")},changeWidth:function(widthNowForBlogView,factor,$mainCGdivHelperParent,gid,isClosingFullWindow,isFromResize){if(isFromResize&&cgJsClass.gallery.vars.fullwindow&&!widthNowForBlogView&&cgJsClass.gallery.vars.fullwindow!=gid&&cgJsData[gid].vars.currentLook=="blog"){widthNowForBlogView=cgJsData[gid].vars.mainCGdivHelperParent.width()-22;cgJsData[gid].vars.mainCGdiv.width(widthNowForBlogView);cgJsData[gid].vars.widthmainForCalculation=widthNowForBlogView}widthNowForBlogView=widthNowForBlogView-40;if(!isFromResize){cgJsData[gid].cgCenterDivBlogObjects.forEach(function($object){$object.addClass("cg_visibility_hidden")});cgJsData[gid].vars.mainCGdiv.addClass("cg_hidden")}if(isFromResize){}$mainCGdivHelperParent.find(".cgCenterDivForBlogView").each(function(index){var $cgCenterDiv=jQuery(this);if(widthNowForBlogView){$cgCenterDiv.width(widthNowForBlogView)}cgJsClass.gallery.views.singleView.openImage(jQuery,index,false,gid,"right",false,false,true,true,false,false,false,false,isClosingFullWindow)});cgJsData[gid].vars.mainCGdiv.removeClass("cg_hidden");cgJsClass.gallery.vars.isInitFullWindowOpen=false;if(cgJsClass.gallery.vars.fullwindow&&cgJsClass.gallery.vars.fullwindow==gid){cgJsData[gid].vars.mainCGdivHelperChild.width(cgJsData[gid].vars.widthmainForCalculation+2)}},reset:function(gid){cgJsData[gid].vars.mainCGdiv.find(".cgCenterDivForBlogView:not(.cgCenterDivLoader)").remove();cgJsData[gid].vars.blogViewImagesLoadedFirstOrder=null;cgJsData[gid].vars.blogViewImagesLoaded=false;cgJsData[gid].vars.blogViewImagesLoadedGid=0;cgJsData[gid].vars.blogViewImagesLoadedLastOrder=0;cgJsData[gid].vars.cgLdsDualRingCGcenterDivLazyLoader.addClass("cg_hide");cgJsData[gid].vars.blogViewImagesLoopOneTimeLoaded=false;cgJsData[gid].vars.blogViewImagesLoadedFirstRealId=false}};;cgJsClass.gallery.views.functions={checkAndAppendFromSliderToGallery:function($mainCGallery,$mainCGslider){var appendNew=false;if($mainCGallery.find("> .cg_show").length<1){$mainCGslider.find(".cg_show").appendTo($mainCGallery);appendNew=true}return appendNew},appendAndRemoveImagesInSlider:function(gid,value,maximumVisibleImagesInSlider,$mainCGslider,isFromSlide){if(Object.keys(cgJsData[gid].image).length<=cgJsData[gid].vars.maximumVisibleImagesInSlider){return}var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}if(sliderView){value=parseInt(value);maximumVisibleImagesInSlider=parseInt(maximumVisibleImagesInSlider);var halfMinusOneOfVisibleImages=Math.floor(maximumVisibleImagesInSlider/2);var preAppend=false;var prePositionAtBeginning=false;if(value>halfMinusOneOfVisibleImages){preAppend=true}for(var index in cgJsData[gid].image){if(!cgJsData[gid].image.hasOwnProperty(index)){break}index=parseInt(index);var firstKey=Object.keys(cgJsData[gid].image[index])[0];var realId=cgJsData[gid].image[index][firstKey].id;var imgType=cgJsData[gid].vars.rawData[realId].ImgType;var valueToCheck=value+maximumVisibleImagesInSlider;debugger;if(cgJsData[gid].image[index][firstKey].imageObject){if(preAppend&&index>=value-halfMinusOneOfVisibleImages&&index<=value+halfMinusOneOfVisibleImages){if(false&&cgJsData[gid].image[index][firstKey].imageObject.find(".cg_append_social").length){var $cg_show=jQuery('<div class="cg_show"></div>');$mainCGslider.append($cg_show);cgJsData[gid].image[index][firstKey].imageObject.removeClass("cg_fade_in");if(imgType=="tkt"){cgJsClass.gallery.views.functions.appendTikTokException(jQuery,imgType,sliderView,$cg_show,gid,realId)}else{$cg_show.replaceWith(cgJsData[gid].image[index][firstKey].imageObject)}}else{if(imgType=="tkt"){cgJsClass.gallery.views.functions.appendTikTokException(jQuery,imgType,sliderView,cgJsData[gid].image[index][firstKey].imageObject,gid,realId)}else{cgJsData[gid].image[index][firstKey].imageObject.removeClass("cg_fade_in").appendTo($mainCGslider)}}}else if(value<=halfMinusOneOfVisibleImages&&index<=halfMinusOneOfVisibleImages||value<=halfMinusOneOfVisibleImages&&index<maximumVisibleImagesInSlider){if(false&&cgJsData[gid].image[index][firstKey].imageObject.find(".cg_append_social").length){var $cg_show=jQuery('<div class="cg_show"></div>');$mainCGslider.append($cg_show);cgJsData[gid].image[index][firstKey].imageObject.removeClass("cg_fade_in");if(imgType=="tkt"){cgJsClass.gallery.views.functions.appendTikTokException(jQuery,imgType,sliderView,$cg_show,gid,realId)}else{$cg_show.replaceWith(cgJsData[gid].image[index][firstKey].imageObject)}}else{if(imgType=="tkt"){cgJsClass.gallery.views.functions.appendTikTokException(jQuery,imgType,sliderView,cgJsData[gid].image[index][firstKey].imageObject,gid,realId)}else{cgJsData[gid].image[index][firstKey].imageObject.removeClass("cg_fade_in").appendTo($mainCGslider)}}}else if(index>=value&&index<valueToCheck){if(false&&cgJsData[gid].image[index][firstKey].imageObject.find(".cg_append_social").length){var $cg_show=jQuery('<div class="cg_show"></div>');$mainCGslider.append($cg_show);cgJsData[gid].image[index][firstKey].imageObject.removeClass("cg_fade_in");if(imgType=="tkt"){cgJsClass.gallery.views.functions.appendTikTokException(jQuery,imgType,sliderView,$cg_show,gid,realId)}else{$cg_show.replaceWith(cgJsData[gid].image[index][firstKey].imageObject)}}else{if(imgType=="tkt"){cgJsClass.gallery.views.functions.appendTikTokException(jQuery,imgType,sliderView,cgJsData[gid].image[index][firstKey].imageObject,gid,realId)}else{cgJsData[gid].image[index][firstKey].imageObject.removeClass("cg_fade_in").appendTo($mainCGslider)}}}else{cgJsData[gid].image[index][firstKey].imageObject.remove()}}}if(!isFromSlide){cgJsData[gid].vars.cgSliderRange.slider("value",value)}}},destroyRangeSlider:function(gid){if(cgJsData[gid].vars.cgSliderRange){try{cgJsData[gid].vars.cgSliderRange.slider("destroy")}catch(error){}cgJsData[gid].vars.cgSliderRange.remove()}},resetHeader:function(gid){var $cgHeader=cgJsData[gid].vars.mainCGdiv.find(".cg_header");$cgHeader.addClass("cg_hide");$cgHeader.find("#cgCatSelectAreaContainer"+gid).removeClass("cg_hide");$cgHeader.find("#cgGalleryViewSortControl"+gid).removeClass("cg_hide");$cgHeader.find(".cg_gallery_thumbs_control").removeClass("cg_hide");$cgHeader.find(".cg-fullsize-div").removeClass("cg_hide")},checkHeader:function(gid){var isVisibleCGheader=true;var $cgHeader=cgJsData[gid].vars.mainCGdiv.find(".cg_header");var noCats=false;var hadCgHide=false;if($cgHeader.hasClass("cg_hide")){hadCgHide=true;$cgHeader.addClass("cg_height_0_important");$cgHeader.removeClass("cg_hide")}$cgHeader.removeClass("cg_border_bottom_unset_important");if(!cgJsData[gid].vars.catArea){noCats=true;$cgHeader.find("#cgCatSelectAreaContainer"+gid).addClass("cg_hide")}var noSortDivElements=false;if(!$cgHeader.find(".cg_sort_div > *:visible").length){noSortDivElements=true;$cgHeader.find("#cgGalleryViewSortControl"+gid).addClass("cg_hide")}var noThumbElements=false;if(!$cgHeader.find(".cg_gallery_thumbs_control > *:visible").length){noThumbElements=true;$cgHeader.find(".cg_gallery_thumbs_control").addClass("cg_hide")}var noFullSizeDiv=false;if(!$cgHeader.find(".cg-fullsize-div > *:visible").length){noFullSizeDiv=true;$cgHeader.find(".cg-fullsize-div").addClass("cg_hide")}if(noThumbElements&&noFullSizeDiv){$cgHeader.addClass("cg_border_bottom_unset_important")}if(noSortDivElements&&noThumbElements&&noFullSizeDiv&&noCats){isVisibleCGheader=false;$cgHeader.addClass("cg_hide")}if(hadCgHide&&!isVisibleCGheader){$cgHeader.removeClass("cg_height_0_important");$cgHeader.addClass("cg_hide")}else if(hadCgHide&&isVisibleCGheader){$cgHeader.removeClass("cg_height_0_important")}if(cgJsData[gid].vars.isOnlyGalleryEcommerce&&cgJsData[gid].vars.isCgWpPageEntryLandingPage){$cgHeader.removeClass("cg_hide cg_hide_override").find(".cg_gallery_view_sort_control").removeClass("cg_hide");$cgHeader.find(".cg_search_input_div").addClass("cg_hide");$cgHeader.find(".cg_select_order_label").addClass("cg_hide");$cgHeader.find(".cg_random_button").addClass("cg_hide cg_hide_override")}if(cgJsData[gid].vars.isCGalleries){cgJsData[gid].vars.mainCGdiv.find(".cg_header").addClass("cg_hide");isVisibleCGheader=false}return isVisibleCGheader},checkIfGalleryContainerCanBeDisplayed:function(gid,isVisibleCGheader){var $mainCGdiv=cgJsData[gid].vars.mainCGdiv;if(!$mainCGdiv.find("#cgShowTextUntilAnImageAdded"+gid).text().trim().length&&(!isVisibleCGheader||$mainCGdiv.find(".cg_header").hasClass("cg_hide"))&&cgJsData[gid].vars.imageDataLength<1){$mainCGdiv.addClass("cg_hide")}},appendTikTokException:function($,imgType,sliderView,cgShowObject,gid,realId){if(imgType=="tkt"){if(!sliderView){cgShowObject.find(".cg_append").remove()}if(cgJsData[gid].options.pro.ConsentTikTok==1&&!sessionStorage.getItem("cgTktConsentAgreed")){imageObject=cgJsClass.gallery.function.general.tools.getTktOverlayConsentElement($,gid,realId);cgShowObject.append(imageObject);cgShowObject.addClass("cg_tkt_consent_required")}else{var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent($,gid,realId);var imageObject=$('<div  class="cg_append cg_append_tkt" id="cg_append'+realId+'" ></div>');imageObject.append($blockquote);cgShowObject.append(imageObject);if(sliderView){if(!cgShowObject.find(".cg_append_social_overlay").length){cgShowObject.append('<div class="cg_append_tkt_overlay cg_append_social_overlay"></div>')}}}}}};;cgJsClass.gallery.vars.alreadyLoadedImages=[];cgJsClass.gallery.vars.sortingStartValue=1e5;cgJsClass.gallery.vars.maxWidthBlogView=970;cgJsClass.gallery.vars.countSon="";cgJsClass.gallery.vars.countSoff="";cgJsClass.gallery.vars.countRon=null;cgJsClass.gallery.vars.countRoff=null;cgJsClass.gallery.vars.cgGalleryInfoWidth=130;cgJsClass.gallery.vars.localStorageCheck=true;cgJsClass.gallery.vars.checkCatSelector=false;cgJsClass.gallery.vars.currentLook=null;cgJsClass.gallery.vars.hasToAppend=false;cgJsClass.gallery.vars.rawData=null;cgJsClass.gallery.vars.cgCenterDiv=null;cgJsClass.gallery.vars.openedGalleryImageOrder=null;cgJsClass.gallery.vars.openedGallery=null;cgJsClass.gallery.vars.galleryForRecursiveNavigation=null;cgJsClass.gallery.vars.openedRealId=null;cgJsClass.gallery.vars.countAllImages=null;cgJsClass.gallery.vars.originImageData=null;cgJsClass.gallery.vars.stepsNavigationTop=null;cgJsClass.gallery.vars.stepsNavigationBottom=null;cgJsClass.gallery.vars.fullscreen=false;cgJsClass.gallery.vars.fullwindow=null;cgJsClass.gallery.vars.switchViewsClicked=false;cgJsClass.gallery.vars.thereIsImageInfo=false;cgJsClass.gallery.vars.showImageClicked=false;cgJsClass.gallery.vars.messageContainerShown=false;cgJsClass.gallery.vars.windowWidthLastResize=null;cgJsClass.gallery.vars.isMobile=false;cgJsClass.gallery.vars.keypressStartInSeconds=0;cgJsClass.gallery.vars.openedUploadFormGalleryId=0;cgJsClass.gallery.vars.backButtonClicked=false;cgJsClass.gallery.vars.byStartPageOpenedImageId=0;cgJsClass.gallery.vars.isEdge=false;cgJsClass.gallery.vars.passThrough=false;cgJsClass.gallery.vars.maxImageWidth=970;cgJsClass.gallery.vars.cg_position_hrs='<span class="cg_position_hr_1"></span><span class="cg_position_hr_2" /></span><span class="cg_position_hr_3" /></span>';cgJsClass.gallery.vars.ratingAndCommentsProperties=["Rating","CountC","CountCtoReview","CountR","CountS","addCountS","addCountR1","addCountR2","addCountR3","addCountR4","addCountR5","addCountR6","addCountR7","addCountR8","addCountR9","addCountR10","CountR1","CountR2","CountR3","CountR4","CountR5","CountR6","CountR7","CountR8","CountR9","CountR10","CountSreal","CountRtotal","RatingTotal","RatingAverage","RatingAverageForSecondarySorting","RatingTotalForSecondarySorting"];cgJsClass.gallery.vars.emojis=["x1F600","x1F603","x1F604","x1F601","x1F606","x1F605","x1F602","x1F923","x1F642","x1F643","x1F60A","x1F607","x1F60D","x1F618","x1F61C","x1F911","x1F917","x1F914","x1F614","x1F922","x1F92F","x1F9D0","x1F973","x1F646","x1F596","x1F44C","x1F90F","x270C","x1F44D","x1F44E","x1F44A","x1F44F","x1F91D","x1F680","x1F6F8","x1F319","x2B50","x26A1","x1F525","x2744","x1F30D","x1F30E","x1F30F","x1F3D4","x1F30B","x1F3D6","x1F3DD","x1F34A","x1F344","x1F37F","x1F363","x1F370","x1F355","x1F354","x1F35F","x1F6C0","x1F48E","x1F5FA","x23F0","x1F579","x1F4DA","x1F431","x1F42A","x1F439","x1F424"];cgJsClass.gallery.vars.regexJapanese=/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g;cgJsClass.gallery.vars.regexEmoticons=/(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])/g;cgJsClass.gallery.vars.videosMetadataLoaded={};cgJsClass.gallery.vars.commentSubmitButtonDisabledCounter=0;cgJsClass.gallery.vars.cookieValue="";;cgJsClass.gallery.categories={existingCategories:[0],init:function(gid,data){if(!cgJsData[gid].vars.existingCategories){cgJsData[gid].vars.existingCategories=[];cgJsData[gid].vars.existingCategories.push(0)}if(typeof data=="object"){if(Object.keys(data).length>=1){var newData=[];for(var i in data){if(!data.hasOwnProperty(i)){break}newData.push(data[i])}newData.sort(function(a,b){return a.Field_Order-b.Field_Order});for(var property in cgJsData[gid].forms.upload){if(!cgJsData[gid].forms.upload.hasOwnProperty(property)){break}if(cgJsData[gid].forms.upload[property].Field_Type=="selectc-f"){cgJsData[gid].vars.categoriesUploadFormId=property;if(cgJsData[gid].forms.upload[property].Show_Slider==1){cgJsData[gid].vars.categoriesUploadFormField_Show_Slider=cgJsData[gid].forms.upload[property].Show_Slider}cgJsData[gid].vars.categoriesUploadFormTitle=cgJsData[gid].forms.upload[property].Field_Content.titel}}var active=0;var $cgCatSelectArea=null;var $labelContainerOrigin=null;if(cgJsData[gid].options.pro.CatWidget==1){$cgCatSelectArea=jQuery("#mainCGdiv"+gid).find(".cg-cat-select-area");cgJsData[gid].vars.catArea=$cgCatSelectArea;$labelContainerOrigin=$cgCatSelectArea.find("label");$cgCatSelectArea.empty()}for(var i in newData){if(!newData.hasOwnProperty(i)){break}var catId=newData[i]["id"].toString();cgJsData[gid].vars.existingCategories.push(parseInt(catId));if(newData[i]["Active"]==1){active=1;if(cgJsData[gid].options.pro.CatWidget==1){var $labelContainer=$labelContainerOrigin;$labelContainer.attr("data-cg-cat-id",catId);$labelContainer.attr("data-cg-gid",gid);$labelContainer.find("span.cg_select_cat").html(newData[i]["Name"]+' <span class="cg_select_cat_count">(0)</span>');$labelContainer.clone().appendTo($cgCatSelectArea)}cgJsData[gid].vars.categories[catId]=newData[i];cgJsData[gid].vars.categories[catId]["Checked"]=true;if(cgJsData[gid].vars.categories[catId]["isShowTagInGallery"]){cgJsData[gid].vars.isShowTagInGallery=true}}}if(cgJsData[gid].options.pro.ShowOther==1){if(cgJsData[gid].options.pro.CatWidget==1){$labelContainerOrigin.attr("data-cg-cat-id",0);$labelContainerOrigin.attr("data-cg-gid",gid);$labelContainerOrigin.find("span.cg_select_cat").html(cgJsClass.gallery.language[gid].Other+' <span class="cg_select_cat_count">(0)</span>');$cgCatSelectArea.append($labelContainerOrigin)}cgJsData[gid].vars.categories[0]={};cgJsData[gid].vars.categories[0]["Checked"]=true;cgJsData[gid].vars.categories[0]["Name"]=cgJsClass.gallery.language[gid].Other}if($cgCatSelectArea){$cgCatSelectArea.css("display","flex")}return true}else{return false}}else{return false}},checkIfShowMoreForCatAreaRequired:function(gid,isFromFullWindowClose,isFromClickCategories,isFromWindowResize){if(cgJsData[gid].vars.catArea){if(isFromWindowResize){cgJsData[gid].vars.catArea.removeClass("cg-cat-select-area-show-less-available");cgJsData[gid].vars.catArea.find(".cg-cat-select-area").removeClass("cg-cat-select-area-show-less-available")}var $cg_header=cgJsData[gid].vars.mainCGdiv.find(".cg_header");var cgHeaderVisibilityHidden=false;if($cg_header.hasClass("cg_visibility_hidden")){cgHeaderVisibilityHidden=true}var cgHeaderHide=false;if($cg_header.hasClass("cg_hide")){cgHeaderHide=true}$cg_header.removeClass("cg_visibility_hidden cg_hide");var lastPositionTop=undefined;var showMore=false;if(isFromFullWindowClose){cgJsData[gid].vars.catArea.removeClass("cg-cat-select-area-show-more-available cg-cat-select-area-show-less-available");cgJsData[gid].vars.catArea.closest(".cg-cat-select-area-container").removeClass("cg_hide cg_hidden cg-cat-select-area-show-more-available cg-cat-select-area-show-less-available");cgJsData[gid].vars.catArea.removeClass("cg_hide").addClass("cg_hidden");cgJsData[gid].vars.catArea.closest(".cg-cat-select-area-container").removeClass("cg-cat-select-area-show-more-available").find(".cg-cat-select-area-show-more").addClass("cg_hide");cgJsData[gid].vars.catArea.closest(".cg-cat-select-area-container").removeClass("cg-cat-select-area-show-more-available").find(".cg-cat-select-area-show-less").addClass("cg_hide")}if(isFromClickCategories){if(cgJsData[gid].vars.catArea.hasClass("cg-cat-select-area-show-less-available")){return}}cgJsData[gid].vars.catArea.find(".cg_select_cat_label").each(function(){var positionTop=jQuery(this).position().top;if(lastPositionTop!==undefined&&lastPositionTop!==positionTop){showMore=true;return false}lastPositionTop=positionTop});if(cgJsData[gid].options.pro.ShowCatsUnfolded==1){cgJsData[gid].vars.catArea.removeClass("cg-cat-select-area-show-more-available");cgJsData[gid].vars.catArea.addClass("cg-cat-select-area-show-less-available cg-cat-select-area-show-unfolded");cgJsData[gid].vars.catArea.closest(".cg-cat-select-area-container").removeClass("cg-cat-select-area-show-more-available").find(".cg-cat-select-area-show-more").addClass("cg_hide");cgJsData[gid].vars.catArea.closest(".cg-cat-select-area-container").removeClass("cg-cat-select-area-show-more-available").find(".cg-cat-select-area-show-less").addClass("cg_hide")}else if(showMore){cgJsData[gid].vars.catArea.addClass("cg-cat-select-area-show-more-available");cgJsData[gid].vars.catArea.closest(".cg-cat-select-area-container").addClass("cg-cat-select-area-show-more-available").find(".cg-cat-select-area-show-more").removeClass("cg_hide");cgJsData[gid].vars.catArea.closest(".cg-cat-select-area-container").addClass("cg-cat-select-area-show-more-available").find(".cg-cat-select-area-show-less").addClass("cg_hide")}else{cgJsData[gid].vars.catArea.removeClass("cg-cat-select-area-show-more-available");cgJsData[gid].vars.catArea.closest(".cg-cat-select-area-container").removeClass("cg-cat-select-area-show-more-available").find(".cg-cat-select-area-show-more").addClass("cg_hide");cgJsData[gid].vars.catArea.closest(".cg-cat-select-area-container").removeClass("cg-cat-select-area-show-more-available").find(".cg-cat-select-area-show-less").addClass("cg_hide")}if(cgHeaderVisibilityHidden){$cg_header.addClass("cg_visibility_hidden")}if(cgHeaderHide){$cg_header.addClass("cg_hide")}cgJsData[gid].vars.catArea.removeClass("cg_hidden")}},initClick:function(){if(cgJsClass.gallery.vars.initClickCategories){return}else{cgJsClass.gallery.vars.initClickCategories=true}jQuery(document).on("click",".cg_select_cat_label",function(){var gid=jQuery(this).attr("data-cg-gid");var $element=jQuery(this);if(cgJsClass.gallery.function.general.tools.setWaitingForValues(gid,$element,"click")){return}$element.closest(".cg-cat-select-area").find(".cg_select_cat_label:not([data-cg-cat-id="+$element.attr("data-cg-cat-id")+"])").addClass("cg_pointer_events_none cg_skeleton_loader");cgJsData[gid].vars.searchInputCollectedIds=null;if(cgJsData[gid].vars.currentLook=="blog"){cgJsClass.gallery.blogLogic.reset(gid)}cgJsClass.gallery.categories.processCategories(gid,$element);if(!cgJsClass.gallery.vars.fullwindow){cgJsClass.gallery.categories.checkIfShowMoreForCatAreaRequired(gid,false,true)}cgJsClass.gallery.vars.isHashJustChangedForHandling=true;window.history.replaceState({},document.title,location.protocol+"//"+location.host+location.pathname);var $showMoreButton=jQuery(this).closest(".cg-cat-select-area-container").find(".cg-cat-select-area-show-more");if($showMoreButton.is(":visible")){$showMoreButton.click()}setTimeout(function(){$element.closest(".cg-cat-select-area").find(".cg_select_cat_label:not([data-cg-cat-id="+$element.attr("data-cg-cat-id")+"])").removeClass("cg_pointer_events_none cg_skeleton_loader")},1e3)});jQuery(document).on("click",".cg-cat-select-area-show-more",function(){var $cgCatSelectAreaContainer=jQuery(this).closest(".cg-cat-select-area-container");$cgCatSelectAreaContainer.addClass("cg-cat-select-area-show-less-available").removeClass("cg-cat-select-area-show-more-available");$cgCatSelectAreaContainer.find(".cg-cat-select-area").addClass("cg-cat-select-area-show-less-available").removeClass("cg-cat-select-area-show-more-available");$cgCatSelectAreaContainer.find(".cg-cat-select-area-show-more").addClass("cg_hide");$cgCatSelectAreaContainer.find(".cg-cat-select-area-show-less").removeClass("cg_hide")});jQuery(document).on("click",".cg-cat-select-area-show-less",function(){var $cgCatSelectAreaContainer=jQuery(this).closest(".cg-cat-select-area-container");$cgCatSelectAreaContainer.removeClass("cg-cat-select-area-show-less-available").addClass("cg-cat-select-area-show-more-available");$cgCatSelectAreaContainer.find(".cg-cat-select-area").removeClass("cg-cat-select-area-show-less-available").addClass("cg-cat-select-area-show-more-available");$cgCatSelectAreaContainer.find(".cg-cat-select-area-show-more").removeClass("cg_hide");$cgCatSelectAreaContainer.find(".cg-cat-select-area-show-less").addClass("cg_hide")})},processCategories:function(gid,$element,isCalledFromUpload){cgJsClass.gallery.vars.hasToAppend=true;cgJsClass.gallery.vars.categoryClicked=true;cgJsClass.gallery.getJson.abortGetJson(gid);var categories=[];if($element.hasClass("cg_cat_checkbox_checked")){cgJsData[gid].vars.categories[$element.attr("data-cg-cat-id")]["Checked"]=false;$element.addClass("cg_cat_checkbox_unchecked");$element.removeClass("cg_cat_checkbox_checked")}else if(!$element.hasClass("cg_cat_checkbox_checked")){cgJsData[gid].vars.categories[$element.attr("data-cg-cat-id")]["Checked"]=true;var catId=$element.attr("data-cg-cat-id");categories.push(catId);$element.addClass("cg_cat_checkbox_checked");$element.removeClass("cg_cat_checkbox_unchecked")}var $cgCatSelectArea=$element.closest(".cg-cat-select-area");var isAllCategoriesUnchecked=true;$cgCatSelectArea.find(".cg_select_cat_label").each(function(){if(jQuery(this).hasClass("cg_cat_checkbox_checked")){isAllCategoriesUnchecked=false;cgJsData[gid].vars.categories[jQuery(this).attr("data-cg-cat-id")]["Checked"]=true}else if(!jQuery(this).hasClass("cg_cat_checkbox_checked")){cgJsData[gid].vars.categories[jQuery(this).attr("data-cg-cat-id")]["Checked"]=false}});if(cgJsData[gid].options.pro.ShowCatsUnchecked==1){if(isAllCategoriesUnchecked==true){$cgCatSelectArea.find(".cg_select_cat_label").each(function(){cgJsData[gid].vars.categories[jQuery(this).attr("data-cg-cat-id")]["Checked"]=true})}}if(!isCalledFromUpload){if(cgJsData[gid].vars.openedRealId>0){cgJsClass.gallery.views.close(gid)}}var ids=cgJsClass.gallery.function.search.collectData(gid);cgJsData[gid].vars.searchInputCollectedIds=ids;var fullImageDataFilteredAfterSearch=cgJsClass.gallery.sorting.initSort(gid);var step=1;cgJsClass.gallery.dynamicOptions.checkStepsCutImageData(jQuery,step,true,false,gid,undefined,undefined,undefined,undefined,true,fullImageDataFilteredAfterSearch);cgJsClass.gallery.vars.categoryClicked=false;cgJsClass.gallery.vars.hasToAppend=false},resetCategoriesCheckedStatusAfterUploadBeforeSorting:function(gid){if(cgJsData[gid].options.pro.CatWidget==1){var $cgCatSelectArea=cgJsData[gid].vars.mainCGdiv.find(".cg-cat-select-area");$cgCatSelectArea.find(".cg_select_cat_label").each(function(){cgJsData[gid].vars.categories[jQuery(this).attr("data-cg-cat-id")]["Checked"]=true;if(cgJsData[gid].options.pro.ShowCatsUnchecked==1){jQuery(this).removeClass("cg_cat_checkbox_checked")}else{jQuery(this).addClass("cg_cat_checkbox_checked")}})}},addCategoriesImagesCount:function(gid){if(cgJsData[gid].vars.showCategories&&cgJsData[gid].options.pro.CatWidget==1){if(Object.keys(cgJsData[gid].vars.categoriesImagesCount).length>=1){for(var categoryId in cgJsData[gid].vars.categoriesImagesCount){if(!cgJsData[gid].vars.categoriesImagesCount.hasOwnProperty(categoryId)){break}cgJsData[gid].vars.mainCGdiv.find("#cgCatSelectArea"+gid+' .cg_select_cat_label[data-cg-cat-id="'+categoryId+'"] .cg_select_cat_count').html("("+cgJsData[gid].vars.categoriesImagesCount[categoryId]+")")}}}},prepareAndAddCategoriesImagesCountAfterSearch:function(gid,searchInputCollectedIdsWithoutCategoryDependency,data){if(cgJsData[gid].vars.showCategories&&cgJsData[gid].options.pro.CatWidget==1){if(Object.keys(cgJsData[gid].vars.categoriesImagesCount).length>=1){for(var categoryId in cgJsData[gid].vars.categoriesImagesCount){if(!cgJsData[gid].vars.categoriesImagesCount.hasOwnProperty(categoryId)){break}cgJsData[gid].vars.categoriesImagesCount[categoryId]=0}for(var realId in data){if(cgJsClass.gallery.categories.checkIfCanBeAddedToCategoriesCount(gid,realId)){if(!data.hasOwnProperty(realId)){break}if(searchInputCollectedIdsWithoutCategoryDependency.indexOf(realId)>=0){var category=data[realId].Category;if(typeof category=="undefined"){category=0;data[realId].Category=0}else if(cgJsData[gid].vars.existingCategories.indexOf(parseInt(category))=="-1"){category=0;data[realId].Category=0}if(!cgJsData[gid].vars.categoriesImagesCount[category]){cgJsData[gid].vars.categoriesImagesCount[category]=1}else{cgJsData[gid].vars.categoriesImagesCount[category]=cgJsData[gid].vars.categoriesImagesCount[category]+1}}}}cgJsData[gid].vars.mainCGdiv.find("#cgCatSelectArea"+gid+" .cg_select_cat_label .cg_select_cat_count").html("(0)");cgJsClass.gallery.categories.addCategoriesImagesCount(gid)}}},checkAndSetCategoriesAfterUploadIfNecessary:function(gid,data,newImageIdsArrayFromUpload){var processingInitiated=false;var $categoryElement=null;for(var i in newImageIdsArrayFromUpload){if(!newImageIdsArrayFromUpload.hasOwnProperty(i)){break}if(data[newImageIdsArrayFromUpload[i]]){if(cgJsData[gid].vars.showCategories&&parseInt(data[newImageIdsArrayFromUpload[i]].Category)&&cgJsData[gid].options.pro.CatWidget==1){if(cgJsData[gid].options.pro.ShowCatsUnchecked==1){var oneCategoriesIsChecked=false;cgJsData[gid].vars.mainCGdiv.find(".cg-cat-select-area .cg_select_cat_label").each(function(){if(jQuery(this).hasClass("cg_cat_checkbox_checked")){oneCategoriesIsChecked=true;return false}});if(oneCategoriesIsChecked){$categoryElement=cgJsData[gid].vars.mainCGdiv.find('.cg-cat-select-area .cg_select_cat_label[data-cg-cat-id="'+data[newImageIdsArrayFromUpload[i]].Category+'"]');processingInitiated=true}}else{$categoryElement=cgJsData[gid].vars.mainCGdiv.find('.cg-cat-select-area .cg_select_cat_label[data-cg-cat-id="'+data[newImageIdsArrayFromUpload[i]].Category+'"]');processingInitiated=true}}}}if($categoryElement){cgJsClass.gallery.categories.processCategories(gid,$categoryElement,true)}return processingInitiated},checkIfCanBeAddedToCategoriesCount:function(gid,realId){if(!cgJsData[gid].vars.isUserGallery||cgJsData[gid].vars.isUserGallery&&cgJsData[gid].wpUserImageIds.indexOf(parseInt(realId))!=-1){return true}else{return false}}};;cgJsClass.gallery.categories.setSelectFromLocalStorage=function(){var cats=this.getLocalStorageCats();for(var cat in cats){if(!cats.hasOwnProperty(cat)){break}jQuery("#cgCatSelectArea [value='"+cat+"'].cg_select_cat").prop("checked",cats[cat]);if(cats[cat]==true){jQuery("#cgCatSelectArea [value='"+cat+"'].cg_select_cat").closest("label").addClass("cg_cat_checkbox_checked");jQuery("#cgCatSelectArea [value='"+cat+"'].cg_select_cat").closest("label").removeClass("cg_cat_checkbox_unchecked")}else{jQuery("#cgCatSelectArea [value='"+cat+"'].cg_select_cat").closest("label").addClass("cg_cat_checkbox_unchecked");jQuery("#cgCatSelectArea [value='"+cat+"'].cg_select_cat").closest("label").removeClass("cg_cat_checkbox_checked")}}this.cgJsClassGalleryCategories=cats};cgJsClass.gallery.categories.getLocalStorageCats=function(){if(cgJsClass.gallery.vars.checkLocalStorage==true){return JSON.parse(localStorage.getItem("cgJsClassGalleryCategories"))}};cgJsClass.gallery.categories.setLocalStorageSelectCats=function(){if(cgJsClass.gallery.vars.checkLocalStorage==true){var obj={};jQuery("#cgCatSelectArea .cg_select_cat").each(function(index){var catId=jQuery(this).val();var catChecked=jQuery(this).prop("checked");obj[catId]=catChecked});this.cgJsClassGalleryCategories=obj;localStorage.setItem("cgJsClassGalleryCategories",JSON.stringify(obj))}};cgJsClass.gallery.categories.changeFromLocalStorage=function(){var catsLocalStorage=this.getLocalStorageCats();for(var prop in catsLocalStorage){var catId=prop;if(catsLocalStorage[prop]==false){jQuery(".cg_show[data-cat-id="+catId+"]").addClass("cg_hide");jQuery(".cg_show[data-cat-id="+catId+"]").removeClass("cg_visible")}if(catsLocalStorage[prop]==true){jQuery(".cg_show[data-cat-id="+catId+"]").addClass("cg_visible");jQuery(".cg_show[data-cat-id="+catId+"]").removeClass("cg_hide")}}cgJsClass.slider.slide.objects.resizingGallery()};cgJsClass.gallery.categories.removeLocalStorage=function(){localStorage.removeItem("cgJsClassGalleryCategories");localStorage.removeItem("cgJsClassIdsChecker")};cgJsClass.gallery.categories.changeObjectsFromLocalStorage=function(object){var checkSlider=cgJsClass.slider.vars.cg_activate_gallery_slider;if(checkSlider==0){if(cgJsClass.gallery.vars.checkLocalStorage==true){var catIds=this.getLocalStorageCats();var imagesWithCatIds=cgJsClass.slider.slide.values.activatedImageCategoriesIds;var ids=cgJsClass.slider.slide.values.activatedIds;for(var catId in catIds){if(!catIds.hasOwnProperty(catId)){break}var catIdCheck=catIds[catId];for(var imageId in imagesWithCatIds){if(!imagesWithCatIds.hasOwnProperty(imageId)){break}var catIdImage=imagesWithCatIds[imageId];if(catId==catIdImage){ids[imageId]=catIdCheck}}}cgJsClass.slider.slide.values.activatedIds=ids;localStorage.setItem("cgJsClassIdsChecker",JSON.stringify(ids))}}};;cgJsClass.gallery.categories.change=function(object){var catClass=jQuery(object).attr("data-cat");if(jQuery(object).hasClass("cg_cat_checkbox_checked")){jQuery("."+catClass).removeClass("cg_hide");jQuery("."+catClass).addClass("cg_visible");cgJsClass.gallery.categories.checkIfAllImagesHidden(object);cgJsClass.slider.slide.objects.resizingGallery(false,true);cgJsClass.gallery.categories.setImageObjectsForSlider();jQuery("."+catClass).addClass("cg_blink_image_appear");setTimeout(function(){jQuery("."+catClass).removeClass("cg_blink_image_appear")},1e3)}else{jQuery("."+catClass).addClass("cg_blink_image_disappear");setTimeout(function(){jQuery("."+catClass).addClass("cg_hide");jQuery("."+catClass).removeClass("cg_visible");jQuery("."+catClass).removeClass("cg_blink_image_disappear");cgJsClass.gallery.categories.checkIfAllImagesHidden(object);cgJsClass.slider.slide.objects.resizingGallery(false,true);cgJsClass.gallery.categories.setImageObjectsForSlider()},1e3)}};cgJsClass.gallery.categories.changeObjectForSingleImageView=function(object){var checkSlider=cgJsClass.slider.vars.cg_activate_gallery_slider;if(checkSlider==0){if(cgJsClass.gallery.vars.checkLocalStorage==true){var catIds=cgJsClass.slider.slide.values.activatedImageCategoriesIds;var ids=cgJsClass.slider.slide.values.activatedIds;for(var property in catIds){if(!catIds.hasOwnProperty(property)){break}var catId=jQuery(object).val();if(jQuery(object).hasClass("cg_cat_checkbox_checked")==false&&parseInt(catId)==parseInt(catIds[property])){ids[property]=false}if(jQuery(object).prop("cg_cat_checkbox_checked")==true&&parseInt(catId)==parseInt(catIds[property])){ids[property]=true}localStorage.setItem("cgJsClassIdsChecker",JSON.stringify(ids))}}}};cgJsClass.gallery.categories.setRemoveTitleAttributeForSmallWindow=function(){if(cgJsClass.gallery.vars.fullwindow){var screenWidth;if(cgJsClass.gallery.vars.isMobile==true){screenWidth=screen.width}else{screenWidth=jQuery(window).width()}var gid=cgJsClass.gallery.vars.fullwindow;if(screenWidth<390){cgJsData[gid].vars.mainCGdiv.find(".cg_select_cat").each(function(){jQuery(this).attr("title",jQuery(this).text())})}else{cgJsData[gid].vars.mainCGdiv.find(".cg_select_cat").each(function(){jQuery(this).removeAttr("title")})}}};cgJsClass.gallery.categories.removeTitleAttributeGeneral=function(gid){cgJsData[gid].vars.mainCGdiv.find(".cg_select_cat").each(function(){jQuery(this).removeAttr("title")})};;cgJsClass.gallery.rating.clickRateOneStar=function(gid){if(cgJsClass.gallery.vars.eventClickRateOneStar){return}else{cgJsClass.gallery.vars.eventClickRateOneStar=true}jQuery(document).on("click",".cg_rate_star,.cg_rate_minus",function(e){var gid=jQuery(this).attr("data-cg-gid");var minusVoteNow=0;if(cgJsData[gid].vars.currentLook=="slider"){if(jQuery(this).closest(".mainCGslider").length>=1){e.preventDefault();return}}if(jQuery(this).hasClass("cg_rate_out_gallery_disallowed")&&cgJsData[gid].options.general.RatingOutGallery!="1"&&cgJsData[gid].vars.currentLook!="blog"){if(!jQuery(this).closest(".cg_show_href_target_blank").length&&cgJsData[gid].options.general.FullSizeImageOutGallery==1){e.preventDefault()}return}if(cgJsData[gid].options.general.AllowRating!="2"){e.preventDefault();return}if(cgJsData[gid].vars.isOnlyGalleryEcommerce&&!cgJsData[gid].options.general.AllowRatingForGalleryEcommerce){e.preventDefault();return}if(String(gid).indexOf("-w")>=0){e.preventDefault();return}e.preventDefault();if(String(gid).indexOf("-u")>=0||cgJsData[gid].vars.isUserGallery){if(jQuery(this).closest(".cgCenterDiv").length){cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].YouCanNotVoteInOwnGallery);return}else{return}}if(jQuery(this).parent().parent().parent().hasClass("cg_gallery_info")){var order=jQuery(this).closest(".cg_show").attr("data-cg-order");if(cgJsData[gid].vars.openedGalleryImageOrder!=order&&cgJsData[gid].options.general.RatingOutGallery!="1"){cgJsClass.gallery.views.singleView.openImage(jQuery,order,false,gid)}}if(cgJsData[gid].options.general.AllowRating!="2"){return}if(cgJsData[gid].vars.cg_check_login==1&&cgJsData[gid].vars.cg_user_login_check==0){cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].OnlyRegisteredUsersCanVote);return false}if(cgJsData[gid].options.pro.MinusVote==1&&jQuery(this).hasClass("cg_rate_minus")){minusVoteNow=1}var cg_picture_id=jQuery(this).attr("data-cg_rate_star_id");var cg_rate_value=1;if(cgJsData[gid].vars.currentLook=="blog"){var cgCenterDiv=cgJsData[gid].cgCenterDivBlogObject[cg_picture_id];var $cg_gallery_rating_div_child=cgCenterDiv.find(".cg_gallery_rating_div_child");$cg_gallery_rating_div_child.height($cg_gallery_rating_div_child.height());$cg_gallery_rating_div_child.empty().addClass("cg-lds-dual-ring-star-loading")}else{var imageObject=cgJsData[gid].imageObject[cg_picture_id];var $cg_gallery_rating_div_childImageObject=imageObject.find(".cg_gallery_rating_div_child");$cg_gallery_rating_div_childImageObject.height($cg_gallery_rating_div_childImageObject.height());$cg_gallery_rating_div_childImageObject.width($cg_gallery_rating_div_childImageObject.width());$cg_gallery_rating_div_childImageObject.empty().addClass("cg-lds-dual-ring-star-loading");var cgCenterDiv=cgJsData[gid].vars.cgCenterDiv;if(cgCenterDiv.is(":visible")){if(cgJsData[gid].vars.openedRealId==cg_picture_id){var $cg_gallery_rating_div_child=cgCenterDiv.find(".cg_gallery_rating_div_child");$cg_gallery_rating_div_child.height($cg_gallery_rating_div_child.height());$cg_gallery_rating_div_child.empty().addClass("cg-lds-dual-ring-star-loading")}}}var cookie=cgJsClass.gallery.dynamicOptions.getCookie("contest-gal1ery-"+cgJsData[gid].vars.gidReal+"-voting");cgJsClass.gallery.vars.cookieValue=cookie;if(cgJsData[gid].options.general.CheckCookie==1&&!cgJsClass.gallery.vars.cookieValue){cgJsClass.gallery.user.setFrontendCookieOneStar(gid,cg_picture_id,cg_rate_value,minusVoteNow,$cg_gallery_rating_div_childImageObject)}else{cgJsClass.gallery.rating.rateOneStarAjaxRequest(gid,cg_picture_id,cg_rate_value,minusVoteNow,$cg_gallery_rating_div_childImageObject)}})};;cgJsClass.gallery.rating.rateOneStarAjaxRequest=function(gid,cg_picture_id,cg_rate_value,minusVoteNow,$cg_gallery_rating_div_childImageObject){jQuery.ajax({url:post_cg_rate_v10_oneStar_wordpress_ajax_script_function_name.cg_rate_v10_oneStar_ajax_url,type:"post",data:{action:"post_cg_rate_v10_oneStar",gid:cgJsData[gid].vars.gidReal,galeryIDuser:gid,pid:cg_picture_id,value:cg_rate_value,minusVoteNow:minusVoteNow,galleryHash:cgJsData[gid].vars.galleryHash}}).done(function(response){if($cg_gallery_rating_div_childImageObject){$cg_gallery_rating_div_childImageObject.height("auto");$cg_gallery_rating_div_childImageObject.width("auto")}var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");jQuery(parsedHtml).find('script[data-cg-processing="true"]').each(function(){var script=jQuery(this).html();eval(script)})}).fail(function(xhr,status,error){cgJsClass.gallery.rating.setRatingOneStar(cg_picture_id,0,false,gid,false,false)}).always(function(){})};;cgJsClass.gallery.rating.setDetailsPositionInSlider=function(gid,realId,$cg_gallery_rating_div_child){return;var $cg_gallery_rating_div_five_star_details=$cg_gallery_rating_div_child.find(".cg_gallery_rating_div_five_star_details");var sliderView=false;if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}$cg_gallery_rating_div_five_star_details.removeAttr("style");$cg_gallery_rating_div_five_star_details.find("progress").removeAttr("style");if(sliderView&&$cg_gallery_rating_div_child.closest(".mainCGslider").length){var $cgShow=$cg_gallery_rating_div_child.closest("#cg_show"+realId);var positionTop=$cgShow.find("#cgGalleryInfo"+realId).position().top*-1-5;var marginLeft=$cgShow.find("#cg_gallery_rating_div"+realId).position().left*-1;$cg_gallery_rating_div_five_star_details.css({top:positionTop+"px","margin-left":marginLeft+"px"});var cg_gallery_rating_div_five_star_details_WIDTH=$cg_gallery_rating_div_five_star_details.removeClass("cg_hide").outerWidth();var cg_gallery_rating_div_five_star_details_HEIGHT=$cg_gallery_rating_div_five_star_details.height();$cg_gallery_rating_div_five_star_details.addClass("cg_hide");var widthDifference=$cgShow.outerWidth()-cg_gallery_rating_div_five_star_details_WIDTH;var progressWidth=$cg_gallery_rating_div_five_star_details.find("progress").first().width();var progressNewWidth=progressWidth+widthDifference;$cg_gallery_rating_div_five_star_details.find("progress").width(progressNewWidth);$cg_gallery_rating_div_five_star_details.height(cg_gallery_rating_div_five_star_details_HEIGHT+4)}};cgJsClass.gallery.rating.clickRateFiveStar=function(){if(cgJsClass.gallery.vars.eventClickRateFiveStar){return}else{cgJsClass.gallery.vars.eventClickRateFiveStar=true}jQuery(document).on("click",".cg_gallery_rating_div_five_star_details.cg_opened_for_mobile_voting",function(e){if(!cgJsClass.gallery.vars.isMobile){return}if(jQuery(this).hasClass("cg_voting_in_process")){return}if(jQuery(e.target).hasClass("cg_rate_star_five_star")||jQuery(e.target).hasClass("cg_rate_minus_five_star")){return}else{return;jQuery(this).removeClass("cg_opened_for_mobile_voting");jQuery(this).find(".cg_gallery_rating_div").remove();jQuery(this).addClass("cg_hide");cgJsClass.gallery.vars.dom.body.removeClass("cg_gallery_rating_div_five_star_details_is_opened");cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");cgJsClass.gallery.vars.dom.body.removeClass("cg_no_scroll cg_visibility_hidden")}});jQuery(document).on("click","#cg_gallery_rating_div_five_star_details_is_opened",function(e){if(!cgJsClass.gallery.vars.isMobile){return}if(jQuery(e.target).hasClass("cg_gallery_rating_div_five_star_details_close_button")){return}if(!jQuery(this).hasClass("cg_opened_for_mobile_voting")){var $cg_gallery_rating_div_child=jQuery(this).closest(".cg_gallery_rating_div_child");cgJsClass.gallery.rating.set_five_star_details_opened_for_mobile_voting($cg_gallery_rating_div_child)}else{return}});jQuery(document).on("click",".cg_gallery_rating_div_five_star_details_close_button",function(){cgJsClass.gallery.rating.cg_gallery_rating_div_five_star_details_close_button(jQuery(this))});jQuery(document).on("click touchstart","body.cg_gallery_rating_div_five_star_details_is_opened",function(e){if(!cgJsClass.gallery.vars.isMobile){return}var $cg_gallery_rating_div_five_star_details=jQuery(e.target).closest(".cg_gallery_rating_div_five_star_details");if((jQuery(e.target).hasClass("cg_gallery_rating_div_five_star_details")||$cg_gallery_rating_div_five_star_details.length)&&cgJsClass.gallery.vars.isMobile){return}if(jQuery(e.target).hasClass("cg_rate_star_five_star")||jQuery(e.target).hasClass("cg_rate_minus_five_star")||jQuery(e.target).closest(".cg_rate_star_five_star").length||jQuery(e.target).closest(".cg_rate_minus_five_star").length){return}e.preventDefault();if($cg_gallery_rating_div_five_star_details.length||jQuery(e.target).hasClass("cg_gallery_rating_div_five_star_details")||jQuery(e.target).closest(".cg_gallery_rating_div_star").length||jQuery(e.target).hasClass("cg_rate_minus")){$cg_gallery_rating_div_five_star_details.addClass("cg_hide");jQuery(this).removeClass("cg_gallery_rating_div_five_star_details_is_opened");cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");cgJsClass.gallery.vars.dom.body.removeClass("cg_no_scroll cg_visibility_hidden");return}else{var $cg_gallery_rating_div_five_star_details_is_opened=jQuery("#cg_gallery_rating_div_five_star_details_is_opened");if($cg_gallery_rating_div_five_star_details_is_opened.length>=1){$cg_gallery_rating_div_five_star_details_is_opened.addClass("cg_hide");$cg_gallery_rating_div_five_star_details_is_opened.removeAttr("id");jQuery(this).removeClass("cg_gallery_rating_div_five_star_details_is_opened");cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");cgJsClass.gallery.vars.dom.body.removeClass("cg_no_scroll cg_visibility_hidden")}}});jQuery(document).on("click",".mainCGslider .cg_gallery_rating_div_five_star_details",function(e){if(!cgJsClass.gallery.vars.isMobile){return}e.preventDefault();var $element=jQuery(this);var gid=$element.attr("data-cg-gid");var realId=$element.attr("data-cg-real-id");var $toClick=jQuery("#mainCGslider"+gid+" .cgGalleryInfo"+realId);cgJsClass.gallery.vars.passThrough=true;$toClick.click()});jQuery(document).on("mousemove",".cg_gallery_rating_div_child.cg_gallery_rating_div_child_five_star",function(e){e.preventDefault();var gid=jQuery(this).attr("data-cg-gid");var realId=jQuery(this).attr("data-cg-real-id");var $eTarget=jQuery(e.target);var sliderView=false;if($eTarget.hasClass("cg_rate_minus")){return}if($eTarget.hasClass("cg_voted_confirm")){return}if(cgJsData[gid].vars.currentLook=="slider"){sliderView=true}var $mainCGslider=jQuery(this).closest(".mainCGslider");if(sliderView&&$mainCGslider.length){return}if(cgJsData[gid].options.pro.IsModernFiveStar==1&&!(cgJsData[gid].vars.isUserGallery||cgJsData[gid].vars.isOnlyGalleryNoVoting||cgJsData[gid].vars.isOnlyGalleryWinner)){if(cgJsData[gid].options.general.HideUntilVote==1&&(cgJsData[gid].cgJsCountRuser[realId]==0||typeof cgJsData[gid].cgJsCountRuser[realId]=="undefined")){return}}if(cgJsData[gid].options.pro.IsModernFiveStar==1&&!cgJsClass.gallery.vars.isMobile){cgJsClass.gallery.rating.setDetailsPositionInSlider(gid,realId,jQuery(this));if($eTarget.hasClass("cg_gallery_rating_div_child")||$eTarget.closest(".cg_gallery_rating_div_child").length>=1){var $cg_gallery_rating_div_five_star_details=jQuery(this).find(".cg_gallery_rating_div_five_star_details");$cg_gallery_rating_div_five_star_details.removeAttr("style");if((cgJsData[gid].options.visual.RatingPositionGallery==3||cgJsData[gid].vars.currentLook=="row")&&!sliderView){if(!$cg_gallery_rating_div_five_star_details.offset()){return}var windowWidth=jQuery(window).width();var eventuallyMinusMarginLeftToSet=$cg_gallery_rating_div_five_star_details.offset().left+$cg_gallery_rating_div_five_star_details.width()-windowWidth+25;if(eventuallyMinusMarginLeftToSet>0){$cg_gallery_rating_div_five_star_details.css("margin-left","-"+eventuallyMinusMarginLeftToSet+"px")}}if(sliderView&&(cgJsClass.gallery.vars.fullwindow||cgJsClass.gallery.vars.fullscreen)){$cg_gallery_rating_div_five_star_details.addClass("cg_hidden").removeClass("cg_hide")}else{$cg_gallery_rating_div_five_star_details.removeAttr("style")}var widthStar=jQuery(this).find(".cg_rate_star_five_star").outerWidth(true);var widthDivCount=jQuery(this).find(".cg_gallery_rating_div_count").outerWidth(true);var widthRatingDiv=widthStar+widthDivCount;$cg_gallery_rating_div_five_star_details.addClass("cg_hidden");$cg_gallery_rating_div_five_star_details.removeClass("cg_hide cg_fade_out");var widthDetails=$cg_gallery_rating_div_five_star_details.outerWidth(true);var left=((widthDetails-widthRatingDiv)/2+widthStar)*-1;$cg_gallery_rating_div_five_star_details.css("left",left+"px");$cg_gallery_rating_div_five_star_details.removeClass("cg_hidden");jQuery(this).addClass("cg_opacity_1")}else{jQuery(this).find(".cg_gallery_rating_div_five_star_details").addClass("cg_hide");jQuery(this).removeClass("cg_opacity_1")}}});jQuery(document).on("mouseleave",".cg_gallery_rating_div_child.cg_gallery_rating_div_child_five_star",function(e){e.preventDefault();var gid=jQuery(this).attr("data-cg-gid");if(cgJsData[gid].options.pro.IsModernFiveStar==1&&!cgJsClass.gallery.vars.isMobile){jQuery(this).find(".cg_gallery_rating_div_five_star_details").addClass("cg_hide");jQuery(this).removeClass("cg_opacity_1")}});jQuery(document).on("blur","#cg_messages_container_pro_select_label",function(e){cgJsClass.gallery.vars.onBlurCg_messages_container_pro_select_label=true});jQuery(document).on("click","#cg_messages_container_pro_select_label",function(e){jQuery(this).find(".cg_messages_container_pro_select_placeholder").attr("disabled","disabled")});jQuery(document).on("click",".cg_gallery_rating_div_child_five_star",function(e){var $eTarget=jQuery(e.target);if($eTarget.hasClass("cg_rate_minus_five_star")){e.preventDefault();return false}var gid=jQuery(this).attr("data-cg-gid");if((String(gid).indexOf("-u")>=0||cgJsData[gid].vars.isUserGallery)&&!cgJsClass.gallery.vars.isMobile){if(jQuery(this).closest(".cgCenterDiv").length){e.preventDefault();cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].YouCanNotVoteInOwnGallery);return}}if((cgJsData[gid].vars.isUserGallery||cgJsData[gid].vars.isOnlyGalleryNoVoting||cgJsData[gid].vars.isOnlyGalleryWinner)&&!cgJsClass.gallery.vars.isMobile){e.preventDefault();return}var $cgCenterDiv=jQuery(this).closest(".cgCenterDiv");if(cgJsClass.gallery.vars.isMobile&&!$cgCenterDiv.length&&(cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1)){}if(cgJsData[gid].vars.currentLook=="slider"){if(jQuery(this).closest(".mainCGslider").length>=1){e.preventDefault();return}}var $cg_gallery_rating_div_child=jQuery(this).closest(".cg_gallery_rating_div_child");var minusVoteNow=0;if(jQuery(this).hasClass("cg_rate_out_gallery_disallowed")&&cgJsData[gid].options.general.RatingOutGallery!="1"&&cgJsData[gid].vars.currentLook!="blog"){e.preventDefault();return}if(!cgJsData[gid].options.general.AllowRatingDynamic){e.preventDefault();return}if(!$cgCenterDiv.length&&cgJsData[gid].options.general.RatingOutGallery!="1"){if(!jQuery(this).closest(".cg_show_href_target_blank").length&&cgJsData[gid].options.general.FullSizeImageOutGallery==1){e.preventDefault()}return}if((String(gid).indexOf("-u")>=0||cgJsData[gid].vars.isUserGallery)&&!cgJsClass.gallery.vars.isMobile){if(jQuery(this).closest(".cgCenterDiv").length){cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].YouCanNotVoteInOwnGallery);e.preventDefault();return}else{e.preventDefault();return}}if(cgJsData[gid].vars.cg_check_login==1&&cgJsData[gid].vars.cg_user_login_check==0){cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].OnlyRegisteredUsersCanVote);e.preventDefault();return false}e.preventDefault();if(cgJsData[gid].options.pro.MinusVote==1&&jQuery(this).hasClass("cg_rate_minus")){minusVoteNow=1}var cg_picture_id=jQuery(this).attr("data-cg-real-id");var cg_rate_value=1;if(!jQuery(this).hasClass("cg_rate_minus")){cg_rate_value=jQuery(this).attr("data-cg_rate_star")}cgJsClass.gallery.vars.$cgCenterDivSelectVote=$cgCenterDiv;cgJsClass.gallery.vars.$cg_gallery_rating_div_child_SelectVote=$cg_gallery_rating_div_child;cgJsClass.gallery.rating.showSelectVote($cg_gallery_rating_div_child,gid,cg_picture_id)});jQuery(document).on("mouseenter",".cg_messages_container_pro .cg_gallery_rating_div_total_count_to_vote .cg_gallery_rating_div_star_one_star",function(){if(cgJsClass.gallery.vars.isMobile){return}var gid=jQuery(this).attr("data-cg-gid");jQuery(this).addClass("cg_gallery_rating_div_one_star_on").removeClass("cg_gallery_rating_div_one_star_off");var $prev=undefined;var vote=jQuery(this).attr("data-cg-vote");for(var rCount=cgJsData[gid].options.general.AllowRatingDynamic;rCount>=1;rCount--){if(!$prev){$prev=jQuery(this).prev()}else{$prev=$prev.prev()}$prev.addClass("cg_gallery_rating_div_one_star_on").removeClass("cg_gallery_rating_div_one_star_off")}var $cgMessagesContainerPro=jQuery(this).closest(".cg_messages_container_pro");$cgMessagesContainerPro.find(".cg_gallery_rating_div_count_plus").text("+"+vote).removeClass("cg_hide").attr("data-cg-vote",vote)});jQuery(document).on("mouseleave",".cg_messages_container_pro .cg_gallery_rating_div_total_count_to_vote .cg_gallery_rating_div_star_one_star",function(){if(cgJsClass.gallery.vars.isMobile){return}jQuery(this).closest(".cg_gallery_rating_div_total_count").find(".cg_gallery_rating_div_star_one_star").addClass("cg_gallery_rating_div_one_star_off").removeClass("cg_gallery_rating_div_one_star_on");var $cgMessagesContainerPro=jQuery(this).closest(".cg_messages_container_pro");$cgMessagesContainerPro.find(".cg_gallery_rating_div_count_plus").addClass("cg_hide")});jQuery(document).on("click",".cg_messages_container_pro .cg_gallery_rating_div_total_count_to_vote .cg_gallery_rating_div_star_one_star,"+".cg_messages_container_pro .cg_messages_container_pro_select_button,.cg_rate_minus.cg_rate_minus_five_star",function(e){var gid=jQuery(this).attr("data-cg-gid");var minusVoteNow=0;if(cgJsData[gid].options.pro.MinusVote==1&&jQuery(this).hasClass("cg_rate_minus")){minusVoteNow=1}var cg_picture_id=jQuery(this).attr("data-cg-real-id");if(minusVoteNow){var $cgCenterDiv=jQuery(this).closest(".cgCenterDiv");var $cg_gallery_rating_div_child=jQuery(this).closest(".cg_gallery_rating_div_child");if(cgJsClass.gallery.vars.isMobile&&!$cgCenterDiv.length&&(cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1)){return}}else{var $cgCenterDiv=cgJsClass.gallery.vars.$cgCenterDivSelectVote;var $cg_gallery_rating_div_child=cgJsClass.gallery.vars.$cg_gallery_rating_div_child_SelectVote}var cg_rate_value=1;if(!minusVoteNow){cg_rate_value=jQuery(this).attr("data-cg-vote")}var $cgMessagesContainerPro=jQuery(this).closest(".cg_messages_container_pro");if(cgJsClass.gallery.vars.isMobile&&!minusVoteNow&&!jQuery(this).hasClass("cg_messages_container_pro_select_button")){jQuery(this).closest(".cg_gallery_rating_div_total_count").find(".cg_gallery_rating_div_star_one_star").addClass("cg_gallery_rating_div_one_star_off").removeClass("cg_gallery_rating_div_one_star_on");jQuery(this).addClass("cg_gallery_rating_div_one_star_on").removeClass("cg_gallery_rating_div_one_star_off");var $prev=undefined;for(var rCount=cgJsData[gid].options.general.AllowRatingDynamic;rCount>=1;rCount--){if(!$prev){$prev=jQuery(this).prev()}else{$prev=$prev.prev()}$prev.addClass("cg_gallery_rating_div_one_star_on").removeClass("cg_gallery_rating_div_one_star_off")}$cgMessagesContainerPro.find(".cg_gallery_rating_div_count_plus").text("+"+cg_rate_value).removeClass("cg_hide").attr("data-cg-vote",cg_rate_value);$cgMessagesContainerPro.find(".cg_messages_container_pro_select_button_container .cg_messages_container_pro_select_button").attr("data-cg-vote",cg_rate_value);if($cgMessagesContainerPro.find(".cg_messages_container_pro_select_button_container").hasClass("cg_hide")){$cgMessagesContainerPro.find(".cg_messages_container_pro_select_button_container").removeClass("cg_hide");return}else{return}}cgJsClass.gallery.function.message.close(true);cgJsClass.gallery.vars.dom.html.addClass("cg_pointer_events_none");setTimeout(function(){cgJsClass.gallery.vars.dom.html.removeClass("cg_pointer_events_none")},1500);if(cgJsData[gid].vars.currentLook=="blog"){var isFromSingleView=true;var $cg_gallery_rating_div_child=cgJsData[gid].cgCenterDivBlogObject[cg_picture_id].find(".cg_gallery_rating_div_child");if($cg_gallery_rating_div_child.find(".cg_gallery_rating_div_five_star_details").hasClass("cg_opened_for_mobile_voting")){cgJsClass.gallery.rating.reset_cg_gallery_rating_div_five_star_details_for_loading($cg_gallery_rating_div_child.find(".cg_gallery_rating_div_five_star_details"))}else{$cg_gallery_rating_div_child.height($cg_gallery_rating_div_child.height());$cg_gallery_rating_div_child.empty().addClass("cg-lds-dual-ring-star-loading")}}else{var imageObject=cgJsData[gid].imageObject[cg_picture_id];var $cg_gallery_rating_div_childImageObject=imageObject.find(".cg_gallery_rating_div_child");if(cgJsData[gid].options.general.FullSizeImageOutGallery!=1&&cgJsData[gid].options.general.OnlyGalleryView!=1){$cg_gallery_rating_div_childImageObject.height($cg_gallery_rating_div_child.height());$cg_gallery_rating_div_childImageObject.empty().addClass("cg-lds-dual-ring-star-loading")}else if(cgJsData[gid].options.general.FullSizeImageOutGallery==1||cgJsData[gid].options.general.OnlyGalleryView==1){$cg_gallery_rating_div_childImageObject.height($cg_gallery_rating_div_child.height());$cg_gallery_rating_div_childImageObject.empty().addClass("cg-lds-dual-ring-star-loading")}var isFromSingleView=false;if($cgCenterDiv.length>=1){isFromSingleView=true}if($cgCenterDiv.length&&$cgCenterDiv.is(":visible")){if(cgJsData[gid].vars.openedRealId==cg_picture_id){var $cg_gallery_rating_div_child=$cgCenterDiv.find(".cg_gallery_rating_div_child");if($cg_gallery_rating_div_child.find(".cg_gallery_rating_div_five_star_details").hasClass("cg_opened_for_mobile_voting")){cgJsClass.gallery.rating.reset_cg_gallery_rating_div_five_star_details_for_loading($cg_gallery_rating_div_child.find(".cg_gallery_rating_div_five_star_details"))}else{$cg_gallery_rating_div_child.height($cg_gallery_rating_div_child.height());$cg_gallery_rating_div_child.empty().addClass("cg-lds-dual-ring-star-loading")}}}else{if(cgJsData[gid].options.general.FullSizeImageOutGallery==1||cgJsData[gid].options.general.OnlyGalleryView==1){var $cg_gallery_rating_div_five_star_details=jQuery(this).closest(".cg_gallery_rating_div_five_star_details");if($cg_gallery_rating_div_five_star_details.hasClass("cg_opened_for_mobile_voting")){cgJsClass.gallery.rating.reset_cg_gallery_rating_div_five_star_details_for_loading(jQuery(this).closest(".cg_gallery_rating_div_five_star_details"))}else{$cg_gallery_rating_div_childImageObject.empty().addClass("cg-lds-dual-ring-star-loading")}}}}var cookie=cgJsClass.gallery.dynamicOptions.getCookie("contest-gal1ery-"+cgJsData[gid].vars.gidReal+"-voting");cgJsClass.gallery.vars.cookieValue=cookie;if(cgJsData[gid].options.general.CheckCookie==1&&!cgJsClass.gallery.vars.cookieValue){cgJsClass.gallery.user.setFrontendCookieFiveStar(gid,cg_picture_id,cg_rate_value,minusVoteNow,$cg_gallery_rating_div_childImageObject)}else{cgJsClass.gallery.rating.rateFiveStarAjaxRequest(gid,cg_picture_id,cg_rate_value,minusVoteNow,$cg_gallery_rating_div_childImageObject,isFromSingleView)}})};cgJsClass.gallery.rating.showSelectVote=function($cg_gallery_rating_div_child,gid,cg_picture_id){cgJsClass.gallery.vars.dom.html.addClass("cg_no_scroll");cgJsClass.gallery.vars.dom.body.addClass("cg_no_scroll cg_show_select_vote_multiple_stars_opened");var realId=cg_picture_id;var isUserGalleryMessageForMobile=false;var isShowOnlyOverviewForMobile=false;if(cgJsData[gid].vars.isUserGallery&&cgJsClass.gallery.vars.isMobile){isUserGalleryMessageForMobile=true}if((cgJsData[gid].vars.isUserGallery||cgJsData[gid].vars.isOnlyGalleryNoVoting||cgJsData[gid].vars.isOnlyGalleryWinner)&&cgJsClass.gallery.vars.isMobile){isShowOnlyOverviewForMobile=true}var $cg_gallery_rating_div_five_star_details=$cg_gallery_rating_div_child.find(".cg_gallery_rating_div_five_star_details").clone();$cg_gallery_rating_div_five_star_details.width(jQuery(window).width()-18);$cg_gallery_rating_div_five_star_details.find(".cg_gallery_rating_div_child.cg_gallery_rating_div_child_five_star").addClass("cg_hide");var $container=jQuery('<div><div class="cg_gallery_rating_div"></div></div>');$container.find(".cg_gallery_rating_div").append($cg_gallery_rating_div_five_star_details);if(!cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.isOnlyGalleryWinner){if(isUserGalleryMessageForMobile){$container.find(".cg_gallery_rating_div").append('<div class="cg_messages_container_pro_select_title" >'+cgJsClass.gallery.language[gid].YouCanNotVoteInOwnGallery+"</div>")}else{$container.find(".cg_gallery_rating_div").append('<div class="cg_messages_container_pro_select_title">'+cgJsClass.gallery.language[gid].YourVote+"</div>")}}if(!cgJsData[gid].vars.isOnlyGalleryNoVoting&&!cgJsData[gid].vars.isOnlyGalleryWinner&&!cgJsData[gid].vars.isUserGallery){var totalCountContainerToVoteString='<div class="cg_gallery_rating_div_total_count cg_gallery_rating_div_total_count_to_vote">';var voteCount=1;for(var rCount=cgJsData[gid].options.general.AllowRatingDynamic;rCount>=1;rCount--){totalCountContainerToVoteString+='<div class="cg_gallery_rating_div_star_one_star cg_gallery_rating_div_one_star_off" '+'data-cg-vote="'+voteCount+'" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'"></div>';voteCount++}totalCountContainerToVoteString+="</div>";$container.find(".cg_gallery_rating_div").append(totalCountContainerToVoteString)}var selectString="";if(!isShowOnlyOverviewForMobile){selectString+='<div class="cg_messages_container_pro_select_container">';selectString+='<label for="cg_messages_container_pro_select_label" class="cg_messages_container_pro_select_label">';var fileType=cgJsData[gid].vars.rawData[realId].ImgType;var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);if(isAlternativeFileType&&isAlternativeFileType=="video"){var imgSrcOriginal=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId].full);selectString+='<div class="cg_messages_container_pro_select_alternative_file_type" >'+'<video width="100%" height="100%" >'+'<source src="'+imgSrcOriginal+'#t=0.001" type="video/mp4">'+'<source src="'+imgSrcOriginal+'#t=0.001" type="video/'+fileType+'">'+"</video>"+"</div>"}else if(isAlternativeFileType){selectString+='<div class="cg_messages_container_pro_select_alternative_file_type cg_messages_container_pro_select_'+fileType+'" ></div>';selectString+='<div class="cg_messages_container_pro_select_alternative_file_type_name" >'+cgJsData[gid].vars.rawData[realId]["NamePic"]+"</div>"}else{selectString+='<div class="cg_messages_container_pro_select_image" style="background-image: url('+cgJsData[gid].vars.rawData[cg_picture_id]["large"]+');"></div>'}selectString+="</label>";selectString+="</div>"}$container.append('<div class="cg_messages_container_pro_select_button_container cg_hide">'+'<div class="cg_messages_container_pro_select_button" data-cg-gid="'+gid+'" data-cg-real-id="'+cg_picture_id+'">'+cgJsClass.gallery.language[gid].VoteNow+"</div>"+"</div>");if(cgJsData[gid].vars.rawData[realId].ImgType=="con"){var inputFieldId=cgJsData[gid].options.visual["Field1IdGalleryView"];if(inputFieldId&&cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.info[realId][inputFieldId]&&cgJsData[gid].vars.info[realId][inputFieldId]["field-content"]){var $selectDiv=jQuery('<div class="cg_gallery_rating_div_five_star_details_con_entry">'+cgJsData[gid].vars.info[realId][inputFieldId]["field-content"]+"</div>");$container.prepend($selectDiv)}}else{var $selectDiv=jQuery('<div class="cg_gallery_rating_div_five_star_details_select">'+selectString+"</div>");$container.prepend($selectDiv)}$container.append('<div class="cg_gallery_rating_div_show_select_sum_explanation">&nbsp;&nbsp; = '+cgJsClass.gallery.language[gid].Sum+"</div>");var $cg_gallery_rating_div_child_for_gettingCount=$cg_gallery_rating_div_child.clone();var $cg_gallery_rating_div_count_for_gettingCount=$cg_gallery_rating_div_child_for_gettingCount.find(".cg_gallery_rating_div_count");$cg_gallery_rating_div_count_for_gettingCount.find(".cg_gallery_rating_div_star_hover, .cg_gallery_rating_div_five_star_details").remove();var countToSet=parseInt($cg_gallery_rating_div_count_for_gettingCount.text().trim());var cg_gallery_rating_div_one_star_off_or_on="cg_gallery_rating_div_one_star_off";if(!isNaN(countToSet)&&countToSet>0){cg_gallery_rating_div_one_star_off_or_on="cg_gallery_rating_div_one_star_on"}if(isNaN(countToSet)){countToSet=""}var $totalCountContainer=jQuery('<div class="cg_gallery_rating_div_total_count">'+'<div class="cg_gallery_rating_div_star_one_star '+cg_gallery_rating_div_one_star_off_or_on+'"></div>'+'<div class="cg_gallery_rating_div_count">'+countToSet+'<div class="cg_gallery_rating_div_count_plus cg_hide"></div></div>'+"</div>");$totalCountContainer.insertBefore($container.find(".cg_gallery_rating_div_five_star_details"));$cg_gallery_rating_div_five_star_details.removeAttr("style");$cg_gallery_rating_div_five_star_details.find(".cg_five_star_details_arrow_up, .cg_gallery_rating_div_five_star_details_close_button, .cg_gallery_rating_overview").remove();$cg_gallery_rating_div_five_star_details.removeClass("cg_hide");if(cgJsData[gid].vars.centerWhite==1&&cgJsData[gid].vars.openedRealId){jQuery("#cgMessagesContainer").addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black");jQuery("#cgMessagesContainerPro").addClass("cg_fe_controls_style_white").removeClass("cg_fe_controls_style_black")}else if(cgJsData[gid].vars.openedRealId){jQuery("#cgMessagesContainer").addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white");jQuery("#cgMessagesContainerPro").addClass("cg_fe_controls_style_black").removeClass("cg_fe_controls_style_white")}if(jQuery(window).width()<700){cgJsClass.gallery.function.message.showPro(gid,$container.html(),undefined,undefined,undefined,undefined,undefined,undefined,false)}else{cgJsClass.gallery.function.message.showPro(gid,$container.html(),undefined,undefined,undefined,undefined,undefined,undefined,true)}};cgJsClass.gallery.rating.set_five_star_details_opened_for_mobile_voting=function($cg_gallery_rating_div_child){var $cg_gallery_rating_div=$cg_gallery_rating_div_child.closest(".cg_gallery_rating_div").clone();$cg_gallery_rating_div.find(".cg_gallery_rating_div_star_hover").remove();$cg_gallery_rating_div.find(".cg_gallery_rating_div_five_star_details").remove();$cg_gallery_rating_div_child.find(".cg_gallery_rating_div").remove();$cg_gallery_rating_div_child.addClass("cg_opacity_1");var $cg_gallery_rating_div_five_star_details=$cg_gallery_rating_div_child.find(".cg_gallery_rating_div_five_star_details");$cg_gallery_rating_div_five_star_details.width(jQuery(window).width()-18);$cg_gallery_rating_div_five_star_details.removeClass("cg_hide").prepend($cg_gallery_rating_div).addClass("cg_opened_for_mobile_voting");cgJsClass.gallery.vars.dom.body.addClass("cg_gallery_rating_div_five_star_details_is_opened");cgJsClass.gallery.vars.dom.html.addClass("cg_no_scroll");cgJsClass.gallery.vars.dom.body.addClass("cg_no_scroll cg_visibility_hidden");cgJsClass.gallery.vars.cg_gallery_rating_div_five_star_details_close_button=$cg_gallery_rating_div_child.find(".cg_gallery_rating_div_five_star_details_close_button")};cgJsClass.gallery.rating.reset_cg_gallery_rating_div_five_star_details_for_loading=function($cg_gallery_rating_div_five_star_details){$cg_gallery_rating_div_five_star_details.find(".cg_gallery_rating_div").remove();$cg_gallery_rating_div_five_star_details.find(".cg_five_star_details_row").remove();$cg_gallery_rating_div_five_star_details.find(".cg_five_star_details_average").remove();$cg_gallery_rating_div_five_star_details.find(".cg_gallery_rating_div_five_star_details_close_button").remove();$cg_gallery_rating_div_five_star_details.addClass("cg-lds-dual-ring-star-loading")};cgJsClass.gallery.rating.cg_gallery_rating_div_five_star_details_close_button=function($closeButton){if(!$closeButton){return}if(!cgJsClass.gallery.vars.isMobile){return}$closeButton.closest(".cg_gallery_rating_div_five_star_details").addClass("cg_hide").removeClass("cg_opened_for_mobile_voting");$closeButton.find(".cg_gallery_rating_div").remove();$closeButton.closest(".cg_gallery_rating_div_child").removeClass("cg_opacity_1");cgJsClass.gallery.vars.dom.body.removeClass("cg_gallery_rating_div_five_star_details_is_opened");cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");cgJsClass.gallery.vars.dom.body.removeClass("cg_no_scroll cg_visibility_hidden")};;cgJsClass.gallery.rating.rateFiveStarAjaxRequest=function(gid,cg_picture_id,cg_rate_value,minusVoteNow,$cg_gallery_rating_div_childImageObject,isFromSingleView){jQuery.ajax({url:post_cg_rate_v10_fiveStar_wordpress_ajax_script_function_name.cg_rate_v10_fiveStar_ajax_url,type:"post",data:{action:"post_cg_rate_v10_fiveStar",gid:cgJsData[gid].vars.gidReal,galeryIDuser:gid,pid:cg_picture_id,value:cg_rate_value,minusVoteNow:minusVoteNow,galleryHash:cgJsData[gid].vars.galleryHash,isFromSingleView:isFromSingleView}}).done(function(response){if($cg_gallery_rating_div_childImageObject){$cg_gallery_rating_div_childImageObject.height("auto")}var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");jQuery(parsedHtml).find('script[data-cg-processing="true"]').each(function(){var script=jQuery(this).html();eval(script)})}).fail(function(xhr,status,error){cgJsClass.gallery.rating.setRatingFiveStar(cg_picture_id,0,0,false,gid,false,false)}).always(function(){})};;cgJsClass.gallery.upload.events.ondragover=function(e){console.log("dragover");var $element=jQuery(e.target);console.log($element);var gid=$element.attr("data-cg-gid");console.log(gid);if(cgJsData[gid].vars.upload.fileAdditionalFiles&&cgJsData[gid].vars.upload.fileAdditionalFiles[0]&&Object.keys(cgJsData[gid].vars.upload.fileAdditionalFiles[0]).length){return}jQuery(e.target).closest(".cg_form_div_image_upload").addClass("cg_form_div_image_upload_ondragover");e.preventDefault()};cgJsClass.gallery.upload.events.ondragleave=function(e){jQuery(e.target).addClass("cg_form_div_image_upload_ondragover");jQuery(e.target).closest(".cg_form_div_image_upload").removeClass("cg_form_div_image_upload_ondragover");e.preventDefault()};cgJsClass.gallery.upload.events.ondrop=function(e){jQuery(e.target).addClass("cg_form_div_image_upload_ondragover");jQuery(e.target).closest(".cg_form_div_image_upload").removeClass("cg_form_div_image_upload_ondragover")};cgJsClass.gallery.upload.events.init=function($){if(cgJsClass.gallery.vars.eventUploadEventsInit){return}else{cgJsClass.gallery.vars.eventUploadEventsInit=true}$(document).on("keydown",".cg_input_date_class",function(e){e.preventDefault();if(e.which==46||e.which==8){this.value=""}});cgJsClass.gallery.upload.functions.initInputDate($);$("#ui-datepicker-div").hide();$(document).on("click",".cg-gallery-upload",function(){var gid=$(this).attr("data-cg-gid");cgJsClass.gallery.vars.openedUploadFormGalleryId=gid;cgJsClass.gallery.vars.isHashJustChangedNewLogic=true;cgJsClass.gallery.vars.isGalleryUploadFormHashChange=true;window.location.hash="#cgUploadFormOpened";if(cgJsClass.gallery.vars.dom.body.hasClass("cg_upload_in_progress")){$(".mainCGdivUploadFormAjax#mainCGdivUploadForm"+cgJsClass.gallery.vars.openedUploadFormGalleryId).removeClass("cg_upload_in_progress");cgJsClass.gallery.vars.dom.html.addClass("cg_no_scroll");return}cgJsClass.gallery.upload.functions.uploadFormFieldsCheck(cgJsData[gid].vars.mainCGdivUploadForm,cgJsData[gid].vars.realGid);var $mainCGdivHelperParent=cgJsData[gid].vars.mainCGdivHelperParent;cgJsClass.gallery.vars.dom.html.addClass("cg_no_scroll");if(cgJsClass.gallery.vars.fullwindow){$mainCGdivHelperParent.addClass("cg_no_scroll")}cgJsClass.gallery.vars.dom.body.addClass("cg_upload_modal_opened");var $mainCGdivUploadForm=$(".mainCGdivUploadFormAjax#mainCGdivUploadForm"+gid);cgJsData[gid].vars.mainCGdivUploadForm=$mainCGdivUploadForm;$mainCGdivUploadForm.addClass("cgInGalleryUploadForm");if(cgJsData[gid].options.visual.BorderRadius){cgJsData[gid].vars.mainCGdivUploadForm.addClass("cg_border_radius_controls_and_containers")}if($mainCGdivHelperParent.hasClass("cg_fe_controls_style_white")){cgJsData[gid].vars.mainCGdivUploadForm.addClass("cg_fe_controls_style_white")}else{cgJsData[gid].vars.mainCGdivUploadForm.removeClass("cg_fe_controls_style_white")}if(cgJsData[gid].options.visual.BorderRadius){cgJsData[gid].vars.mainCGdivUploadForm.addClass("cg_border_radius_controls_and_containers")}$mainCGdivUploadForm.find("#mainCGdivUploadFormLdsDualRing"+gid).addClass("cg_hide");$mainCGdivUploadForm.find(".cg-refresh-upload-form").addClass("cg_hide");$mainCGdivUploadForm.find("#mainCGdivUploadFormResult"+gid).addClass("cg_hide");$mainCGdivUploadForm.find("#mainCGdivUploadFormResultFailed"+gid).addClass("cg_hide");$mainCGdivUploadForm.find("#mainCGdivUploadFormContainer"+gid).removeClass("cg_hide");$mainCGdivUploadForm.find("#mainCGdivUploadForm"+gid+" .cg_form_div").removeClass("cg_form_div_error");$mainCGdivUploadForm.find("#mainCGdivUploadForm"+gid+" .cg_input_error").addClass("cg_hide").empty();$mainCGdivUploadForm.find("#mainCGdivUploadFormContainer"+gid+" .cg_input_image_upload_id_in_gallery").val("");$mainCGdivUploadForm.find("#mainCGdivUploadFormContainer"+gid+" .cg_input_date_class").val("");if(cgJsClass.gallery.vars.fullWindowConfigurationAreaIsOpened){var $cgCenterImageFullWindowConfiguration=$("#cgCenterImageFullWindowConfiguration"+gid);$cgCenterImageFullWindowConfiguration.click()}cgJsClass.gallery.vars.openedUploadFormGalleryId=gid;$mainCGdivUploadForm.css("height","unset");$mainCGdivUploadForm.removeClass("cg_is_mobile_upload_form");if(cgJsClass.gallery.vars.isMobile){$mainCGdivUploadForm.css("height","100%");$mainCGdivUploadForm.addClass("cg_is_mobile_upload_form")}cgJsClass.gallery.upload.functions.resize($mainCGdivUploadForm);cgJsClass.gallery.function.general.tools.backdropShow();if(cgJsClass.gallery.vars.fullwindow||cgJsClass.gallery.vars.fullscreen){$mainCGdivUploadForm.appendTo("#mainCGdivHelperParent"+gid).removeClass("cg_hide").addClass("cg_invisible")}else{$mainCGdivUploadForm.appendTo("body").removeClass("cg_hide").addClass("cg_invisible")}cgJsClass.gallery.upload.functions.resizeVertical($mainCGdivUploadForm);if(cgJsClass.gallery.vars.fullwindow||cgJsClass.gallery.vars.fullscreen){$mainCGdivUploadForm.appendTo("#mainCGdivHelperParent"+gid).removeClass("cg_invisible")}else{$mainCGdivUploadForm.appendTo("body").removeClass("cg_invisible")}cgJsClass.gallery.upload.functions.addCloseUploadFrameOnBodyClick($);cgJsClass.gallery.upload.functions.checkIfCookieRequired(gid);cgJsClass.gallery.upload.functions.uploadFormSetWidth(gid)});$(document).on("click",".cg-close-upload-form",function(){var gid=$(this).attr("data-cg-gid");cgJsClass.gallery.upload.functions.close(gid)});$(document).on("click",".mainCGdivUploadFormAjax .cg-refresh-upload-form",function(){var $mainCGdivUploadForm=$(this).closest(".mainCGdivUploadForm");var gid=$mainCGdivUploadForm.attr("data-cg-gid");$mainCGdivUploadForm.find(".mainCGdivUploadFormResultFailed").addClass("cg_hide");$mainCGdivUploadForm.find(".cgGalleryUploadConfirmationText").addClass("cg_hide");$mainCGdivUploadForm.find(".cg-refresh-upload-form").addClass("cg_hide");cgJsClass.gallery.upload.functions.showUploadFormAgain(gid,$mainCGdivUploadForm)});$(document).on("click",".mainCGdivUploadFormAjax.mainCGdivUploadForm.cg_upload_in_progress",function(e){e.preventDefault();if($(this).hasClass("cg_upload_in_progress")){$(this).removeClass("cg_upload_in_progress");cgJsClass.gallery.vars.dom.html.addClass("cg_no_scroll");if(location.hash.indexOf("#cgUploadFormOpened")===-1){cgJsClass.gallery.vars.isHashJustChangedNewLogic=true;cgJsClass.gallery.vars.isGalleryUploadFormHashChange=true;window.location.hash="#cgUploadFormOpened"}}});$(document).on("click",".cg-minimize-upload-form",function(e){e.preventDefault();var $mainCGdivUploadForm=$(this).closest(".mainCGdivUploadFormAjax.mainCGdivUploadForm");cgJsClass.gallery.upload.functions.minimizeUploadForm($mainCGdivUploadForm)});cgJsClass.gallery.upload.validation.init($);$(document).on("click",'input[type="file"].cg_input_image_upload_id_in_gallery',function(){var gid=$(this).attr("data-cg-gid");cgJsClass.gallery.upload.functions.checkIfCookieRequired(gid);setTimeout(function(){if(cgJsClass.gallery.vars.lastFullscreen){cgJsClass.gallery.vars.fullscreen=cgJsClass.gallery.vars.lastFullscreen;cgJsClass.gallery.vars.dom.body.addClass("cg_browser_input_button_upload_modal_triggered")}},100)});$(document).on("mousemove","body.cg_browser_input_button_upload_modal_triggered",function(){cgJsClass.gallery.views.fullscreen.fullScreenBodyCheck($(this))});$(document).on("mousedown","body.cg_upload_modal_opened",function(e){var $eTarget=$(e.target);if(!$(this).hasClass("cg_upload_modal_opened")){return}var isOnUploadFormClicked=false;if($eTarget.hasClass(".mainCGdivUploadFormAjax.mainCGdivUploadForm")||$eTarget.closest(".mainCGdivUploadForm").length||$eTarget.hasClass(".ui-datepicker.cg_upload_form_container")||$eTarget.closest(".ui-datepicker.cg_upload_form_container").length){isOnUploadFormClicked=true}if($(this).hasClass("cg_upload_in_progress")&&!cgJsData[cgJsClass.gallery.vars.openedUploadFormGalleryId].vars.mainCGdivUploadForm.hasClass("cg_upload_in_progress")&&!isOnUploadFormClicked){cgJsClass.gallery.upload.functions.minimizeUploadForm(cgJsData[cgJsClass.gallery.vars.openedUploadFormGalleryId].vars.mainCGdivUploadForm);cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");return}if($(this).hasClass("cg_upload_in_progress")){return}if($(this).hasClass("cg_uncloseable")){return}if(isOnUploadFormClicked){return}else{cgJsClass.gallery.upload.functions.close(cgJsClass.gallery.vars.openedUploadFormGalleryId)}});$(document).on("click",".mainCGdivUploadFormAjax .cg_users_upload_submit",function(e){e.preventDefault();var gid=$(this).attr("data-cg-gid");cgJsData[gid].vars.upload.validationResult=true;var $submitButton=$(this);if($submitButton.hasClass("cg_form_submit_bulk_upload")){var $cg_form_div_image_steps=$(this).closest(".mainCGdivUploadFormAjax").find(".cg_form_div_image_step_single_image_cloned")}else{var $cg_form_div_image_steps=$(this).closest(".mainCGdivUploadFormAjax").find(".cg_form_div_image_step")}cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default=0;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=0;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_not_loaded=0;$cg_form_div_image_steps.each(function(index){cgJsClass.gallery.upload.validation.cgCheckFieldsInGalleryForm($,e,$submitButton,true,$(this),index+1,$cg_form_div_image_steps.length)})});$(document).on("input change",".mainCGdivUploadFormAjax .cg_upload_form_field_in_gallery",function(e){var gid=$(this).attr("data-cg-gid");cgJsData[gid].vars.upload.validationResult=true;var $field=$(this);var elementVal=$field.val();cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default=0;if($field.closest("form").hasClass("cg_form_validated")){cgJsClass.gallery.upload.validation.cgCheckFieldsInGalleryForm($,e,$field,false,$(this).closest(".cg_form_div_image_step"))}});$(document).on("click",".cg_form_div_image_remove",function(e){var gid=$(this).attr("data-cg-gid");if(!$(this).closest(".cg_form_div_image_step").hasClass("cg_cat_select_error")){cgJsClass.gallery.upload.functions.cgImageRemove($,$(this),$(this).closest(".mainCGdivUploadForm"),$(this).closest(".cg_form_div_image_step"),gid)}})};;cgJsClass.gallery.upload.events.initFileUpload=function($){if(cgJsClass.gallery.vars.eventInitFileUpload){return}else{cgJsClass.gallery.vars.eventInitFileUpload=true}$(document).on("click",".cg_form_div_additional_file_container.cg_form_div_additional_file_container_real",function(e){if($(e.target).hasClass("cg_form_div_image_drag")||$(e.target).hasClass("cg_form_div_image_remove")){return}var gid=$(this).closest(".mainCGdivUploadForm").attr("data-cg-gid");cgJsData[gid].vars.upload.additionalFilesOrderClicked=$(this).attr("data-cg-additional-files-order");$(this).closest(".cg_form_div_image_upload").find(".cg_form_div_additional_file_container_add .cg_input_image_upload_input_additional_files_single").click()});$(document).on("change",".cg_input_select_class",function(e){var $mainCGdivUploadForm=$(this).closest(".mainCGdivUploadForm");var gid=$mainCGdivUploadForm.attr("data-cg-gid");var $cg_form_div_image_step=$(this).closest(".cg_form_div_image_step");if(cgJsData[gid].options.pro.RegUserMaxUploadPerCategory){if(cgJsClass.gallery.upload.functions.totalAmountOfUserImagesPerCategoryMessageCheck(gid,$mainCGdivUploadForm,$cg_form_div_image_step)){cgJsClass.gallery.upload.functions.showTotalAmountOfUserImagesPerCategoryMessage(e,$mainCGdivUploadForm.find('input[type="file"].cg_input_image_upload_id_in_gallery:not(.cg_input_image_upload_id_in_gallery_upload_bulk)'),gid,$mainCGdivUploadForm,$(this).closest(".cg_form_div_image_step"),true)}else{if($cg_form_div_image_step.data("data-cg-cat-select-upload-amount-failure-before")==true){cgJsClass.gallery.upload.functions.removeError(gid,$mainCGdivUploadForm.find('input[type="file"].cg_input_image_upload_id_in_gallery:not(.cg_input_image_upload_id_in_gallery_upload_bulk)').get(0),$mainCGdivUploadForm,$cg_form_div_image_step);$cg_form_div_image_step.find(".cg_input_image_upload_id_in_gallery").replaceWith($cg_form_div_image_step.data("data-cg-value-input-clone"));$cg_form_div_image_step.find(".cg_form_div_image_upload_preview_img").css("background",$cg_form_div_image_step.data("data-cg-background"));$cg_form_div_image_step.data("data-cg-cat-select-upload-amount-failure-before",false)}if(!$cg_form_div_image_step.find(".cg_form_div_image_upload .cg_input_error").hasClass("cg_hide")){$cg_form_div_image_step.find(".cg_input_image_upload_label").removeClass("cg_opacity_0")}$cg_form_div_image_step.find(".cg_form_div_image_upload .cg_input_error").addClass("cg_hide");cgJsClass.gallery.upload.functions.resetCatSelectUploadAmountFailureBefore($cg_form_div_image_step);if(!$cg_form_div_image_step.find(".cg_input_image_upload_input").val()){$cg_form_div_image_step.find(".cg_input_image_upload_label").removeClass("cg_opacity_0")}}}});$(document).on("change",'.mainCGdivUploadFormAjax input[type="file"].cg_input_image_upload_id_in_gallery:not(.cg_input_image_upload_id_in_gallery_upload_bulk)',function(e){var gid=$(this).attr("data-cg-gid");var $mainCGdivUploadForm=$(this).closest(".mainCGdivUploadForm");var $cg_form_div_image_step=$(this).closest(".cg_form_div_image_step");cgJsClass.gallery.upload.functions.resetCatSelectUploadAmountFailureBefore($cg_form_div_image_step);cgJsClass.gallery.upload.functions.removeError(gid,this,$mainCGdivUploadForm,$cg_form_div_image_step);cgJsClass.gallery.views.fullscreen.fullScreenBodyCheck(cgJsClass.gallery.vars.dom.body);cgJsData[gid].vars.upload.validationResult=true;var isShowTotalAmountOfUserImagesMessage=false;var filesCountUser=parseInt(cgJsData[gid].vars.upload.UploadedUserFilesAmount);var filesCountUserLeft=cgJsData[gid].options.pro.RegUserMaxUpload-filesCountUser;if(filesCountUserLeft<0){filesCountUserLeft=0}if($cg_form_div_image_step.hasClass("cg_form_div_image_step_single_image_cloned")){if(typeof $cg_form_div_image_step.attr("data-cg-clone-index")!="undefined"){if(cgJsData[gid].vars.upload.file_upload_failed_clonesIndexArray.indexOf($cg_form_div_image_step.attr("data-cg-clone-index"))>-1){cgJsData[gid].vars.upload.file_upload_failed_clonesIndexArray.splice(cgJsData[gid].vars.upload.file_upload_failed_clonesIndexArray.indexOf($cg_form_div_image_step.attr("data-cg-clone-index")),1)}}}if($(this).val()){var all_files=$(this).get(0).files;if(cgJsData[gid].options.pro.RegUserUploadOnly>=1&&cgJsData[gid].options.pro.RegUserMaxUpload>=1&&!$(this).closest(".mainCGdivUploadFormBulk").length){if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){if(cgJsData[gid].vars.upload.all_files_length){if(filesCountUser+1>cgJsData[gid].options.pro.RegUserMaxUpload){isShowTotalAmountOfUserImagesMessage=true}}else{if(filesCountUser+0>=cgJsData[gid].options.pro.RegUserMaxUpload){isShowTotalAmountOfUserImagesMessage=true}}}else{if(filesCountUser+cgJsData[gid].vars.upload.all_files_length+all_files.length>cgJsData[gid].options.pro.RegUserMaxUpload){isShowTotalAmountOfUserImagesMessage=true}}}if(cgJsClass.gallery.upload.functions.totalAmountOfUserImagesPerCategoryMessageCheck(gid,$mainCGdivUploadForm,$cg_form_div_image_step)){cgJsClass.gallery.upload.functions.showTotalAmountOfUserImagesPerCategoryMessage(e,$mainCGdivUploadForm.find('input[type="file"].cg_input_image_upload_id_in_gallery:not(.cg_input_image_upload_id_in_gallery_upload_bulk)'),gid,$mainCGdivUploadForm,$cg_form_div_image_step);return}}else{if(cgJsData[gid].options.pro.RegUserUploadOnly>=1&&cgJsData[gid].options.pro.RegUserMaxUpload>=1){var filesCountUser=parseInt(cgJsData[gid].vars.upload.UploadedUserFilesAmount);if(filesCountUser+cgJsData[gid].vars.upload.all_files_length>=cgJsData[gid].options.pro.RegUserMaxUpload){isShowTotalAmountOfUserImagesMessage=true}}}if(isShowTotalAmountOfUserImagesMessage){$(this).val("");$mainCGdivUploadForm.find(".cg_input_image_upload_id_in_gallery").parent().find(".cg_input_error").removeClass("cg_hide").html(""+cgJsClass.gallery.language[gid].MaximumAmountOfUploadsIs+": "+cgJsData[gid].options.pro.RegUserMaxUpload+"<br>"+""+cgJsClass.gallery.language[gid].YouHaveAlreadyUploaded+": "+filesCountUser);cgJsData[gid].vars.upload.file_upload_failed=1;$cg_form_div_image_step.find(".cg_input_image_upload_id_in_gallery").closest(".cg_form_div").addClass("cg_form_div_error");if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){$cg_form_div_image_step.find(".cg_form_div_additional_file_container").addClass("cg_hide")}cgJsClass.gallery.upload.functions.preventDefault(e,gid);return}if($(this).val()){if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){$cg_form_div_image_step.attr("data-cg-files-index",0);if($(this).hasClass("cg_input_image_upload_input_additional_files_single")){$cg_form_div_image_step.find('.cg_form_div_additional_file_container_real[data-cg-additional-files-order="'+cgJsData[gid].vars.upload.additionalFilesOrderClicked+'"] .cg_form_div_image_upload_preview').empty();cgJsClass.gallery.upload.validation.checkPicCgGalleryUpload($,e,gid,$(this),true,$cg_form_div_image_step,undefined,undefined,undefined,$mainCGdivUploadForm,all_files[0],cgJsData[gid].vars.upload.additionalFilesOrderClicked)}else{for(var index in all_files){if(!all_files.hasOwnProperty(index)){break}if($cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").length&&parseInt($cg_form_div_image_step.attr("data-cg-additional-files-count"))+1<=$cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").length){cgJsClass.gallery.upload.functions.hideShowAdditionalFileContainerAdd($cg_form_div_image_step)}else{$cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").removeClass("cg_form_div_additional_file_container_real_last");var additionalFilesOrder=$cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").length+1;var $cg_form_div_additional_file_container_to_clone=$cg_form_div_image_step.find(".cg_form_div_additional_file_container_to_clone");var $cg_form_div_additional_file_container_clone=$cg_form_div_additional_file_container_to_clone.clone();$cg_form_div_additional_file_container_clone.removeClass("cg_hide cg_form_div_additional_file_container_to_clone").addClass("cg_form_div_additional_file_container_real cg_form_div_additional_file_container_real_last");$cg_form_div_additional_file_container_clone.removeClass("cg_success").attr("data-cg-additional-files-order",additionalFilesOrder);$cg_form_div_additional_file_container_clone.find(".cg_form_div_image_position").text(additionalFilesOrder);$cg_form_div_additional_file_container_clone.insertBefore($cg_form_div_image_step.find(".cg_form_div_additional_file_container_add"));$cg_form_div_additional_file_container_clone.find(".cg_form_div_image_upload_preview").empty();cgJsClass.gallery.upload.functions.hideShowAdditionalFileContainerAdd($cg_form_div_image_step);cgJsClass.gallery.upload.validation.checkPicCgGalleryUpload($,e,gid,$(this),true,$cg_form_div_image_step,undefined,undefined,undefined,$mainCGdivUploadForm,all_files[index],additionalFilesOrder)}}}$cg_form_div_image_step.find(".cg_form_div_image_upload > .cg_input_image_upload_label").addClass("cg_hide");$cg_form_div_image_step.find(".cg_form_div_image_upload > .cg_hide_image_upload").addClass("cg_hide");$cg_form_div_image_step.get(0).scrollIntoView()}else{$cg_form_div_image_step.find(".cg_form_div_image_upload_preview").empty();if(all_files.length<1){$cg_form_div_image_step.find(".cg_form_div_image_upload_preview").addClass("cg_hide")}else{}cgJsClass.gallery.upload.validation.checkPicCgGalleryUpload($,e,gid,$(this),true,$cg_form_div_image_step,undefined,undefined,undefined,$mainCGdivUploadForm,all_files[0]);$cg_form_div_image_step.get(0).scrollIntoView()}}else{if($(this).hasClass("cg_input_image_upload_input_additional_files")){return}{var cg_no_picture_is_choosed=cgJsClass.gallery.language[gid].ChooseYourImage;$cg_form_div_image_step.find(".cg_input_image_upload_id_in_gallery").parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_no_picture_is_choosed+"");cgJsData[gid].vars.upload.file_upload_failed=1;$cg_form_div_image_step.find(".cg_input_image_upload_id_in_gallery").closest(".cg_form_div").addClass("cg_form_div_error");$cg_form_div_image_step.find(".cg_form_div_image_upload_preview ").addClass("cg_hide").css("background-image","");cgJsClass.gallery.upload.functions.preventDefault(e,gid);if($cg_form_div_image_step.find(".cg_form_div_image_upload").hasClass("cg_form_div_image_upload_added")){$cg_form_div_image_step.find(".cg_form_div_image_upload").removeClass("cg_form_div_image_upload_added");cgJsData[gid].vars.upload.all_files_length--}delete cgJsData[gid].vars.upload.files[$cg_form_div_image_step.attr("data-cg-files-index")]}}})};;cgJsClass.gallery.upload.events.initFileUploadBulk=function($){if(cgJsClass.gallery.vars.eventInitFileUploadBulk){return}else{cgJsClass.gallery.vars.eventInitFileUploadBulk=true}$(document).on("change",'.mainCGdivUploadFormAjax input[type="file"].cg_input_image_upload_id_in_gallery_upload_bulk',function(e){$(this).closest(".cg_form_div").removeClass("cg_form_div_error cg_form_div_error_file_resolution").find(".cg_input_error").removeClass("cg_form_div_error_file_resolution").addClass("cg_hide");cgJsClass.gallery.views.fullscreen.fullScreenBodyCheck(cgJsClass.gallery.vars.dom.body);var gid=$(this).attr("data-cg-gid");cgJsData[gid].vars.upload.validationResult=true;var $cg_form_div_image_step=$(this).closest(".cg_form_div_image_step");var $mainCGdivUploadForm=$(this).closest(".mainCGdivUploadForm");var BulkUploadQuantity=cgJsData[gid].options.general.BulkUploadQuantity;if(BulkUploadQuantity==0){BulkUploadQuantity=1e3}var filesCountUser=parseInt(cgJsData[gid].vars.upload.UploadedUserFilesAmount);var filesCountUserLeft=cgJsData[gid].options.pro.RegUserMaxUpload-filesCountUser;if(filesCountUserLeft<0){filesCountUserLeft=0}var isShowBulkUploadMessage=false;var isShowTotalAmountOfUserImagesMessage=false;if($(this).val()){var all_files=$cg_form_div_image_step.find(".cg_input_image_upload_id_in_gallery_upload_bulk")[0].files;if(all_files.length+cgJsData[gid].vars.upload.all_files_length>BulkUploadQuantity){isShowBulkUploadMessage=true}if(cgJsData[gid].options.pro.RegUserUploadOnly>=1&&cgJsData[gid].options.pro.RegUserMaxUpload>=1){if(filesCountUser+cgJsData[gid].vars.upload.all_files_length+all_files.length>cgJsData[gid].options.pro.RegUserMaxUpload){isShowTotalAmountOfUserImagesMessage=true}}}else{if(cgJsData[gid].vars.upload.all_files_length>=BulkUploadQuantity){isShowBulkUploadMessage=true}if(cgJsData[gid].options.pro.RegUserUploadOnly>=1&&cgJsData[gid].options.pro.RegUserMaxUpload>=1){if(filesCountUser+cgJsData[gid].vars.upload.all_files_length>=cgJsData[gid].options.pro.RegUserMaxUpload){isShowTotalAmountOfUserImagesMessage=true}}}if(isShowTotalAmountOfUserImagesMessage){$(this).val("");$mainCGdivUploadForm.find(".cg_form_div_image_step_upload_bulk .cg_form_div .cg_input_error").removeClass("cg_hide").html(""+cgJsClass.gallery.language[gid].MaximumAmountOfUploadsIs+": "+cgJsData[gid].options.pro.RegUserMaxUpload+"<br>"+""+cgJsClass.gallery.language[gid].YouHaveAlreadyUploaded+": "+filesCountUser+"<br>"+""+cgJsClass.gallery.language[gid].MaximumAmountOfUploadsLeftForYou+": "+filesCountUserLeft+"<br>");cgJsData[gid].vars.upload.file_upload_failed=1;$mainCGdivUploadForm.find(".cg_form_div_image_step_upload_bulk .cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid);return}if(isShowBulkUploadMessage){$(this).val("");var cg_language_BulkUploadQuantityIs=cgJsClass.gallery.language[gid].BulkUploadQuantityIs;$mainCGdivUploadForm.find(".cg_form_div_image_step_upload_bulk .cg_form_div .cg_input_error").removeClass("cg_hide").text(""+cg_language_BulkUploadQuantityIs+": "+BulkUploadQuantity+"");cgJsData[gid].vars.upload.file_upload_failed=1;$mainCGdivUploadForm.find(".cg_form_div_image_step_upload_bulk .cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid);return}if($(this).val()){$cg_form_div_image_step.find(".cg_form_div_image_upload_preview").empty();var all_files=$cg_form_div_image_step.find(".cg_input_image_upload_id_in_gallery_upload_bulk")[0].files;var $files=$cg_form_div_image_step.find(".cg_input_image_upload_id_in_gallery_upload_bulk").prop("files");var $cg_form_div_image_step_single_image_to_clone=$mainCGdivUploadForm.find(".cg_form_div_image_step_single_image_to_clone");var $cg_form_div_image_step_upload_bulk=$mainCGdivUploadForm.find(".cg_form_div_image_step_upload_bulk");if(all_files.length>=1){for(var i=0,len=all_files.length;i<len;i++){var $cg_form_div_image_step_cloned=$cg_form_div_image_step_single_image_to_clone.clone();$cg_form_div_image_step_cloned.removeClass("cg_form_div_image_step_single_image_to_clone");$cg_form_div_image_step_cloned.addClass("cg_form_div_image_step_single_image_cloned");$cg_form_div_image_step_cloned.insertAfter($cg_form_div_image_step_upload_bulk);$cg_form_div_image_step_cloned.removeClass("cg_hide");cgJsData[gid].vars.upload.clonesIndex++;$cg_form_div_image_step_cloned.attr("data-cg-clone-index",cgJsData[gid].vars.upload.clonesIndex);cgJsClass.gallery.upload.validation.checkPicCgGalleryUpload($,e,gid,$(this),true,$cg_form_div_image_step_cloned,undefined,undefined,undefined,$mainCGdivUploadForm,all_files[i])}}$mainCGdivUploadForm.find(".cg_form_div_image_step_single_image_cloned").first().get(0).scrollIntoView();$(this).val("")}else{$cg_form_div_image_step.find(".cg_form_div_image_remove").click()}})};;cgJsClass.gallery.upload.vars={activeGalleryId:0,allowedFileEndings:["jpg","jpeg","gif","png","pdf","zip","txt","doc","docx","xls","xlsx","csv","mp3","m4a","ogg","wav","mp4","mov","webm","ppt","pptx"],cg_upload_form_e_prevent_default:0,doneUploadFailed:false,failMessage:0,slowPercentageUpInterval:null,slowPercentageUpStartInitiated:false,slowPercentageUpStart:90,validationResult:true,files:{},filesIndex:0,all_files_length:0,previewContainerWithLoader:'<div class="cg_form_div_image_upload_preview_div_container cg_form_div_skeleton_box"><div class="cg_form_div_image_upload_preview_div_container_file_name"></div></div>',init:function(gid){cgJsData[gid].vars.upload.activeGalleryId=0;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default=0;cgJsData[gid].vars.upload.doneUploadFailed=false;cgJsData[gid].vars.upload.validationResult=true;cgJsData[gid].vars.upload.files={};cgJsData[gid].vars.upload.fileAdditionalFiles={};cgJsData[gid].vars.upload.fileAdditionalFiles[0]={};cgJsData[gid].vars.upload.filesIndex=0;cgJsData[gid].vars.upload.filesIndexAdditionalFiles=0;cgJsData[gid].vars.upload.file_upload_failed_clonesIndexArray=[];cgJsData[gid].vars.upload.clonesIndex=0;cgJsData[gid].vars.upload.all_files_length=0;cgJsData[gid].vars.upload.isAlternativeFileUpload=false;cgJsData[gid].vars.upload.alternative_file_preview_hide="";cgJsData[gid].vars.upload.alternative_file_preview_required="";cgJsData[gid].vars.upload.alternative_file_preview_title="";cgJsData[gid].vars.upload.alternative_file_preview_type=""}};;cgJsClass.gallery.upload.validation.init=function($){$.fn.cgGoToGalleryUploadForm=function(gid){$("#cgGalleryUploadForm"+gid).animate({scrollTop:$(this).offset().top-40+"px"},"fast");return this};var check=cgJsClass.gallery.vars.wp_create_nonce;$(".mainCGdivUploadFormAjax .cg_captcha_not_a_robot_field_in_gallery").each(function(){var $element=$(this);var gid=$(this).attr("data-cg-gid");var idForInput=$(this).find("label").attr("for");$(this).find(">div").append("<input type='checkbox' class='cg_upload_form_field_in_gallery' id='"+idForInput+"' data-cg-gid='"+gid+"' >")});$(".mainCGdivUploadFormAjax .cg_recaptcha_form").each(function(index){if(index>=1){$(this).closest(".cg_form_div").remove()}})};;cgJsClass.gallery.upload.validation.checkPicCgGalleryUpload=function($,e,gid,$imageUploadField,isOnAddOnChangeFile,$cg_form_div_image_step,isOnSubmit,stepNumber,stepsLength,$mainCGdivUploadForm,file,additionalFilesOrder){if(!isOnAddOnChangeFile&&cgJsData[gid].vars.upload.all_files_length==0&&$mainCGdivUploadForm.hasClass("mainCGdivUploadNotRequired")){if(isOnSubmit){if(!cgJsData[gid].vars.upload.file_upload_failed){debugger;cgJsClass.gallery.upload.functions.submitForm(e,$,gid,isOnSubmit,stepNumber,stepsLength,$mainCGdivUploadForm)}}return}cgJsData[gid].vars.upload.file_upload_failed=0;var cg_form_div_file_error_target=".cg_input_image_upload_id_in_gallery";if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){cg_form_div_file_error_target='.cg_form_div_additional_file_container_real[data-cg-additional-files-order="'+additionalFilesOrder+'"] .cg_form_div_image_upload_preview';$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div_additional_file_container_real").find(".cg_input_error:not(.cg_form_div_error_file_resolution,.cg_input_error_cat_select)").addClass("cg_hide")}else{$cg_form_div_image_step.find(".cg_input_image_upload_id_in_gallery").closest(".cg_form_div:not(.cg_form_div_error_file_resolution)").removeClass("cg_form_div_error").find(".cg_input_error:not(.cg_form_div_error_file_resolution,.cg_input_error_cat_select)").addClass("cg_hide")}var filename=undefined;if(file){filename=file.name}var BulkUploadQuantity=cgJsData[gid].options.general.BulkUploadQuantity;var BulkUploadMinQuantity=cgJsData[gid].options.general.BulkUploadMinQuantity;if(BulkUploadQuantity==0){BulkUploadQuantity=1e3}if(BulkUploadMinQuantity==0){BulkUploadMinQuantity=1}var ActivateBulkUpload=cgJsData[gid].options.general.ActivateBulkUpload;if(!file||!filename||filename==""){if(ActivateBulkUpload==1){if(!$cg_form_div_image_step.find(".cg_form_div_image_upload.cg_form_div_image_upload_added").length){var cg_no_picture_is_choosed=cgJsClass.gallery.language[gid].ChooseYourImage;$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_no_picture_is_choosed+"");cgJsData[gid].vars.upload.file_upload_failed=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid,undefined,isOnSubmit,additionalFilesOrder)}if(isOnSubmit&&cgJsData[gid].vars.upload.all_files_length<BulkUploadMinQuantity){var cg_language_BulkUploadLowQuantityIs=cgJsClass.gallery.language[gid].BulkUploadLowQuantityIs;$mainCGdivUploadForm.find(".cg_form_upload_submit_div .cg_input_error").removeClass("cg_hide").text(""+cg_language_BulkUploadLowQuantityIs+": "+BulkUploadMinQuantity+"");cgJsData[gid].vars.upload.file_upload_failed=1;$mainCGdivUploadForm.find(".cg_form_div.cg_form_upload_submit_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid,undefined,isOnSubmit,additionalFilesOrder)}else if(cgJsData[gid].vars.upload.all_files_length>BulkUploadQuantity){var cg_language_BulkUploadQuantityIs=cgJsClass.gallery.language[gid].BulkUploadQuantityIs;$mainCGdivUploadForm.find(".cg_form_div_image_step_upload_bulk .cg_form_div .cg_input_error").removeClass("cg_hide").text(""+cg_language_BulkUploadQuantityIs+": "+BulkUploadQuantity+"");cgJsData[gid].vars.upload.file_upload_failed=1;$mainCGdivUploadForm.find(".cg_form_div_image_step_upload_bulk .cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid,undefined,isOnSubmit,additionalFilesOrder)}else{if(!(cgJsData[gid].vars.upload.all_files_length<BulkUploadMinQuantity)&&!(cgJsData[gid].vars.upload.all_files_length>BulkUploadQuantity)){$mainCGdivUploadForm.find(".cg_form_upload_submit_div .cg_input_error").addClass("cg_hide")}if(isOnSubmit===true&&stepNumber==stepsLength){cgJsClass.gallery.upload.functions.submitForm(e,$,gid,isOnSubmit,stepNumber,stepsLength,$mainCGdivUploadForm)}}}else{if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){cgJsClass.gallery.upload.functions.checkImageUploadAdded($cg_form_div_image_step,true)}if(!$cg_form_div_image_step.find(".cg_form_div_image_upload.cg_form_div_image_upload_added").length){if(!$mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){var cg_no_picture_is_choosed=cgJsClass.gallery.language[gid].ChooseYourImage;$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_no_picture_is_choosed+"");$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error")}cgJsData[gid].vars.upload.file_upload_failed=1;cgJsClass.gallery.upload.functions.preventDefault(e,gid,undefined,isOnSubmit,additionalFilesOrder)}else{if(isOnSubmit===true&&stepNumber==stepsLength){cgJsClass.gallery.upload.functions.submitForm(e,$,gid,isOnSubmit,stepNumber,stepsLength,$mainCGdivUploadForm)}}}}else{$cg_form_div_image_step.find(".cg_input_error_image_upload").empty();var fileType=file.type;var fileTypeEndingString=filename.split(".")[filename.split(".").length-1].toLowerCase();var allowedFileEndings=cgJsClass.gallery.upload.vars.allowedFileEndings;var MaxResJPGon=cgJsData[gid].options.general.MaxResJPGon;var MaxResPNGon=cgJsData[gid].options.general.MaxResPNGon;var MaxResGIFon=cgJsData[gid].options.general.MaxResGIFon;var MaxResICOon=cgJsData[gid].options.general.MaxResICOon;var MinResJPGon=cgJsData[gid].options.general.MinResJPGon;var MinResPNGon=cgJsData[gid].options.general.MinResPNGon;var MinResGIFon=cgJsData[gid].options.general.MinResGIFon;if(MaxResJPGon==1){var MaxResJPGwidth=cgJsData[gid].options.general.MaxResJPGwidth;var MaxResJPGheight=cgJsData[gid].options.general.MaxResJPGheight}if(MaxResPNGon==1){var MaxResPNGwidth=cgJsData[gid].options.general.MaxResPNGwidth;var MaxResPNGheight=cgJsData[gid].options.general.MaxResPNGheight}if(MaxResGIFon==1){var MaxResGIFwidth=cgJsData[gid].options.general.MaxResGIFwidth;var MaxResGIFheight=cgJsData[gid].options.general.MaxResGIFheight}if(MaxResICOon==1){var MaxResICOwidth=cgJsData[gid].options.general.MaxResICOwidth;var MaxResICOheight=cgJsData[gid].options.general.MaxResICOheight}if(MinResJPGon==1){var MinResJPGwidth=cgJsData[gid].options.general.MinResJPGwidth;var MinResJPGheight=cgJsData[gid].options.general.MinResJPGheight}if(MinResPNGon==1){var MinResPNGwidth=cgJsData[gid].options.general.MinResPNGwidth;var MinResPNGheight=cgJsData[gid].options.general.MinResPNGheight}if(MinResGIFon==1){var MinResGIFwidth=cgJsData[gid].options.general.MinResGIFwidth;var MinResGIFheight=cgJsData[gid].options.general.MinResGIFheight}var isFileTypeNotAllowed=false;var isImage=false;if(fileType=="image/jpeg"||fileType=="image/png"||fileType=="image/gif"||fileType=="image/x-icon"){isImage=true}var isNotAllowedByWordPressConf=true;for(var key in cgJsClass.gallery.vars.allowed_mime_types){if(!cgJsClass.gallery.vars.allowed_mime_types.hasOwnProperty(key)){break}if(key.indexOf(fileTypeEndingString)>-1){isNotAllowedByWordPressConf=false;break}}if(fileType!="image/jpeg"&&fileType!="image/png"&&fileType!="image/gif"&&fileType!="image/x-icon"&&fileType!="application/pdf"&&fileType!="application/x-zip-compressed"&&fileType!="text/plain"&&fileType!="application/msword"&&fileType!="application/vnd.openxmlformats-officedocument.wordprocessingml.document"&&fileType!="application/vnd.ms-excel"&&fileType!="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"&&fileType!="text/csv"&&fileType!="audio/mpeg"&&fileType!="audio/x-m4a"&&fileType!="audio/ogg"&&fileType!="audio/wav"&&fileType!="video/mp4"&&fileType!="video/avi"&&fileType!="video/webm"&&fileType!="video/quicktime"&&fileType!="video/x-ms-wmv"&&fileType!="application/vnd.openxmlformats-officedocument.presentationml.presentation"&&fileType!="application/vnd.ms-powerpoint"&&fileType!="application/zip"||allowedFileEndings.indexOf(fileTypeEndingString)==-1||isNotAllowedByWordPressConf==true){var cg_file_not_allowed=cgJsClass.gallery.language[gid].ThisFileTypeIsNotAllowed;$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_file_not_allowed+"");cgJsData[gid].vars.upload.file_upload_failed=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isFileTypeNotAllowed=true}else{if(fileType=="image/jpeg"&&cgJsData[gid].options.pro.AllowUploadJPG!=1||fileType=="image/jpeg"&&!cgJsData[gid].options.pro.AllowUploadIMG||(fileType=="image/png"&&cgJsData[gid].options.pro.AllowUploadPNG!=1||fileType=="image/png"&&!cgJsData[gid].options.pro.AllowUploadIMG)||(fileType=="image/gif"&&cgJsData[gid].options.pro.AllowUploadGIF!=1||fileType=="image/gif"&&!cgJsData[gid].options.pro.AllowUploadIMG)||(fileType=="image/x-icon"&&cgJsData[gid].options.pro.AllowUploadICO!=1||fileType=="image/x-icon"&&!cgJsData[gid].options.pro.AllowUploadIMG)||fileType=="application/pdf"&&cgJsData[gid].options.pro.AllowUploadPDF!=1||fileType=="application/x-zip-compressed"&&cgJsData[gid].options.pro.AllowUploadZIP!=1||fileType=="text/plain"&&cgJsData[gid].options.pro.AllowUploadTXT!=1||fileType=="application/msword"&&cgJsData[gid].options.pro.AllowUploadDOC!=1||fileType=="application/vnd.openxmlformats-officedocument.wordprocessingml.document"&&cgJsData[gid].options.pro.AllowUploadDOCX!=1||fileType=="application/vnd.ms-excel"&&cgJsData[gid].options.pro.AllowUploadXLS!=1||fileType=="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"&&cgJsData[gid].options.pro.AllowUploadXLSX!=1||fileType=="text/csv"&&cgJsData[gid].options.pro.AllowUploadCSV!=1||fileType=="audio/mpeg"&&cgJsData[gid].options.pro.AllowUploadMP3!=1||fileType=="audio/x-m4a"&&cgJsData[gid].options.pro.AllowUploadM4A!=1||fileType=="audio/ogg"&&cgJsData[gid].options.pro.AllowUploadOGG!=1||fileType=="audio/wav"&&cgJsData[gid].options.pro.AllowUploadWAV!=1||fileType=="video/mp4"&&cgJsData[gid].options.pro.AllowUploadMP4!=1||fileType=="video/quicktime"&&cgJsData[gid].options.pro.AllowUploadMOV!=1||fileType=="video/webm"&&cgJsData[gid].options.pro.AllowUploadWEBM!=1||fileType=="application/vnd.ms-powerpoint"&&cgJsData[gid].options.pro.AllowUploadPPT!=1||fileType=="application/vnd.openxmlformats-officedocument.presentationml.presentation"&&cgJsData[gid].options.pro.AllowUploadPPTX!=1){var cg_file_not_allowed=cgJsClass.gallery.language[gid].ThisFileTypeIsNotAllowed;$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_file_not_allowed+"");cgJsData[gid].vars.upload.file_upload_failed=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isFileTypeNotAllowed=true}}var upload_max_filesize_php_ini=cgJsClass.gallery.vars.php_upload_max_filesize;if(isImage==true){var upload_max_filesize_user_config=cgJsData[gid].options.general.PostMaxMB;var ActivatePostMaxMB=cgJsData[gid].options.general.ActivatePostMaxMB}else{var upload_max_filesize_user_config=cgJsData[gid].options.general.PostMaxMBfile;var ActivatePostMaxMB=cgJsData[gid].options.general.ActivatePostMaxMBfile}if(ActivatePostMaxMB!="1"){upload_max_filesize_user_config=upload_max_filesize_php_ini}if(upload_max_filesize_php_ini<upload_max_filesize_user_config){var upload_max_filesize=upload_max_filesize_php_ini}else{var upload_max_filesize=upload_max_filesize_user_config}if(upload_max_filesize==0){upload_max_filesize=upload_max_filesize_php_ini}var sizePic=file.size;sizePic=sizePic/1e6;var isSelectedFileToLarge=false;if(sizePic>=upload_max_filesize&&!isFileTypeNotAllowed){var cg_file_size_to_big=cgJsClass.gallery.language[gid].TheFileYouChoosedIsToBigMaxAllowedSize;$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_file_size_to_big+": "+upload_max_filesize+"MB");cgJsData[gid].vars.upload.file_upload_failed=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isSelectedFileToLarge=true}if(!isSelectedFileToLarge&&cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution!=1){$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").removeClass("cg_form_div_error_file_resolution");$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").removeClass("cg_form_div_error_file_resolution")}if(ActivateBulkUpload==1){if(cgJsData[gid].vars.upload.all_files_length<BulkUploadMinQuantity&&isOnSubmit){var cg_language_BulkUploadLowQuantityIs=cgJsClass.gallery.language[gid].BulkUploadLowQuantityIs;$mainCGdivUploadForm.find(".cg_form_upload_submit_div .cg_input_error").removeClass("cg_hide").text(""+cg_language_BulkUploadLowQuantityIs+": "+BulkUploadMinQuantity+"");cgJsData[gid].vars.upload.file_upload_failed=1;$mainCGdivUploadForm.find(".cg_form_div.cg_form_upload_submit_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid,undefined,isOnSubmit,additionalFilesOrder)}else if(cgJsData[gid].vars.upload.all_files_length>BulkUploadQuantity){var cg_language_BulkUploadQuantityIs=cgJsClass.gallery.language[gid].BulkUploadQuantityIs;$mainCGdivUploadForm.find(".cg_form_div_image_step_upload_bulk .cg_form_div .cg_input_error").removeClass("cg_hide").text(""+cg_language_BulkUploadQuantityIs+": "+BulkUploadQuantity+"");cgJsData[gid].vars.upload.file_upload_failed=1;$mainCGdivUploadForm.find(".cg_form_div_image_step_upload_bulk .cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid,undefined,isOnSubmit,additionalFilesOrder)}}if(fileType=="image/jpeg"&&(MaxResJPGon==1||MinResJPGon==1)&&!isSelectedFileToLarge&&!isFileTypeNotAllowed){var _URL=window.URL||window.webkitURL;var img;if(file){img=new Image;img.onload=function(){var isResolutionFail=false;if(MaxResJPGon==1&&MaxResJPGwidth!=0&&this.width>MaxResJPGwidth){$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cgJsClass.gallery.language[gid].MaximumAllowedWidthForJPGsIs+": "+MaxResJPGwidth+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}if(MaxResJPGon==1&&MaxResJPGheight!=0&&this.height>MaxResJPGheight){$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cgJsClass.gallery.language[gid].MaximumAllowedHeightForJPGsIs+": "+MaxResJPGheight+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}if(MinResJPGon==1&&MinResJPGwidth!=0&&this.width<MinResJPGwidth){$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cgJsClass.gallery.language[gid].MinimumRequiredWidthForJPGsIs+": "+MinResJPGwidth+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}if(MinResJPGon==1&&MinResJPGheight!=0&&this.height<MinResJPGheight){$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cgJsClass.gallery.language[gid].MinimumRequiredHeightForJPGsIs+": "+MinResJPGheight+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_not_loaded=0;if(!isResolutionFail){cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=0;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div.cg_form_div_error.cg_form_div_error_file_resolution").removeClass("cg_form_div_error cg_form_div_error_file_resolution");$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").removeClass("cg_form_div_error_file_resolution")}};img.src=_URL.createObjectURL(file)}}if(fileType=="image/png"&&(MaxResPNGon==1||MinResPNGon==1)&&!isSelectedFileToLarge&&!isFileTypeNotAllowed){if(isOnAddOnChangeFile){cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_not_loaded=1}var _URL=window.URL||window.webkitURL;var img;if(file){img=new Image;img.onload=function(){var isResolutionFail=false;if(MaxResPNGwidth!=0&&this.width>MaxResPNGwidth){var cg_max_allowed_width_png=cgJsClass.gallery.language[gid].MaximumAllowedWidthForPNGsIs;$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cg_max_allowed_width_png+": "+MaxResPNGwidth+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}if(MaxResPNGheight!=0&&this.height>MaxResPNGheight){var cg_max_allowed_height_png=cgJsClass.gallery.language[gid].MaximumAllowedHeightForPNGsIs;$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cg_max_allowed_height_png+": "+MaxResPNGheight+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}if(MinResPNGwidth!=0&&this.width<MinResPNGwidth){$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cgJsClass.gallery.language[gid].MinimumRequiredWidthForPNGsIs+": "+MinResPNGwidth+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}if(MinResPNGheight!=0&&this.height<MinResPNGheight){$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cgJsClass.gallery.language[gid].MinimumRequiredHeightForPNGsIs+": "+MinResPNGheight+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_not_loaded=0;if(!isResolutionFail){cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=0;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div.cg_form_div_error.cg_form_div_error_file_resolution").removeClass("cg_form_div_error cg_form_div_error_file_resolution");$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").removeClass("cg_form_div_error_file_resolution")}};img.src=_URL.createObjectURL(file)}}if(fileType=="image/gif"&&(MaxResGIFon==1||MinResGIFon==1)&&!isSelectedFileToLarge&&!isFileTypeNotAllowed){var _URL=window.URL||window.webkitURL;var img;if(file){img=new Image;img.onload=function(){var isResolutionFail=false;if(MaxResGIFwidth!=0&&this.width>MaxResGIFwidth){var cg_max_allowed_width_gif=cgJsClass.gallery.language[gid].MaximumAllowedWidthForGIFsIs;$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cg_max_allowed_width_gif+": "+MaxResGIFwidth+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}if(MaxResGIFheight!=0&&this.height>MaxResGIFheight){var cg_max_allowed_height_gif=cgJsClass.gallery.language[gid].MaximumAllowedHeightForGIFsIs;$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cg_max_allowed_height_gif+": "+MaxResGIFheight+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}if(MinResGIFwidth!=0&&this.width<MinResGIFwidth){$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cgJsClass.gallery.language[gid].MinimumRequiredWidthForGIFsIs+": "+MinResGIFwidth+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}if(MinResGIFheight!=0&&this.height<MinResGIFheight){$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cgJsClass.gallery.language[gid].MinimumRequiredHeightForGIFsIs+": "+MinResGIFheight+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_not_loaded=0;if(!isResolutionFail){cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=0;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div.cg_form_div_error.cg_form_div_error_file_resolution").removeClass("cg_form_div_error cg_form_div_error_file_resolution");$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").removeClass("cg_form_div_error_file_resolution")}};img.src=_URL.createObjectURL(file)}}if(fileType=="image/x-icon"&&MaxResICOon==1&&!isSelectedFileToLarge&&!isFileTypeNotAllowed){var _URL=window.URL||window.webkitURL;var img;if(file){img=new Image;img.onload=function(){var isResolutionFail=false;if(this.width>MaxResICOwidth&&MaxResICOwidth!=0){var cg_max_allowed_width_ico=cgJsClass.gallery.language[gid].MaximumAllowedWidthForICOsIs;$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cg_max_allowed_width_ico+": "+MaxResICOwidth+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}if(this.height>MaxResICOheight&&MaxResICOheight!=0){var cg_max_allowed_height_ico=cgJsClass.gallery.language[gid].MaximumAllowedHeightForICOsIs;$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").addClass("cg_form_div_error_file_resolution").removeClass("cg_hide").text(""+cg_max_allowed_height_ico+": "+MaxResICOheight+"px");cgJsData[gid].vars.upload.file_upload_failed=1;cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=1;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div").addClass("cg_form_div_error cg_form_div_error_file_resolution");cgJsClass.gallery.upload.functions.preventDefault(e,gid,$cg_form_div_image_step,isOnSubmit,additionalFilesOrder);isResolutionFail=true}cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_not_loaded=0;if(!isResolutionFail){cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution=0;$cg_form_div_image_step.find(cg_form_div_file_error_target).closest(".cg_form_div.cg_form_div_error.cg_form_div_error_file_resolution").removeClass("cg_form_div_error cg_form_div_error_file_resolution");$cg_form_div_image_step.find(cg_form_div_file_error_target).parent().find(".cg_input_error").removeClass("cg_form_div_error_file_resolution")}};img.src=_URL.createObjectURL(file)}}if(!cgJsData[gid].vars.upload.file_upload_failed){var fileReaderBase64=new FileReader(file);fileReaderBase64.readAsDataURL(file);$cg_form_div_image_step.find(".cg_input_image_upload_label").addClass("cg_opacity_0");if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){$cg_form_div_image_step.find('.cg_form_div_additional_file_container_real[data-cg-additional-files-order="'+additionalFilesOrder+'"] .cg_form_div_image_upload_preview').removeClass("cg_hide").append($(cgJsClass.gallery.upload.vars.previewContainerWithLoader).attr("id","cg_form_div_image_upload_preview_div_container"+$cg_form_div_image_step.attr("data-cg-index")))}else{$cg_form_div_image_step.find(".cg_form_div_image_upload_preview").removeClass("cg_hide").append($(cgJsClass.gallery.upload.vars.previewContainerWithLoader).attr("id","cg_form_div_image_upload_preview_div_container"+$cg_form_div_image_step.attr("data-cg-index")))}cgJsClass.gallery.upload.functions.previewOnload(fileReaderBase64,$cg_form_div_image_step.attr("data-cg-index"),$mainCGdivUploadForm,$cg_form_div_image_step,gid,file,fileType,additionalFilesOrder)}else{if($cg_form_div_image_step.find(".cg_form_div_image_upload").hasClass("cg_form_div_error")){if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){$cg_form_div_image_step.find('.cg_form_div_additional_file_container_real[data-cg-additional-files-order="'+additionalFilesOrder+'"] .cg_form_div_image_upload_preview')}else{$cg_form_div_image_step.find(".cg_form_div_image_upload_preview:last-child").addClass("cg_hide")}}}if(isOnSubmit===true&&stepNumber==stepsLength){cgJsClass.gallery.upload.functions.submitForm(e,$,gid,isOnSubmit,stepNumber,stepsLength,$mainCGdivUploadForm)}}};;cgJsClass.gallery.upload.validation.cgCheckFieldsInGalleryForm=function($,e,$field,isOnSubmit,$cg_form_div_image_step,stepNumber,stepsLength){var gid=$field.attr("data-cg-gid");var $mainCGdivUploadForm=$field.closest("#mainCGdivUploadForm"+gid);var $cgGalleryUploadForm=$field.closest("#cgGalleryUploadForm"+gid);$cgGalleryUploadForm.addClass("cg_form_validated");$cg_form_div_image_step.find(".cg_form_div_inputs_container .cg_form_div").removeClass("cg_form_div_error");$cg_form_div_image_step.find(".cg_form_div_inputs_container .cg_input_error").addClass("cg_hide").empty();$mainCGdivUploadForm.find(".cg_form_div.cg_form_div_image_upload_bulk").removeClass("cg_form_div_error");$mainCGdivUploadForm.find(".cg_form_div.cg_form_div_image_upload_bulk .cg_input_error").addClass("cg_hide").empty();var cg_ContestEnd=cgJsData[gid].options.general.ContestEnd;var cg_ContestEndTime=cgJsData[gid].options.general.ContestEndTime;if(cg_ContestEnd==1&&cg_ContestEndTime!=0){var ActualTimeSeconds=Math.round((new Date).getTime()/1e3);if(ActualTimeSeconds>cg_ContestEndTime){cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].ThePhotoContestIsOver);cgJsClass.gallery.upload.functions.preventDefault(e,gid);return false}}if(cg_ContestEnd==2){cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].ThePhotoContestIsOver);cgJsClass.gallery.upload.functions.preventDefault(e,gid);return false}if($cgGalleryUploadForm.find(".cg_recaptcha_not_valid_in_gallery_form_error").length>=1&&!$cgGalleryUploadForm.find(".cg_recaptcha_not_valid_in_gallery_form_error").hasClass("cg_recaptcha_not_valid_in_gallery_form_error_success")){var cg_language_pleaseConfirm=cgJsClass.gallery.language[gid].pleaseConfirm;$cgGalleryUploadForm.find(".cg_recaptcha_not_valid_in_gallery_form_error").text(cg_language_pleaseConfirm).removeClass("cg_hide");$cgGalleryUploadForm.find(".cg_recaptcha_not_valid_in_gallery_form_error").closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}var emailRegex=/^[a-zA-Z0-9_!#$%&’*+/=?`{|}~^.-]+@[a-zA-Z0-9.-]+$/;$cg_form_div_image_step.find(".cg_check_agreement_class").each(function(i){var checkIfNeed=$(this).parent().find(".cg_form_required").val();if(checkIfNeed=="on"){if(!$(this).prop("checked")){$(this).closest(".cg_form_div").find(".cg_input_error").removeClass("cg_hide").text(""+cgJsClass.gallery.language[gid].YouHaveToCheckThisAgreement+"");$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}}});$cg_form_div_image_step.find(".cg_input_email_class").each(function(i){var email=$(this).val();var checkIfNeed=$(this).parent().find(".cg_form_required").val();if(checkIfNeed=="on"||email.length>0){if(email.length==0){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(cgJsClass.gallery.language[gid].PleaseFillOut);$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}if(email.length>0){if(!emailRegex.test(email)){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(cgJsClass.gallery.language[gid].EmailAdressHasToBeValid);$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}}}});$cg_form_div_image_step.find(".cg_input_text_class").each(function(i){var minsize=$(this).parent().find(".minsize").val();var maxsize=$(this).parent().find(".maxsize").val();var checkIfNeed=$(this).parent().find(".cg_form_required").val();var realsize=$(this).val().length;var cg_min_characters_text=cgJsClass.gallery.language[gid].MinAmountOfCharacters;var cg_max_characters_text=cgJsClass.gallery.language[gid].MaxAmountOfCharacters;if(checkIfNeed=="on"){if(realsize==0){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(cgJsClass.gallery.language[gid].PleaseFillOut);$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}else if(realsize<minsize){$(this).parent().find(".cg_input_error").removeClass("cg_hide").empty();$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_min_characters_text+": "+minsize+"");$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}else if(realsize>maxsize){$(this).parent().find(".cg_input_error").removeClass("cg_hide").empty();$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_max_characters_text+": "+maxsize+"");$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}}else{if(minsize&&realsize>=1){if(realsize<minsize){$(this).parent().find(".cg_input_error").removeClass("cg_hide").empty();$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_min_characters_text+": "+minsize+"");$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}}if(maxsize&&realsize>=1){if(realsize>maxsize){$(this).parent().find(".cg_input_error").removeClass("cg_hide").empty();$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_max_characters_text+": "+maxsize+"");$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}}}});$cg_form_div_image_step.find(".cg_input_date_class").each(function(i){var checkIfNeed=$(this).parent().find(".cg_form_required").val();var realsize=$(this).val().length;if(checkIfNeed=="on"){if(realsize==0){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(cgJsClass.gallery.language[gid].PleaseFillOut);$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}}});$cg_form_div_image_step.find(".cg_input_url_class").each(function(i){var cg_language_URLnotValid=cgJsClass.gallery.language[gid].URLnotValid;var checkIfNeed=$(this).parent().find(".cg_form_required").val();if(checkIfNeed=="on"){var value=$(this).val();if(value.length==0){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(cgJsClass.gallery.language[gid].PleaseFillOut);$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}else{var result=value.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);if(result==null){$(this).parent().find(".cg_input_error").removeClass("cg_hide").empty();$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_language_URLnotValid+"");$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}}}});$cg_form_div_image_step.find(".cg_input_select_class").each(function(i){var checkIfNeed=$(this).parent().find(".cg_form_required").val();var cg_language_youHaveNotSelected=cgJsClass.gallery.language[gid].youHaveNotSelected;if(checkIfNeed=="on"){if($(this).val()=="0"){$(this).parent().find(".cg_input_error").removeClass("cg_hide").empty();$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_language_youHaveNotSelected+"");$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}}});$cg_form_div_image_step.find(".cg_textarea_class").each(function(i){var minsize=$(this).parent().find(".minsize").val();var maxsize=$(this).parent().find(".maxsize").val();var checkIfNeed=$(this).parent().find(".cg_form_required").val();var realsize=$(this).val().length;var cg_min_characters_text=cgJsClass.gallery.language[gid].MinAmountOfCharacters;var cg_max_characters_text=cgJsClass.gallery.language[gid].MaxAmountOfCharacters;if(checkIfNeed=="on"){if(realsize==0){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(cgJsClass.gallery.language[gid].PleaseFillOut);$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}else if(realsize<minsize){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_min_characters_text+": "+minsize+"");$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}else if(realsize>maxsize){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_max_characters_text+": "+maxsize+"");$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}else{}}else{if(minsize&&realsize>=1){if(realsize<minsize){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_min_characters_text+": "+minsize+"");$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}}if(maxsize&&realsize>=1){if(realsize>maxsize){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_max_characters_text+": "+maxsize+"");$(this).closest(".cg_form_div").addClass("cg_form_div_error");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}}}});if($cgGalleryUploadForm.find('.cg_captcha_not_a_robot_field_in_gallery  input[type="checkbox"]').length>=1&&!$cgGalleryUploadForm.find('.cg_captcha_not_a_robot_field_in_gallery  input[type="checkbox"]').prop("checked")){cgJsClass.gallery.upload.functions.preventDefault(e,gid);var cg_language_pleaseConfirm=cgJsClass.gallery.language[gid].pleaseConfirm;$cgGalleryUploadForm.find(".cg_captcha_not_a_robot_field_in_gallery").find(".cg_input_error").removeClass("cg_hide").text(cg_language_pleaseConfirm)}if($mainCGdivUploadForm.hasClass("mainCGdivContactEntriesOnly")){if(isOnSubmit){cgJsClass.gallery.upload.functions.submitForm(e,$,gid,isOnSubmit,stepNumber,stepsLength,$mainCGdivUploadForm)}}else{if(isOnSubmit&&cgJsData[gid].vars.upload.all_files_length==0&&$mainCGdivUploadForm.hasClass("mainCGdivUploadNotRequired")){if(!cgJsData[gid].vars.upload.file_upload_failed){cgJsClass.gallery.upload.functions.submitForm(e,$,gid,isOnSubmit,stepNumber,stepsLength,$mainCGdivUploadForm)}}else{if(!$mainCGdivUploadForm.find(".cg_form_div_image_step.cg_cat_select_error").length){cgJsClass.gallery.upload.validation.checkPicCgGalleryUpload($,e,gid,undefined,false,$cg_form_div_image_step,isOnSubmit,stepNumber,stepsLength,$mainCGdivUploadForm)}}}};;cgJsClass.gallery.upload.functions.init=function($,gid){if(typeof cgRecaptchaCallbackUploadFormRendered=="undefined"||!cgRecaptchaCallbackUploadFormRendered){$(".cg_recaptcha_not_a_robot_field").remove()}};cgJsClass.gallery.upload.functions.initForGallery=function(gid){cgJsData[gid].options.pro.AllowUploadIMG=true;cgJsData[gid].options.pro.AllowUploadPDF=false;cgJsData[gid].options.pro.AllowUploadZIP=false;cgJsData[gid].options.pro.AllowUploadTXT=false;cgJsData[gid].options.pro.AllowUploadDOC=false;cgJsData[gid].options.pro.AllowUploadDOCX=false;cgJsData[gid].options.pro.AllowUploadXLS=false;cgJsData[gid].options.pro.AllowUploadXLSX=false;cgJsData[gid].options.pro.AllowUploadCSV=false;cgJsData[gid].options.pro.AllowUploadMP3=false;cgJsData[gid].options.pro.AllowUploadM4A=false;cgJsData[gid].options.pro.AllowUploadOGG=false;cgJsData[gid].options.pro.AllowUploadWAV=false;cgJsData[gid].options.pro.AllowUploadMP4=false;cgJsData[gid].options.pro.AllowUploadMOV=false;cgJsData[gid].options.pro.AllowUploadWEBM=false;cgJsData[gid].options.pro.AllowUploadPPT=false;cgJsData[gid].options.pro.AllowUploadPPTX=false;if(cgJsData[gid].forms.upload){for(var fieldId in cgJsData[gid].forms.upload){if(!cgJsData[gid].forms.upload.hasOwnProperty(fieldId)){break}var Field_Type=cgJsData[gid].forms.upload[fieldId]["Field_Type"];if(Field_Type=="image-f"&&cgJsData[gid].forms.upload[fieldId]["Field_Content"]){var Field_Content=cgJsData[gid].forms.upload[fieldId]["Field_Content"];if(typeof Field_Content["file-type-img"]!="undefined"&&Field_Content["file-type-img"]!="img"){cgJsData[gid].options.pro.AllowUploadIMG=false}if(typeof Field_Content["alternative-file-type-pdf"]!="undefined"&&Field_Content["alternative-file-type-pdf"]=="pdf"){cgJsData[gid].options.pro.AllowUploadPDF=true}else if(typeof Field_Content["alternative-file-type-pdf"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadPDF=true}if(typeof Field_Content["alternative-file-type-zip"]!="undefined"&&Field_Content["alternative-file-type-zip"]=="zip"){cgJsData[gid].options.pro.AllowUploadZIP=true}else if(typeof Field_Content["alternative-file-type-zip"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadZIP=true}if(typeof Field_Content["alternative-file-type-txt"]!="undefined"&&Field_Content["alternative-file-type-txt"]=="txt"){cgJsData[gid].options.pro.AllowUploadTXT=true}else if(typeof Field_Content["alternative-file-type-txt"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadTXT=true}if(typeof Field_Content["alternative-file-type-doc"]!="undefined"&&Field_Content["alternative-file-type-doc"]=="doc"){cgJsData[gid].options.pro.AllowUploadDOC=true}else if(typeof Field_Content["alternative-file-type-doc"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadDOC=true}if(typeof Field_Content["alternative-file-type-docx"]!="undefined"&&Field_Content["alternative-file-type-docx"]=="docx"){cgJsData[gid].options.pro.AllowUploadDOCX=true}else if(typeof Field_Content["alternative-file-type-docx"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadDOCX=true}if(typeof Field_Content["alternative-file-type-xls"]!="undefined"&&Field_Content["alternative-file-type-xls"]=="xls"){cgJsData[gid].options.pro.AllowUploadXLS=true}else if(typeof Field_Content["alternative-file-type-xls"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadXLS=true}if(typeof Field_Content["alternative-file-type-xlsx"]!="undefined"&&Field_Content["alternative-file-type-xlsx"]=="xlsx"){cgJsData[gid].options.pro.AllowUploadXLSX=true}else if(typeof Field_Content["alternative-file-type-xlsx"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadXLSX=true}if(typeof Field_Content["alternative-file-type-csv"]!="undefined"&&Field_Content["alternative-file-type-csv"]=="csv"){cgJsData[gid].options.pro.AllowUploadCSV=true}else if(typeof Field_Content["alternative-file-type-csv"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadCSV=true}if(typeof Field_Content["alternative-file-type-mp3"]!="undefined"&&Field_Content["alternative-file-type-mp3"]=="mp3"){cgJsData[gid].options.pro.AllowUploadMP3=true}else if(typeof Field_Content["alternative-file-type-mp3"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadMP3=true}if(typeof Field_Content["alternative-file-type-m4a"]!="undefined"&&Field_Content["alternative-file-type-m4a"]=="m4a"){cgJsData[gid].options.pro.AllowUploadM4A=true}else if(typeof Field_Content["alternative-file-type-m4a"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadM4A=true}if(typeof Field_Content["alternative-file-type-ogg"]!="undefined"&&Field_Content["alternative-file-type-ogg"]=="ogg"){cgJsData[gid].options.pro.AllowUploadOGG=true}else if(typeof Field_Content["alternative-file-type-ogg"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadOGG=true}if(typeof Field_Content["alternative-file-type-wav"]!="undefined"&&Field_Content["alternative-file-type-wav"]=="wav"){cgJsData[gid].options.pro.AllowUploadWAV=true}else if(typeof Field_Content["alternative-file-type-wav"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadWAV=true}if(typeof Field_Content["alternative-file-type-mp4"]!="undefined"&&Field_Content["alternative-file-type-mp4"]=="mp4"){cgJsData[gid].options.pro.AllowUploadMP4=true}else if(typeof Field_Content["alternative-file-type-mp4"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadMP4=true}if(typeof Field_Content["alternative-file-type-mov"]!="undefined"&&Field_Content["alternative-file-type-mov"]=="mov"){cgJsData[gid].options.pro.AllowUploadMOV=true}else if(typeof Field_Content["alternative-file-type-mov"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadMOV=true}if(typeof Field_Content["alternative-file-type-webm"]!="undefined"&&Field_Content["alternative-file-type-webm"]=="webm"){cgJsData[gid].options.pro.AllowUploadWEBM=true}else if(typeof Field_Content["alternative-file-type-webm"]=="undefined"&&cgJsData[gid].options.general.Version>=17){cgJsData[gid].options.pro.AllowUploadWEBM=true}if(typeof Field_Content["alternative-file-type-ppt"]!="undefined"&&Field_Content["alternative-file-type-ppt"]=="ppt"){cgJsData[gid].options.pro.AllowUploadPPT=true}else if(typeof Field_Content["alternative-file-type-ppt"]=="undefined"&&cgJsData[gid].options.general.Version>=17){}if(typeof Field_Content["alternative-file-type-pptx"]!="undefined"&&Field_Content["alternative-file-type-pptx"]=="pptx"){cgJsData[gid].options.pro.AllowUploadPPTX=true}else if(typeof Field_Content["alternative-file-type-pptx"]=="undefined"&&cgJsData[gid].options.general.Version>=17){}}}}if(!cgJsClass.gallery.vars.isProVersion){cgJsData[gid].options.pro.AllowUploadIMG=true;cgJsData[gid].options.pro.AllowUploadPDF=false;cgJsData[gid].options.pro.AllowUploadZIP=false;cgJsData[gid].options.pro.AllowUploadDOCX=false;cgJsData[gid].options.pro.AllowUploadXLSX=false;cgJsData[gid].options.pro.AllowUploadMP3=false;cgJsData[gid].options.pro.AllowUploadM4A=false;cgJsData[gid].options.pro.AllowUploadOGG=false;cgJsData[gid].options.pro.AllowUploadWAV=false;cgJsData[gid].options.pro.AllowUploadMP4=false;cgJsData[gid].options.pro.AllowUploadMOV=false;cgJsData[gid].options.pro.AllowUploadWEBM=false;cgJsData[gid].options.pro.AllowUploadPPTX=false}};;cgJsClass.gallery.upload.functions.init=function(gid,realGid){if(cgJsData[gid].vars.isOnlyContactForm){cgJsClass.gallery.upload.functions.uploadFormFieldsCheck(cgJsData[gid].vars.mainCGdivUploadForm,realGid)}};cgJsClass.gallery.upload.functions.checkIfCookieRequired=function(gid){if(cgJsData[gid].options.pro.RegUserUploadOnly==2&&cgJsData[gid].options.pro.RegUserMaxUpload>=1){var cookieName="contest-gal1ery-"+gid+"-upload";var cookieValue=cgJsClass.gallery.dynamicOptions.getCookie(cookieName);if(!cookieValue){cgJsClass.gallery.user.setFrontendCookieUpload(gid)}}};cgJsClass.gallery.upload.functions.uploadFormFieldsCheck=function($mainCGdivUploadForm,realGid){if($mainCGdivUploadForm.find(".cg_form_div_inputs_container .cg_form_div").length===0&&$mainCGdivUploadForm.find(".cg_form_div_image_container").hasClass("cg_hide")){$mainCGdivUploadForm.find(".cg_form_div_inputs_container").css("text-align","center").html('There are no fields to be displayed<br>for this contact form.<br>Either hidden or not available in Contact form configuration.<br>Please check "Edit contact form"<br>for gallery id '+realGid+".");$mainCGdivUploadForm.find(".cg_form_upload_submit_div").addClass("cg_hide");$mainCGdivUploadForm.find(".cg_gallery_upload_text_before_and_after").addClass("cg_hide")}};cgJsClass.gallery.upload.functions.removeError=function(gid,object,$mainCGdivUploadForm,$cg_form_div_image_step){if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")&&jQuery(object).hasClass("cg_input_image_upload_input_additional_files_single")){$cg_form_div_image_step.find('.cg_form_div_additional_file_container_real[data-cg-additional-files-order="'+cgJsData[gid].vars.upload.additionalFilesOrderClicked+'"]').find(".cg_input_error").removeClass("cg_form_div_error_file_resolution").addClass("cg_hide")}else{if(!$mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){jQuery(object).closest(".cg_form_div").removeClass("cg_form_div_error cg_form_div_error_file_resolution").find(".cg_input_error").removeClass("cg_form_div_error_file_resolution").addClass("cg_hide")}}};cgJsClass.gallery.upload.functions.totalAmountOfUserImagesPerCategoryMessageCheck=function(gid,$mainCGdivUploadForm,$cg_form_div_image_step){if(cgJsData[gid].options.pro.RegUserMaxUploadPerCategory&&$mainCGdivUploadForm.find(".cg_input_select_class").length&&$mainCGdivUploadForm.find(".cg_input_select_class").val()>0){if(cgJsData[gid].vars.upload.UploadedUserFilesAmountPerCategoryArray[$mainCGdivUploadForm.find(".cg_input_select_class").val()]&&cgJsData[gid].vars.upload.UploadedUserFilesAmountPerCategoryArray[$mainCGdivUploadForm.find(".cg_input_select_class").val()]>=cgJsData[gid].options.pro.RegUserMaxUploadPerCategory){cgJsData[gid].vars.upload.file_upload_failed=1;$cg_form_div_image_step.addClass("cg_cat_select_error");return true}}$cg_form_div_image_step.find(".cg_form_div_image_upload  .cg_input_error").removeClass("cg_input_error_cat_select");if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){$cg_form_div_image_step.find(".cg_form_div_additional_file_container:not(.cg_form_div_additional_file_container_to_clone)").removeClass("cg_hide");$cg_form_div_image_step.find("> .cg_form_div_image_container > .cg_form_div > .cg_input_error").addClass("cg_hide")}$cg_form_div_image_step.removeClass("cg_cat_select_error");cgJsData[gid].vars.upload.file_upload_failed=0;return false};cgJsClass.gallery.upload.functions.resetCatSelectUploadAmountFailureBefore=function($cg_form_div_image_step){$cg_form_div_image_step.data("data-cg-value-input-clone",null);$cg_form_div_image_step.data("data-cg-background",null);$cg_form_div_image_step.data("data-cg-cat-select-upload-amount-failure-before",false)};cgJsClass.gallery.upload.functions.showTotalAmountOfUserImagesPerCategoryMessage=function(e,object,gid,$mainCGdivUploadForm,$cg_form_div_image_step,isFromCatSelect,isFromSubmit){var is_cg_input_error_cat_select_just_set=false;if(!$cg_form_div_image_step.find(".cg_form_div_image_upload  .cg_input_error").hasClass("cg_input_error_cat_select")){is_cg_input_error_cat_select_just_set=true;$cg_form_div_image_step.find("> .cg_form_div_image_container > .cg_form_div_image_upload > .cg_input_error").removeClass("cg_hide").addClass("cg_input_error_cat_select").html(""+cgJsClass.gallery.language[gid].MaximumAmountOfUploadsPerCategoryIs+": "+cgJsData[gid].options.pro.RegUserMaxUploadPerCategory+"<br>"+""+cgJsClass.gallery.language[gid].YouHaveAlreadyUploadedForCategory+": "+cgJsData[gid].vars.upload.UploadedUserFilesAmountPerCategoryArray[$mainCGdivUploadForm.find(".cg_input_select_class").val()]+"<br>");$cg_form_div_image_step.find(".cg_input_image_upload_id_in_gallery").closest(".cg_form_div").addClass("cg_form_div_error")}if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){$cg_form_div_image_step.find(".cg_form_div_additional_file_container:not(.cg_form_div_additional_file_container_to_clone)").addClass("cg_hide");$cg_form_div_image_step.find(".cg_form_div  > .cg_input_image_upload_label").removeClass("cg_hide")}if($cg_form_div_image_step.find(".cg_input_error.cg_input_error_cat_select").hasClass("cg_hide")){$cg_form_div_image_step.find(".cg_input_error.cg_input_error_cat_select").removeClass("cg_hide")}$cg_form_div_image_step.find(".cg_input_image_upload_label").addClass("cg_opacity_0");if(isFromCatSelect&&is_cg_input_error_cat_select_just_set&&!$mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){$cg_form_div_image_step.data("data-cg-value-input-clone",$cg_form_div_image_step.find(".cg_input_image_upload_id_in_gallery").clone());$cg_form_div_image_step.data("data-cg-background",$cg_form_div_image_step.find(".cg_form_div_image_upload_preview_img").css("background"));$cg_form_div_image_step.data("data-cg-cat-select-upload-amount-failure-before",true);$cg_form_div_image_step.find(".cg_form_div_image_upload_preview_img").css("background","");jQuery($cg_form_div_image_step.find(".cg_form_div_image_upload_preview_img")).val("")}else{if(isFromSubmit){jQuery(object).val("");cgJsClass.gallery.upload.functions.preventDefault(e,gid)}}};cgJsClass.gallery.upload.functions.uploadFormSetWidth=function(gid){var $mainCGdivUploadForm=cgJsData[gid].vars.mainCGdivUploadForm;$mainCGdivUploadForm.removeClass("cg_width_400 cg_width_600 cg_width_900");if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormOnly")){if($mainCGdivUploadForm.parent().width()+parseInt($mainCGdivUploadForm.css("padding-left"))+parseInt($mainCGdivUploadForm.css("padding-right"))<=400){$mainCGdivUploadForm.addClass("cg_width_400")}else if($mainCGdivUploadForm.parent().width()+parseInt($mainCGdivUploadForm.css("padding-left"))+parseInt($mainCGdivUploadForm.css("padding-right"))<=600){$mainCGdivUploadForm.addClass("cg_width_600")}else if($mainCGdivUploadForm.parent().width()+parseInt($mainCGdivUploadForm.css("padding-left"))+parseInt($mainCGdivUploadForm.css("padding-right"))<=900){$mainCGdivUploadForm.addClass("cg_width_900")}}else{if($mainCGdivUploadForm.width()+parseInt($mainCGdivUploadForm.css("padding-left"))+parseInt($mainCGdivUploadForm.css("padding-right"))<=400){$mainCGdivUploadForm.addClass("cg_width_400")}else if($mainCGdivUploadForm.width()+parseInt($mainCGdivUploadForm.css("padding-left"))+parseInt($mainCGdivUploadForm.css("padding-right"))<=600){$mainCGdivUploadForm.addClass("cg_width_600")}else if($mainCGdivUploadForm.width()+parseInt($mainCGdivUploadForm.css("padding-left"))+parseInt($mainCGdivUploadForm.css("padding-right"))<=900){$mainCGdivUploadForm.addClass("cg_width_900")}}};cgJsClass.gallery.upload.functions.showUploadFormAgain=function(gid,$mainCGdivUploadForm){cgJsData[gid].vars.upload.all_files_length=0;cgJsData[gid].vars.upload.file_upload_failed=0;cgJsData[gid].vars.upload.files={};$mainCGdivUploadForm.find(".cg_skeleton_loader_on_page_load_div_form_submit").addClass("cg_hide");$mainCGdivUploadForm.find(".mainCGdivUploadFormContainer").removeClass("cg_hide");$mainCGdivUploadForm.find(".cg_form_div_image_upload.cg_form_div").removeClass("cg_form_div_error");if(cgJsData[gid].vars.isOnlyContactForm){$mainCGdivUploadForm.find(".cg_gallery_upload_text_before_and_after").addClass("cg_hide");if(!$mainCGdivUploadForm.hasClass("mainCGdivUploadNotRequired")){$mainCGdivUploadForm.find(".cg_form_upload_submit_div").addClass("cg_hide")}}if(!$mainCGdivUploadForm.hasClass("mainCGdivUploadNotRequired")){$mainCGdivUploadForm.find(".cg_form_div_inputs_container").addClass("cg_hidden_element").css("display","")}$mainCGdivUploadForm.find(".cg_input_image_upload_label").removeClass("cg_hide cg_opacity_0");$mainCGdivUploadForm.find(".cg_hide_image_upload.cg_input_error").addClass("cg_hide");$mainCGdivUploadForm.find(".cg_form_div_additional_file_container:not(.cg_form_div_additional_file_container_real_last)").addClass("cg_hidden_element");var $mainCGdivUploadFormContainer=$mainCGdivUploadForm.find(".mainCGdivUploadFormContainer");$mainCGdivUploadFormContainer.find(".cg_input_image_upload_id_in_gallery, .cg_input_text_class, .cg_textarea_class, .cg_input_url_class").val("");$mainCGdivUploadFormContainer.find('input[type="checkbox"]').prop("checked",false);$mainCGdivUploadFormContainer.find("option:selected").prop("selected",false)};cgJsClass.gallery.upload.functions.initCaptchaCheck=function($){if(typeof cgRecaptchaCallbackUploadFormRendered=="undefined"||!cgRecaptchaCallbackUploadFormRendered){$(".cg_recaptcha_not_a_robot_field").remove()}};cgJsClass.gallery.upload.functions.initInputDate=function($,inputSelector,valueToSet,cgCenterDivClasses,isFromBulkUploadNewImageAdded){var inputSelectorToCheck=".cg_input_date_class";if(inputSelector){inputSelectorToCheck=inputSelector;$(inputSelectorToCheck).removeClass("hasDatepicker").removeData("datepicker").unbind();$(inputSelectorToCheck).attr("id",$(inputSelectorToCheck).attr("id")+(new Date).getTime()+Math.random().toString(16).slice(2))}$(inputSelectorToCheck).datepicker({beforeShow:function(input,inst){var $uiDatepickerDiv=$("#ui-datepicker-div");$uiDatepickerDiv.addClass("cg_upload_form_container");if(cgCenterDivClasses){$uiDatepickerDiv.addClass(cgCenterDivClasses)}else{$uiDatepickerDiv.removeClass("cg_center_div_image_edit cg_center_white")}$uiDatepickerDiv.find(".ui-datepicker-next").attr("title","");var $cg_form_div_inputs_container=$(inst.input).parent();$cg_form_div_inputs_container.addClass("cg_overflow_hidden");if($(input).hasClass("cg-field-id-input-content")){$uiDatepickerDiv.addClass("cg_position_absolute");$uiDatepickerDiv.addClass("cg_hide")}setTimeout(function(){$uiDatepickerDiv.css("top",$(inst.input).parent().outerHeight()+"px");$cg_form_div_inputs_container.removeClass("cg_overflow_hidden");if($(input).hasClass("cg-field-id-input-content")){$uiDatepickerDiv.css({top:$(input).closest(".cg-center-image-info-div").height(),left:0});$uiDatepickerDiv.removeClass("cg_hide")}},10);$cg_form_div_inputs_container.append($uiDatepickerDiv)},changeMonth:true,changeYear:true,monthNames:["01","02","03","04","05","06","07","08","09","10","11","12"],monthNamesShort:["01","02","03","04","05","06","07","08","09","10","11","12"],yearRange:"-100:+100"});if(inputSelector&&!isFromBulkUploadNewImageAdded){var cgDateFormat=$(inputSelectorToCheck).attr("data-cg-date-format").toLowerCase().replace("yyyy","yy");$(inputSelectorToCheck).datepicker("option","dateFormat",cgDateFormat);$(inputSelectorToCheck).val(valueToSet)}else{if(isFromBulkUploadNewImageAdded&&inputSelectorToCheck){var cgDateFormat=$(inputSelectorToCheck).closest(".cg_form_div").find(".cg_date_format").val().toLowerCase().replace("yyyy","yy");$(inputSelectorToCheck).datepicker("option","dateFormat",cgDateFormat)}else{$(inputSelectorToCheck).each(function(){var cgDateFormat=$(this).closest(".cg_form_div").find(".cg_date_format").val().toLowerCase().replace("yyyy","yy");$(this).datepicker("option","dateFormat",cgDateFormat)})}}};cgJsClass.gallery.upload.functions.ondragover=function(e){};cgJsClass.gallery.upload.functions.ondrop=function(e){console.log(e);console.log("ondrop")};cgJsClass.gallery.upload.functions.minimizeUploadForm=function($mainCGdivUploadForm){cgJsClass.gallery.function.general.tools.replaceStateOnCloseOrMinimize();$mainCGdivUploadForm.addClass("cg_upload_in_progress").removeClass("cg_disabled");cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll")};cgJsClass.gallery.upload.functions.addCloseUploadFrameOnBodyClick=function($){};cgJsClass.gallery.upload.functions.close=function(gid,isFromHashChange){if(location.href.indexOf("#!gallery")>-1&&cgJsClass.gallery.vars.fullwindow&&isFromHashChange){}else{cgJsClass.gallery.function.general.tools.replaceStateOnCloseOrMinimize()}cgJsClass.gallery.function.general.tools.backdropHide();if(!cgJsClass.gallery.vars.dom.body.hasClass("cg_upload_in_progress")){if(cgJsClass.gallery.vars.fullwindow){var $mainCGdivHelperParent=cgJsData[gid].vars.mainCGdivHelperParent;$mainCGdivHelperParent.removeClass("cg_no_scroll")}cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");cgJsClass.gallery.vars.dom.body.removeClass("cg_upload_modal_opened");var mainCGdivUploadForm=jQuery("#mainCGdivUploadForm"+gid);mainCGdivUploadForm.addClass("cg_hide").prependTo("#cgGalleryViewSortControl"+gid);cgJsClass.gallery.vars.openedUploadFormGalleryId=null}};cgJsClass.gallery.upload.functions.resizeAllForms=function(){jQuery(".mainCGdivUploadFormAjax.mainCGdivUploadForm:not(.mainCGdivUploadFormOnly):visible").each(function(){var $element=jQuery(this);cgJsClass.gallery.upload.functions.resize($element);cgJsClass.gallery.upload.functions.resizeVertical($element)})};cgJsClass.gallery.upload.functions.resize=function($mainCGdivUploadForm){if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormOnly")){return}var windowWidth=jQuery(window).width();if(windowWidth<=600){var barWidth=15;if(jQuery.position&&jQuery.position.scrollbarWidth){barWidth=jQuery.position.scrollbarWidth()}var widthUploadForm=windowWidth-barWidth;$mainCGdivUploadForm.css({})}else{var widthUploadForm=windowWidth/100*75;if(windowWidth<=600){widthUploadForm=600}if(windowWidth>1e3){var widthUploadForm=windowWidth/100*65}if(windowWidth>1200){var widthUploadForm=windowWidth/100*55}if(widthUploadForm>800){widthUploadForm=800}var left=(windowWidth-widthUploadForm)/2-30;if(cgJsClass.gallery.vars.isMobile&&left<1){left=-2}}$mainCGdivUploadForm.css("width",widthUploadForm+"px")};cgJsClass.gallery.upload.functions.resizeVertical=function($mainCGdivUploadForm){if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormOnly")){return}var windowHeight=jQuery(window).height();var mainCGdivUploadFormHeight=$mainCGdivUploadForm.addClass("cg_hidden").removeClass("cg_hide").height();if(mainCGdivUploadFormHeight<windowHeight){var distanceTop=(windowHeight-mainCGdivUploadFormHeight)/2-10}$mainCGdivUploadForm.removeClass("cg_hidden");$mainCGdivUploadForm.css("height","unset");$mainCGdivUploadForm.removeClass("cg_is_mobile_upload_form");if(cgJsClass.gallery.vars.isMobile){$mainCGdivUploadForm.css("height","100%");$mainCGdivUploadForm.addClass("cg_is_mobile_upload_form")}else{$mainCGdivUploadForm.css("height","unset");$mainCGdivUploadForm.removeClass("cg_is_mobile_upload_form")}};cgJsClass.gallery.upload.functions.failFunction=function($,gid,uploadFormHeight,message){cgJsClass.gallery.vars.dom.body.removeClass("cg_upload_in_progress");var $mainCGdivUploadForm=$("#mainCGdivUploadForm"+gid);$mainCGdivUploadForm.removeClass("cg_disabled").css("height","unset").find(".cg-lds-dual-ring-div-gallery-hide").addClass("cg_hide");cgJsClass.gallery.function.general.tools.hideSkeletonLoader(gid);var $mainCGdivUploadFormContainer=$("#mainCGdivUploadFormContainer"+gid);$mainCGdivUploadFormContainer.addClass("cg_hide");$mainCGdivUploadFormContainer.find(".cg_input_image_upload_id_in_gallery, .cg_input_text_class, .cg_textarea_class, .cg_input_url_class").val("");$mainCGdivUploadFormContainer.find('input[type="checkbox"]').prop("checked",false);$mainCGdivUploadFormContainer.find("option:selected").prop("selected",false);var $mainCGdivUploadFormResultFailed=$("#mainCGdivUploadFormResultFailed"+gid);if(message){$mainCGdivUploadFormResultFailed.html("<p>"+message+"</p>")}else{$mainCGdivUploadFormResultFailed.html("<p>In gallery image upload failed. Please contact administrator.</p>")}$mainCGdivUploadFormResultFailed.removeClass("cg_hide");cgJsClass.gallery.upload.functions.resizeVertical($mainCGdivUploadForm)};cgJsClass.gallery.upload.functions.slowPercentageUpFunction=function(gid){if(cgJsClass.gallery.upload.vars.slowPercentageUpStart>=99){cgJsClass.gallery.upload.vars.slowPercentageUpStart=99}jQuery("#mainCGdivUploadProgress"+gid).removeClass("cg_hide").text(cgJsClass.gallery.upload.vars.slowPercentageUpStart+"%");if(cgJsClass.gallery.upload.vars.slowPercentageUpStart<99){cgJsClass.gallery.upload.vars.slowPercentageUpStart=cgJsClass.gallery.upload.vars.slowPercentageUpStart+1}};cgJsClass.gallery.upload.functions.hideShowDragAndDropAndMakeSortableAdditionalFileContainers=function($cg_form_div_image_step){if($cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").length>=2){cgJsClass.gallery.upload.functions.sortableAdditionalFiles($cg_form_div_image_step.find(".cg_form_div_image_upload"));$cg_form_div_image_step.find(".cg_form_div_additional_file_container_real .cg_form_div_image_position").removeClass("cg_hide");$cg_form_div_image_step.find(".cg_form_div_additional_file_container_real .cg_form_div_image_drag").removeClass("cg_hide")}else{$cg_form_div_image_step.find(".cg_form_div_additional_file_container_real .cg_form_div_image_position").addClass("cg_hide");$cg_form_div_image_step.find(".cg_form_div_additional_file_container_real .cg_form_div_image_drag").addClass("cg_hide")}};cgJsClass.gallery.upload.functions.hideShowAdditionalFileContainerAdd=function($cg_form_div_image_step){if($cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").length&&parseInt($cg_form_div_image_step.attr("data-cg-additional-files-count"))+1>$cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").length){$cg_form_div_image_step.find(".cg_form_div_additional_file_container_add").removeClass("cg_hide")}else{$cg_form_div_image_step.find(".cg_form_div_additional_file_container_add").addClass("cg_hide")}if($cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").length==0){$cg_form_div_image_step.find(".cg_form_div_image_upload > .cg_input_image_upload_label").removeClass("cg_hide")}else{$cg_form_div_image_step.find(".cg_form_div_image_upload > .cg_input_image_upload_label").addClass("cg_hide")}};cgJsClass.gallery.upload.functions.checkImageUploadAdded=function($cg_form_div_image_step){if($cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").length==0){$cg_form_div_image_step.find(".cg_form_div_image_upload").removeClass("cg_form_div_image_upload_added")}else{$cg_form_div_image_step.find(".cg_form_div_image_upload").addClass("cg_form_div_image_upload_added");$cg_form_div_image_step.find(".cg_form_div_additional_file_container_real .cg_input_error").each(function(){if(!jQuery(this).hasClass("cg_hide")){$cg_form_div_image_step.find(".cg_form_div_image_upload").removeClass("cg_form_div_image_upload_added");return false}})}};cgJsClass.gallery.upload.functions.preventDefault=function(e,gid,$cg_form_div_image_step,submit,additionalFilesOrder){cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default=1;e.preventDefault();cgJsData[gid].vars.upload.validationResult=false;if(cgJsData[gid].vars.mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){if($cg_form_div_image_step){cgJsData[gid].vars.upload.file_upload_failed_clonesIndexArray.push($cg_form_div_image_step.attr("data-cg-clone-index"));var $cg_form_div_additional_file_container=$cg_form_div_image_step.find('.cg_form_div_additional_file_container_real[data-cg-additional-files-order="'+additionalFilesOrder+'"]');$cg_form_div_additional_file_container.find(".cg_form_div_image_remove").removeClass("cg_hide");if($cg_form_div_image_step.find(".cg_form_div_image_upload").hasClass("cg_form_div_image_upload_added")){$cg_form_div_additional_file_container.find(".cg_form_div_image_upload").removeClass("cg_form_div_image_upload_added")}$cg_form_div_image_step.find(".cg_input_image_upload_input").val("");delete cgJsData[gid].vars.upload.fileAdditionalFiles[additionalFilesOrder];cgJsClass.gallery.upload.functions.hideShowAdditionalFileContainerAdd($cg_form_div_image_step);cgJsClass.gallery.upload.functions.hideShowDragAndDropAndMakeSortableAdditionalFileContainers($cg_form_div_image_step);cgJsClass.gallery.upload.functions.checkImageUploadAdded($cg_form_div_image_step)}}else{if($cg_form_div_image_step){cgJsData[gid].vars.upload.file_upload_failed_clonesIndexArray.push($cg_form_div_image_step.attr("data-cg-clone-index"));$cg_form_div_image_step.find(".cg_form_div_image_remove").removeClass("cg_hide");if($cg_form_div_image_step.find(".cg_form_div_image_upload").hasClass("cg_form_div_image_upload_added")){$cg_form_div_image_step.find(".cg_form_div_image_upload").removeClass("cg_form_div_image_upload_added");cgJsData[gid].vars.upload.all_files_length--}$cg_form_div_image_step.find(".cg_input_image_upload_input").val("");delete cgJsData[gid].vars.upload.files[$cg_form_div_image_step.attr("data-cg-files-index")]}}if(submit){cgJsData[gid].vars.mainCGdivUploadForm.find(".cg_input_error:not(.cg_hide)").first().parent().get(0).scrollIntoView()}};cgJsClass.gallery.upload.functions.sortAdditionalFiles=function($cg_form_div_image_step,gid){var newOrderedData={};var filesIndex=$cg_form_div_image_step.attr("data-cg-files-index");$cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").each(function(index){if(cgJsData[gid].vars.upload.fileAdditionalFiles[filesIndex][jQuery(this).attr("data-cg-additional-files-order")]){newOrderedData[index+1]=cgJsData[gid].vars.upload.fileAdditionalFiles[filesIndex][jQuery(this).attr("data-cg-additional-files-order")]}jQuery(this).attr("data-cg-additional-files-order",index+1);jQuery(this).find(".cg_form_div_image_position").text(index+1)});cgJsData[gid].vars.upload.fileAdditionalFiles[filesIndex]=newOrderedData};cgJsClass.gallery.upload.functions.sortableAdditionalFiles=function($cg_form_div_image_upload){$cg_form_div_image_upload.sortable({items:".cg_form_div_additional_file_container_real:not(.cg_form_div_additional_file_container_add)",handle:".cg_form_div_image_drag",cursor:"move",placeholder:"ui-state-highlight",start:function(event,ui){var $element=jQuery(ui.item);$element.closest(".cg_form_div_image_upload").find(".ui-state-highlight").addClass($element.get(0).classList.value).html($element.html())},change:function(event,ui){},stop:function(event,ui){var $element=jQuery(ui.item);var $cg_form_div_image_step=$element.closest(".cg_form_div_image_step");var gid=$cg_form_div_image_step.attr("data-cg-gid");setTimeout(function(){cgJsClass.gallery.upload.functions.sortAdditionalFiles($cg_form_div_image_step,gid)},10)}});$cg_form_div_image_upload.disableSelection()};cgJsClass.gallery.upload.functions.setNewUploadedUserFilesAmountToAllGalleriesWithSameGidRealOnPage=function($,gid,gidReal){cgJsClass.gallery.vars.$cgLoadedIds.each(function(){var oneOfGalleryIdsOnPage=$(this).val();var gidAsStringForSure=""+oneOfGalleryIdsOnPage;if(gidAsStringForSure.indexOf(""+gidReal)==0&&gid!=gidAsStringForSure){if(cgJsData[oneOfGalleryIdsOnPage].vars.upload){cgJsData[oneOfGalleryIdsOnPage].vars.upload.UploadedUserFilesAmount=cgJsData[gid].vars.upload.UploadedUserFilesAmount}}})};function cg_progress(e){try{if(e.lengthComputable){var gid=cgJsClass.gallery.upload.vars.activeGalleryId;var max=e.total;var current=e.loaded;var percentage=current*100/max;if(percentage<=90){percentage=Math.floor(percentage);jQuery("#mainCGdivUploadProgress"+gid).removeClass("cg_hide").text(percentage+"%")}else{if(!cgJsClass.gallery.upload.vars.slowPercentageUpStartInitiated){cgJsClass.gallery.upload.vars.slowPercentageUpStartInitiated=true;cgJsClass.gallery.upload.vars.slowPercentageUpStart=90;cgJsClass.gallery.upload.vars.slowPercentageUpInterval=setInterval(function(){cgJsClass.gallery.upload.functions.slowPercentageUpFunction(gid)},3e3)}}}}catch(error){}};cgJsClass.gallery.upload.functions.previewOnload=function(fileReaderBase64,index,$mainCGdivUploadForm,$cg_form_div_image_step,gid,file,fileType,additionalFilesOrder){var BulkUploadQuantity=cgJsData[gid].options.general.BulkUploadQuantity;var BulkUploadMinQuantity=cgJsData[gid].options.general.BulkUploadMinQuantity;if(BulkUploadQuantity==0){BulkUploadQuantity=1e3}if(BulkUploadMinQuantity==0){BulkUploadMinQuantity=1}$cg_form_div_image_step.find(".cg_input_image_upload_label").addClass("cg_opacity_0");fileReaderBase64.onload=function(){var base64url=this.result;setTimeout(function(){if($cg_form_div_image_step.hasClass("cg_form_div_image_step_single_image_cloned")&&cgJsData[gid].vars.upload.file_upload_failed_clonesIndexArray.indexOf($cg_form_div_image_step.attr("data-cg-clone-index"))>-1||!$cg_form_div_image_step.hasClass("cg_form_div_image_step_single_image_cloned")&&cgJsData[gid].vars.upload.file_upload_failed){$cg_form_div_image_step.find(".cg_form_div_image_upload_preview").addClass("cg_hide");$cg_form_div_image_step.find(".cg_input_image_upload_label").removeClass("cg_opacity_0")}else{var $cg_form_div_additional_file_container=undefined;var cg_form_div_additional_file_container_to_insert="";if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){cg_form_div_additional_file_container_to_insert='.cg_form_div_additional_file_container_real[data-cg-additional-files-order="'+additionalFilesOrder+'"] ';$cg_form_div_additional_file_container=$cg_form_div_image_step.find('.cg_form_div_additional_file_container_real[data-cg-additional-files-order="'+additionalFilesOrder+'"]');$cg_form_div_additional_file_container.addClass("cg_success")}$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child").removeClass("cg_hide");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child").find("#cg_form_div_image_upload_preview_div_container"+index).removeClass("cg_form_div_skeleton_box");if(!$cg_form_div_image_step.find(".cg_form_div_image_upload").hasClass("cg_form_div_image_upload_added")){cgJsData[gid].vars.upload.all_files_length++}$cg_form_div_image_step.find(".cg_form_div_image_upload").addClass("cg_form_div_image_upload_added");if(fileType=="application/pdf"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_pdf");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="application/x-zip-compressed"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_zip");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="application/zip"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_zip");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="text/plain"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_txt");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="application/msword"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_doc");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="application/vnd.openxmlformats-officedocument.wordprocessingml.document"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_docx");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="application/vnd.ms-excel"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_xls");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_xlsx");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="text/csv"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_csv");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="audio/mpeg"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_mp3");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="audio/x-m4a"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_m4a");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="audio/ogg"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_ogg");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="audio/wav"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_wav");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="video/mp4"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_mp4");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="video/quicktime"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_mov");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="video/webm"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_webm");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="application/vnd.ms-powerpoint"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_ppt");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else if(fileType=="application/vnd.openxmlformats-officedocument.presentationml.presentation"){$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).addClass("cg_form_div_alternative_file_upload_preview_div_container cg_form_div_alternative_file_upload_preview_div_container_pptx");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).find(".cg_form_div_image_upload_preview_div_container_file_name").text(file.name)}else{$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).append(jQuery('<div class="cg_form_div_image_upload_preview_img" />').css({background:'url("'+base64url+'") no-repeat center center',display:"none"}))}if(!$cg_form_div_additional_file_container){var $cg_input_image_upload_label=$cg_form_div_image_step.find(".cg_input_image_upload_label").clone();$cg_input_image_upload_label.removeClass("cg_hide cg_input_image_upload_label").addClass("cg_input_image_upload_label_preview").text("");$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child #cg_form_div_image_upload_preview_div_container"+index).prepend($cg_input_image_upload_label)}$cg_form_div_image_step.find(cg_form_div_additional_file_container_to_insert+".cg_form_div_image_upload_preview:last-child .cg_form_div_image_upload_preview_img").fadeIn();$cg_form_div_image_step.find(".cg_form_div_inputs_container").slideDown(function(){$mainCGdivUploadForm.find(".cg_form_upload_submit_div").removeClass("cg_hide");$cg_form_div_image_step.find(".cg_form_div_image_remove").removeClass("cg_hide")});if($cg_form_div_additional_file_container){if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormBulk")){}else{cgJsData[gid].vars.upload.filesIndex=0;if(typeof cgJsData[gid].vars.upload.fileAdditionalFiles[0]=="undefined"){cgJsData[gid].vars.upload.fileAdditionalFiles[0]={}}}cgJsData[gid].vars.upload.fileAdditionalFiles[0][additionalFilesOrder]=file;cgJsClass.gallery.upload.functions.hideShowDragAndDropAndMakeSortableAdditionalFileContainers($cg_form_div_image_step);$cg_form_div_image_step.find(".cg_form_div_image_upload > label").addClass("cg_hide");cgJsClass.gallery.upload.functions.hideShowAdditionalFileContainerAdd($cg_form_div_image_step);$cg_form_div_image_step.find(".cg_form_div_image_upload  > .cg_input_error").addClass("cg_hide");$cg_form_div_image_step.find(".cg_form_div_image_upload").removeClass("cg_form_div_error")}else{delete cgJsData[gid].vars.upload.files[$cg_form_div_image_step.attr("data-cg-files-index")];cgJsData[gid].vars.upload.filesIndex++;cgJsData[gid].vars.upload.files[cgJsData[gid].vars.upload.filesIndex]=file;$cg_form_div_image_step.attr("data-cg-files-index",cgJsData[gid].vars.upload.filesIndex)}if(!(cgJsData[gid].vars.upload.all_files_length<BulkUploadMinQuantity)&&!(cgJsData[gid].vars.upload.all_files_length>BulkUploadQuantity)){$mainCGdivUploadForm.find(".cg_form_upload_submit_div .cg_input_error").addClass("cg_hide")}$mainCGdivUploadForm.find(".cg_form_div_image_step_upload_bulk_captcha").removeClass("cg_hide");var $cg_input_date_class=$cg_form_div_image_step.find(".cg_input_date_class");if($cg_input_date_class.length){cgJsClass.gallery.upload.functions.initInputDate(jQuery,$cg_input_date_class,undefined,undefined,true)}}},1e3)}};;cgJsClass.gallery.upload.functions.removeStandard=function($cg_form_div_image_remove,$cg_form_div_image_step){$cg_form_div_image_remove.addClass("cg_hide");$cg_form_div_image_step.find(".cg_input_image_upload_label").removeClass("cg_opacity_0");$cg_form_div_image_step.find(".cg_form_div_image_upload_preview").addClass("cg_hide");$cg_form_div_image_step.find(".cg_input_error").addClass("cg_hide");$cg_form_div_image_step.find(".cg_form_div_image_upload").removeClass("cg_form_div_error");$cg_form_div_image_step.find(".cg_input_image_upload_input").val("");$cg_form_div_image_step.find(".cg_form_div_image_upload_preview_img").remove()};cgJsClass.gallery.upload.functions.cgImageRemove=function($,$cg_form_div_image_remove,$mainCGdivUploadForm,$cg_form_div_image_step,gid){var BulkUploadQuantity=cgJsData[gid].options.general.BulkUploadQuantity;if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){var $cg_form_div_additional_file_container=$cg_form_div_image_remove.closest(".cg_form_div_additional_file_container_real");if($mainCGdivUploadForm.hasClass(".mainCGdivUploadFormBulk")){}else{if($cg_form_div_image_step.find(".cg_form_div_image_upload").hasClass("cg_form_div_image_upload_added")&&$cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").length==1){$cg_form_div_image_step.find(".cg_form_div_image_upload").removeClass("cg_form_div_image_upload_added");delete cgJsData[gid].vars.upload.fileAdditionalFiles[$cg_form_div_image_step.attr("data-cg-files-index")][1];cgJsData[gid].vars.upload.all_files_length=0;delete cgJsData[gid].vars.upload.files[$cg_form_div_image_step.attr("data-cg-files-index")];$cg_form_div_additional_file_container.remove();$cg_form_div_image_step.find(".cg_form_div_additional_file_container_add").addClass("cg_hide");cgJsClass.gallery.upload.functions.removeStandard($cg_form_div_image_remove,$cg_form_div_image_step);$cg_form_div_image_step.find(".cg_form_div_image_upload > .cg_input_image_upload_label").removeClass("cg_hide")}else{if($cg_form_div_additional_file_container.length){delete cgJsData[gid].vars.upload.fileAdditionalFiles[$cg_form_div_image_step.attr("data-cg-files-index")][$cg_form_div_additional_file_container.attr("data-cg-additional-files-order")]}if($cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").length==1){cgJsClass.gallery.upload.functions.removeStandard($cg_form_div_image_remove,$cg_form_div_image_step);$cg_form_div_additional_file_container.remove()}else{$cg_form_div_additional_file_container.remove();cgJsClass.gallery.upload.functions.sortAdditionalFiles($cg_form_div_image_step,gid);if($cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").length==1){$cg_form_div_additional_file_container.find(".cg_form_div_image_remove,.cg_form_div_image_position").addClass("cg_hide")}}}cgJsClass.gallery.upload.functions.hideShowAdditionalFileContainerAdd($cg_form_div_image_step);cgJsClass.gallery.upload.functions.hideShowDragAndDropAndMakeSortableAdditionalFileContainers($cg_form_div_image_step);cgJsClass.gallery.upload.functions.checkImageUploadAdded($cg_form_div_image_step);if($cg_form_div_image_step.find(".cg_form_div_additional_file_container_real").length==0){if(!$mainCGdivUploadForm.hasClass("mainCGdivUploadNotRequired")){var cg_no_picture_is_choosed=cgJsClass.gallery.language[gid].ChooseYourImage;$cg_form_div_image_step.find(".cg_form_div_image_upload  > .cg_input_error").removeClass("cg_hide").text(""+cg_no_picture_is_choosed+"");$cg_form_div_image_step.find(".cg_form_div_image_upload").addClass("cg_form_div_error").removeClass("cg_form_div_image_upload_added")}}}}else{if(cgJsData[gid].vars.upload.all_files_length>BulkUploadQuantity){$mainCGdivUploadForm.find(".cg_form_div_image_step_upload_bulk .cg_form_div .cg_input_error").addClass("cg_hide");$mainCGdivUploadForm.find(".cg_form_div_image_step_upload_bulk .cg_form_div").removeClass("cg_form_div_error")}if($cg_form_div_image_step.find(".cg_form_div_image_upload").hasClass("cg_form_div_image_upload_added")){$cg_form_div_image_step.find(".cg_form_div_image_upload").removeClass("cg_form_div_image_upload_added");cgJsData[gid].vars.upload.all_files_length--}delete cgJsData[gid].vars.upload.files[$cg_form_div_image_step.attr("data-cg-files-index")];cgJsClass.gallery.upload.functions.removeStandard($cg_form_div_image_remove,$cg_form_div_image_step);if($cg_form_div_image_step.hasClass("cg_form_div_image_step_single_image_multiple")){$cg_form_div_image_step.remove();if(cgJsData[gid].vars.upload.all_files_length==0){$mainCGdivUploadForm.find(".cg_form_upload_submit_div").addClass("cg_hide");$mainCGdivUploadForm.find(".cg_form_div_image_step_upload_bulk_captcha").addClass("cg_hide")}}else{if($mainCGdivUploadForm.hasClass("mainCGdivUploadNotRequired")){cgJsData[gid].vars.upload.file_upload_failed=0}$cg_form_div_image_step.find(".cg_form_div_image_remove").addClass("cg_hide");if(cgJsData[gid].vars.upload.all_files_length==0&&!$mainCGdivUploadForm.hasClass("mainCGdivContactEntriesOnly")){$mainCGdivUploadForm.find(".cg_form_upload_submit_div").addClass("cg_hide")}if($mainCGdivUploadForm.hasClass("mainCGdivShowUncollapsed")){$mainCGdivUploadForm.find(".cg_form_upload_submit_div").removeClass("cg_hide")}else{if(!$mainCGdivUploadForm.hasClass("mainCGdivUploadNotRequired")){$cg_form_div_image_step.find(".cg_form_div_inputs_container").slideUp(function(){})}}}}};;cgJsClass.gallery.upload.functions.submitForm=function(e,$,gid,submit,stepNumber,stepsLength,$mainCGdivUploadForm){var cg_upload_form_e_prevent_default=cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default;if(cg_upload_form_e_prevent_default==1||cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_resolution==1||cgJsData[gid].vars.upload.cg_upload_form_e_prevent_default_file_not_loaded==1){if(submit){$mainCGdivUploadForm.find(".cg_input_error:not(.cg_hide)").first().parent().get(0).scrollIntoView()}cgJsClass.gallery.upload.functions.preventDefault(e,gid);cgJsClass.gallery.upload.functions.resizeVertical($mainCGdivUploadForm)}else{if(submit===true&&stepNumber==stepsLength){e.preventDefault();var uploadFormHeight=$mainCGdivUploadForm.outerHeight();$("#mainCGdivUploadFormContainer"+gid).addClass("cg_hide");$mainCGdivUploadForm.find(".cg_skeleton_loader_on_page_load_div_form_submit").removeClass("cg_hide");$mainCGdivUploadForm.find(".mainCGdivUploadFormResult").addClass("cg_hide");var $cg_form_div_image_step_single_image_to_clone=$mainCGdivUploadForm.find(".cg_form_div_image_step_single_image_to_clone");if($cg_form_div_image_step_single_image_to_clone.length){cgJsClass.gallery.vars.dom.body.append($cg_form_div_image_step_single_image_to_clone)}$mainCGdivUploadForm.find(".cg_form_div.cg_form_div_image_upload.cg_form_div_error").closest(".cg_form_div_image_step").remove();cgJsClass.gallery.upload.functions.resizeVertical($mainCGdivUploadForm);$mainCGdivUploadForm.get(0).scrollIntoView({behavior:"smooth"});var formPostData=new FormData;var formInputArray=[];var indexLength=0;debugger;$mainCGdivUploadForm.find(".cg_form_div_image_step").each(function(){var $step=$(this);$step.find('[name*="form_input"]').each(function(){formInputArray.push($(this).val());var indexType="data-cg-files-index";if($mainCGdivUploadForm.hasClass("mainCGdivContactEntriesOnly")){indexType="data-cg-index"}if($step.attr(indexType)&&Object.keys(cgJsData[gid].vars.upload.files).length){formPostData.append("form_input["+$step.attr(indexType)+"][]",$(this).val())}else{formPostData.append("form_input["+indexLength+"][]",$(this).val())}});indexLength++});if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormBulk")){}else{var indexLength=0;for(var orderKey in cgJsData[gid].vars.upload.fileAdditionalFiles[0]){if(!cgJsData[gid].vars.upload.fileAdditionalFiles[0].hasOwnProperty(orderKey)){break}formPostData.append("data["+indexLength+"][]",cgJsData[gid].vars.upload.fileAdditionalFiles[0][orderKey]);indexLength++}}}else{var indexLength=0;for(var index in cgJsData[gid].vars.upload.files){if(!cgJsData[gid].vars.upload.files.hasOwnProperty(index)){break}formPostData.append("data["+index+"][]",cgJsData[gid].vars.upload.files[index]);indexLength++}}cgJsData[gid].vars.upload.UploadedUserFilesAmount=parseInt(cgJsData[gid].vars.upload.UploadedUserFilesAmount)+parseInt(indexLength);cgJsClass.gallery.upload.functions.setNewUploadedUserFilesAmountToAllGalleriesWithSameGidRealOnPage($,gid,cgJsData[gid].vars.gidReal);formPostData.append("action","post_cg_gallery_form_upload");formPostData.append("cg_form_submit","Upload");formPostData.append("GalleryID",cgJsData[gid].vars.gidReal);formPostData.append("cg_from_gallery_form_ajax_upload_or_contact",true);if(gid.indexOf("-uf")===-1&&gid.indexOf("-cf")===-1){formPostData.append("cg_is_in_gallery_form",true)}var isOrderItemMaxUploaded=false;var AllUploadsUsedText="";debugger;if($mainCGdivUploadForm.attr("data-cg-order-item-id")){formPostData.append("cg_order_item_id",$mainCGdivUploadForm.attr("data-cg-order-item-id"));var orderGid=$mainCGdivUploadForm.attr("data-cg-order-gallery-id");var orderRealId=$mainCGdivUploadForm.attr("data-cg-order-real-id");cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[orderRealId]["Uploaded"]=parseInt(cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[orderRealId]["Uploaded"]);if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormBulk")){cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[orderRealId]["Uploaded"]+=indexLength}else{cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[orderRealId]["Uploaded"]++}$mainCGdivUploadForm.attr("data-cg-order-uploaded",cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[orderRealId]["Uploaded"]);$mainCGdivUploadForm.parent().prev().prev().find(".cg-ecommerce-shipping-info-maximum-uploaded-count").text(cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[orderRealId]["Uploaded"]);debugger;if(parseInt(cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[orderRealId]["Uploaded"])<parseInt(cgJsData[orderGid].vars.rawData[orderRealId].ecommerceData["MaxUploads"])){}else{isOrderItemMaxUploaded=true;if(cgJsClass.gallery.vars.ecommerce.ecommerceFilesData[orderRealId]["AllUploadsUsedText"]){AllUploadsUsedText=cgJsClass.gallery.vars.ecommerce.ecommerceFilesData[orderRealId]["AllUploadsUsedText"]}}var $productInfoWithUploadedEntries=$("#cgUpoadedEntries"+$mainCGdivUploadForm.attr("data-cg-order-item-id"));var names=[];var types=[];debugger;if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormAdditionalFiles")){if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormBulk")){}else{for(var orderKey in cgJsData[gid].vars.upload.fileAdditionalFiles[0]){if(!cgJsData[gid].vars.upload.fileAdditionalFiles[0].hasOwnProperty(orderKey)){break}names.push(cgJsData[gid].vars.upload.fileAdditionalFiles[0][orderKey].name);break}}}else{var indexLength=0;for(var index in cgJsData[gid].vars.upload.files){if(!cgJsData[gid].vars.upload.files.hasOwnProperty(index)){break}names.push(cgJsData[gid].vars.upload.files[index].name)}}debugger;names.forEach(function(name,index){var $entryElement=jQuery('<div class="cg-ecommerce-uploaded-entry"  >'+"</div>");var fileTypeEndingString=name.split(".")[name.split(".").length-1].toLowerCase();var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(undefined,undefined,undefined,fileTypeEndingString);if(isAlternativeFileType){$entryElement.append('<div class="cg-ecommerce-uploaded-entry-file cg-is-alternative-file-type cg-ecommerce-uploaded-entry-file-'+fileTypeEndingString+' "></div>');$entryElement.append('<div class="cg-ecommerce-uploaded-entry-title" >'+name+"</div>")}else{debugger;if($mainCGdivUploadForm.hasClass("mainCGdivUploadFormBulk")){var base64url=$mainCGdivUploadForm.find(".cg_form_div_image_step:nth-of-type("+(index+2)+")").find(".cg_form_div_image_upload_preview_img").css("background-image")}else{var base64url=$mainCGdivUploadForm.find(".cg_form_div_image_upload_preview_img").first().css("background-image")}$entryElement.append('<div class="cg-ecommerce-uploaded-entry-file" ></div>');$entryElement.find(".cg-ecommerce-uploaded-entry-file").css("background-image",base64url);$entryElement.append('<div class="cg-ecommerce-uploaded-entry-title" >'+name+"</div>")}$productInfoWithUploadedEntries.prepend($entryElement)});$productInfoWithUploadedEntries.removeClass("cg_hide")}debugger;formPostData.append("cg_upload_action",true);formPostData.append("galeryIDuser",gid);formPostData.append("check",$mainCGdivUploadForm.find("#cg_check").val());if(cgJsData[gid].vars.isOnlyContactForm){formPostData.append("isOnlyContactForm",true)}if($mainCGdivUploadForm.hasClass("mainCGdivContactEntriesOnly")){formPostData.append("isOnlyContactEntry",true)}else{if(cgJsData[gid].vars.upload.all_files_length==0&&$mainCGdivUploadForm.hasClass("mainCGdivUploadNotRequired")){formPostData.append("isOnlyContactEntry",true)}}cgJsClass.gallery.upload.vars.activeGalleryId=gid;$mainCGdivUploadForm.find(".cg-close-upload-form").addClass("cg_hide");cgJsClass.gallery.vars.dom.body.addClass("cg_upload_in_progress");if(cgJsData[gid].vars.isOnlyUploadForm||cgJsData[gid].vars.isOnlyContactForm){if(cgJsData[gid].options.input&&cgJsData[gid].options.input.Forward==1){cgJsClass.gallery.vars.dom.body.addClass("cg_pointer_events_none cg_overflow_hidden")}}$mainCGdivUploadForm.addClass("cg_overflow_hidden");$mainCGdivUploadForm.find(".cg_recaptcha_not_a_robot_field").remove();$.ajax({url:post_cg_gallery_form_upload_wordpress_ajax_script_function_name.cg_gallery_form_upload_ajax_url,method:"post",data:formPostData,dataType:null,contentType:false,processData:false,xhr:function(){var myXhr=$.ajaxSettings.xhr();if(myXhr.upload){myXhr.upload.addEventListener("progress",cg_progress,false)}return myXhr}}).done(function(response){cgJsClass.gallery.vars.dom.body.removeClass("cg_pointer_events_none cg_overflow_hidden");clearInterval(cgJsClass.gallery.upload.vars.slowPercentageUpInterval);cgJsClass.gallery.upload.vars.slowPercentageUpStartInitiated=false;cgJsClass.gallery.upload.vars.activeGalleryId=0;$mainCGdivUploadForm.find(".cg_form_div_image_step.cg_form_div_image_step_single_image:not(.cg_form_div_image_step_single_image_multiple.cg_form_div_image_step_single_image_to_clone), .cg_form_div_image_step_single_image_cloned").each(function(){cgJsClass.gallery.upload.functions.cgImageRemove($,$(this).find(".cg_form_div_image_remove"),$mainCGdivUploadForm,$(this),gid)});cgJsData[gid].vars.upload.all_files_length=0;for(var index in cgJsData[gid].vars.upload.files){if(!cgJsData[gid].vars.upload.files.hasOwnProperty(index)){break}delete cgJsData[gid].vars.upload.files[index]}var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");jQuery(parsedHtml).find('script[data-cg-processing="true"]').each(function(){var script=jQuery(this).html();eval(script)});$("#cgRecaptchaNotValidInGalleryFormError"+gid).removeClass("cg_recaptcha_not_valid_in_gallery_form_error_success");if($cg_form_div_image_step_single_image_to_clone.length){$cg_form_div_image_step_single_image_to_clone.insertAfter($mainCGdivUploadForm.find(".cg_form_div_image_step.cg_form_div_image_step_upload_bulk"))}if(cgJsData[gid].vars.upload.doneUploadFailed){$mainCGdivUploadForm.find(".cg_skeleton_loader_on_page_load_div_form_submit").addClass("cg_hide");cgJsClass.gallery.upload.functions.failFunction($,gid,uploadFormHeight,cgJsData[gid].vars.upload.failMessage);cgJsData[gid].vars.upload.doneUploadFailed=false;$mainCGdivUploadForm.removeClass("cg_overflow_hidden");$mainCGdivUploadForm.removeClass("cg_upload_in_progress");$mainCGdivUploadForm.find(".cg-refresh-upload-form").removeClass("cg_hide");if(!$mainCGdivUploadForm.hasClass("mainCGdivUploadFormOnly")){$mainCGdivUploadForm.find(".cg-close-upload-form").removeClass("cg_hide")}$mainCGdivUploadForm.find(".cg-minimize-upload-form").addClass("cg_hide");if(cgJsData[gid].vars.isShortcodeIntervalOver){$mainCGdivUploadForm.addClass("cg_hide")}}else{if(cgJsData[gid].vars.isOnlyUploadForm||cgJsData[gid].vars.isOnlyContactForm){if(cgJsData[gid].options.input&&cgJsData[gid].options.input.Forward==1){cgJsClass.gallery.vars.dom.body.addClass("cg_pointer_events_none cg_overflow_hidden");window.location.href=cgJsData[gid].options.input.Forward_URL;return}else{if(isOrderItemMaxUploaded){if(AllUploadsUsedText){$mainCGdivUploadForm.parent().addClass("cg_all_uploads_used").css("padding-top","0").empty().append(AllUploadsUsedText)}else{$mainCGdivUploadForm.parent().addClass("cg_justify_content_center cg_all_uploads_used").css("padding-top","0").empty().append(cgJsClass.gallery.language.ecommerce.AllUploadsUsed)}$mainCGdivUploadForm.find(".mainCGdivUploadFormResult").removeClass("cg_hide");$mainCGdivUploadForm.find(".cgGalleryUploadConfirmationText").removeClass("cg_hide")}else{$mainCGdivUploadForm.find("#mainCGdivUploadProgress"+gid).addClass("cg_hide").text("");$mainCGdivUploadForm.find(".mainCGdivUploadFormLdsDualRing").addClass("cg_hide");$mainCGdivUploadForm.find(".mainCGdivUploadFormResult").removeClass("cg_hide");$mainCGdivUploadForm.find(".cgGalleryUploadConfirmationText").removeClass("cg_hide");$mainCGdivUploadForm.removeClass("cg_overflow_hidden");$mainCGdivUploadForm.removeClass("cg_upload_in_progress");cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");cgJsClass.gallery.vars.dom.body.removeClass("cg_upload_in_progress");$mainCGdivUploadForm.find(".cg_skeleton_loader_on_page_load_div_form_submit").addClass("cg_hide");if(cgJsData[gid].vars.ShowFormAfterUploadOrContact==1){cgJsClass.gallery.upload.functions.showUploadFormAgain(gid,$mainCGdivUploadForm)}else{if(!isOrderItemMaxUploaded){$mainCGdivUploadForm.find(".cg-refresh-upload-form").removeClass("cg_hide")}}}}}else{$mainCGdivUploadForm.removeClass("cg_overflow_hidden");$mainCGdivUploadForm.find("#mainCGdivUploadProgress"+gid).addClass("cg_hide").text("");$mainCGdivUploadForm.show();$mainCGdivUploadForm.find(".cg_skeleton_loader_on_page_load_div_form_submit").addClass("cg_hide");cgJsClass.gallery.function.general.tools.hideSkeletonLoader(gid);var $mainCGdivUploadFormContainer=$mainCGdivUploadForm.find(".mainCGdivUploadFormContainer");$mainCGdivUploadFormContainer.addClass("cg_hide");$mainCGdivUploadForm.find(".cgGalleryUploadConfirmationText").removeClass("cg_hide");$mainCGdivUploadFormContainer.find(".cg_input_image_upload_id_in_gallery, .cg_input_text_class, .cg_textarea_class, .cg_input_url_class").val("");$mainCGdivUploadFormContainer.find('input[type="checkbox"]').prop("checked",false);$mainCGdivUploadFormContainer.find("option:selected").prop("selected",false);$("#mainCGdivUploadFormResult"+gid).removeClass("cg_hide");var mainCGdivUploadForm=$("#mainCGdivUploadForm"+gid);cgJsClass.gallery.upload.functions.resizeVertical(mainCGdivUploadForm);$("#cgSearchInput"+gid).val("");$mainCGdivUploadForm.removeClass("cg_upload_in_progress");cgJsClass.gallery.vars.dom.html.addClass("cg_no_scroll");cgJsClass.gallery.vars.dom.body.addClass("cg_uncloseable");cgJsClass.gallery.vars.dom.body.removeClass("cg_upload_in_progress");$mainCGdivUploadForm.find(".cg-refresh-upload-form").removeClass("cg_hide");if(!$mainCGdivUploadForm.hasClass("mainCGdivUploadFormOnly")){$mainCGdivUploadForm.find(".cg-close-upload-form").removeClass("cg_hide")}$mainCGdivUploadForm.find(".cg-minimize-upload-form").addClass("cg_hide");setTimeout(function(){cgJsClass.gallery.vars.dom.body.removeClass("cg_uncloseable")},3e3)}}}).fail(function(xhr,status,error){cgJsClass.gallery.vars.dom.body.removeClass("cg_pointer_events_none cg_overflow_hidden");$mainCGdivUploadForm.removeClass("cg_upload_in_progress");cgJsClass.gallery.vars.dom.html.addClass("cg_no_scroll");$mainCGdivUploadForm.find(".cg_skeleton_loader_on_page_load_div_form_submit").addClass("cg_hide");clearInterval(cgJsClass.gallery.upload.vars.slowPercentageUpInterval);cgJsClass.gallery.upload.vars.slowPercentageUpStartInitiated=false;cgJsClass.gallery.upload.vars.activeGalleryId=0;cgJsClass.gallery.upload.functions.failFunction($,gid,uploadFormHeight);jQuery("#mainCGdivUploadProgress"+gid).addClass("cg_hide").text("");cgJsClass.gallery.vars.dom.body.addClass("cg_uncloseable");cgJsClass.gallery.vars.dom.body.removeClass("cg_upload_in_progress");$mainCGdivUploadForm.find(".cg-refresh-upload-form").removeClass("cg_hide");if(!$mainCGdivUploadForm.hasClass("mainCGdivUploadFormOnly")){$mainCGdivUploadForm.find(".cg-close-upload-form").removeClass("cg_hide")}$mainCGdivUploadForm.find(".cg-minimize-upload-form").addClass("cg_hide");setTimeout(function(){cgJsClass.gallery.vars.dom.body.removeClass("cg_uncloseable")},3e3)}).always(function(){})}}};;cgJsClass.gallery.comment.showSetCommentsSameGalleryId=function(realId,gid){if(String(gid).indexOf("-u")>=0){return}if(String(gid).indexOf("-u")==-1){var gidToCheck=gid+"-u";if(cgJsData[gidToCheck]){cgJsClass.gallery.views.close(gidToCheck);cgJsClass.gallery.rating.showSetComments(realId,gidToCheck,true)}}};cgJsClass.gallery.comment.appendComment=function(realId,gid,name,comment,gidForElements){if(!gidForElements){gidForElements=gid}var $cgCenterDiv=cgJsData[gid].vars.mainCGdiv.find("#cgCenterDiv"+gidForElements);$cgCenterDiv.find("#cgCenterImageCommentsDivEnterTitle"+gidForElements).val("");$cgCenterDiv.find("#cgCenterImageCommentsDivEnterTextarea"+gidForElements).val("");$cgCenterDiv.find("#cgCenterImageCommentsDiv"+gidForElements).removeClass("cg_hide");$cgCenterDiv.find("#cgCenterImageCommentsDivTitle"+gidForElements).removeClass("cg_hide cg-center-image-info-div-title-no-comments");$cgCenterDiv.find("#cgCenterInfoDiv"+gidForElements).find(".cg-center-image-comments-div-parent-parent").removeClass("cg_hide");$cgCenterDiv.find("#cgCenterImageCommentsDivEnterTitleError"+gidForElements).addClass("cg_hide");$cgCenterDiv.find("#cgCenterImageCommentsDivEnterTextareaError"+gidForElements).addClass("cg_hide");$cgCenterDiv.find(".cg-center-image-comments-div-recently-added").removeClass("cg-center-image-comments-div-recently-added");var timestamp=parseInt((new Date).getTime())/1e3;var date=cgJsClass.gallery.comment.getDateDependsOnLocaleLang(gid,timestamp);var commentDiv=jQuery('<div class="cg-center-image-comments-div cg-center-image-comments-div-recently-added"></div>');commentDiv.append('<p class="cg-center-image-comments-comment-content">'+comment+"</p>");var $nameDateContainer=jQuery('<div class="cg-center-image-comments-name-date-container">'+"</div>");var isSetNameDateContainer=false;if(cgJsData[gid].options.general.HideCommentNameField!=1&&!cgJsClass.gallery.vars.isLoggedIn){$nameDateContainer.prepend('<p class="cg-center-image-comments-name-content">'+name+"</p>");isSetNameDateContainer=true}if(cgJsClass.gallery.vars.isLoggedIn){var $cgCenterImageCommentsUserDataClone=$cgCenterDiv.find(".cg-center-image-comments-div-enter .cg-center-image-comments-user-data").clone();commentDiv.prepend($cgCenterImageCommentsUserDataClone.append('<div class="cg-center-image-comments-date"><p>'+date+"</p></div>"))}else{$nameDateContainer.append('<p class="cg-center-image-comments-date-content">'+date+"</p>");isSetNameDateContainer=true}if(isSetNameDateContainer){commentDiv.prepend($nameDateContainer)}if(cgJsData[gid].options.pro.ReviewComm!=1){cgJsClass.gallery.vars.$lastAppearedCommentDiv=commentDiv;$cgCenterDiv.find("#cgCenterImageCommentsDiv"+gidForElements).prepend(commentDiv)}$cgCenterDiv.find("#cgCenterImageCommentsDiv"+gidForElements).find(".cg-center-for-your-comment-message-container").remove();cgJsClass.gallery.vars.$lastAppearedThankYouForCommentDiv=jQuery('<div class="cg-center-image-comments-div cg-center-image-comments-div-recently-added cg-center-for-your-comment-message-container"></div>');if(cgJsData[gid].options.pro.ReviewComm==1){cgJsClass.gallery.vars.$lastAppearedThankYouForCommentDiv.prepend('<p class="cg-center-for-your-comment-message">'+cgJsClass.gallery.language[gid].ThankYouForYourComment+"</p>");cgJsClass.gallery.vars.$lastAppearedThankYouForCommentDiv.append('<p class="cg-center-for-your-comment-message" style="font-weight: normal;">'+cgJsClass.gallery.language[gid].YourCommentWillBeReviewed+"</p>")}else{cgJsClass.gallery.vars.$lastAppearedThankYouForCommentDiv.prepend('<p class="cg-center-for-your-comment-message">'+cgJsClass.gallery.language[gid].ThankYouForYourComment+"</p>")}$cgCenterDiv.find("#cgCenterImageCommentsDiv"+gidForElements).prepend(cgJsClass.gallery.vars.$lastAppearedThankYouForCommentDiv.addClass("cg_fade_in_2"))};cgJsClass.gallery.comment.appendCommentUserGalleryIfExists=function(realId,gid,name,comment){var realGid=cgJsData[gid].vars.realGid;cgJsClass.gallery.vars.$cgLoadedIds.each(function(){if(jQuery(this).attr("data-cg-real-gid")!=realGid){return}if(jQuery(this).attr("data-cg-short")=="uf"||jQuery(this).attr("data-cg-short")=="uc"){return}if(jQuery(this).attr("data-cg-gid")==gid){return}if(cgJsData[jQuery(this).attr("data-cg-gid")]){if(cgJsData[jQuery(this).attr("data-cg-gid")].vars){if(cgJsData[jQuery(this).attr("data-cg-gid")].vars.rawData){if(cgJsData[jQuery(this).attr("data-cg-gid")].vars.rawData[realId]){cgJsData[jQuery(this).attr("data-cg-gid")].jsonCommentsData=cgJsData[gid].jsonCommentsData;cgJsClass.gallery.comment.setComments(jQuery(this).attr("data-cg-gid"));cgJsClass.gallery.comment.setComment(realId,1,jQuery(this).attr("data-cg-gid"));cgJsClass.gallery.comment.appendComment(realId,jQuery(this).attr("data-cg-gid"),name,comment);cgJsClass.gallery.comment.checkIfTopBottomArrowsRequired(jQuery(this).attr("data-cg-gid"));cgJsClass.gallery.views.scrollInfoOrCommentTopFullHeight(jQuery(this).attr("data-cg-gid"))}}}}});return;if(String(gid).indexOf("-u")>=0){return}if(String(gid).indexOf("-u")==-1){var gidToCheck=gid+"-u";if(cgJsData[gidToCheck]){if(cgJsData[gidToCheck].vars){if(cgJsData[gidToCheck].vars.rawData){if(cgJsData[gidToCheck].vars.rawData[realId]){cgJsClass.gallery.comment.setComment(realId,1,gidToCheck);cgJsClass.gallery.comment.appendComment(realId,gidToCheck,name,comment);cgJsClass.gallery.comment.checkIfTopBottomArrowsRequired(gidToCheck);cgJsClass.gallery.views.scrollInfoOrCommentTopFullHeight(gidToCheck)}}}}}};cgJsClass.gallery.comment.prepareSubmitButton=function(gid,gidForElements){var $cgCenterImageCommentsDivEnterSubmit=cgJsData[gid].vars.mainCGdiv.find("#cgCenterImageCommentsDivEnterSubmit"+gidForElements);var widthButton=cgJsData[gid].vars.mainCGdiv.find("#cgCenterImageCommentsDivEnterSubmit"+gidForElements).width();$cgCenterImageCommentsDivEnterSubmit.width(widthButton);$cgCenterImageCommentsDivEnterSubmit.css({"pointer-events":"none",cursor:"none"});return $cgCenterImageCommentsDivEnterSubmit};cgJsClass.gallery.comment.checkRecursive=function(i,gid,$cgCenterImageCommentsDivEnterSubmit){setTimeout(function(){i--;cgJsClass.gallery.vars.commentSubmitButtonDisabledCounter=i;if(i==0){$cgCenterImageCommentsDivEnterSubmit.prop("disabled",false);$cgCenterImageCommentsDivEnterSubmit.text(cgJsClass.gallery.language[gid].Send);$cgCenterImageCommentsDivEnterSubmit.removeAttr("style");return}$cgCenterImageCommentsDivEnterSubmit.text(i);cgJsClass.gallery.comment.checkRecursive(i,gid,$cgCenterImageCommentsDivEnterSubmit)},1e3)};cgJsClass.gallery.comment.showSetComments=function(realId,gid,isSetFromSameGalleryId,gidForElements){if(!gidForElements){gidForElements=gid}var $cgCenterDiv=cgJsData[gid].vars.mainCGdiv.find("#cgCenterDiv"+gidForElements);var name="";if(cgJsData[gid].options.general.HideCommentNameField!=1&&!cgJsClass.gallery.vars.isLoggedIn){name=cgJsData[gid].vars.mainCGdiv.find("#cgCenterImageCommentsDivEnterTitle"+gidForElements).val()}var comment=cgJsData[gid].vars.mainCGdiv.find("#cgCenterImageCommentsDivEnterTextarea"+gidForElements).val();if(name.length<2&&cgJsData[gid].options.general.HideCommentNameField!=1&&!cgJsClass.gallery.vars.isLoggedIn){var errorMessage=cgJsClass.gallery.language[gid].TheNameFieldMustContainTwoCharactersOrMore;cgJsData[gid].vars.mainCGdiv.find("#cgCenterImageCommentsDivEnterTitleError"+gidForElements).text(errorMessage).removeClass("cg_hide")}if(comment.length<3){var errorMessage=cgJsClass.gallery.language[gid].TheCommentFieldMustContainThreeCharactersOrMore;cgJsData[gid].vars.mainCGdiv.find("#cgCenterImageCommentsDivEnterTextareaError"+gidForElements).text(errorMessage).removeClass("cg_hide")}if(name.length<2&&cgJsData[gid].options.general.HideCommentNameField!=1&&!cgJsClass.gallery.vars.isLoggedIn||comment.length<3){return}var nameToAppend=(" "+name).slice(1);var commentToAppend=(" "+comment).slice(1);cgJsClass.gallery.comment.appendComment(realId,gid,nameToAppend,commentToAppend,gidForElements);if(cgJsClass.gallery.vars.fullwindow){cgJsClass.gallery.views.singleView.createImageUrl(gid,realId);var calculatedHeight=$cgCenterDiv.position().top;if($cgCenterDiv.find(".cgCenterDivChild").length){calculatedHeight=calculatedHeight+$cgCenterDiv.find(".cgCenterDivChild").outerHeight(true)}if($cgCenterDiv.find(".cg-center-image-div").length){calculatedHeight=calculatedHeight+$cgCenterDiv.find(".cg-center-image-div").outerHeight(true)}if($cgCenterDiv.find(".cg-center-image-rating-div").length){calculatedHeight=calculatedHeight+$cgCenterDiv.find(".cg-center-image-rating-div").outerHeight(true)}if($cgCenterDiv.find(".cg-center-image-fblike-div").length){calculatedHeight=calculatedHeight+$cgCenterDiv.find(".cg-center-image-fblike-div").outerHeight(true)}if($cgCenterDiv.find(".cg-center-image-info-div-parent-parent").length){calculatedHeight=calculatedHeight+$cgCenterDiv.find(".cg-center-image-info-div-parent-parent").outerHeight(true)}jQuery("#mainCGdivHelperParent"+gid).animate({scrollTop:calculatedHeight-100+"px"},"fast")}else{cgJsClass.gallery.vars.dom.html.animate({scrollTop:$cgCenterDiv.find("#cgCenterImageCommentsDiv"+gidForElements).offset().top-80+"px"},"fast")}if(cgJsData[gid].options.pro.ReviewComm!=1){cgJsClass.gallery.comment.setComment(realId,1,gid)}var $cgCenterImageCommentsDivEnterSubmit=cgJsClass.gallery.comment.prepareSubmitButton(gid,gidForElements);cgJsClass.gallery.comment.checkRecursive(11,gid,$cgCenterImageCommentsDivEnterSubmit);cgJsClass.gallery.comment.checkIfTopBottomArrowsRequired(gid,gidForElements,true);cgJsClass.gallery.views.scrollInfoOrCommentTopFullHeight(gid,gidForElements);jQuery.ajax({url:cg_show_set_comments_v10_wordpress_ajax_script_function_name.cg_show_set_comments_v10_ajax_url,type:"post",data:{action:"cg_show_set_comments_v10",pid:realId,gid:cgJsData[gid].vars.gidReal,name:name,comment:comment,galeryIDuser:gid,galleryHash:cgJsData[gid].vars.galleryHash,cgPageUrl:cgJsClass.gallery.vars.cgPageUrl}}).done(function(response){var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");var script=jQuery(parsedHtml).find('script[data-cg-processing="true"]').first();if(!script.length){cgJsClass.gallery.function.message.show(gid,"Your comment could not be saved. Please contact administrator.");cgJsClass.gallery.comment.setComment(realId,-1,gid);cgJsData[gid].vars.mainCGdiv.find("#cgCenterImageCommentsDiv"+gidForElements).find(".cg-center-image-comments-div").first().remove().next().remove()}else{jQuery(parsedHtml).find('script[data-cg-processing="true"]').each(function(){var script=jQuery(this).html();eval(script)});if(!cgJsData[gid].vars.isShortcodeIntervalOver){cgJsClass.gallery.comment.appendCommentUserGalleryIfExists(realId,gid,nameToAppend,commentToAppend,gidForElements)}}}).fail(function(xhr,status,error){cgJsClass.gallery.function.message.show(gid,"Your comment could not be saved. Please contact administrator.");cgJsClass.gallery.comment.setComment(realId,-1,gid);cgJsData[gid].vars.mainCGdiv.find("#cgCenterImageCommentsDiv"+gidForElements).find(".cg-center-image-comments-div").first().remove().next().remove()}).always(function(){})};;cgJsClass.gallery.user.deleteImageConfirmShow=function($deleteButton){cgJsClass.gallery.function.message.show($deleteButton.attr("data-cg-gid"),cgJsData[$deleteButton.attr("data-cg-gid")].vars.rawData[$deleteButton.attr("data-cg-real-id")].MultipleFilesParsed?cgJsClass.gallery.language[$deleteButton.attr("data-cg-gid")].DeleteImagesQuestion:cgJsClass.gallery.language[$deleteButton.attr("data-cg-gid")].DeleteImageQuestion,true,"cgJsClass.gallery.user.deleteImageConfirmProcess",[$deleteButton.attr("data-cg-gid"),$deleteButton.attr("data-cg-real-id")],$deleteButton)};cgJsClass.gallery.user.deleteImageConfirmProcess=function($deleteImageConfirmButton){var gid=$deleteImageConfirmButton.attr("data-cg-gid");var imageId=$deleteImageConfirmButton.attr("data-cg-real-id");var $cgMessagesContainer=cgJsClass.gallery.function.message.show(gid,false,false,false,false,false,true);cgJsClass.gallery.user.isEventinProcess=true;jQuery.ajax({url:post_cg_gallery_user_delete_image_wordpress_ajax_script_function_name.cg_gallery_user_delete_image_ajax_url,method:"post",data:{action:"post_cg_gallery_user_delete_image",gid:cgJsData[gid].vars.gidReal,galeryIDuser:gid,uid:cgJsClass.gallery.vars.wpUserId,pid:imageId,galleryHash:cgJsData[gid].vars.galleryHash}}).done(function(response){cgJsClass.gallery.user.isEventinProcess=false;$cgMessagesContainer.find("#cgMessagesClose").removeClass("cg_hide");$cgMessagesContainer.removeClass("cg-lds-dual-ring-star-loading");cgJsData[gid].vars.upload.UploadedUserFilesAmount=parseInt(cgJsData[gid].vars.upload.UploadedUserFilesAmount)-1;cgJsClass.gallery.upload.functions.setNewUploadedUserFilesAmountToAllGalleriesWithSameGidRealOnPage(jQuery,cgJsData[gid].vars.gidReal);var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");var script=jQuery(parsedHtml).find('script[data-cg-processing="true"]').first().html();eval(script);cgJsClass.gallery.categories.checkIfShowMoreForCatAreaRequired(gid,undefined,undefined,true)}).fail(function(xhr,status,error){$cgMessagesContainer.find("#cgMessagesClose").removeClass("cg_hide");$cgMessagesContainer.removeClass("cg-lds-dual-ring-star-loading");cgJsClass.gallery.function.message.show(gid,"Something went wrong, please contact adminstrator");jQuery("#cg_show"+imageId).removeClass("cg_opacity_0_3")}).always(function(){})};;cgJsClass.gallery.user.editImageDataProcess=function($saveImageDataButton){var $cgCenterDiv=$saveImageDataButton.closest(".cgCenterDiv");var gid=$cgCenterDiv.attr("data-cg-gid");var realId=$cgCenterDiv.attr("data-cg-real-id");var cgFieldIdsContent={};var cgFieldIdsObjectToSafeForSearch={};cgFieldIdsObjectToSafeForSearch[realId]={};$cgCenterDiv.find(".cg-field-id-input-content").each(function(){cgFieldIdsContent[jQuery(this).attr("data-cg-input-field-id")]=jQuery(this).val();cgFieldIdsObjectToSafeForSearch[realId]["field-title"]=jQuery(this).attr("data-cg-input-field-title");cgFieldIdsObjectToSafeForSearch[realId]["field-content"]=jQuery(this).val();cgFieldIdsObjectToSafeForSearch[realId]["field-type"]=jQuery(this).attr("data-cg-input-field-type")});var cgCatId=null;if($cgCenterDiv.find(".cg-cat-id-input-content").length){cgCatId=$cgCenterDiv.find(".cg-cat-id-input-content").val()}var $cgMessagesContainer=cgJsClass.gallery.function.message.show(gid,false,false,false,false,false,true);cgJsClass.gallery.function.general.tools.backdropShow();cgJsClass.gallery.vars.dom.body.addClass("cg_pointer_events_none");cgJsClass.gallery.user.isEventinProcess=true;debugger;jQuery.ajax({url:post_cg_gallery_user_edit_image_data_wordpress_ajax_script_function_name.cg_gallery_user_edit_image_data_ajax_url,method:"post",data:{action:"post_cg_gallery_user_edit_image_data",gid:cgJsData[gid].vars.gidReal,galeryIDuser:gid,uid:cgJsClass.gallery.vars.wpUserId,pid:realId,galleryHash:cgJsData[gid].vars.galleryHash,isCgWpPageEntryLandingPage:cgJsData[gid].vars.isCgWpPageEntryLandingPage,"cg-field-id":cgFieldIdsContent,"cg-cat-id":cgCatId}}).done(function(response){debugger;$cgCenterDiv.find(".cg-center-image-info-div-parent-parent").removeClass("cg_overflow_visible");setTimeout(function(){cgJsClass.gallery.user.isEventinProcess=false;$cgMessagesContainer.find("#cgMessagesClose").removeClass("cg_hide");cgJsClass.gallery.function.message.show(gid,cgJsClass.gallery.language[gid].DataSaved);var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");var script=jQuery(parsedHtml).find('script[data-cg-processing="true"]').first().html();eval(script);cgJsClass.gallery.vars.dom.body.removeClass("cg_pointer_events_none");cgJsData[gid].infoGalleryViewAppended[realId]=undefined;if(cgCatId!==null){cgJsData[gid].vars.rawData[realId]["Category"]=cgCatId}cgJsClass.gallery.info.collectInfo(gid,realId,cgFieldIdsObjectToSafeForSearch);cgJsClass.gallery.views.singleViewFunctions.editCloseInfoUserGallery($cgCenterDiv);if(cgJsData[gid].options.visual["Field3IdGalleryView"]&&cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["Field3IdGalleryView"]]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["Field3IdGalleryView"]]["field-content"]){$cgCenterDiv.find(".cg-center-image-name").text(cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["Field3IdGalleryView"]]["field-content"])}else{$cgCenterDiv.find(".cg-center-image-name").text(cgJsData[gid].vars.rawData[realId]["NamePic"])}},1500)}).fail(function(xhr,status,error){$cgCenterDiv.find(".cg-center-image-info-div-parent-parent").removeClass("cg_overflow_visible");$cgCenterDiv.find(".cg-center-image-info-edit-icon-container").click();cgJsClass.gallery.vars.dom.body.removeClass("cg_body_overflow_hidden cg_pointer_events_none");cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll cg_body_overflow_hidden");$cgMessagesContainer.find("#cgMessagesClose").removeClass("cg_hide");$cgMessagesContainer.removeClass("cg-lds-dual-ring-star-loading");cgJsClass.gallery.function.message.show(gid,"Something went wrong during saving image data, please contact adminstrator")}).always(function(){})};;cgJsClass.gallery.user.setFrontendCookieOrderIdHash=function(cgOrderIdHash){debugger;jQuery.ajax({url:post_cg_set_frontend_cookie_wordpress_ajax_script_function_name.cg_set_frontend_cookie_ajax_url,type:"post",data:{action:"post_cg_set_frontend_cookie",cgOrderIdHash:cgOrderIdHash}}).done(function(response){}).fail(function(xhr,status,error){debugger;cgJsClass.gallery.function.message.show(0,"Order cookie could not be set. Please contact administrator.")}).always(function(){})};cgJsClass.gallery.user.setFrontendCookieUpload=function(gid){jQuery.ajax({url:post_cg_set_frontend_cookie_wordpress_ajax_script_function_name.cg_set_frontend_cookie_ajax_url,type:"post",data:{action:"post_cg_set_frontend_cookie",gid:cgJsData[gid].vars.gidReal,cgIsUpload:true}}).done(function(response){}).fail(function(xhr,status,error){debugger;cgJsClass.gallery.function.message.show(gid,"Cookie could not be set. Please contact administrator.")}).always(function(){})};cgJsClass.gallery.user.setFrontendCookieOneStar=function(gid,cg_picture_id,cg_rate_value,minusVoteNow,$cg_gallery_rating_div_childImageObject){jQuery.ajax({url:post_cg_set_frontend_cookie_wordpress_ajax_script_function_name.cg_set_frontend_cookie_ajax_url,type:"post",data:{action:"post_cg_set_frontend_cookie",gid:cgJsData[gid].vars.gidReal}}).done(function(response){var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");var script=jQuery(parsedHtml).find('script[data-cg-processing="true"]').first().html();eval(script);cgJsClass.gallery.rating.rateOneStarAjaxRequest(gid,cg_picture_id,cg_rate_value,minusVoteNow,$cg_gallery_rating_div_childImageObject)}).fail(function(xhr,status,error){debugger;cgJsClass.gallery.function.message.show(gid,"Cookie could not be set. Please contact administrator.")}).always(function(){})};cgJsClass.gallery.user.setFrontendCookieFiveStar=function(gid,cg_picture_id,cg_rate_value,minusVoteNow,$cg_gallery_rating_div_childImageObject){jQuery.ajax({url:post_cg_set_frontend_cookie_wordpress_ajax_script_function_name.cg_set_frontend_cookie_ajax_url,type:"post",data:{action:"post_cg_set_frontend_cookie",gid:cgJsData[gid].vars.gidReal}}).done(function(response){var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");var script=jQuery(parsedHtml).find('script[data-cg-processing="true"]').first().html();eval(script);cgJsClass.gallery.rating.rateFiveStarAjaxRequest(gid,cg_picture_id,cg_rate_value,minusVoteNow,$cg_gallery_rating_div_childImageObject)}).fail(function(xhr,status,error){debugger;cgJsClass.gallery.function.message.show(gid,"Cookie could not be set. Please contact administrator.")}).always(function(){})};;cgJsClass.gallery.function.general.ajax={changesRecognized:function($){$(document).on("click","#cgGalleriesMainPageRecognized",function(e){e.preventDefault();jQuery.ajax({url:post_cg_changes_recognized_wordpress_ajax_script_function_name.cg_changes_recognized_ajax_url,method:"post",data:{action:"post_cg_changes_recognized"}}).done(function(response){$("#cgGalleriesMainPageRecognizedContainer").remove()}).fail(function(xhr,status,error){cgJsClass.gallery.function.message.show(0,"Something went wrong removing changes information. Information might be visible again.",undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,true,true)}).always(function(){})});return;if(cgJsClass.gallery.vars.eventChangesRecognized){return}else{cgJsClass.gallery.vars.eventChangesRecognized=true}$(document).on("click",".cgChangeTopControlsStyleOptionClose",function(){var $element=$(this);var gid=$element.attr("data-cg-gid");var $cgChangeTopControlsStyleOption=$element.closest(".cgChangeTopControlsStyleOption");if($cgChangeTopControlsStyleOption.find(".cgChangeTopControlsStyleOptionStartingStyle").val()=="cg_fe_controls_style_white"){$cgChangeTopControlsStyleOption.find(".cgChangeTopControlsStyleOptionTestWhiteSites").click()}else{$cgChangeTopControlsStyleOption.find(".cgChangeTopControlsStyleOptionTestBlackSites").click()}$cgChangeTopControlsStyleOption.remove();jQuery.ajax({url:post_cg_changes_recognized_wordpress_ajax_script_function_name.cg_changes_recognized_ajax_url,method:"post",data:{action:"post_cg_changes_recognized",gid:cgJsData[gid].vars.gidReal,galeryIDuser:gid,galleryHash:cgJsData[gid].vars.galleryHash}}).done(function(response){}).fail(function(xhr,status,error){cgJsClass.gallery.function.message.showPro(gid,"Something went wrong removing changes information. Information will be visible again.")}).always(function(){})})}};;jQuery(document).ready(function($){var cgGoTo=function($field){$("html, body").animate({scrollTop:$field.offset().top-40+"px"},"fast");return this};if(typeof cgRecaptchaCallbackRegistryFormRendered=="undefined"||!cgRecaptchaCallbackRegistryFormRendered){$(".cg_recaptcha_reg_form").closest(".cg_form_div").remove()}$("#cg_user_registry_div").show();var $mail=$(".cg_user_registry_instant_mail_check");$(".cg_main-mail").keyup(function(){$mail.val(this.value)});var check=$("#cg_user_registry_form #cg_check").val();$("#cg_user_registry_form #cg_captcha_not_a_robot_registry_field > div").prepend("<input type='checkbox' id='cg_"+check+"_registry' >");var cgCheckFields=function(e,$field,submit){var $form=$field.closest("form");var gid=$form.attr("data-cg-gid");if(submit){$field.addClass("cg_form_validated")}$form.find(".cg_form_div").removeClass("cg_form_div_error");$form.find(".cg_input_error").addClass("cg_hide").empty();var check=0;if($form.find(".cg_recaptcha_not_valid_reg_form_error").length>=1){var cg_language_pleaseConfirm=$("#cg_user_registry_div_messages #cg_language_pleaseConfirm").val();$form.find(".cg_recaptcha_not_valid_reg_form_error").text(cg_language_pleaseConfirm).removeClass("cg_hide");$form.find(".cg_recaptcha_not_valid_reg_form_error").closest(".cg_form_div").addClass("cg_form_div_error");check=1;e.preventDefault()}var emailRegex=/^[a-zA-Z0-9_!#$%&’*+/=?`{|}~^.-]+@[a-zA-Z0-9.-]+$/;$form.find(".cg_check_f_checkbox").each(function(i){var checkIfNeed=$(this).parent().find(".cg_form_required").val();if(checkIfNeed=="1"){if(!$(this).prop("checked")){var cg_check_agreement=$("#cg_user_registry_div_messages #cg_check_agreement").val();$(this).closest(".cg_form_div").find(".cg_input_error").removeClass("cg_hide").append(cg_check_agreement);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}}});$form.find(".cg-main-mail").each(function(i){var cg_main_mail=$(this).val();var realsize=$(this).val().length;if(realsize==0){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+$("#cg_language_PleaseFillOut").val()+"");check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}if(realsize>0){if(!emailRegex.test(cg_main_mail)){var cg_check_email_upload=$("#cg_check_email_upload").val();$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_check_email_upload);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}}});if($form.find("#cg_captcha_not_a_robot_registry_field  input[type='checkbox']").length>=1&&$form.find("#cg_captcha_not_a_robot_registry_field  input[type='checkbox']").is(":checked")===false){e.preventDefault();var cg_language_pleaseConfirm=$("#cg_user_registry_div_messages #cg_language_pleaseConfirm").val();$form.find("#cg_captcha_not_a_robot_registry_field").find(".cg_input_error").removeClass("cg_hide").text(cg_language_pleaseConfirm)}$form.find(".cg-main-user-name").each(function(i){var cg_main_user_name=$(this).val();var cg_Real_Size=$(this).val().length;var cg_Min_Char=$(this).parent().find(".cg_Min_Char").val();var cg_Max_Char=$(this).parent().find(".cg_Max_Char").val();var cg_min_characters_text=$("#cg_user_registry_div_messages #cg_min_characters_text").val();var cg_max_characters_text=$("#cg_user_registry_div_messages #cg_max_characters_text").val();if(cg_Real_Size==0){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+$("#cg_language_PleaseFillOut").val()+"");check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else if(cg_Real_Size<cg_Min_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_min_characters_text+": "+cg_Min_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else if(cg_Real_Size>cg_Max_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_max_characters_text+": "+cg_Max_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else{}});$form.find(".cg-main-nick-name").each(function(i){var cg_main_nick_name=$(this).val();var cg_Real_Size=$(this).val().length;var cg_Min_Char=$(this).parent().find(".cg_Min_Char").val();var cg_Max_Char=$(this).parent().find(".cg_Max_Char").val();var cg_min_characters_text=$("#cg_user_registry_div_messages #cg_min_characters_text").val();var cg_max_characters_text=$("#cg_user_registry_div_messages #cg_max_characters_text").val();if(cg_Real_Size==0){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+$("#cg_language_PleaseFillOut").val()+"");check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else if(cg_Real_Size<cg_Min_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_min_characters_text+": "+cg_Min_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else if(cg_Real_Size>cg_Max_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_max_characters_text+": "+cg_Max_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else{}});$form.find(".cg-user-comment-field").each(function(i){var cg_Real_Size=$(this).val().length;var cg_Min_Char=$(this).parent().find(".cg_Min_Char").val();var cg_Max_Char=$(this).parent().find(".cg_Max_Char").val();var cg_min_characters_text=$("#cg_user_registry_div_messages #cg_min_characters_text").val();var cg_max_characters_text=$("#cg_user_registry_div_messages #cg_max_characters_text").val();var checkIfNeed=$(this).parent().find(".cg_form_required").val();if(checkIfNeed=="1"){if(cg_Real_Size==0){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+$("#cg_language_PleaseFillOut").val()+"");check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else if(cg_Real_Size<cg_Min_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_min_characters_text+": "+cg_Min_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else if(cg_Real_Size>cg_Max_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_max_characters_text+": "+cg_Max_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else{}}else{if(cg_Min_Char&&cg_Real_Size>=1){if(cg_Real_Size<cg_Min_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_min_characters_text+": "+cg_Min_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}}if(cg_Min_Char&&cg_Real_Size>=1){if(cg_Real_Size>cg_Max_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_max_characters_text+": "+cg_Max_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}}}});$form.find(".cg-user-select-field").each(function(i){var checkIfNeed=$(this).parent().find(".cg_form_required").val();var cg_language_youHaveNotSelected=$("#cg_user_registry_div_messages #cg_language_youHaveNotSelected").val();if(checkIfNeed=="1"){$(this).val();if($(this).val()==""){$(this).parent().find(".cg_input_error").removeClass("cg_hide").empty();$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+cg_language_youHaveNotSelected+"");$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}}});$form.find(".cg-user-text-field,.cg-wpfn,.cg-wpln").each(function(i){var cg_Real_Size=$(this).val().length;var cg_Min_Char=$(this).parent().find(".cg_Min_Char").val();var cg_Max_Char=$(this).parent().find(".cg_Max_Char").val();var cg_min_characters_text=$("#cg_user_registry_div_messages #cg_min_characters_text").val();var cg_max_characters_text=$("#cg_user_registry_div_messages #cg_max_characters_text").val();var checkIfNeed=$(this).parent().find(".cg_form_required").val();if(checkIfNeed=="1"){if(cg_Real_Size==0){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+$("#cg_language_PleaseFillOut").val()+"");check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else if(cg_Real_Size<cg_Min_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_min_characters_text+": "+cg_Min_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else if(cg_Real_Size>cg_Max_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_max_characters_text+": "+cg_Max_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else{}}else{if(cg_Min_Char&&cg_Real_Size>=1){if(cg_Real_Size<cg_Min_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_min_characters_text+": "+cg_Min_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}}if(cg_Min_Char&&cg_Real_Size>=1){if(cg_Real_Size>cg_Max_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_max_characters_text+": "+cg_Max_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}}}});$form.find(".cg-profile-image").each(function(i){var filename=$(this).val().split("\\").pop();var checkIfNeed=$(this).parent().find(".cg_form_required").val();if(checkIfNeed=="1"&&filename==0){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+$("#cg_language_ChooseYourImage").val()+"");check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else{if($(this).get(0).files.length){var fileType=$(this).get(0).files[0].type;var fileTypeEndingString=filename.split(".")[filename.split(".").length-1].toLowerCase();var allowedFileEndings=["jpg","jpeg","gif","png"];if(fileType!="image/jpeg"&&fileType!="image/png"&&fileType!="image/gif"||allowedFileEndings.indexOf(fileTypeEndingString)==-1){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+$("#cg_language_ThisFileTypeIsNotAllowed").val()+"");$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}var sizePic=$(this).get(0).files[0].size;sizePic=sizePic/1e6;if(sizePic>2){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text($("#cg_language_TheFileYouChoosedIsToBigMaxAllowedSize").val()+": 2MB");$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}}}});var pw_count=0;var cg_password_1="";var cg_password_2="";$form.find("[class*=cg-password]").each(function(i){pw_count++;var cg_password_type=$(this).attr("class");if(pw_count==1){cg_password_1=$(this).val()}if(pw_count==2){cg_password_2=$(this).val()}var cg_Real_Size=$(this).val().length;var cg_Min_Char=$(this).parent().find(".cg_Min_Char").val();var cg_Max_Char=$(this).parent().find(".cg_Max_Char").val();var cg_Real_Size=$(this).val().length;var cg_min_characters_text=$("#cg_user_registry_div_messages #cg_min_characters_text").val();var cg_max_characters_text=$("#cg_user_registry_div_messages #cg_max_characters_text").val();if(cg_Real_Size==0){$(this).parent().find(".cg_input_error").removeClass("cg_hide").text(""+$("#cg_language_PleaseFillOut").val()+"");check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else if(cg_Real_Size<cg_Min_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_min_characters_text+": "+cg_Min_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else if(cg_Real_Size>cg_Max_Char){$(this).parent().find(".cg_input_error").removeClass("cg_hide").append(cg_max_characters_text+": "+cg_Max_Char);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else{}if(pw_count==2){if(cg_password_1!=cg_password_2){check=1;e.preventDefault();if(submit){alert($("#cg_user_registry_div_messages #cg_language_PasswordsDoNotMatch").val())}}}});if(check==1&&submit){if(!$form.closest(".mainCGdivUploadFormAjax").length){cgGoTo($form.find(".cg_form_div_error"))}}if(check==0&&submit){$("#cg_registry_message").empty();contGallSubmitLoaderShow($,$("#cg_users_registry_check"));var formPostData=new FormData($form.get(0));formPostData.append("cg-main-mail",$form.find(".cg-main-mail").val());formPostData.append("cg-main-user-name",$form.find(".cg-main-user-name").val());formPostData.append("cg-main-nick-name",$form.find(".cg-main-nick-name").val());$("#cg_check_mail_name_value").val(1);$.ajax({url:post_cg_registry_wordpress_ajax_script_function_name.cg_registry_ajax_url,method:"post",data:formPostData,dataType:null,contentType:false,processData:false,async:false}).done(function(response){debugger;var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");parsedHtml=jQuery(parsedHtml);var $scriptDataCgProcessing=parsedHtml.find('script[data-cg-processing="true"]');if($scriptDataCgProcessing.length){e.preventDefault();$scriptDataCgProcessing.each(function(){var script=jQuery(this).html();eval(script)});if(typeof cgIsShortcodeIntervalOverForReg!="undefined"){jQuery("#cg_user_registry_div").addClass("cg_hide")}else{cgCheckRegistryResult(e,$field)}}else{e.preventDefault();contGallSubmitLoaderHide($,$("#cg_users_registry_check"),$("#cg_users_registry_check_submit_language").val())}}).fail(function(xhr,status,error){e.preventDefault();contGallSubmitLoaderHide($,$("#cg_users_registry_check"),$("#cg_users_registry_check_submit_language").val());var test=1}).always(function(){var test=1})}};var cgCheckRegistryResult=function(){var cg_check_mail_name_value=$("#cg_check_mail_name_value").val();if(cg_check_mail_name_value==1){contGallSubmitLoaderHide($,$("#cg_users_registry_check"),$("#cg_users_registry_check_submit_language").val());$("#cg_check_mail_name_value").val(0)}else{}};$(document).on("input change",".cg_registry_form_field,.cg_check_f_checkbox,.cg-user-select-field",function(e){var $field=$(this);var elementVal=$field.val();var regexEmoticons=/(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])/g;if(regexEmoticons.test(elementVal)){$field.val(elementVal.replace(regexEmoticons,""));return}if($field.closest("form").hasClass("cg_form_validated")){cgCheckFields(e,$field)}});$(document).on("submit","#cg_user_registry_form",function(e){cgCheckFields(e,$(this),true)});$(document).on("click",".cgRegistryFormButtonGallery",function(e){var $mainCGdiv=$(this).closest(".mainCGdiv");if($mainCGdiv.length||$(this).hasClass("cgRegistryFormButtonAjaxForm")){if(cgJsClass.gallery.vars.openedUploadFormGalleryId){var gid=cgJsClass.gallery.vars.openedUploadFormGalleryId;cgJsClass.gallery.upload.functions.close(gid,true)}cgOpenUploadForm($,$(this))}})});;jQuery(document).ready(function($){var cgGoTo=function($field){$("html, body").animate({scrollTop:$field.offset().top-40+"px"},"fast");return this};$("#cg_user_login_div").show();$(document).on("click",".cgLoginFormButtonGallery",function(e){var $mainCGdiv=$(this).closest(".mainCGdiv");if($mainCGdiv.length||$(this).hasClass("cgLoginFormButtonAjaxForm")){if(cgJsClass.gallery.vars.openedUploadFormGalleryId){var gid=cgJsClass.gallery.vars.openedUploadFormGalleryId;cgJsClass.gallery.upload.functions.close(gid,true)}cgOpenUploadForm($,$(this))}});$(document).on("click","#cgLostPasswordLinkButton",function(e){e.preventDefault();$("#mainCGdivLoginFormContainer").addClass("cg_hide");$("#mainCGdivLostPasswordExplanation").addClass("cg_hide");$("#mainCGdivLostPasswordContainer").removeClass("cg_hide")});$(document).on("click",".cgLostPasswordBackToLoginFormButton",function(e){e.preventDefault();$("#mainCGdivLoginFormContainer").removeClass("cg_hide");$("#mainCGdivLostPasswordResetContainer").addClass("cg_hide");$(".mainCGdivLostPasswordContainer").addClass("cg_hide");$("#mainCGdivLostPasswordEmailSentContainer").addClass("cg_hide");$("#mainCGdivLostPasswordResetContainer").addClass("cg_hide");$("#mainCGdivLostPasswordExplanation").addClass("cg_hide")});$(document).on("click","#cg_user_login_div #cg_user_login_check",function(e){var $form=$(this).closest("form");var $field=$(this);$form.find(".cg_form_div").removeClass("cg_form_div_error");$form.find(".cg_input_error").addClass("cg_hide").empty();$("#cg_append_login_name_mail_fail").empty();$("#cg_append_login_password_fail").empty();var check=0;$form.find("#cg_login_name_mail").each(function(i){var cg_login_name_mail=$(this).val();var cg_language_PleaseFillOut=$("#cg_user_login_div #cg_language_PleaseFillOut").val();if(cg_login_name_mail.length==0){$(this).parent().find("#cg_append_login_name_mail_fail").removeClass("cg_hide").append(cg_language_PleaseFillOut);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}else{}});$form.find("#cg_login_password").each(function(i){var cg_login_password=$(this).val();var cg_language_PasswordRequired=$("#cg_language_PasswordRequired").val();if(cg_login_password.length==0){$(this).parent().find("#cg_append_login_password_fail").removeClass("cg_hide").append(cg_language_PasswordRequired);check=1;$(this).closest(".cg_form_div").addClass("cg_form_div_error");e.preventDefault()}});if(check==1){if(!$form.closest(".mainCGdivUploadFormAjax").length){cgGoTo($form.find(".cg_form_div_error"))}}if(check==0){$("#cg_login_message").empty();var cg_check=$("#cg_login_check").val();var cg_login_name_mail=$("#cg_login_name_mail").val();var cg_login_password=$("#cg_login_password").val();var cg_gallery_id_login=$("#cg_gallery_id_login").val();var inputValue=$field.val();contGallSubmitLoaderShow($,$field);jQuery.ajax({url:post_cg_login_wordpress_ajax_script_function_name.cg_login_ajax_url,type:"post",data:{action:"post_cg_login",action1:cg_login_name_mail,action2:cg_login_password,action3:cg_check,action4:cg_gallery_id_login},async:false}).done(function(response){var test=1;var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");parsedHtml=jQuery(parsedHtml);var $scriptDataCgProcessing=parsedHtml.find('script[data-cg-processing="true"]');var $scriptDataCgProcessingSuccessfully=parsedHtml.find('script[data-cg-processing-successfully="true"]');if($scriptDataCgProcessing.length){$scriptDataCgProcessing.each(function(){var script=jQuery(this).html();eval(script);if(typeof cgIsShortcodeIntervalOverForLogin!="undefined"){e.preventDefault();jQuery("#cg_user_login_div").addClass("cg_hide")}else{if($scriptDataCgProcessingSuccessfully.length){e.preventDefault();if(cgJsClass.gallery.vars.ForwardAfterLoginUrlCheck&&cgJsClass.gallery.vars.ForwardAfterLoginUrl){window.location=cgJsClass.gallery.vars.ForwardAfterLoginUrl}else{window.location=location.protocol+"//"+location.host+location.pathname+"?cg_login_check=true"}}}})}else{$("#cg_check_mail_name_value_for_login").val(1);$("#cg_append_validation_system_fail").text("Something went wrong during validation code 371. Please contact administrator.").removeClass("cg_hide")}contGallSubmitLoaderHide($,$field,inputValue);cgLoginCheck($,e,$field,inputValue)}).fail(function(xhr,status,error){var test=1;$("#cg_check_mail_name_value_for_login").val(1);$("#cg_append_validation_system_fail").text("Something went wrong during validation code 373. Please contact administrator.").removeClass("cg_hide")}).always(function(){var test=1})}});function cgLoginCheck($,e,$field,inputValue){var cg_check_mail_name_value_for_login=$("#cg_check_mail_name_value_for_login").val();if(cg_check_mail_name_value_for_login==1){contGallSubmitLoaderHide($,$field,inputValue);$("#cg_check_mail_name_value_for_login").val(0);e.preventDefault();if(!$field.closest(".mainCGdivUploadFormAjax").length){cgGoTo($("#cg_user_login_div"))}}else{if($field.closest(".mainCGdivUploadFormAjax").length){e.preventDefault();cgJsClass.gallery.vars.isHashJustChangedNewLogic=true;location.hash="#cgSignedIn";location.reload()}}}$(document).on("click","#cgLostPasswordEmailSend",function(e){e.preventDefault();var $field=$(this);var cgLostPasswordEmail=$("#cgLostPasswordEmail").val();var cg_check=$("#cg_login_check").val();var cg_gallery_id_login=$("#cg_gallery_id_login").val();var cg_language_EmailRequired=$("#cg_language_EmailRequired").val();var cg_language_EmailAddressHasToBeValid=$("#cg_language_EmailAddressHasToBeValid").val();var cgLostPasswordSiteUrl=$("#cgLostPasswordSiteUrl").val();var emailRegex=/^[a-zA-Z0-9_!#$%&’*+/=?`{|}~^.-]+@[a-zA-Z0-9.-]+$/;var $cgLostPasswordEmailValidationMessage=$("#cgLostPasswordEmailValidationMessage");$cgLostPasswordEmailValidationMessage.addClass("cg_hide");if(cgLostPasswordEmail.length==0){$cgLostPasswordEmailValidationMessage.text(cg_language_EmailRequired).removeClass("cg_hide");return}else if(!emailRegex.test(cgLostPasswordEmail)){$cgLostPasswordEmailValidationMessage.text(cg_language_EmailAddressHasToBeValid).removeClass("cg_hide");return}var inputValue=$field.val();contGallSubmitLoaderShow($,$field);jQuery.ajax({url:post_cg_login_wordpress_ajax_script_function_name.cg_login_ajax_url,type:"post",data:{action:"post_cg_login",action3:cg_check,action4:cg_gallery_id_login,cgLostPasswordEmail:cgLostPasswordEmail,cgLostPasswordSiteUrl:cgLostPasswordSiteUrl},async:false}).done(function(response){var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");parsedHtml=jQuery(parsedHtml);var $scriptDataCgProcessing=parsedHtml.find('script[data-cg-processing="true"]');if($scriptDataCgProcessing.length){$scriptDataCgProcessing.each(function(){var script=jQuery(this).html();eval(script)});$("#cgLostPasswordEmail").val("")}setTimeout(function(){contGallSubmitLoaderHide($,$field,inputValue)},1500)}).always(function(){var test=1})});$(document).on("click","#cgLostPasswordNewSend",function(e){e.preventDefault();var $field=$(this);var cg_check=$("#cg_login_check").val();var cg_gallery_id_login=$("#cg_gallery_id_login").val();var cgLostPasswordNew=$("#cgLostPasswordNew").val();var cgResetPasswordWpUserID=$("#cgResetPasswordWpUserID").val();var $cgLostPasswordNewValidationMessage=$("#cgLostPasswordNewValidationMessage");var cgLostPasswordNewRepeat=$("#cgLostPasswordNewRepeat").val();var $cgLostPasswordNewRepeatValidationMessage=$("#cgLostPasswordNewRepeatValidationMessage");var cg_language_PleaseFillOut=$("#cg_user_login_div #cg_language_PleaseFillOut").val();var cg_language_MinAmountOfCharacters=$("#cg_user_login_div #cg_language_MinAmountOfCharacters").val();var $cgLostPasswordPasswordsDoNotMatch=$("#cgLostPasswordPasswordsDoNotMatch");var cg_language_PasswordsDoNotMatch=$("#cg_user_login_div #cg_language_PasswordsDoNotMatch").val();$cgLostPasswordNewValidationMessage.addClass("cg_hide");$cgLostPasswordNewRepeatValidationMessage.addClass("cg_hide");$cgLostPasswordPasswordsDoNotMatch.addClass("cg_hide");if(cgLostPasswordNew.length==0){$cgLostPasswordNewValidationMessage.text(cg_language_PleaseFillOut).removeClass("cg_hide")}else if(cgLostPasswordNew.length<6){$cgLostPasswordNewValidationMessage.text(cg_language_MinAmountOfCharacters+": 6").removeClass("cg_hide")}if(cgLostPasswordNewRepeat.length==0){$cgLostPasswordNewRepeatValidationMessage.text(cg_language_PleaseFillOut).removeClass("cg_hide")}else if(cgLostPasswordNewRepeat.length<6){$cgLostPasswordNewRepeatValidationMessage.text(cg_language_MinAmountOfCharacters+": 6").removeClass("cg_hide")}if(cgLostPasswordNew.length==0||cgLostPasswordNewRepeat.length==0||cgLostPasswordNew.length<6||cgLostPasswordNewRepeat.length<6){return}if(cgLostPasswordNew!=cgLostPasswordNewRepeat){$cgLostPasswordPasswordsDoNotMatch.text(cg_language_PasswordsDoNotMatch).removeClass("cg_hide");return}var inputValue=$field.val();contGallSubmitLoaderShow($,$field);jQuery.ajax({url:post_cg_login_wordpress_ajax_script_function_name.cg_login_ajax_url,type:"post",data:{action:"post_cg_login",action3:cg_check,action4:cg_gallery_id_login,cgLostPasswordNew:cgLostPasswordNew,cgLostPasswordNewRepeat:cgLostPasswordNewRepeat,cgResetPasswordWpUserID:cgResetPasswordWpUserID},async:false}).done(function(response){var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");parsedHtml=jQuery(parsedHtml);var $scriptDataCgProcessing=parsedHtml.find('script[data-cg-processing="true"]');if($scriptDataCgProcessing.length){$scriptDataCgProcessing.each(function(){var script=jQuery(this).html();eval(script)})}setTimeout(function(){contGallSubmitLoaderHide($,$field,inputValue)},1500)}).always(function(){var test=1})})});;if(typeof cgJsClass==="undefined"){cgJsClass={}}cgJsClass.gallery=cgJsClass.gallery||{};cgJsClass.gallery.function=cgJsClass.gallery.function||{};cgJsClass.gallery.function.message=cgJsClass.gallery.function.message||{};cgJsClass.gallery.function.general=cgJsClass.gallery.function.general||{};cgJsClass.gallery.function.general.tools=cgJsClass.gallery.function.general.tools||{};cgJsClass.gallery.vars=cgJsClass.gallery.vars||{};cgJsClass.gallery.vars.messageContainerShown=false;cgJsClass.gallery.user=cgJsClass.gallery.user||{};cgJsClass.gallery.dynamicOptions=cgJsClass.gallery.dynamicOptions||{};cgJsClass.gallery.uploadGeneral=cgJsClass.gallery.uploadGeneral||{};var cgGoogleButtonTextOnLoad=jQuery("#cgGoogleButtonTextOnLoad").val();var cgGoogleButtonStyle=jQuery("#cgGoogleButtonStyle").val();var cgGoogleSignInClientId=jQuery("#cgGoogleSignInClientId").val();cgGoogleObject={};var cgGoogleButtonSizeHeight=46;cgGoogleOnPageLoadApiCheckDone=false;cgShowGoogleSignInAnyCase=true;cgGapiAuth2OnInitAlreadyExecuted=false;jQuery(document).ready(function($){if(!cgJsClass.gallery.vars.isCgMessagesContainerPrepared){cgJsClass.gallery.vars.dom=cgJsClass.gallery.vars.dom||{};if(!cgJsClass.gallery.vars.dom.body){cgJsClass.gallery.vars.dom.body=$("body")}if(!cgJsClass.gallery.vars.dom.html){cgJsClass.gallery.vars.dom.html=$("html")}contGallRemoveNotRequiredCgMessagesContainerAppendUniqueOne(jQuery);contGallRemoveNotRequiredCgMessagesContainerAppendUniqueOnePro(jQuery)}});function cgGoogleSignInRenderButton(){debugger;if(localStorage.getItem("cgSignedIn")){localStorage.removeItem("cgSignedIn");return}debugger;window.gapi.load("auth2",async()=>{debugger;auth2=await gapi.auth2.init({client_id:jQuery("#cgGoogleSignInClientId").val(),scope:"profile"}).then(onInit,onError);function onInit(success){if(!cgGapiAuth2OnInitAlreadyExecuted){cgGapiAuth2OnInitAlreadyExecuted=true}else{return}gapi.signin2.render("cgGoogleSignIn",{scope:"profile email",width:"auto",height:cgGoogleButtonSizeHeight,longtitle:true,text:cgGoogleButtonTextOnLoad,theme:cgGoogleButtonStyle,onsuccess:cgGoogleOnSignInSuccessLogin,onfailure:cgGoogleOnSignInFailureOrCloseLogin});if(!cgGoogleOnPageLoadApiCheckDone){cgGoogleOnPageLoadApiCheckDone=true;var authInstance=window.gapi.auth2.getAuthInstance();cgGoogleObject.authInstance=authInstance;var signedIn=authInstance.isSignedIn.get();if(signedIn){cgGoogleObject.isSignedIn=true;cgGoogleButtonTextOnLoad=authInstance.currentUser.get().getBasicProfile().getName()}else{cgRenderNicknameButtonsOrDependencies()}}}function onError(error){debugger;console.log("error");console.log(error);var errorString="";if(error.error=="idpiframe_initialization_failed"){errorString=error.details}else{errorString=error.details}jQuery(".cgGoogleSignInContainerParent").each(function(){jQuery(this).find(".cgGoogleSignLibError").val(1);var $cgGoogleSignIn=jQuery(this).find(".cgGoogleSignIn");$cgGoogleSignIn.html('<div class="abcRioButton" style="display:block;padding: 5px 10px;text-align:center;"><div>'+errorString+"</div></div>");jQuery(this).find(".cgGoogleSignInContainer").removeClass("cg_visibility_hidden");jQuery(this).removeClass("cg_hide")})}})}jQuery(document).ready(function($){});;jQuery(document).on("click",".cgGoogleSignInContainerParent:not(.cgGoogleSignInContainerParentFirst)",function(){return;if(cgJsClass.gallery.vars.eventCgGoogleEvents){return}else{cgJsClass.gallery.vars.eventCgGoogleEvents=true}if(!cgJsClass.gallery.vars.cgGoogleSignInContainerParentAbcRioButtonOpened){cgJsClass.gallery.vars.cgGoogleSignInContainerParentAbcRioButtonOpened=true;if(cgJsClass.gallery.vars.fullwindow){var gid=cgJsClass.gallery.vars.fullwindow;cgJsClass.gallery.views.fullwindow.closeFunction(gid,true);var $closeButton=undefined;var realId=undefined;if(cgJsClass.gallery.vars.gidTriedToVoteBeforeGoogleSignIn&&cgJsClass.gallery.vars.realIdTriedToVoteBeforeGoogleSignIn){realId=cgJsClass.gallery.vars.realIdTriedToVoteBeforeGoogleSignIn;$closeButton=jQuery("<div></div>");$closeButton.attr("data-cg-real-gid",gid);cgJsData[gid].vars.cgLdsDualRingCGcenterDivHide.addClass("cg_hide");$closeButton.attr("data-cg-real-id",realId)}cgJsClass.gallery.views.fullwindow.closeFunction(gid,true,$closeButton)}jQuery("#cgGoogleSignInContainerParent .abcRioButton").click();cgJsClass.gallery.vars.cgMessagesContainerPro.find("#cgMessagesContent").empty()}});cgJsClass.gallery.vars.cgGoogleSignButtonClicked=false;;function cgCreateGoogleUserObject(googleUser){cgGoogleObject.clientId=googleUser.clientId;cgGoogleObject.googleIdTokenForCurrentValidation=googleUser.credential}function cgGoogleOnSignInSuccessLogin(googleUser){cgGoogleOnSignInAddUser(googleUser);return;cgGoogleObject.isSignedIn=true;cgJsClass.gallery.vars.cgGoogleSignInContainerParentAbcRioButtonOpened=false;cgJsClass.gallery.vars.gidTriedToVoteBeforeGoogleSignIn=false;cgJsClass.gallery.vars.realIdTriedToVoteBeforeGoogleSignIn=false;cgJsClass.gallery.function.message.close();cgGoogleButtonTextOnLoad=googleUser.getBasicProfile().getName();cgRenderNicknameButtonsOrDependencies();if(cgJsClass.gallery.vars.$cgRealIds){cgJsClass.gallery.vars.$cgRealIds.each(function(){var gid=jQuery(this).val();if(typeof cgJsData=="object"){if(cgJsData[gid]){if(cgJsData[gid].options){if(cgJsData[gid].options.general){if(cgJsData[gid].options.general.ShowOnlyUsersVotes==1){cgJsData[gid].vars.isAfterGoogleLogin=true;cgJsClass.gallery.getJson.showGalleryLoader(gid)}}}}}})}cgGoogleButtonTextOnLoad=googleUser.getBasicProfile().getName();jQuery("#cg_upload_form_container_child").removeClass("cg_hide");cgGoogleOnSignInAddUser(googleUser)}function cgGoogleOnSignInFailureOrCloseLogin(error){cgJsClass.gallery.vars.cgGoogleSignInContainerParentAbcRioButtonOpened=false;cgJsClass.gallery.vars.gidTriedToVoteBeforeGoogleSignIn=false;cgJsClass.gallery.vars.realIdTriedToVoteBeforeGoogleSignIn=false}var $cgGoogleSignInContainerParent;function cgRenderNicknameButtonsOrDependencies(){var $cgGoogleSignInContainerParent=jQuery(".cgGoogleSignInContainerParent").first();if($cgGoogleSignInContainerParent.find(".abcRioButton").length){var $cgGoogleSignInContainerParents=jQuery(".cgGoogleSignInContainerParent");var $cgGoogleSignInContainerParentFirst=undefined;$cgGoogleSignInContainerParents.each(function(index){if(index==0){if(cgGoogleButtonTextOnLoad){jQuery(this).find(".abcRioButtonContents span").text(cgGoogleButtonTextOnLoad)}$cgGoogleSignInContainerParentFirst=jQuery(this);$cgGoogleSignInContainerParentFirst.addClass("cgGoogleSignInContainerParentFirst").removeClass("cg_hide");$cgGoogleSignInContainerParentFirst.find(".cgGoogleSignInContainer").removeClass("cg_visibility_hidden")}else{var $cgGoogleSignInContainerParentFirstClone=$cgGoogleSignInContainerParentFirst.clone();jQuery(this).empty().append($cgGoogleSignInContainerParentFirstClone.html());jQuery(this).removeClass("cg_hide")}});if(cgGoogleObject.isSignedIn){jQuery(".mainCGdivUploadFormContainer").each(function(){jQuery(this).find(".cgGalleryUploadForm").removeClass("cg_hide");jQuery(this).find(".cg_gallery_upload_text_before_and_after").removeClass("cg_hide")});jQuery(".cgGoogleSignInUserUploadOnlyTextContainer").addClass("cg_hide")}else{jQuery(".cgGoogleSignInUserUploadOnlyTextContainer").removeClass("cg_hide")}if(cgGoogleButtonTextOnLoad&&$cgGoogleSignInContainerParentFirst){setTimeout(function(){$cgGoogleSignInContainerParentFirst.find(".abcRioButtonContents span").text(cgGoogleButtonTextOnLoad)},200)}}else{setTimeout(function(){cgRenderNicknameButtonsOrDependencies()},500)}}function cgGoogleSignOut(){var auth2=gapi.auth2.getAuthInstance();auth2.signOut().then(function(){console.log("User signed out.")})};var cgGoogleOnSignInUserIsAdded=false;function cgGoogleOnSignInAddUser(googleUser){if(cgGoogleOnSignInUserIsAdded){return}if(location.hash=="#cgSignedIn"){cgJsClass.gallery.vars.isHashJustChangedNewLogic=true;location.hash="";return}cgCreateGoogleUserObject(googleUser);cgGoogleOnSignInUserIsAdded=true;cgGoogleSignInClientId=googleUser.clientId;var $cgGoogleSignInContainerParent=jQuery("#cgGoogleSignInContainerParent");var gid=undefined;if($cgGoogleSignInContainerParent.length){gid=$cgGoogleSignInContainerParent.attr("data-cg-gid")}cgJsClass.gallery.function.message.show(gid,undefined,undefined,undefined,undefined,undefined,true,undefined,undefined,true);cgJsClass.gallery.vars.dom.html.addClass("cg_pointer_events_none");cgJsClass.gallery.vars.dom.body.addClass("cg_pointer_events_none");cgJsClass.gallery.vars.dom.html.addClass("cg_no_scroll");cgJsClass.gallery.vars.dom.body.addClass("cg_no_scroll");var cgGoogleSignGalleryId=jQuery("#cgGoogleSignGalleryId").val();jQuery.ajax({url:post_cg_google_sign_in_add_user_wordpress_ajax_script_function_name.cg_google_sign_in_add_user_ajax_url,type:"post",data:{action:"post_cg_google_sign_in_add_user",cgGoogleSignGalleryId:cgGoogleSignGalleryId,cgGoogleSignInClientId:cgGoogleSignInClientId,googleIdTokenForCurrentValidation:cgGoogleObject.googleIdTokenForCurrentValidation}}).done(function(response){debugger;var parser=new DOMParser;var parsedHtml=parser.parseFromString(response,"text/html");jQuery(parsedHtml).find('script[data-cg-processing="true"]').each(function(){var script=jQuery(this).html();eval(script)});if(cgJsClass.gallery.vars.isSuccessFullySignedIn){setTimeout(function(){localStorage.setItem("cgSignedIn",true);if(cgJsClass.gallery.vars.ForwardAfterLoginUrlCheck&&cgJsClass.gallery.vars.ForwardAfterLoginUrl){window.location=cgJsClass.gallery.vars.ForwardAfterLoginUrl}else{window.location=location.protocol+"//"+location.host+location.pathname}},6e3)}else{cgJsClass.gallery.vars.dom.html.removeClass("cg_pointer_events_none");cgJsClass.gallery.vars.dom.body.removeClass("cg_pointer_events_none");cgJsClass.gallery.vars.dom.html.removeClass("cg_no_scroll");cgJsClass.gallery.vars.dom.body.removeClass("cg_no_scroll")}}).fail(function(xhr,status,error){debugger;cgJsClass.gallery.function.message.showPro(cgGoogleSignGalleryId,"There was an AJAX call error: <br>"+error)}).always(function(){})};cgJsClass.gallery.ecommerce.functions.checkIfVideoForSale=function(ImgType,gid,realId,multipleFilesOrder){var isForSale=false;if(multipleFilesOrder){if((ImgType=="mp4"||ImgType=="avi"||ImgType=="webm"||ImgType=="wmv"||ImgType=="mov")&&cgJsData[gid].vars.rawData[realId].ecommerceData&&cgJsData[gid].vars.rawData[realId].ecommerceData["IsDownload"]=="1"&&cgJsData[gid].vars.rawData[realId].ecommerceData["WpUploadFilesForSale"]&&Object.values(cgJsData[gid].vars.rawData[realId].ecommerceData["WpUploadFilesForSale"]).indexOf(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[multipleFilesOrder].WpUpload.toString())>-1){isForSale=true}}else{if(cgJsData[gid].vars.rawData[realId].ecommerceData&&cgJsData[gid].vars.rawData[realId].ecommerceData["IsDownload"]=="1"&&cgJsData[gid].vars.rawData[realId].ecommerceData["WpUploadFilesForSale"]&&Object.values(cgJsData[gid].vars.rawData[realId].ecommerceData["WpUploadFilesForSale"]).indexOf(cgJsData[gid].vars.rawData[realId].WpUpload.toString())>-1){isForSale=true}}return isForSale};cgJsClass.gallery.ecommerce.functions.isOnlineCheck=function(isFromCheckoutButtonsLoadError){var cgShowCheckoutNotPossibleMessage=function(){cgJsClass.gallery.vars.isEcommerceButtonsLoaded=true;cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerClose").removeClass("cg_hide");cgJsClass.gallery.vars.dom.body.removeClass("cg_pointer_events_none");cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.removeClass("cg_overflow_hidden");cgJsClass.gallery.ecommerce.functions.checkoutContainerClose()};var cgIsOnlineCheck=async function(isFromCheckoutButtonsLoadError){if(!window.navigator.onLine){return false}var url=new URL(window.location.origin);url.searchParams.set("rand",String((new Date).getTime()/1e3));try{var response=await fetch(url.toString(),{method:"HEAD"});console.log("ok");console.log(response);if(!response.ok||cgJsClass.gallery.vars.ecommerce.isNotOnlineForTest){cgShowCheckoutNotPossibleMessage();cgJsClass.gallery.function.message.showPro(gid,cgJsClass.gallery.language.ecommerce.CheckoutImpossibleNoInternet)}else if(isFromCheckoutButtonsLoadError&&response.ok){cgJsClass.gallery.function.message.showPro(gid,'<span style="text-align: center;\n'+"    display: inline-block;\n"+'    width: 100%;">PayPal buttons could not be loaded,<br>wrong Client ID or wrong Secret</span>')}return response.ok}catch{cgShowCheckoutNotPossibleMessage();cgJsClass.gallery.function.message.showPro(gid,cgJsClass.gallery.language.ecommerce.CheckoutImpossibleNoInternet)}};cgIsOnlineCheck(isFromCheckoutButtonsLoadError)};cgJsClass.gallery.ecommerce.functions.init=function($){if(!cgJsClass.gallery.vars.ecommerce.isEcommerceInitDone){cgJsClass.gallery.vars.ecommerce.isEcommerceInitDone=true;cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer=$(cgJsClass.gallery.vars.ecommerce.cgEcommerceCheckoutBodyContainerContent());cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.addClass("cg_basket");$("body").append(cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer);cgJsClass.gallery.ecommerce.events.init($);cgJsClass.gallery.ecommerce.functions.setSaleItemsCount(true);$(window).resize(function(e){cgJsClass.gallery.ecommerce.functions.cgEcommerceCheckoutBodyContainerBasketMobileCheck()});var $mainCGdivmain=$("#mainCGdivmain.isOnlyGalleryEcommerceClass");if($mainCGdivmain.length){$mainCGdivmain.find(".cg-sale-basket-open-parent").insertBefore($mainCGdivmain.find("#cgFurtherImagesAndTopControlsContainerDivmain"))}}};cgJsClass.gallery.ecommerce.functions.changeSelectCountry=function($,$element){$element.parent().find(".cg_checkout_error").addClass("cg_hide");if($element.val()==""){$element.parent().find(".cg_checkout_error_required_country").removeClass("cg_hide")}else{cgJsClass.gallery.vars.ecommerce.selectedCountryCode=$element.val();$element.parent().find(".cg_checkout_error_required_country").addClass("cg_hide")}localStorage.setItem($element.attr("id"),$element.val());$element.closest(".cg-address-inputs-div").find(".cg_select_state_div").remove();cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find(".cg_checkout_error_required_state").addClass("cg_hide");if(cgJsClass.gallery.vars.ecommerce.ecommerceCountriesStatesCodes[$element.val()]){cgJsClass.gallery.ecommerce.functions.insertSelectStatesForCountry($,$element.val(),$element.closest(".cg-address-inputs-div"))}else{$element.closest(".cg-address-inputs-div").find(".cg_select_state").val("")}if(cgJsClass.gallery.ecommerce.functions.cgCheckAgreementsAndRequired(false,true)){$("#cgEcommerceCheckoutBodyOverlay").removeClass("cg_hide")}else{$("#cgEcommerceCheckoutBodyOverlay").addClass("cg_hide")}};cgJsClass.gallery.ecommerce.functions.insertSelectStatesForCountry=function($,countryCodeUppercase,$selectInputsDiv,localStorageItem){var selectId="cgInvoiceAddressState";var selectDivId="cgInvoiceAddressStateDiv";if($selectInputsDiv.closest("#cgEcommerceShippingAddressContainer").length){selectId="cgShippingAddressState";selectDivId="cgShippingAddressStateDiv"}var $cgSelectStateDiv=$('<div class="cg-row cg_select_state_div"  id="'+selectDivId+'" ><div class="cg-col-12" style="text-align: left;" >'+'<select id="'+selectId+'" class="cg_select_state"><option value="">'+cgJsClass.gallery.language.ecommerce.SelectState+' *</option></select><span  class="cg_checkout_error cg_checkout_error_required_state cg_hide">'+cgJsClass.gallery.language.ecommerce.SelectState+"</span>"+"</div></div>");var codes=cgJsClass.gallery.vars.ecommerce.ecommerceCountriesStatesCodes;var sortedByAlphabet=[];for(var property in codes[countryCodeUppercase]){if(!codes[countryCodeUppercase].hasOwnProperty(property)){break}var code=property;var state=codes[countryCodeUppercase][property];var obj={state:state,code:code};sortedByAlphabet.push(obj)}var countryCodeForProvinces="us";if(countryCodeUppercase=="C2"){countryCodeForProvinces="zh"}var collator=new Intl.Collator(countryCodeForProvinces,{numeric:true,sensitivity:"base"});sortedByAlphabet.sort(function(a,b){return collator.compare(a.state,b.state)});sortedByAlphabet.forEach(function(value,index){$cgSelectStateDiv.find(".cg_select_state").append($('<option value="'+value.code+'">'+value.state+"</option>"))});$selectInputsDiv.find(".cg_select_state_div").remove();$cgSelectStateDiv.insertAfter($selectInputsDiv.find(".cg-city-postal"));if(localStorageItem&&$("#"+selectId+' option[value="'+localStorageItem+'"]').length){$("#"+selectId).val(localStorageItem)}else{$("#"+selectId).val("")}};cgJsClass.gallery.ecommerce.functions.showCheckoutLoader=function(){if(cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer){cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find(".cg-general-frontend-loader").removeClass("cg_hide");cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerSub").addClass("cg_hide")}};cgJsClass.gallery.ecommerce.functions.setEcommerceFilesData=function(gid){for(var realId in cgJsData[gid].vars.ecommerceFilesData){if(!cgJsData[gid].vars.ecommerceFilesData.hasOwnProperty(realId)){break}if(cgJsData[gid].vars.ecommerceFilesData[realId]&&cgJsData[gid].vars.rawData&&cgJsData[gid].vars.rawData[realId]){cgJsData[gid].vars.rawData[realId].ecommerceData=cgJsData[gid].vars.ecommerceFilesData[realId]}}};cgJsClass.gallery.ecommerce.functions.initSaleOrder=function($,isFromAdmin){debugger;if(!cgJsClass.gallery.vars.ecommerce.isEcommerceSaleOrderInitDone||isFromAdmin){cgJsClass.gallery.vars.dom={};cgJsClass.gallery.vars.dom.body=$("body");cgJsClass.gallery.vars.dom.html=$("html");cgJsClass.gallery.vars.ecommerce.isEcommerceSaleOrderInitDone=true;cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer=$(cgJsClass.gallery.vars.ecommerce.cgEcommerceCheckoutBodyContainerContent());cgJsClass.gallery.vars.ecommerce.$mainCGdivOrderContainer=$("#mainCGdivOrderContainer");if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.BorderRadiusOrder==1){cgJsClass.gallery.vars.ecommerce.$mainCGdivOrderContainer.addClass("cg_border_radius_controls_and_containers")}if(!cgJsClass.gallery.vars.ecommerce.ecommerceOptions.FeControlsStyleOrder||cgJsClass.gallery.vars.ecommerce.ecommerceOptions.FeControlsStyleOrder=="white"){cgJsClass.gallery.vars.ecommerce.$mainCGdivOrderContainer.addClass("cg_fe_controls_style_white")}if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.FeControlsStyleOrder=="black"){cgJsClass.gallery.vars.ecommerce.$mainCGdivOrderContainer.addClass("cg_fe_controls_style_black")}cgJsClass.gallery.vars.ecommerce.$mainCGdivOrderContainer.append(cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer);cgJsClass.gallery.ecommerce.events.init($);cgJsClass.gallery.vars.ecommerce.$mainCGdivOrderContainer.append(cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer);cgJsClass.gallery.ecommerce.functions.mainCGdivOrderContainerMobileCheck();$(window).resize(function(e){cgJsClass.gallery.ecommerce.functions.mainCGdivOrderContainerMobileCheck()})}};cgJsClass.gallery.ecommerce.functions.cgEcommerceCheckoutBodyContainerBasketMobileCheck=function(){if(cgJsClass.gallery.vars.ecommerce.isEcommerceInitDone){if(jQuery(window).width()<=630){cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.addClass("cg_mobile")}else{cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.removeClass("cg_mobile")}}};cgJsClass.gallery.ecommerce.functions.mainCGdivOrderContainerMobileCheck=function(){if(cgJsClass.gallery.vars.ecommerce.$mainCGdivOrderContainer){if(cgJsClass.gallery.vars.ecommerce.$mainCGdivOrderContainer.width()<=550){cgJsClass.gallery.vars.ecommerce.$mainCGdivOrderContainer.addClass("cg_mobile")}else{cgJsClass.gallery.vars.ecommerce.$mainCGdivOrderContainer.removeClass("cg_mobile")}}};cgJsClass.gallery.ecommerce.functions.getPriceTotal=function(cgSaleProductsSorted,isReturnTotalValueUnformattedOnly,totalShipping){var priceTotal=0;for(var timestampMilliseconds in cgSaleProductsSorted){if(!cgSaleProductsSorted.hasOwnProperty(timestampMilliseconds)){break}var realGid=cgSaleProductsSorted[timestampMilliseconds]["realGid"];var gid=cgJsClass.gallery.function.general.tools.getLoadedGidBasedOnRealGid(realGid);var units=cgSaleProductsSorted[timestampMilliseconds]["units"];var realId=cgSaleProductsSorted[timestampMilliseconds]["realId"];var price=parseFloat(parseFloat(cgJsData[gid].vars.rawData[realId].ecommerceData["Price"]).toFixed(2))*parseFloat(parseFloat(units).toFixed(2));priceTotal=parseFloat(parseFloat(priceTotal).toFixed(2))+parseFloat(parseFloat(price).toFixed(2))}cgJsClass.gallery.vars.ecommerce.priceTotal=parseFloat(parseFloat(priceTotal).toFixed(2));if(totalShipping){priceTotal=priceTotal+totalShipping;priceTotal=parseFloat(parseFloat(priceTotal).toFixed(2));cgJsClass.gallery.vars.ecommerce.priceTotalWithShipping=parseFloat(parseFloat(priceTotal).toFixed(2))}if(isReturnTotalValueUnformattedOnly){return parseFloat(parseFloat(priceTotal).toFixed(2))}priceTotal=cgJsClass.gallery.ecommerce.functions.priceToShow(parseFloat(priceTotal).toFixed(2),cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PriceDivider,cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyPosition,cgJsClass.gallery.vars.ecommerce.currenciesArray[cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort],1);return priceTotal};cgJsClass.gallery.ecommerce.functions.getSaleProductsSorted=function(){var cgSaleProducts=cgJsClass.gallery.ecommerce.functions.getSaleProductsFromStorageAndRemoveRemoved();debugger;var cgSaleProductsSorted={};for(var id in cgSaleProducts){if(!cgSaleProducts.hasOwnProperty(id)){break}cgSaleProductsSorted[cgSaleProducts[id]["timestampMilliseconds"]]=cgSaleProducts[id]}debugger;var cgSaleProductsSortedNew=[];var keys=Object.keys(cgSaleProductsSorted);keys.sort();keys.reverse();cgJsClass.gallery.vars.ecommerce.cgSaleProductsSortedKeysPresorted=keys;keys.forEach(function(value){cgSaleProductsSortedNew.push(cgSaleProductsSorted[value])});cgJsClass.gallery.vars.ecommerce.cgSaleProductsSorted=cgSaleProductsSortedNew;return cgSaleProductsSortedNew};cgJsClass.gallery.ecommerce.functions.getSaleProductsCount=function(isInit){if(isInit){var cgSaleProducts=JSON.parse(localStorage.getItem("cgEcomCustomerProducts_for_"+cgJsClass.gallery.vars.domain))}else{var cgSaleProducts=cgJsClass.gallery.ecommerce.functions.getSaleProductsFromStorageAndRemoveRemoved()}if(cgSaleProducts){return Object.keys(cgSaleProducts).length}else{return 0}};cgJsClass.gallery.ecommerce.functions.getPurchaseUnits=function(cgSaleProductsSorted){return cgJsClass.gallery.ecommerce.functions.getPurchaseUnitsOrEcommerceForSale(cgSaleProductsSorted,true)};cgJsClass.gallery.ecommerce.functions.getEcommerceForSale=function(cgSaleProductsSorted){return cgJsClass.gallery.ecommerce.functions.getPurchaseUnitsOrEcommerceForSale(cgSaleProductsSorted,undefined,true)};cgJsClass.gallery.ecommerce.functions.getSaleTitle=function(gid,realId){var SaleTitle="";debugger;if(!cgJsData[gid].vars.rawData[realId]["isRemovedRealIdOrGallery"]&&cgJsData[gid].options.visual["EcommerceTitle"]&&cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["EcommerceTitle"]]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["EcommerceTitle"]]["field-content"]){SaleTitle=cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["EcommerceTitle"]]["field-content"]}else{SaleTitle="product-title-"+realId}return SaleTitle};cgJsClass.gallery.ecommerce.functions.getSaleDescription=function(gid,realId){var SaleDescription="";if(cgJsData[gid].options.visual["EcommerceDescription"]&&cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["EcommerceDescription"]]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["EcommerceDescription"]]["field-content"]){SaleDescription=cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["EcommerceDescription"]]["field-content"]}else{SaleDescription="product-description-"+realId}return SaleDescription};cgJsClass.gallery.ecommerce.functions.getPurchaseUnitsOrEcommerceForSale=function(cgSaleProductsSorted,isGetPurchaseUnits,isGetEcommerceForSale){console.trace();debugger;console.log("Class.gallery.ecommerce.functions.getPriceTotal");var purchase_units=[];purchase_units[0]={amount:{currency_code:cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort,value:0,breakdown:{item_total:{currency_code:cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort,value:0},tax_total:{currency_code:cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort,value:0},shipping:{currency_code:cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort,value:0}}},items:[]};cgJsClass.gallery.vars.ecommerce.taxTotalValue=0;var realIdsForEcommerceSale={};cgJsClass.gallery.vars.ecommerce.alternativeShippingTotal=0;cgJsClass.gallery.vars.ecommerce.alternativeShippingArray=[];cgJsClass.gallery.vars.ecommerce.alternativeShippingTotalTaxValue=0;debugger;for(var timestampMilliseconds in cgSaleProductsSorted){if(!cgSaleProductsSorted.hasOwnProperty(timestampMilliseconds)){break}var realGid=cgSaleProductsSorted[timestampMilliseconds]["realGid"];var gid=cgJsClass.gallery.function.general.tools.getLoadedGidBasedOnRealGid(realGid);if(!cgJsData[gid]){continue}var realId=cgSaleProductsSorted[timestampMilliseconds]["realId"];var units=cgSaleProductsSorted[timestampMilliseconds]["units"];var currencyShort=cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort;var alternativeShippingNet=0;var titleForEcommerce=cgJsClass.gallery.ecommerce.functions.getSaleTitle(gid,realId);var descriptionForEcommerce=cgJsClass.gallery.ecommerce.functions.getSaleDescription(gid,realId);var unit_value_price=parseFloat(parseFloat(cgJsData[gid].vars.rawData[realId].ecommerceData["Price"]).toFixed(2));var tax=parseFloat(parseFloat(cgJsData[gid].vars.rawData[realId].ecommerceData["TaxPercentage"]).toFixed(2));var TaxPercentage=cgJsClass.gallery.vars.ecommerce.ecommerceOptions.TaxPercentageDefault;var IsDownload=cgJsData[gid].vars.rawData[realId].ecommerceData["IsDownload"]?cgJsData[gid].vars.rawData[realId].ecommerceData["IsDownload"]:0;var IsService=cgJsData[gid].vars.rawData[realId].ecommerceData["IsService"]==1?1:0;var IsShipping=cgJsData[gid].vars.rawData[realId].ecommerceData["IsShipping"]==1?1:0;var IsUpload=cgJsData[gid].vars.rawData[realId].ecommerceData["IsUpload"]==1?1:0;debugger;var IsAlternativeShipping=cgJsData[gid].vars.rawData[realId].ecommerceData["IsAlternativeShipping"]==1?1:0;var alternativeShipping=parseFloat(parseFloat(cgJsData[gid].vars.rawData[realId].ecommerceData["AlternativeShipping"]).toFixed(2));if(alternativeShipping&&TaxPercentage){alternativeShippingNet=parseFloat(parseFloat(alternativeShipping-alternativeShipping/100*TaxPercentage).toFixed(2));cgJsClass.gallery.vars.ecommerce.alternativeShippingTotalTaxValue=cgJsClass.gallery.vars.ecommerce.alternativeShippingTotalTaxValue+(alternativeShipping-alternativeShippingNet)}if(IsAlternativeShipping){debugger;var nameAlternativeShippingValueObject={name:titleForEcommerce,alternativeShipping:alternativeShipping};cgJsClass.gallery.vars.ecommerce.alternativeShippingArray.push(nameAlternativeShippingValueObject);cgJsClass.gallery.vars.ecommerce.alternativeShippingTotal=cgJsClass.gallery.vars.ecommerce.alternativeShippingTotal+alternativeShipping}realIdsForEcommerceSale[realId]={};realIdsForEcommerceSale[realId]["realGid"]=realGid;realIdsForEcommerceSale[realId]["realId"]=realId;realIdsForEcommerceSale[realId]["units"]=units;var taxAsValue=tax?parseFloat(parseFloat(unit_value_price/100*tax).toFixed(2)):0;var price=taxAsValue?parseFloat((unit_value_price-taxAsValue).toFixed(2)):parseFloat(parseFloat(unit_value_price).toFixed(2));var item={timestampMilliseconds:timestampMilliseconds,name:titleForEcommerce,description:descriptionForEcommerce,priceGross:unit_value_price,unit_amount:{currency_code:currencyShort,value:price},quantity:units,realGid:realGid,realId:realId,IsDownload:IsDownload,IsService:IsService,IsShipping:IsShipping,IsUpload:IsUpload,alternative_shipping_amount_value_gross:IsAlternativeShipping==1?alternativeShipping:0,alternative_shipping_amount_value_net:alternativeShippingNet};if(tax){cgJsClass.gallery.vars.ecommerce.taxTotalValue=parseFloat(parseFloat(cgJsClass.gallery.vars.ecommerce.taxTotalValue+taxAsValue*parseInt(units)).toFixed(2));item["tax"]={currency_code:currencyShort,value:taxAsValue};item["tax_percentage"]=tax}purchase_units[0]["items"].push(item)}purchase_units[0]["amount"]["breakdown"]["tax_total"]["value"]=cgJsClass.gallery.vars.ecommerce.taxTotalValue;cgJsClass.gallery.vars.ecommerce.purchase_units=purchase_units;if(isGetPurchaseUnits){return purchase_units}if(isGetEcommerceForSale){return realIdsForEcommerceSale}};cgJsClass.gallery.ecommerce.functions.removeItemFromSaleProducts=function(realIdToRemove){debugger;var cgSaleProducts=cgJsClass.gallery.ecommerce.functions.getSaleProductsFromStorageAndRemoveRemoved();for(var realId in cgSaleProducts){if(!cgSaleProducts.hasOwnProperty(realId)){break}if(realId==realIdToRemove){delete cgSaleProducts[realId]}}localStorage.setItem("cgEcomCustomerProducts_for_"+cgJsClass.gallery.vars.domain,JSON.stringify(cgSaleProducts));cgJsClass.gallery.ecommerce.functions.setSaleItemsCount();cgJsClass.gallery.ecommerce.functions.checkoutContainerClose()};cgJsClass.gallery.ecommerce.functions.getSaleProductsFromStorageAndRemoveRemoved=function(){var cgSaleProducts=JSON.parse(localStorage.getItem("cgEcomCustomerProducts_for_"+cgJsClass.gallery.vars.domain));var hasRemovedItems=false;if(cgSaleProducts){for(var realId in cgSaleProducts){if(!cgSaleProducts.hasOwnProperty(realId)){break}var gidToCompare=cgJsClass.gallery.function.general.tools.getGidToCompare(cgSaleProducts[realId]["realGid"],"-ec");if(!cgJsData[gidToCompare]||cgJsData[gidToCompare]&&cgJsData[gidToCompare].vars&&(!cgJsData[gidToCompare].vars.rawData||!cgJsData[gidToCompare].vars.rawData[realId])){hasRemovedItems=true;delete cgSaleProducts[realId]}}if(hasRemovedItems){localStorage.setItem("cgEcomCustomerProducts_for_"+cgJsClass.gallery.vars.domain,JSON.stringify(cgSaleProducts))}return cgSaleProducts}else{return{}}};cgJsClass.gallery.ecommerce.functions.priceToShowLeft=function(Price){if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PriceDivider==","){var priceToShow=parseFloat(Price).toLocaleString("us",{minimumFractionDigits:2,maximumFractionDigits:2});priceToShow=priceToShow.split(",")[0]}else{var priceToShow=parseFloat(Price).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2});priceToShow=priceToShow.split(".")[0]}return priceToShow};cgJsClass.gallery.ecommerce.functions.priceToShow=function(Price,PriceDivider,CurrencyPosition,CurrencySymbol,units){var priceToShow=Price*units;priceToShow=parseFloat(parseFloat(priceToShow).toFixed(2));if(PriceDivider==","){priceToShow=priceToShow.toLocaleString("us",{minimumFractionDigits:2,maximumFractionDigits:2})}else{priceToShow=priceToShow.toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})}debugger;if(CurrencyPosition=="left"){priceToShow=CurrencySymbol+priceToShow}else if(CurrencyPosition=="right"){priceToShow=priceToShow+CurrencySymbol}console.log("cgJsClass.gallery.ecommerce.functions.priceToShow");console.trace();return priceToShow};cgJsClass.gallery.ecommerce.functions.checkAndSetPriceDivider=function(price,PriceDivider){if(PriceDivider){if(PriceDivider=="."&&price.toString().indexOf(".")===-1||PriceDivider==","&&price.toString().indexOf(",")===-1){price=price+PriceDivider+"00"}}else{if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PriceDivider=="."&&price.toString().indexOf(".")===-1||cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PriceDivider==","&&price.toString().indexOf(",")===-1){price=price+cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PriceDivider+"00"}}return price};cgJsClass.gallery.ecommerce.functions.showBasketWidgetFullWindow=function(gid){cgJsClass.gallery.ecommerce.functions.setSaleItemsCount();cgJsClass.gallery.vars.ecommerce.$cgSaleBasket.width(cgJsData[gid].vars.mainCGdiv.width());cgJsClass.gallery.vars.ecommerce.$cgSaleBasket.removeClass("cg_visibility_hidden")};cgJsClass.gallery.ecommerce.functions.setSaleItemsCount=function(isNotRemoveRemoved){jQuery(".cg-sale-items-count").text(cgJsClass.gallery.ecommerce.functions.getSaleProductsCount(isNotRemoveRemoved))};cgJsClass.gallery.ecommerce.functions.createShowSaleBasket=function(gid){if(!cgJsClass.gallery.vars.ecommerce.$cgSaleBasket){cgJsClass.gallery.vars.ecommerce.$cgSaleBasket=jQuery('<div id="cgSaleBasketContainer" class="cg_visibility_hidden cg-sale-basket-open">'+'<div id="cgSaleBasket" class="cg-sale-basket-icon"></div>'+'<div id="cgSaleBasketItemsCountContainer" >&nbsp;(<span id="cgSaleBasketItemsCount" class="cg-sale-items-count" >0</span>)</div>'+"</div>");cgJsData[gid].vars.mainCGdivHelperParent.prepend(cgJsClass.gallery.vars.ecommerce.$cgSaleBasket)}if(cgJsData[gid].vars.mainCGdiv.hasClass("cg_fe_controls_style_white")){cgJsClass.gallery.vars.ecommerce.$cgSaleBasket.addClass("cg_fe_controls_style_white")}if(cgJsData[gid].vars.mainCGdiv.hasClass("cg_border_radius_controls_and_containers")){cgJsClass.gallery.vars.ecommerce.$cgSaleBasket.addClass("cg_border_radius_controls_and_containers ")}cgJsClass.gallery.vars.ecommerce.$cgSaleBasket.removeClass("cg_hide");cgJsClass.gallery.vars.ecommerce.$cgSaleBasket.addClass("cg_visibility_hidden");cgJsClass.gallery.vars.ecommerce.$cgSaleBasket.attr("data-cg-gid",gid)};cgJsClass.gallery.ecommerce.functions.hideSaleBasket=function(){cgJsClass.gallery.vars.ecommerce.$cgSaleBasket.addClass("cg_hide")};cgJsClass.gallery.ecommerce.functions.checkoutContainerClose=function(gid){cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.addClass("cg_hide");if(cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceButtonsContainer").length){cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceButtonsContainer").empty()}if(cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyProductsInfosContainer").length){cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyProductsInfosContainer").empty()}cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyPriceTotal").addClass("cg_hide");cgJsClass.gallery.vars.dom.body.removeClass("cg_body_overflow_hidden")};cgJsClass.gallery.ecommerce.functions.removeFromCheckout=function(gid){cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.addClass("cg_hide");cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceButtonsContainer").empty();cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyProductsInfosContainer").empty();cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyPriceTotal").addClass("cg_hide")};cgJsClass.gallery.ecommerce.functions.getUnits=function(gid,realId,isAddUnits){var units=0;var saleProducts=JSON.parse(localStorage.getItem("cgEcomCustomerProducts_for_"+cgJsClass.gallery.vars.domain));if(saleProducts&&saleProducts[realId]&&saleProducts[realId]["units"]){units=parseInt(saleProducts[realId]["units"])}if(isAddUnits){units++}else{if(units==0){units=1}}if(cgJsData[gid].vars.rawData[realId].ecommerceData["IsDownload"]==1||cgJsData[gid].vars.rawData[realId].ecommerceData["IsService"]==1){units=1}else if(units>parseInt(cgJsData[gid].vars.rawData[realId].ecommerceData["SaleAmountMax"])){units=parseInt(cgJsData[gid].vars.rawData[realId].ecommerceData["SaleAmountMax"])}return units};cgJsClass.gallery.ecommerce.functions.addToBasket=function(gid,realId,$element,units,addUnit,onChange,isNotRemoveRemoved){console.trace();if(units){units=parseInt(units)}debugger;var saleProducts=JSON.parse(localStorage.getItem("cgEcomCustomerProducts_for_"+cgJsClass.gallery.vars.domain));if(!saleProducts){saleProducts={}}if(!saleProducts[realId]){saleProducts[realId]={}}if(addUnit){units=saleProducts[realId][units]?saleProducts[realId][units]+1:1}if(onChange){var realGid=saleProducts[realId]["realGid"]}else{var realGid=cgJsData[gid].vars.realGid}saleProducts[realId]={realGid:realGid,realId:realId,units:units?units:saleProducts[realId][units]?saleProducts[realId][units]:1,timestampMilliseconds:onChange?saleProducts[realId]["timestampMilliseconds"]:(new Date).getTime()};debugger;localStorage.setItem("cgEcomCustomerProducts_for_"+cgJsClass.gallery.vars.domain,JSON.stringify(saleProducts));cgJsClass.gallery.ecommerce.functions.setSaleItemsCount(isNotRemoveRemoved)};cgJsClass.gallery.ecommerce.functions.setSameInvoiceAsShippingValues=function(){debugger;var $cgBC=cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer;$cgBC.find("#cgInvoiceAddressStateDiv").addClass("cg_hide");if($cgBC.find("#cgShippingAddressCountry").val()){if($cgBC.find("#cgInvoiceAddressCountry option[value='"+$cgBC.find("#cgShippingAddressCountry").val()+"']").length===0){$cgBC.find("#cgInvoiceAddressCountry").val("");$cgBC.find("#cgSelectInvoiceCountryNotAllowedCountry").text($cgBC.find("#cgShippingAddressCountry option:selected").text());$cgBC.find("#cgSelectInvoiceCountryError").removeClass("cg_hide");$cgBC.find("#cgSelectInvoiceCountryNotAllowedError").removeClass("cg_hide");localStorage.setItem("cgShippingAddressCountry","")}else{$cgBC.find("#cgInvoiceAddressCountry").val($cgBC.find("#cgShippingAddressCountry").val());localStorage.setItem("cgInvoiceAddressCountry",localStorage.getItem("cgShippingAddressCountry"));$cgBC.find("#cgSelectInvoiceCountryError").addClass("cg_hide");$cgBC.find("#cgSelectInvoiceCountryNotAllowedError").addClass("cg_hide")}if($cgBC.find("#cgShippingAddressState:visible").length){cgJsClass.gallery.ecommerce.functions.changeSelectCountry(jQuery,jQuery("#cgInvoiceAddressCountry"));$cgBC.find("#cgInvoiceAddressStateDiv").removeClass("cg_hide");$cgBC.find("#cgInvoiceAddressState").val($cgBC.find("#cgShippingAddressState").val());localStorage.setItem("cgInvoiceAddressState",localStorage.getItem("cgShippingAddressState"))}}else{$cgBC.find("#cgInvoiceAddressCountry").val("");$cgBC.find("#cgEcommerceInvoiceAddressContainer .cg_select_state_div").addClass("cg_hide")}$cgBC.find("#cgInvoiceAddressFirstName").val($cgBC.find("#cgShippingAddressFirstName").val());if(localStorage.getItem("cgShippingAddressFirstName")!==null){localStorage.setItem("cgInvoiceAddressFirstName",localStorage.getItem("cgShippingAddressFirstName"))}else{localStorage.removeItem("cgInvoiceAddressFirstName")}$cgBC.find("#cgInvoiceAddressLastName").val($cgBC.find("#cgShippingAddressLastName").val());if(localStorage.getItem("cgShippingAddressLastName")!==null){localStorage.setItem("cgInvoiceAddressLastName",localStorage.getItem("cgShippingAddressLastName"))}else{localStorage.removeItem("cgInvoiceAddressLastName")}$cgBC.find("#cgInvoiceAddressCompany").val($cgBC.find("#cgShippingAddressCompany").val());if(localStorage.getItem("cgShippingAddressCompany")!==null){localStorage.setItem("cgInvoiceAddressCompany",localStorage.getItem("cgShippingAddressCompany"))}else{localStorage.removeItem("cgInvoiceAddressCompany")}$cgBC.find("#cgInvoiceAddressLine1").val($cgBC.find("#cgShippingAddressLine1").val());if(localStorage.getItem("cgShippingAddressLine1")!==null){localStorage.setItem("cgInvoiceAddressLine1",localStorage.getItem("cgShippingAddressLine1"))}else{localStorage.removeItem("cgInvoiceAddressLine1")}$cgBC.find("#cgInvoiceAddressLine2").val($cgBC.find("#cgShippingAddressLine2").val());if(localStorage.getItem("cgShippingAddressLine2")!==null){localStorage.setItem("cgInvoiceAddressLine2",localStorage.getItem("cgShippingAddressLine2"))}else{localStorage.removeItem("cgInvoiceAddressLine2")}if(localStorage.getItem("cgShippingAddressState")!==null){localStorage.setItem("cgInvoiceAddressState",localStorage.getItem("cgShippingAddressState"))}else{localStorage.removeItem("cgInvoiceAddressState")}$cgBC.find("#cgInvoiceAddressCity").val($cgBC.find("#cgShippingAddressCity").val());if(localStorage.getItem("cgShippingAddressCity")!==null){localStorage.setItem("cgInvoiceAddressCity",localStorage.getItem("cgShippingAddressCity"))}else{localStorage.removeItem("cgInvoiceAddressCity")}$cgBC.find("#cgInvoiceAddressPostalCode").val($cgBC.find("#cgShippingAddressPostalCode").val());if(localStorage.getItem("cgShippingAddressPostalCode")!==null){localStorage.setItem("cgInvoiceAddressPostalCode",localStorage.getItem("cgShippingAddressPostalCode"))}else{localStorage.removeItem("cgInvoiceAddressPostalCode")}$cgBC.find("#cgShippingAddressCountry").val($cgBC.find("#cgShippingAddressCountry").val());if(localStorage.getItem("cgShippingAddressCountry")!==null){localStorage.setItem("cgInvoiceAddressCountry",localStorage.getItem("cgShippingAddressCountry"))}else{localStorage.removeItem("cgInvoiceAddressCountry")}$cgBC.find("#cgInvoiceAddressState").val($cgBC.find("#cgShippingAddressState").val());if(localStorage.getItem("cgShippingAddressState")!==null){localStorage.setItem("cgInvoiceAddressState",localStorage.getItem("cgShippingAddressState"))}else{localStorage.removeItem("cgInvoiceAddressState")}};cgJsClass.gallery.ecommerce.functions.setSameShippingAsInvoiceValues=function(){debugger;var $cgBC=cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer;if($cgBC.find("#cgInvoiceAddressCountry").val()){if($cgBC.find("#cgShippingAddressCountry option[value='"+$cgBC.find("#cgInvoiceAddressCountry").val()+"']").length===0){$cgBC.find("#cgShippingAddressCountry").val("");$cgBC.find("#cgSelectShippingCountryNotAllowedCountry").text($cgBC.find("#cgInvoiceAddressCountry option:selected").text());$cgBC.find("#cgSelectShippingCountryError").removeClass("cg_hide");$cgBC.find("#cgSelectShippingCountryNotAllowedError").removeClass("cg_hide");localStorage.setItem("cgInvoiceAddressCountry","")}else{$cgBC.find("#cgShippingAddressCountry").val($cgBC.find("#cgInvoiceAddressCountry").val());localStorage.setItem("cgShippingAddressCountry",localStorage.getItem("cgInvoiceAddressCountry"));$cgBC.find("#cgSelectShippingCountryError").addClass("cg_hide");$cgBC.find("#cgSelectShippingCountryNotAllowedError").addClass("cg_hide")}if($cgBC.find("#cgInvoiceAddressState:visible").length){cgJsClass.gallery.ecommerce.functions.changeSelectCountry(jQuery,jQuery("#cgShippingAddressCountry"));$cgBC.find("#cgShippingAddressStateDiv").removeClass("cg_hide");$cgBC.find("#cgShippingAddressState").val($cgBC.find("#cgInvoiceAddressState").val());localStorage.setItem("cgShippingAddressState",localStorage.getItem("cgInvoiceAddressState"))}}else{$cgBC.find("#cgShippingAddressCountry").val("");$cgBC.find("#cgEcommerceShippingAddressContainer .cg_select_state_div").addClass("cg_hide")}$cgBC.find("#cgShippingAddressFirstName").val($cgBC.find("#cgInvoiceAddressFirstName").val());if(localStorage.getItem("cgInvoiceAddressFirstName")!==null){localStorage.setItem("cgShippingAddressFirstName",localStorage.getItem("cgInvoiceAddressFirstName"))}else{localStorage.removeItem("cgShippingAddressFirstName")}$cgBC.find("#cgShippingAddressLastName").val($cgBC.find("#cgInvoiceAddressLastName").val());if(localStorage.getItem("cgInvoiceAddressLastName")!==null){localStorage.setItem("cgShippingAddressLastName",localStorage.getItem("cgInvoiceAddressLastName"))}else{localStorage.removeItem("cgShippingAddressLastName")}$cgBC.find("#cgShippingAddressCompany").val($cgBC.find("#cgInvoiceAddressCompany").val());if(localStorage.getItem("cgInvoiceAddressCompany")!==null){localStorage.setItem("cgShippingAddressCompany",localStorage.getItem("cgInvoiceAddressCompany"))}else{localStorage.removeItem("cgShippingAddressCompany")}$cgBC.find("#cgShippingAddressLine1").val($cgBC.find("#cgInvoiceAddressLine1").val());if(localStorage.getItem("cgInvoiceAddressLine1")!==null){localStorage.setItem("cgShippingAddressLine1",localStorage.getItem("cgInvoiceAddressLine1"))}else{localStorage.removeItem("cgShippingAddressLine1")}$cgBC.find("#cgShippingAddressLine2").val($cgBC.find("#cgInvoiceAddressLine2").val());if(localStorage.getItem("cgInvoiceAddressLine2")!==null){localStorage.setItem("cgShippingAddressLine2",localStorage.getItem("cgInvoiceAddressLine2"))}else{localStorage.removeItem("cgShippingAddressLine2")}if(localStorage.getItem("cgInvoiceAddressState")!==null){localStorage.setItem("cgShippingAddressState",localStorage.getItem("cgInvoiceAddressState"))}else{localStorage.removeItem("cgShippingAddressState")}$cgBC.find("#cgShippingAddressCity").val($cgBC.find("#cgInvoiceAddressCity").val());if(localStorage.getItem("cgInvoiceAddressCity")!==null){localStorage.setItem("cgShippingAddressCity",localStorage.getItem("cgInvoiceAddressCity"))}else{localStorage.removeItem("cgShippingAddressCity")}$cgBC.find("#cgShippingAddressPostalCode").val($cgBC.find("#cgInvoiceAddressPostalCode").val());if(localStorage.getItem("cgInvoiceAddressPostalCode")!==null){localStorage.setItem("cgShippingAddressPostalCode",localStorage.getItem("cgInvoiceAddressPostalCode"))}else{localStorage.removeItem("cgShippingAddressPostalCode")}$cgBC.find("#cgShippingAddressCountry").val($cgBC.find("#cgInvoiceAddressCountry").val());if(localStorage.getItem("cgInvoiceAddressCountry")!==null){localStorage.setItem("cgShippingAddressCountry",localStorage.getItem("cgInvoiceAddressCountry"))}else{localStorage.removeItem("cgShippingAddressCountry")}$cgBC.find("#cgShippingAddressState").val($cgBC.find("#cgInvoiceAddressState").val());if(localStorage.getItem("cgInvoiceAddressState")!==null){localStorage.setItem("cgShippingAddressState",localStorage.getItem("cgInvoiceAddressState"))}else{localStorage.removeItem("cgShippingAddressState")}};cgJsClass.gallery.ecommerce.functions.hideBecauseOfHints=function($cgEcommerceCheckoutBodyContainer){$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyCartLoader,#cgEcommerceCheckoutBodyPaypalLoader,#cgEcommerceCheckoutBodyNoSaleProducts,#cgEcommerceCheckoutBody").addClass("cg_hide")};cgJsClass.gallery.ecommerce.functions.hideSaleElements=function(){var $cgEcommerceCheckoutBodyContainer=jQuery("#cgEcommerceCheckoutBodyContainer");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyProductsInfosContainer .cg-sale-remove").remove();$cgEcommerceCheckoutBodyContainer.find("#cgSelectShippingCountryDiv").remove();$cgEcommerceCheckoutBodyContainer.find("#cgCheckoutAgreements").remove();$cgEcommerceCheckoutBodyContainer.find("#cgCheckoutNoteTop").remove();$cgEcommerceCheckoutBodyContainer.find("#cgCheckoutNoteBottom").remove();$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBody").remove()};cgJsClass.gallery.ecommerce.functions.cgCheckAgreementsAndRequired=function(isFromOverlay,isFromInit){var checkAll=false;var showError=false;if(cgJsClass.gallery.vars.ecommerce.cgEcommerceCheckoutBodyOverlayClicked||isFromInit){checkAll=true}if(cgJsClass.gallery.vars.ecommerce.cgEcommerceCheckoutBodyOverlayClicked){showError=true}var $=jQuery;var $cg_check_out_agreement_checkboxs=$(cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer).find("#cgCheckoutAgreements .cg_check_out_agreement_checkbox");var $required_inputs=$(cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer).find(".cg-address-inputs-div input.cg_required:visible");var $cgInvoiceAddressCountry=$(cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer).find("#cgInvoiceAddressCountry");var $cgSelectShippingCountry=$(cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer).find("#cgShippingAddressCountry:visible");var $cg_select_states=$(cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer).find(".cg_select_state:visible");var isAgreementsOrRequiredHaveToBeSet=false;debugger;if(checkAll){if($cgInvoiceAddressCountry.is(":visible")){if($cgInvoiceAddressCountry.val()){$cgInvoiceAddressCountry.parent().find(".cg_checkout_error").addClass("cg_hide")}else{if(showError){$cgInvoiceAddressCountry.parent().find(".cg_checkout_error").removeClass("cg_hide")}isAgreementsOrRequiredHaveToBeSet=true}}if($cgSelectShippingCountry.length){if($cgSelectShippingCountry.val()){$cgSelectShippingCountry.parent().find(".cg_checkout_error").addClass("cg_hide")}else{if(showError){$cgSelectShippingCountry.parent().find(".cg_checkout_error:not(#cgSelectShippingCountryNotAllowedError)").removeClass("cg_hide")}isAgreementsOrRequiredHaveToBeSet=true}}$cg_select_states.each(function(){if(!$(this).val()){if(showError){$(this).parent().find(".cg_checkout_error_required_state").removeClass("cg_hide")}isAgreementsOrRequiredHaveToBeSet=true}else{$(this).parent().find(".cg_checkout_error_required_state").addClass("cg_hide")}})}if($cg_check_out_agreement_checkboxs.length){$cg_check_out_agreement_checkboxs.each(function(){if($(this).prop("checked")){if(isFromOverlay){$(this).closest(".cg_check_out_agreement").find(".cg_check_out_agreement_error").addClass("cg_hide")}}else{if(isFromOverlay){if(showError){$(this).closest(".cg_check_out_agreement").find(".cg_check_out_agreement_error").removeClass("cg_hide")}}isAgreementsOrRequiredHaveToBeSet=true}})}if(checkAll){$required_inputs.each(function(){if($(this).val().trim()==""){if(showError){$(this).closest(".cg-col-field").find(".cg_checkout_error").removeClass("cg_hide")}isAgreementsOrRequiredHaveToBeSet=true}else{$(this).closest(".cg-col-field").find(".cg_checkout_error").addClass("cg_hide")}})}return isAgreementsOrRequiredHaveToBeSet};cgJsClass.gallery.ecommerce.functions.setEmbedVisual=function(gid,realId,$productInfoImage,ImgType,IsSaleOrder,isFromAddToBasket){debugger;$productInfoImage.addClass("cg_embed_type cg-file-type-"+ImgType);if(ImgType=="ytb"){if(cgJsData[gid].options.pro.ConsentYoutube==1&&!sessionStorage.getItem("cgYtbConsentAgreed")){if(IsSaleOrder){$productInfoImage.addClass("cg_embed_consent_required");var $imageObject=cgJsClass.gallery.function.general.tools.getYtbOverlayConsentElement(jQuery,gid,realId);$productInfoImage.empty().append($imageObject)}else{$productInfoImage.addClass("cg_embed_required cg_embed_ytb")}}else{var iframeWidth=400;var iframeHeight=300;if(isFromAddToBasket){iframeWidth=200;iframeHeight=150}$productInfoImage.prepend('<div class="cg_embed_container"><iframe width="'+iframeWidth+'" height="'+iframeHeight+'" src="'+cgJsData[gid].vars.rawData[realId]["guid"]+'" ></iframe></div>')}}else if(ImgType=="inst"){if(cgJsData[gid].options.pro.ConsentInstagram==1&&!sessionStorage.getItem("cgInstConsentAgreed")){if(IsSaleOrder){$productInfoImage.addClass("cg_embed_consent_required");var $imageObject=cgJsClass.gallery.function.general.tools.getInstOverlayConsentElement(jQuery,gid,realId);$productInfoImage.empty().append($imageObject)}else{$productInfoImage.addClass("cg_embed_required cg_embed_inst")}}else{$productInfoImage.prepend('<div class="cg_embed_container"><iframe width="400" height="300" src="'+cgJsData[gid].vars.rawData[realId]["guid"]+'" ></iframe></div>')}}else if(ImgType=="tkt"){if(cgJsData[gid].options.pro.ConsentTikTok==1&&!sessionStorage.getItem("cgTktConsentAgreed")){if(IsSaleOrder){$productInfoImage.addClass("cg_embed_consent_required");var $imageObject=cgJsClass.gallery.function.general.tools.getTktOverlayConsentElement(jQuery,gid,realId);$productInfoImage.empty().append($imageObject)}else{$productInfoImage.addClass("cg_embed_required cg_embed_tkt")}}else{var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent(jQuery,gid,realId);$productInfoImage.prepend('<div class="cg_embed_container cg-center-image-tkt-entry-content" ></div>');$productInfoImage.find(".cg-center-image-tkt-entry-content").append($blockquote)}}else if(ImgType=="twt"){if(cgJsData[gid].options.pro.ConsentTwitter==1&&!sessionStorage.getItem("cgTwtConsentAgreed")){if(IsSaleOrder){$productInfoImage.addClass("cg_embed_consent_required");var $imageObject=cgJsClass.gallery.function.general.tools.getTwtOverlayConsentElement(jQuery,gid,realId);$productInfoImage.empty().append($imageObject)}else{$productInfoImage.addClass("cg_embed_required cg_embed_twt")}}else{var $blockquote=cgJsClass.gallery.function.general.tools.getBlockquoteFromPostContent(jQuery,gid,realId);$productInfoImage.prepend('<div class="cg_embed_container cg-center-image-twt-entry-content" ></div>');$productInfoImage.find(".cg-center-image-twt-entry-content").append($blockquote)}}};;cgJsClass.gallery.ecommerce.functions.showCheckout=function($,gid,isOnAmountSelectChange){console.trace();debugger;cgJsClass.gallery.vars.dom.body.addClass("cg_pointer_events_none");var $cgEcommerceCheckoutBodyContainer=cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer;$cgEcommerceCheckoutBodyContainer.removeClass("cg_hide cg_overflow_hidden");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyNoSaleProducts,#cgEcommerceCheckoutBodyInfos").addClass("cg_hide");var currencyShort=cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort;if(cgJsClass.gallery.vars.ecommerce.isEcommerceTest){var clientId=cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PayPalSandboxClientId}else{var clientId=cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PayPalLiveClientId}cgJsClass.gallery.vars.ecommerce.clientId=clientId;var result=cgJsClass.gallery.ecommerce.functions.preProcessing(gid,isOnAmountSelectChange);cgJsClass.gallery.ecommerce.functions.cgEcommerceCheckoutBodyContainerBasketMobileCheck();var disableFunding="";if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PayPalDisableFunding){disableFunding="&disable-funding="+cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PayPalDisableFunding}var url="https://www.paypal.com/sdk/js?client-id="+clientId+"&currency="+currencyShort+disableFunding;jQuery("body").removeClass("cg_pointer_events_none");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyCartLoader").addClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerSub").removeClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyPaypalLoader").removeClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBody").addClass("cg_visibility_hidden");debugger;if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.SendOrderConfirmationMail=="1"&&(!cgJsClass.gallery.vars.ecommerce.ecommerceOptions.OCMailOrderSummaryURL||cgJsClass.gallery.vars.ecommerce.ecommerceOptions.OrderConfirmationMail.indexOf("$order$")===-1)){$cgEcommerceCheckoutBodyContainer.removeClass("cg_overflow_hidden");cgJsClass.gallery.ecommerce.functions.hideBecauseOfHints($cgEcommerceCheckoutBodyContainer);var RegUserPurchaseOnlyText=$("<textarea />").html(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.RegUserPurchaseOnlyText).text();$cgEcommerceCheckoutBodyContainer.find("#cgOrderConfirmationMailNotConfigured").removeClass("cg_hide").html('Order confirmation email is activated, but "Order summary page URL" or $order$ variable in the mail is missing.');$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyInfos").addClass("cg_hide");return}if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.RegUserPurchaseOnly=="1"&&!cgJsClass.gallery.vars.isLoggedIn){$cgEcommerceCheckoutBodyContainer.removeClass("cg_overflow_hidden");cgJsClass.gallery.ecommerce.functions.hideBecauseOfHints($cgEcommerceCheckoutBodyContainer);var RegUserPurchaseOnlyText=$("<textarea />").html(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.RegUserPurchaseOnlyText).text();$cgEcommerceCheckoutBodyContainer.find("#cgRegUserPurchaseOnlyText").removeClass("cg_hide").html(RegUserPurchaseOnlyText);$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyInfos").addClass("cg_hide");return}if(cgJsClass.gallery.vars.ecommerce.isEcommerceTest&&!cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PayPalSandboxClientId||!cgJsClass.gallery.vars.ecommerce.isEcommerceTest&&!cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PayPalLiveClientId){$cgEcommerceCheckoutBodyContainer.removeClass("cg_overflow_hidden");$cgEcommerceCheckoutBodyContainer.find("#cgClientIdOrSecretNotSet").removeClass("cg_hide");cgJsClass.gallery.ecommerce.functions.hideBecauseOfHints($cgEcommerceCheckoutBodyContainer);if(!cgJsClass.gallery.vars.ecommerce.ecommerceOptions.ForwardAfterPurchaseUrl){$cgEcommerceCheckoutBodyContainer.find("#cgForwardToOrderSummaryPageURLisMissing").removeClass("cg_hide");cgJsClass.gallery.ecommerce.functions.hideBecauseOfHints($cgEcommerceCheckoutBodyContainer);return}return}else if(!cgJsClass.gallery.vars.ecommerce.ecommerceOptions.ForwardAfterPurchaseUrl){$cgEcommerceCheckoutBodyContainer.find("#cgForwardToOrderSummaryPageURLisMissing").removeClass("cg_hide");cgJsClass.gallery.ecommerce.functions.hideBecauseOfHints($cgEcommerceCheckoutBodyContainer);return}if(!cgJsClass.gallery.vars.ecommerce.cgSaleProductsSorted.length){cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyPaypalLoader").addClass("cg_hide");return}debugger;$.ajax({url:url,method:"get",cache:true,dataType:"script"}).done(function(response,status,info){cgJsClass.gallery.vars.isEcommerceButtonsLoaded=true;if(!result){return}debugger;cgJsClass.gallery.ecommerce.functions.generatePayPalButtons(paypal,gid);cgJsClass.gallery.vars.dom.body.removeClass("cg_pointer_events_none");cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.removeClass("cg_overflow_hidden");cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerClose").removeClass("cg_hide");var cgOnInitPayPalButtons=function(){$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBody").removeClass("cg_visibility_hidden");if(!cgJsClass.gallery.vars.ecommerce.cgIsPayPalButtonsRendered&&cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find(".paypal-buttons").length){cgJsClass.gallery.vars.ecommerce.cgIsPayPalButtonsRendered=true;cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyPaypalLoader").addClass("cg_hide");if(!cgJsClass.gallery.vars.ecommerce.isFirstCheckoutLoad){cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find(".cg-general-frontend-loader").addClass("cg_hide");cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerSub").removeClass("cg_hide");cgJsClass.gallery.vars.ecommerce.isFirstCheckoutLoad=true}if(cgJsClass.gallery.ecommerce.functions.cgCheckAgreementsAndRequired(false,true)){jQuery("#cgEcommerceCheckoutBodyOverlay").removeClass("cg_hide")}else{jQuery("#cgEcommerceCheckoutBodyOverlay").addClass("cg_hide")}}else if(cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find(".paypal-buttons").length){cgJsClass.gallery.vars.ecommerce.cgIsPayPalButtonsRendered=false;clearInterval(cgJsClass.gallery.vars.ecommerce.cgOnInitPayPalButtonsInterval)}};cgJsClass.gallery.vars.ecommerce.cgOnInitPayPalButtonsInterval=setInterval(function(){cgOnInitPayPalButtons()},10);setTimeout(function(){cgJsClass.gallery.vars.ecommerce.cgIsPayPalButtonsRendered=false;clearInterval(cgJsClass.gallery.vars.ecommerce.cgOnInitPayPalButtonsInterval)},4e3);cgJsClass.gallery.ecommerce.functions.isOnlineCheck()}).fail(function(xhr,status,error){debugger;console.log(xhr);console.log(status);console.log(error);cgJsClass.gallery.ecommerce.functions.isOnlineCheck(true)}).always(function(){})};;cgJsClass.gallery.ecommerce.functions.showCheckoutPreProcessing=function($,gid){cgJsClass.gallery.vars.dom.body.addClass("cg_body_overflow_hidden");var $cgEcommerceCheckoutBodyContainer=cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer;$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerSub").addClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyCartLoader").removeClass("cg_hide");if(cgJsClass.gallery.vars.ecommerce.isEcommerceTest){$cgEcommerceCheckoutBodyContainer.addClass("cg_test")}history.replaceState({},"",cgJsData[gid].vars.startLocation);cgJsData[gid].vars.firstPushSateDone=false;debugger;cgJsClass.gallery.vars.ecommerce.realGidsAndIdsDeletedOrFromOtherGalleries={};var cgSaleProducts=JSON.parse(localStorage.getItem("cgEcomCustomerProducts_for_"+cgJsClass.gallery.vars.domain));if(!cgSaleProducts){cgSaleProducts={}}var realGidsAndIdsDeletedOrFromOtherGalleries={};for(var realIdToCheck in cgSaleProducts){if(!cgSaleProducts.hasOwnProperty(realIdToCheck)){break}var realGidToCheck=cgSaleProducts[realIdToCheck]["realGid"];var gidToCheck=cgJsClass.gallery.function.general.tools.getLoadedGidBasedOnRealGid(realGidToCheck);if(!realGidsAndIdsDeletedOrFromOtherGalleries[realGidToCheck]){realGidsAndIdsDeletedOrFromOtherGalleries[realGidToCheck]=[]}if(cgJsData[gidToCheck]&&!cgJsData[gid].vars.rawData[realIdToCheck]||realGidsAndIdsDeletedOrFromOtherGalleries[realGidToCheck]){if(cgJsData[gidToCheck]&&cgJsData[gid].vars.rawData[realIdToCheck]){continue}if(!realGidsAndIdsDeletedOrFromOtherGalleries[realGidToCheck]){realGidsAndIdsDeletedOrFromOtherGalleries[realGidToCheck]=[]}realGidsAndIdsDeletedOrFromOtherGalleries[realGidToCheck].push(realIdToCheck)}}cgJsClass.gallery.vars.ecommerce.realGidsAndIdsDeletedOrFromOtherGalleries=realGidsAndIdsDeletedOrFromOtherGalleries;debugger;$cgEcommerceCheckoutBodyContainer.attr("data-cg-gid",gid);if(cgJsData[gid].vars.mainCGdiv.hasClass("cg_fe_controls_style_white")){$cgEcommerceCheckoutBodyContainer.addClass("cg_fe_controls_style_white");$cgEcommerceCheckoutBodyContainer.removeClass("cg_fe_controls_style_black");$cgEcommerceCheckoutBodyContainer.find(".cg_checkout_loader").addClass("cg_fe_controls_style_white")}else{$cgEcommerceCheckoutBodyContainer.addClass("cg_fe_controls_style_black");$cgEcommerceCheckoutBodyContainer.removeClass("cg_fe_controls_style_white");$cgEcommerceCheckoutBodyContainer.find(".cg_checkout_loader").removeClass("cg_fe_controls_style_white")}if(cgJsData[gid].vars.mainCGdiv.hasClass("cg_border_radius_controls_and_containers")){$cgEcommerceCheckoutBodyContainer.addClass("cg_border_radius_controls_and_containers")}else{$cgEcommerceCheckoutBodyContainer.removeClass("cg_border_radius_controls_and_containers")}$cgEcommerceCheckoutBodyContainer.removeClass("cg_hide");console.log("cg-sale-basket-open click");console.trace();if(false){cgJsClass.gallery.ecommerce.functions.showCheckout($,gid)}else{var data={};data.action="post_cg_get_raw_data_from_galleries";data.realGidsAndIdsDeletedOrFromOtherGalleries=realGidsAndIdsDeletedOrFromOtherGalleries;var gidOfClickedButton=gid;debugger;jQuery.ajax({url:post_cg_get_raw_data_from_galleries_wordpress_ajax_script_function_name.cg_get_raw_data_from_galleries_ajax_url,type:"post",data:data}).done(function(response){debugger;var $response=jQuery((new DOMParser).parseFromString(response,"text/html"));jQuery($response).find('script[data-cg-processing="true"]').each(function(){var script=jQuery(this).html();eval(script)});for(var gidOtherGallery in cgJsClass.gallery.vars.ecommerce.RawDataEachGallery){if(!cgJsClass.gallery.vars.ecommerce.RawDataEachGallery.hasOwnProperty(gidOtherGallery)){break}if(!cgJsData[gidOtherGallery+"-ec"]&&!cgJsData[gidOtherGallery+"-ec-ext-1"]){cgJsData[gidOtherGallery+"-ec"]={};cgJsData[gidOtherGallery+"-ec"].vars={};cgJsData[gidOtherGallery+"-ec"].vars.rawData={};cgJsData[gidOtherGallery+"-ec"].vars.info={};cgJsData[gidOtherGallery+"-ec"].options=cgJsClass.gallery.vars.ecommerce.OptionsDataEachGallery[gidOtherGallery];for(var realId in cgJsClass.gallery.vars.ecommerce.RawDataEachGallery[gidOtherGallery]){if(!cgJsClass.gallery.vars.ecommerce.RawDataEachGallery[gidOtherGallery].hasOwnProperty(realId)){break}if(!cgJsData[gidOtherGallery+"-ec"].vars.rawData[realId]){cgJsData[gidOtherGallery+"-ec"].vars.rawData[realId]=cgJsClass.gallery.vars.ecommerce.RawDataEachGallery[gidOtherGallery][realId];cgJsData[gidOtherGallery+"-ec"].vars.info[realId]=cgJsClass.gallery.vars.ecommerce.InfoDataEachGallery[gidOtherGallery][realId];cgJsData[gidOtherGallery+"-ec"].vars.rawData[realId].ecommerceData=cgJsClass.gallery.vars.ecommerce.EcommerceFilesDataEachGallery[gidOtherGallery][realId]}}}else{for(var gidLoadedGalleries in cgJsData){if(!cgJsData.hasOwnProperty(gidLoadedGalleries)){break}if(gidLoadedGalleries.toString().indexOf(gidOtherGallery+"-ec")>-1){for(var realId in cgJsClass.gallery.vars.ecommerce.RawDataEachGallery[gidOtherGallery]){if(!cgJsClass.gallery.vars.ecommerce.RawDataEachGallery[gidOtherGallery].hasOwnProperty(realId)){break}if(!cgJsData[gidLoadedGalleries].vars.rawData[realId]){cgJsData[gidLoadedGalleries].vars.rawData[realId]=cgJsClass.gallery.vars.ecommerce.RawDataEachGallery[gidOtherGallery][realId];cgJsData[gidLoadedGalleries].vars.info[realId]=cgJsClass.gallery.vars.ecommerce.InfoDataEachGallery[gidOtherGallery][realId];cgJsData[gidLoadedGalleries].vars.rawData[realId].ecommerceData=cgJsClass.gallery.vars.ecommerce.EcommerceFilesDataEachGallery[gidOtherGallery][realId]}}}}}}cgJsClass.gallery.ecommerce.functions.getSaleProductsFromStorageAndRemoveRemoved();cgJsClass.gallery.ecommerce.functions.setSaleItemsCount();cgJsClass.gallery.ecommerce.functions.showCheckout($,gidOfClickedButton)}).fail(function(xhr,status,error){debugger;console.log(xhr);console.log(status);console.log(error);cgJsClass.gallery.function.message.show(gid,error)}).always(function(){})}};;window.addEventListener("offline",e=>{console.log("offline 123")});window.addEventListener("online",e=>{console.log("online 123")});cgJsClass.gallery.ecommerce.functions.generatePayPalButtons=function(paypal,gid){debugger;cgJsClass.gallery.vars.ecommerce.payPalGid=gid;cgJsClass.gallery.vars.ecommerce.cgEcommerceCaptureButtonGid=gid;paypal.Buttons({style:{color:"gold"},onClick(data,actions){debugger},onInit(data,actions){debugger},createOrder:(data,actions)=>{var $=jQuery;console.log("purchase_units createOrder");console.log(cgJsClass.gallery.vars.ecommerce.purchase_units);var purchase_units=JSON.parse(JSON.stringify(cgJsClass.gallery.vars.ecommerce.purchase_units));console.log("purchase_units createOrder 2");console.log(purchase_units);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing={};for(var index in purchase_units[0]["items"]){if(!purchase_units[0]["items"].hasOwnProperty(index)){break}cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]={};cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["EcommerceEntryID"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["EcommerceEntryID"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["IsAlternativeShipping"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["IsAlternativeShipping"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["DownloadKeysCsvName"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["DownloadKeysCsvName"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["ServiceKeysCsvName"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["ServiceKeysCsvName"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["SaleType"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["SaleType"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["fileType"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["fileType"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["timestampMilliseconds"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["timestampMilliseconds"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["priceGross"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["priceGross"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["realGid"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["realGid"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["realId"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["realId"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["IsDownload"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["IsDownload"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["IsService"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["IsService"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["IsShipping"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["IsShipping"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["IsUpload"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["IsUpload"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["alternative_shipping_amount_value_gross"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["alternative_shipping_amount_value_gross"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["alternative_shipping_amount_value_net"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["alternative_shipping_amount_value_net"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["tax_percentage"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["tax_percentage"]);cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["rThumb"]=cgJsClass.gallery.function.general.tools.deepCopyValue(purchase_units[0]["items"][index]["rThumb"]);delete purchase_units[0]["items"][index]["EcommerceEntryID"];delete purchase_units[0]["items"][index]["timestampMilliseconds"];delete purchase_units[0]["items"][index]["priceGross"];delete purchase_units[0]["items"][index]["gid"];delete purchase_units[0]["items"][index]["realId"];delete purchase_units[0]["items"][index]["IsDownload"];delete purchase_units[0]["items"][index]["IsService"];delete purchase_units[0]["items"][index]["IsShipping"];delete purchase_units[0]["items"][index]["IsUpload"];delete purchase_units[0]["items"][index]["alternative_shipping_amount_value_gross"];delete purchase_units[0]["items"][index]["alternative_shipping_amount_value_net"];delete purchase_units[0]["items"][index]["tax_percentage"]}console.log("cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing before");console.log(cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing);var $cgBC=cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer;if(cgJsClass.gallery.vars.ecommerce.hasShipping&&!cgJsClass.gallery.vars.ecommerce.isDifferentBillingAddressClicked&&!localStorage.getItem("isCgBillingAddressDifferentFromShippingAddressButtonClicked")){cgJsClass.gallery.ecommerce.functions.setSameInvoiceAsShippingValues()}var billingAddress={};debugger;$cgBC.find("#cgEcommerceBillingAddressContainer .cg-address-inputs-div input").each(function(){billingAddress[$(this).attr("id")]=$(this).val()});var payer={name:{given_name:billingAddress["cgInvoiceAddressFirstName"],surname:billingAddress["cgInvoiceAddressLastName"]},address:{address_line_1:billingAddress["cgInvoiceAddressLine1"],admin_area_2:billingAddress["cgInvoiceAddressCity"],postal_code:billingAddress["cgInvoiceAddressPostalCode"],country_code:$cgBC.find("#cgInvoiceAddressCountry").val()}};if($cgBC.find("#cgInvoiceAddressLine2").val()){payer["address_line_2"]=$cgBC.find("#cgInvoiceAddressLine2").val()}if($cgBC.find("#cgInvoiceAddressState").val()){payer["admin_area_1"]=$cgBC.find("#cgInvoiceAddressState").val()}console.log("payer");console.log(payer);if(false){payer.email_address="customer@domain.com",payer.phone={phone_type:"MOBILE",phone_number:{national_number:"14082508100"}}}purchase_units[0]["shipping"]={};cgJsClass.gallery.vars.ecommerce.purchase_units_pre_create=purchase_units;debugger;if(cgJsClass.gallery.vars.ecommerce.hasShipping){var address={};$cgBC.find("#cgEcommerceShippingAddressContainer .cg-address-inputs-div input").each(function(){address[$(this).attr("id")]=$(this).val()});purchase_units[0]["shipping"]["name"]={full_name:address["cgShippingAddressFirstName"]+" "+address["cgShippingAddressLastName"]};purchase_units[0]["shipping"]["address"]={address_line_1:address["cgShippingAddressLine1"],admin_area_2:address["cgShippingAddressCity"],postal_code:address["cgShippingAddressPostalCode"],country_code:$cgBC.find("#cgShippingAddressCountry").val()};if($cgBC.find("#cgShippingAddressLine2").val()){purchase_units[0]["shipping"]["address"]["address_line_2"]=$cgBC.find("#cgShippingAddressLine2").val()}if($cgBC.find("#cgShippingAddressState").val()){purchase_units[0]["shipping"]["address"]["admin_area_1"]=$cgBC.find("#cgShippingAddressState").val()}var orderObj={purchase_units:purchase_units}}else{var orderObj={application_context:{shipping_preference:"NO_SHIPPING"},purchase_units:purchase_units}}orderObj.payer=payer;console.log("orderObj");console.log(orderObj);return actions.order.create(orderObj)},onApprove:function(data,actions){var $cgEcommerceCheckoutBodyContainer=cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer;$cgEcommerceCheckoutBodyContainer.addClass("cg_overflow_hidden");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerClose,#cgEcommerceCheckoutBodyProductsInfosContainer,#cgEcommerceCheckoutBodyPriceTotal,#cgEcommerceCheckoutBodyInfos,#cgEcommerceCheckoutBody").addClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerSub").addClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerOrderSuccessMessage").addClass("cg_visibility_hidden");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerOrderSuccess").addClass("cg_flex_flow_column").removeClass("cg_hide").append($cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerLoader").removeClass("cg_hide"));jQuery("body").addClass("cg_pointer_events_none");jQuery(".paypal-checkout-sandbox").addClass("cg_hide");cgJsClass.gallery.vars.ecommerce.paypal.actions=actions;debugger;return actions.order.capture().then(function(orderData){$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerOrderSuccessMessage").removeClass("cg_visibility_hidden");debugger;console.log("orderData before");console.log(orderData);for(var index in orderData.purchase_units[0]["items"]){if(!orderData.purchase_units[0]["items"].hasOwnProperty(index)){break}var realGid=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["realGid"];var gid=cgJsClass.gallery.function.general.tools.getLoadedGidBasedOnRealGid(realGid);var realId=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["realId"];orderData.purchase_units[0]["items"][index]["WpUploads"]=[];console.log(realGid);console.log(gid);console.log(realId);if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){for(var order in cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){if(!cgJsData[gid].vars.rawData[realId].MultipleFilesParsed.hasOwnProperty(order)){break}orderData.purchase_units[0]["items"][index]["WpUploads"].push(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[order]["WpUpload"]);if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[order]["type"]=="embed"){delete cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[order]["post_title"];delete cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[order]["post_content"]}}}else{orderData.purchase_units[0]["items"][index]["WpUploads"].push(cgJsData[gid].vars.rawData[realId].WpUpload)}var RawData={};RawData["Exif"]=cgJsData[gid].vars.rawData[realId]["Exif"];RawData["Height"]=cgJsData[gid].vars.rawData[realId]["Height"];RawData["ImgType"]=cgJsData[gid].vars.rawData[realId]["ImgType"];RawData["MultipleFilesParsed"]=cgJsData[gid].vars.rawData[realId]["MultipleFilesParsed"];RawData["MultipleFilesParsedRealIdSourceSet"]=cgJsData[gid].vars.rawData[realId]["MultipleFilesParsedRealIdSourceSet"];RawData["NamePic"]=cgJsData[gid].vars.rawData[realId]["NamePic"];RawData["Width"]=cgJsData[gid].vars.rawData[realId]["Width"];RawData["display_name"]=cgJsData[gid].vars.rawData[realId]["display_name"];RawData["entryGuid"]=cgJsData[gid].vars.rawData[realId]["entryGuid"];RawData["full"]=cgJsData[gid].vars.rawData[realId]["full"];RawData["guid"]=cgJsData[gid].vars.rawData[realId]["guid"];RawData["id"]=cgJsData[gid].vars.rawData[realId]["id"];RawData["WpUpload"]=cgJsData[gid].vars.rawData[realId]["WpUpload"];RawData["realGid"]=realGid;RawData["imgSrcOriginalHeight"]=cgJsData[gid].vars.rawData[realId]["imgSrcOriginalHeight"];RawData["imgSrcOriginalWidth"]=cgJsData[gid].vars.rawData[realId]["imgSrcOriginalWidth"];RawData["large"]=cgJsData[gid].vars.rawData[realId]["large"];RawData["medium"]=cgJsData[gid].vars.rawData[realId]["medium"];RawData["post_alt"]=cgJsData[gid].vars.rawData[realId]["post_alt"];var isEmbed=cgJsClass.gallery.function.general.tools.isEmbed(gid,realId);if(isEmbed){delete cgJsData[gid].vars.rawData[realId]["post_title"];delete cgJsData[gid].vars.rawData[realId]["post_content"]}else{RawData["post_title"]=cgJsData[gid].vars.rawData[realId]["post_title"];RawData["post_content"]=cgJsData[gid].vars.rawData[realId]["post_content"]}RawData["post_caption"]=cgJsData[gid].vars.rawData[realId]["post_caption"];RawData["post_date"]=cgJsData[gid].vars.rawData[realId]["post_date"];RawData["post_excerpt"]=cgJsData[gid].vars.rawData[realId]["post_excerpt"];RawData["post_mime_type"]=cgJsData[gid].vars.rawData[realId]["post_mime_type"];RawData["post_name"]=cgJsData[gid].vars.rawData[realId]["post_name"];RawData["selectedOrder"]=cgJsData[gid].vars.rawData[realId]["selectedOrder"];RawData["thumbnail"]=cgJsData[gid].vars.rawData[realId]["thumbnail"];RawData["ecommerceData"]=cgJsData[gid].vars.rawData[realId]["ecommerceData"];orderData.purchase_units[0]["items"][index]["RawData"]=RawData;orderData.purchase_units[0]["items"][index]["DownloadKeysCsvName"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["DownloadKeysCsvName"];orderData.purchase_units[0]["items"][index]["ServiceKeysCsvName"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["ServiceKeysCsvName"];orderData.purchase_units[0]["items"][index]["EcommerceEntryID"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["EcommerceEntryID"];orderData.purchase_units[0]["items"][index]["IsAlternativeShipping"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["IsAlternativeShipping"];orderData.purchase_units[0]["items"][index]["SaleType"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["SaleType"];orderData.purchase_units[0]["items"][index]["fileType"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["fileType"];orderData.purchase_units[0]["items"][index]["timestampMilliseconds"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["timestampMilliseconds"];orderData.purchase_units[0]["items"][index]["priceGross"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["priceGross"];orderData.purchase_units[0]["items"][index]["gid"]=gid;orderData.purchase_units[0]["items"][index]["realId"]=realId;orderData.purchase_units[0]["items"][index]["IsDownload"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["IsDownload"];orderData.purchase_units[0]["items"][index]["IsService"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["IsService"];orderData.purchase_units[0]["items"][index]["IsShipping"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["IsShipping"];orderData.purchase_units[0]["items"][index]["IsUpload"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["IsUpload"];orderData.purchase_units[0]["items"][index]["alternative_shipping_amount_value_gross"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["alternative_shipping_amount_value_gross"];orderData.purchase_units[0]["items"][index]["alternative_shipping_amount_value_net"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["alternative_shipping_amount_value_net"];orderData.purchase_units[0]["items"][index]["tax_percentage"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["tax_percentage"];orderData.purchase_units[0]["items"][index]["rThumb"]=cgJsClass.gallery.vars.ecommerce.purchase_units_items_before_paypal_processing[index]["rThumb"]}orderData.isSandbox=cgJsClass.gallery.vars.ecommerce.isEcommerceTest;orderData.statusIterationCount=0;orderData.action="post_cg_ecommerce_payment_processing";orderData.realIdsForEcommerceSale=cgJsClass.gallery.vars.ecommerce.realIdsForEcommerceSale;orderData.CurrencyShort=cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort;orderData.client=cgJsClass.gallery.vars.ecommerce.clientId;orderData.priceTotal=cgJsClass.gallery.vars.ecommerce.priceTotal;orderData.shippingTotal=cgJsClass.gallery.vars.ecommerce.shippingTotal;orderData.priceTotalWithShipping=cgJsClass.gallery.vars.ecommerce.priceTotalWithShipping;orderData.DefaultShipping=cgJsClass.gallery.vars.ecommerce.ecommerceOptions.ShippingGross;orderData.TaxPercentageDefault=cgJsClass.gallery.vars.ecommerce.ecommerceOptions.TaxPercentageDefault;orderData.DefaultTax=cgJsClass.gallery.vars.ecommerce.Tax;orderData.ShippingNet=cgJsClass.gallery.vars.ecommerce.ShippingNet;orderData.ShippingGross=cgJsClass.gallery.vars.ecommerce.ShippingGross;orderData.ShippingTaxValue=cgJsClass.gallery.vars.ecommerce.ShippingTaxValue;orderData.alternativeShippingTotalTaxValue=cgJsClass.gallery.vars.ecommerce.alternativeShippingTotalTaxValue;orderData.defaultShipping=cgJsClass.gallery.vars.ecommerce.defaultShipping;orderData.alternativeShippingObject=cgJsClass.gallery.vars.ecommerce.alternativeShippingObject;orderData.priceTotalUnformatted=cgJsClass.gallery.vars.ecommerce.priceTotalUnformatted;orderData.priceTotalWithShippingTotal=cgJsClass.gallery.vars.ecommerce.priceTotalWithShippingTotal;orderData.priceTotalWithShippingTotalUnformatted=cgJsClass.gallery.vars.ecommerce.priceTotalWithShippingTotalUnformatted;orderData.alternativeShippingTotal=cgJsClass.gallery.vars.ecommerce.alternativeShippingTotal;orderData.usedGid=$cgEcommerceCheckoutBodyContainer.attr("data-cg-gid");orderData.PriceDivider=cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PriceDivider;orderData.CurrencyPosition=cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyPosition;orderData.CurrencyShort=cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort;var $cgBC=cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutApproveContainer;orderData.cgInvoiceAddressState="";if($cgBC.find("#cgInvoiceAddressState").val()){orderData.cgInvoiceAddressStateShort=$cgBC.find("#cgInvoiceAddressState").val();orderData.cgInvoiceAddressStateTranslation=$cgBC.find("#cgInvoiceAddressState option:selected").text()}orderData.cgInvoiceAddressCountryShort=$cgBC.find("#cgInvoiceAddressCountry").val();orderData.cgInvoiceAddressCountryTranslation=$cgBC.find("#cgInvoiceAddressCountry option:selected").text();orderData.cgShippingAddressStateShort="";if($cgBC.find("#cgShippingAddressState").val()&&cgJsClass.gallery.vars.ecommerce.hasShipping){orderData.cgShippingAddressStateShort=$cgBC.find("#cgShippingAddressState").val();orderData.cgShippingAddressStateTranslation=$cgBC.find("#cgShippingAddressState option:selected").text()}orderData.cgShippingAddressCountryShort="";orderData.cgShippingAddressCountryTranslation="";if($cgBC.find("#cgShippingAddressCountry").val()&&cgJsClass.gallery.vars.ecommerce.hasShipping){orderData.cgShippingAddressCountryShort=$cgBC.find("#cgShippingAddressCountry").val();orderData.cgShippingAddressCountryTranslation=jQuery("#cgShippingAddressCountry option:selected").text()}if(cgJsClass.gallery.vars.ecommerce.hasShipping){$cgBC.find("#cgEcommerceShippingAddressContainer .cg-address-inputs-div input").each(function(){orderData[jQuery(this).attr("id")]=jQuery(this).val()})}$cgBC.find("#cgEcommerceBillingAddressContainer .cg-address-inputs-div input").each(function(){orderData[jQuery(this).attr("id")]=jQuery(this).val()});cgJsClass.gallery.vars.ecommerce.orderData=orderData;console.log("orderData");console.log(orderData);orderData.statusIterationCount++;console.log("orderDataSend");console.log(orderData);debugger;for(var index in orderData.purchase_units[0].items){if(!orderData.purchase_units[0].items.hasOwnProperty(index)){break}orderData.purchase_units[0].items[index].RawData=JSON.stringify(orderData.purchase_units[0].items[index].RawData)}var post={};post["orderData"]=orderData;post.action="post_cg_ecommerce_payment_processing";cgSendResponse(post);function cgSendResponse(post){debugger;jQuery.ajax({url:post_cg_ecommerce_payment_processing_wordpress_ajax_script_function_name.cg_ecommerce_payment_processing_ajax_url,type:"post",data:post}).done(function(response){if(response.indexOf("###ORDERIDHASH###")>-1){if(!cgJsClass.gallery.vars.ecommerce.isEcommerceDev){debugger;var ORDERIDHASH=response.split("###ORDERIDHASH###")[1];setTimeout(function(){location.href=cgJsClass.gallery.vars.ecommerce.ecommerceOptions.ForwardAfterPurchaseUrl+"?cg_order="+ORDERIDHASH+"&cg_is_after_purchase=true"},0)}}else{setTimeout(function(){jQuery("body").removeClass("cg_pointer_events_none")},4e3);$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerLoader").addClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerOrderSuccessMessage").addClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerClose,#cgEcommerceCheckoutBodyContainerOrderFail").removeClass("cg_hide")}}).fail(function(xhr,status,error){debugger;console.log("fail");console.log(xhr);console.log(status);console.log(error);cgJsClass.gallery.function.message.showPro(gid,error);jQuery("body").removeClass("cg_pointer_events_none");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerLoader").addClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerClose,#cgEcommerceCheckoutBodyContainerOrderFail").removeClass("cg_hide")}).always(function(){})}})},onCancel:function(data){debugger;console.log("cancel")},onError:function(data,actions){debugger;console.log("data onerror");console.log(data);console.log("actions onerror");console.log(actions);cgJsClass.gallery.function.message.showPro(gid,data);jQuery("body").removeClass("cg_pointer_events_none");jQuery("#cgEcommerceCheckoutBodyContainer").find("#cgEcommerceCheckoutBodyContainerLoader").addClass("cg_hide");jQuery("#cgEcommerceCheckoutBodyContainer").find("#cgEcommerceCheckoutBodyContainerClose,#cgEcommerceCheckoutBodyContainerOrderFail").removeClass("cg_hide");console.log("onError")}}).render("#cgEcommerceButtonsContainer")};;cgJsClass.gallery.ecommerce.functions.preProcessing=function(gidForProcessing,isOnAmountSelectChange){debugger;var cgSaleProductsSorted=cgJsClass.gallery.ecommerce.functions.getSaleProductsSorted();var $=jQuery;var $cgEcommerceCheckoutBodyContainer=cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer;if(!cgJsClass.gallery.vars.ecommerce.ecommerceOptions.AllowedCountries){cgJsClass.gallery.vars.ecommerce.ecommerceOptions.AllowedCountries=[]}if(!Object.keys(cgSaleProductsSorted).length){$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyNoSaleProducts").removeClass("cg_hide");$cgEcommerceCheckoutBodyContainer.addClass("cg_overflow_hidden");debugger;$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerLoader,#cgEcommerceCheckoutBodyPaypalLoader").addClass("cg_hide");cgJsClass.gallery.vars.dom.body.removeClass("cg_pointer_events_none");return null}else{$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyInfos").removeClass("cg_hide")}$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutApproveContainer").remove();$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyInfos,#cgEcommerceCheckoutBodyPriceTotal").empty();var purchase_units=cgJsClass.gallery.ecommerce.functions.getPurchaseUnits(cgSaleProductsSorted);var realIdsForEcommerceSale=cgJsClass.gallery.ecommerce.functions.getEcommerceForSale(cgSaleProductsSorted);cgJsClass.gallery.vars.ecommerce.realIdsForEcommerceSale=realIdsForEcommerceSale;$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyProductsInfosContainer").empty();var DefaultShipping=parseFloat(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.ShippingGross).toFixed(2);cgJsClass.gallery.vars.ecommerce.shippingTotal=0;var shippingTotal=0;var alternativeShippingToAdd=0;var defaultShippingToShow=0;var hasDefaultShipping=false;var hasShipping=false;var hasDownloadOrService=false;var i=0;cgJsClass.gallery.vars.ecommerce.hasShipping=false;debugger;var sendUpload="";if(cgJsClass.gallery.language[1]){sendUpload=cgJsClass.gallery.language[1].sendUpload}for(var index in cgSaleProductsSorted){if(!cgSaleProductsSorted.hasOwnProperty(index)){break}var saleProductSorted=cgSaleProductsSorted[index];var units=saleProductSorted["units"];var realId=saleProductSorted["realId"];var realGid=saleProductSorted["realGid"];var gid=cgJsClass.gallery.function.general.tools.getLoadedGidBasedOnRealGid(realGid);if(cgJsClass.gallery.language[gid]){sendUpload=cgJsClass.gallery.language[gid].sendUpload}var priceToShow=cgJsClass.gallery.ecommerce.functions.priceToShow(parseFloat(cgJsData[gid].vars.rawData[realId].ecommerceData["Price"]).toFixed(2),cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PriceDivider,cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyPosition,cgJsClass.gallery.vars.ecommerce.currenciesArray[cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort],saleProductSorted["units"]);var SaleTitle=cgJsClass.gallery.ecommerce.functions.getSaleTitle(gid,realId);var SaleDescription=cgJsClass.gallery.ecommerce.functions.getSaleDescription(gid,realId);priceToShow=cgJsClass.gallery.ecommerce.functions.checkAndSetPriceDivider(priceToShow);var $productInfo=$('<div class="cg-ecommerce-checkout-body-product-info">'+'<div class="cg-sale-remove" data-cg-tooltip="'+cgJsClass.gallery.language.general.Remove+'" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'"></div>'+'<div class="cg-ecommerce-checkout-body-product-info-image">'+"</div>"+'<div class="cg-ecommerce-checkout-body-product-info-content">'+'<div class="cg-sale-title">'+SaleTitle+"</div>"+'<div class="cg-sale-description cg_hide">'+SaleDescription+"</div>"+'<div class="cg-sale-price">'+priceToShow+"</div>"+"</div>"+'<div class="cg-ecommerce-checkout-body-product-info-quantity-select">'+'<span class="cg-ecommerce-checkout-body-product-info-quantity-select-label">'+cgJsClass.gallery.language.ecommerce.Quantity+"</span>"+'<select class="cg-ecommerce-quantity-select" data-cg-gid="'+gid+'"  data-cg-real-id="'+realId+'" >'+'<option class="cg-ecommerce-quantity-select-option">1</option>'+'<option class="cg-ecommerce-quantity-select-option">2</option>'+'<option class="cg-ecommerce-quantity-select-option">3</option>'+"</select>"+"</div>"+'<div class="cg-ecommerce-shipping-info">'+'<div class="cg-ecommerce-shipping-info-title-download cg_hide">'+cgJsClass.gallery.language.ecommerce.Download+"</div>"+'<div class="cg-ecommerce-shipping-info-title-service cg_hide">'+cgJsClass.gallery.language.ecommerce.Service+"</div>"+'<div class="cg-ecommerce-shipping-info-title-upload cg_hide">'+sendUpload+"</div>"+'<div class="cg-ecommerce-shipping-info-title cg_hide">'+cgJsClass.gallery.language.ecommerce.Shipping+"</div>"+'<div class="cg-ecommerce-shipping-info-title-default cg_hide">'+cgJsClass.gallery.language.ecommerce.Shipping+"</div>"+'<div class="cg-ecommerce-shipping-info-title-standard cg_hide">'+cgJsClass.gallery.language.ecommerce.StandardShippingCosts+"</div>"+'<div class="cg-ecommerce-shipping-info-title-extra cg_hide">'+cgJsClass.gallery.language.ecommerce.AlternativeShippingCosts+"</div>"+'<div class="cg-ecommerce-shipping-info-title-free cg_hide">'+cgJsClass.gallery.language.ecommerce.FreeShipping+"</div>"+'<div class="cg-ecommerce-shipping-info-title-price-additional cg_hide">'+"</div>"+"</div>"+"</div>");$productInfo.find(".cg-ecommerce-quantity-select").empty();var SaleAmountMax=parseInt(cgJsData[gid].vars.rawData[realId].ecommerceData.SaleAmountMax);var SaleAmountMin=parseInt(cgJsData[gid].vars.rawData[realId].ecommerceData.SaleAmountMin);if(SaleAmountMin>SaleAmountMax){alert("misconfiguration... sale amount min is higher then sale amount max")}for(var i=SaleAmountMin;i<=SaleAmountMax;i++){var selected="";if(i==units){selected="selected"}$productInfo.find(".cg-ecommerce-quantity-select").append($('<option class="cg-ecommerce-quantity-select-option" '+selected+">"+i+"</option>"))}if(units>SaleAmountMax){units=SaleAmountMax}if(units<SaleAmountMin){units=SaleAmountMin}$productInfo.find(".cg-ecommerce-quantity-select").val(units);$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyProductsInfosContainer").append($productInfo);var fileType=cgJsData[gid].vars.rawData[realId].ImgType;var rThumb=cgJsData[gid].vars.rawData[realId].rThumb;var SaleType=cgJsData[gid].vars.rawData[realId].ecommerceData["SaleType"];var DownloadKeysCsvName=cgJsData[gid].vars.rawData[realId].ecommerceData["DownloadKeysCsvName"];var EcommerceEntryID=cgJsData[gid].vars.rawData[realId].ecommerceData["id"];var IsAlternativeShipping=0;if(cgJsData[gid].vars.rawData[realId].ecommerceData["IsAlternativeShipping"]=="1"){var Shipping=parseFloat(cgJsData[gid].vars.rawData[realId].ecommerceData["AlternativeShipping"]).toFixed(2);IsAlternativeShipping=1}else{var Shipping=parseFloat(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.ShippingGross).toFixed(2);IsAlternativeShipping=0}if(SaleType=="download"||SaleType=="service"||SaleType=="upload"){hasDownloadOrService=true;if(SaleType=="download"){$productInfo.find(".cg-ecommerce-shipping-info-title-download").removeClass("cg_hide")}if(SaleType=="service"){$productInfo.find(".cg-ecommerce-shipping-info-title-service").removeClass("cg_hide")}if(SaleType=="upload"){$productInfo.find(".cg-ecommerce-shipping-info-title-upload").removeClass("cg_hide")}$productInfo.find(".cg-ecommerce-checkout-body-product-info-quantity-select").addClass("cg_visibility_hidden");$productInfo.find(".cg-ecommerce-quantity-select").remove()}debugger;if(SaleType=="shipping"){hasShipping=true;cgJsClass.gallery.vars.ecommerce.hasShipping=true;$productInfo.find(".cg-ecommerce-shipping-info-title-shipping").removeClass("cg_hide");if(Shipping==""||Shipping==0){$productInfo.find(".cg-ecommerce-shipping-info-title-free").removeClass("cg_hide")}else if(Shipping==DefaultShipping&&IsAlternativeShipping!=1){defaultShippingToShow=DefaultShipping;hasDefaultShipping=true;shippingTotal=shippingTotal;$productInfo.find(".cg-ecommerce-shipping-info-title-standard").removeClass("cg_hide")}else{if(IsAlternativeShipping==1){alternativeShippingToAdd=alternativeShippingToAdd+parseFloat(Shipping);$productInfo.find(".cg-ecommerce-shipping-info-title-extra").removeClass("cg_hide");var alternativeShippingPriceToShow=cgJsClass.gallery.ecommerce.functions.priceToShow(Shipping,cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PriceDivider,cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyPosition,cgJsClass.gallery.vars.ecommerce.currenciesArray[cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort],1);$productInfo.find(".cg-ecommerce-shipping-info-title-price-additional").text(alternativeShippingPriceToShow).removeClass("cg_hide")}else{if(!hasDefaultShipping){$productInfo.find(".cg-ecommerce-shipping-info-title-standard").removeClass("cg_hide")}if(Shipping>DefaultShipping){defaultShippingToShow=Shipping}else{if(!hasDefaultShipping){defaultShippingToShow=Shipping}}}}}var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);var $productInfoImage=$productInfo.find(".cg-ecommerce-checkout-body-product-info-image");if(isAlternativeFileType&&isAlternativeFileType=="video"){if(cgJsClass.gallery.ecommerce.functions.checkIfVideoForSale(fileType,gid,realId)){$productInfoImage.addClass("cg-ecommerce-checkout-body-product-info-image-alternative-file-type cg-file-type-"+fileType)}else{var imgSrcOriginal=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId].full);$productInfoImage.addClass("cg-ecommerce-checkout-body-product-info-image-alternative-file-type");$productInfoImage.addClass("cg-ecommerce-checkout-body-product-info-image-alternative-file-type").append('<video width="100%" height="100%" >'+'<source src="'+imgSrcOriginal+'#t=0.001" type="video/mp4">'+'<source src="'+imgSrcOriginal+'#t=0.001" type="video/'+fileType+'">'+"</video>")}}else if(isAlternativeFileType){$productInfoImage.addClass("cg-ecommerce-checkout-body-product-info-image-alternative-file-type cg-file-type-"+fileType)}else if(cgJsClass.gallery.function.general.tools.isEmbed(gid,realId)){cgJsClass.gallery.ecommerce.functions.setEmbedVisual(gid,realId,$productInfoImage,fileType)}else{$productInfoImage.addClass("cg-image-type cg"+rThumb+"degree");$productInfoImage.css("background-image","url("+cgJsData[gid].vars.rawData[realId]["large"]+")")}for(var itemsIndex in cgJsClass.gallery.vars.ecommerce.purchase_units[0]["items"]){if(!cgJsClass.gallery.vars.ecommerce.purchase_units[0]["items"].hasOwnProperty(itemsIndex)){break}if(cgJsClass.gallery.vars.ecommerce.purchase_units[0]["items"][itemsIndex]["realId"]==realId){cgJsClass.gallery.vars.ecommerce.purchase_units[0]["items"][itemsIndex]["EcommerceEntryID"]=EcommerceEntryID;cgJsClass.gallery.vars.ecommerce.purchase_units[0]["items"][itemsIndex]["SaleType"]=SaleType;cgJsClass.gallery.vars.ecommerce.purchase_units[0]["items"][itemsIndex]["DownloadKeysCsvName"]=DownloadKeysCsvName;cgJsClass.gallery.vars.ecommerce.purchase_units[0]["items"][itemsIndex]["fileType"]=fileType;cgJsClass.gallery.vars.ecommerce.purchase_units[0]["items"][itemsIndex]["IsAlternativeShipping"]=IsAlternativeShipping}}i++}cgJsClass.gallery.vars.ecommerce.priceTotal=0;cgJsClass.gallery.vars.ecommerce.priceTotalWithShippingTotal=0;cgJsClass.gallery.vars.ecommerce.ShippingGross=0;cgJsClass.gallery.vars.ecommerce.ShippingNet=0;cgJsClass.gallery.vars.ecommerce.ShippingTaxValue=0;var $cgEcommerceCheckoutApproveContainer=cgJsClass.gallery.ecommerce.functions.getEcommerceCheckoutApproveContainer(gidForProcessing);var localLangShort=cgJsClass.gallery.vars.localeLang.split("_")[0].toUpperCase();cgJsClass.gallery.vars.ecommerce.localLangShort=localLangShort;if(hasShipping){if(hasDefaultShipping&&alternativeShippingToAdd){var shippingTotal=parseFloat(parseFloat(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.ShippingGross).toFixed(2))+parseFloat(parseFloat(alternativeShippingToAdd).toFixed(2));var shippingDefaultToShow=parseFloat(parseFloat(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.ShippingGross).toFixed(2))}else if(hasDefaultShipping&&!alternativeShippingToAdd){var shippingTotal=parseFloat(parseFloat(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.ShippingGross).toFixed(2));var shippingDefaultToShow=parseFloat(parseFloat(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.ShippingGross).toFixed(2))}else if(!hasDefaultShipping&&alternativeShippingToAdd){var shippingTotal=parseFloat(parseFloat(alternativeShippingToAdd).toFixed(2));shippingDefaultToShow=0}cgJsClass.gallery.vars.ecommerce.shippingTotal=shippingTotal;var priceTotal=cgJsClass.gallery.ecommerce.functions.getPriceTotal(cgSaleProductsSorted);var priceTotalUnformatted=cgJsClass.gallery.ecommerce.functions.getPriceTotal(cgSaleProductsSorted,true);cgJsClass.gallery.vars.ecommerce.priceTotalUnformatted=priceTotalUnformatted;priceTotal=cgJsClass.gallery.ecommerce.functions.checkAndSetPriceDivider(priceTotal);var priceTotalWithShippingTotal=cgJsClass.gallery.ecommerce.functions.getPriceTotal(cgSaleProductsSorted,false,shippingTotal);console.log("alert: priceTotalWithShippingTotal"+priceTotalWithShippingTotal);var priceTotalWithShippingTotalUnformatted=cgJsClass.gallery.ecommerce.functions.getPriceTotal(cgSaleProductsSorted,true,shippingTotal);cgJsClass.gallery.vars.ecommerce.priceTotalWithShippingTotalUnformatted=priceTotalWithShippingTotalUnformatted;cgJsClass.gallery.vars.ecommerce.purchase_units[0]["amount"]["value"]=priceTotalWithShippingTotalUnformatted;var item_total_value=cgJsClass.gallery.vars.ecommerce.taxTotalValue?parseFloat(parseFloat(priceTotalUnformatted).toFixed(2)-parseFloat(cgJsClass.gallery.vars.ecommerce.taxTotalValue).toFixed(2)).toFixed(2):parseFloat(priceTotalUnformatted).toFixed(2);cgJsClass.gallery.vars.ecommerce.purchase_units[0]["amount"]["breakdown"]["item_total"]["value"]=item_total_value;console.log("alert: set shipping item_total");cgJsClass.gallery.vars.ecommerce.purchase_units[0]["amount"]["breakdown"]["shipping"]={};cgJsClass.gallery.vars.ecommerce.purchase_units[0]["amount"]["breakdown"]["shipping"]["currency_code"]=cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort;cgJsClass.gallery.vars.ecommerce.purchase_units[0]["amount"]["breakdown"]["shipping"]["value"]=parseFloat(shippingTotal).toFixed(2);var ShippingGross=parseFloat(parseFloat(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.ShippingGross).toFixed(2));cgJsClass.gallery.vars.ecommerce.ShippingGross=ShippingGross;if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.TaxPercentageDefault&&cgJsClass.gallery.vars.ecommerce.ecommerceOptions.ShippingGross){cgJsClass.gallery.vars.ecommerce.ShippingNet=parseFloat(parseFloat(ShippingGross-ShippingGross/100*cgJsClass.gallery.vars.ecommerce.ecommerceOptions.TaxPercentageDefault).toFixed(2));cgJsClass.gallery.vars.ecommerce.ShippingTaxValue=ShippingGross-cgJsClass.gallery.vars.ecommerce.ShippingNet}console.log("hasShipping priceTotalWithShippingTotal");priceTotalWithShippingTotal=cgJsClass.gallery.ecommerce.functions.checkAndSetPriceDivider(priceTotalWithShippingTotal);cgJsClass.gallery.vars.ecommerce.priceTotalWithShippingTotal=priceTotalWithShippingTotal;cgJsClass.gallery.vars.ecommerce.defaultShipping=shippingDefaultToShow;shippingDefaultToShow=cgJsClass.gallery.ecommerce.functions.priceToShow(shippingDefaultToShow,cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PriceDivider,cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyPosition,cgJsClass.gallery.vars.ecommerce.currenciesArray[cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort],1);shippingDefaultToShow=cgJsClass.gallery.ecommerce.functions.checkAndSetPriceDivider(shippingDefaultToShow);var $pricePart=$('<div class="cg-sale-title-part">'+cgJsClass.gallery.language.ecommerce.Price+"</div>"+'<div class="cg-sale-price-part">'+priceTotal+"</div>");var $totalPrice=$('<div class="cg-sale-title-total">'+cgJsClass.gallery.language.ecommerce.TotalPrice+"</div>"+'<div class="cg-sale-price-total">'+priceTotalWithShippingTotal+"</div>");if(hasShipping&&parseInt(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.ShippingGross)||cgJsClass.gallery.vars.ecommerce.alternativeShippingTotal||hasDefaultShipping){$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyPriceTotal").append($pricePart)}$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyPriceTotal").append($totalPrice).removeClass("cg_hide");if(hasDefaultShipping){$('<div class="cg-sale-title-shipping">'+cgJsClass.gallery.language.ecommerce.Shipping+"</div>"+'<div class="cg-sale-total-shipping">'+shippingDefaultToShow+"</div>").insertAfter($cgEcommerceCheckoutBodyContainer.find(".cg-sale-price-part"))}$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyInfos").append($cgEcommerceCheckoutApproveContainer);var countriesString="";if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.AllowedCountries){cgJsClass.gallery.vars.ecommerce.ecommerceOptions.AllowedCountries.forEach(function(countryCode){var countryName=cgJsClass.gallery.vars.ecommerce.ecommerceCountries[countryCode];if(!countriesString){countriesString+=countryName}else{countriesString+=", "+countryName}})}var $cgSelectShippingCountryDiv=$('<div class="cg-row" id="cgSelectShippingCountryDiv"><div class="cg-col-12" style="text-align: left;display:flex;flex-flow:column;" >'+'<span id="cgSelectShippingCountryDivExplanation" class="cg_hide" >'+cgJsClass.gallery.language.ecommerce.ShippingPossibleOnlyForAvailableCountries+": "+countriesString+'</span><select id="cgShippingAddressCountry" class="cg_select_country"><option value="">'+cgJsClass.gallery.language.ecommerce.SelectCountry+' *</option></select><span id="cgSelectShippingCountryError" class="cg_checkout_error cg_checkout_error_required_country cg_hide">'+cgJsClass.gallery.language.ecommerce.SelectCountry+'</span><span id="cgSelectShippingCountryNotAllowedError" class="cg_checkout_error  cg_hide">'+cgJsClass.gallery.language.ecommerce.ShippingCountryNotAllowed+': <span  id="cgSelectShippingCountryNotAllowedCountry"></span></span>'+"</div></div>");console.log("cgJsClass.gallery.vars.ecommerce.ecommerceOptions.AllowedCountries");console.log(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.AllowedCountries);var sortedByAlphabet=[];cgJsClass.gallery.vars.ecommerce.ecommerceOptions.AllowedCountries.forEach(function(countryCode){console.log("localLangShort.toLowerCase()");console.log(localLangShort.toLowerCase());var regionNames=new Intl.DisplayNames([localLangShort.toLowerCase()],{type:"region"});console.log("countryCode");console.log(countryCode);if(countryCode=="C2"){countryCode="CN"}var countryName=regionNames.of(countryCode);var obj={name:countryName,code:countryCode};sortedByAlphabet.push(obj)});var collator=new Intl.Collator(localLangShort.toLowerCase(),{numeric:true,sensitivity:"base"});sortedByAlphabet.sort(function(a,b){return collator.compare(a.name,b.name)});sortedByAlphabet.forEach(function(value,index){$cgSelectShippingCountryDiv.find("#cgShippingAddressCountry").append($('<option value="'+value.code+'">'+value.name+"</option>"))});$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceShippingAddressContainer .cg-address-inputs-div").prepend($cgSelectShippingCountryDiv);var cgShippingAddressCountry=localStorage.getItem("cgShippingAddressCountry");debugger;if(cgShippingAddressCountry){if($cgEcommerceCheckoutBodyContainer.find('#cgShippingAddressCountry option[value="'+cgShippingAddressCountry+'"]').length){$cgEcommerceCheckoutBodyContainer.find("#cgShippingAddressCountry").val(cgShippingAddressCountry)}else{$cgEcommerceCheckoutBodyContainer.find("#cgShippingAddressCountry").val("");$cgEcommerceCheckoutBodyContainer.find("#cgShippingAddressStateDiv").addClass("cg_hide")}if(cgJsClass.gallery.vars.ecommerce.ecommerceCountriesStatesCodes[cgShippingAddressCountry]&&$cgEcommerceCheckoutBodyContainer.find("#cgShippingAddressCountry").val()==cgShippingAddressCountry){cgJsClass.gallery.ecommerce.functions.insertSelectStatesForCountry($,cgShippingAddressCountry,$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceShippingAddressContainer .cg-address-inputs-div"),localStorage.getItem("cgShippingAddressState"))}else{$cgEcommerceCheckoutBodyContainer.find("#cgShippingAddressStateDiv").addClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgShippingAddressStateDiv .cg_select_state").val("")}}else{$cgEcommerceCheckoutBodyContainer.find("#cgShippingAddressStateDiv").addClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgShippingAddressStateDiv .cg_select_state").val("")}var cgEcommerceTaxNr=localStorage.getItem("cgEcommerceTaxNr");if(cgEcommerceTaxNr){$cgEcommerceCheckoutApproveContainer.find("#cgEcommerceTaxNr").val(cgEcommerceTaxNr)}$cgEcommerceCheckoutApproveContainer.find(".cg_checkout_error").addClass("cg_hide");$cgEcommerceCheckoutApproveContainer.find("#cgEcommerceBillingAddressContainer").removeClass("cg_hide");if(hasShipping){$cgEcommerceCheckoutApproveContainer.find("#cgEcommerceAddress").removeClass("cg_justify_content_center")}if(cgJsClass.gallery.vars.ecommerce.alternativeShippingTotal){debugger;cgJsClass.gallery.vars.ecommerce.alternativeShippingObject={};cgJsClass.gallery.vars.ecommerce.alternativeShippingArray.forEach(function(object,index){cgJsClass.gallery.vars.ecommerce.alternativeShippingObject[index]={};cgJsClass.gallery.vars.ecommerce.alternativeShippingObject[index]["name"]=object.name;cgJsClass.gallery.vars.ecommerce.alternativeShippingObject[index]["alternativeShipping"]=object.alternativeShipping;if(object.alternativeShipping>0){var alternativeShippingToShow=cgJsClass.gallery.ecommerce.functions.priceToShow(object.alternativeShipping,cgJsClass.gallery.vars.ecommerce.ecommerceOptions.PriceDivider,cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyPosition,cgJsClass.gallery.vars.ecommerce.currenciesArray[cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CurrencyShort],1);alternativeShippingToShow=cgJsClass.gallery.ecommerce.functions.checkAndSetPriceDivider(alternativeShippingToShow);var $toInsert=$('<div class="cg-sale-title-shipping">'+cgJsClass.gallery.language.ecommerce.AlternativeShipping+" - "+object.name+"</div>"+'<div class="cg-sale-total-shipping">'+alternativeShippingToShow+"</div>");$toInsert.insertBefore($cgEcommerceCheckoutBodyContainer.find(".cg-sale-title-total").last())}})}}else{var priceTotal=cgJsClass.gallery.ecommerce.functions.getPriceTotal(cgSaleProductsSorted,true);cgJsClass.gallery.vars.ecommerce.purchase_units[0]["amount"]["value"]=priceTotal;var item_total_value=cgJsClass.gallery.vars.ecommerce.taxTotalValue?parseFloat(parseFloat(priceTotal).toFixed(2)-parseFloat(cgJsClass.gallery.vars.ecommerce.taxTotalValue).toFixed(2)).toFixed(2):parseFloat(priceTotal).toFixed(2);cgJsClass.gallery.vars.ecommerce.purchase_units[0]["amount"]["breakdown"]["item_total"]["value"]=item_total_value;console.log("alert: set download item_total"+priceTotal);var priceTotal=cgJsClass.gallery.ecommerce.functions.getPriceTotal(cgSaleProductsSorted);priceTotal=cgJsClass.gallery.ecommerce.functions.checkAndSetPriceDivider(priceTotal);$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyPriceTotal").html('<div class="cg-sale-title-total">'+cgJsClass.gallery.language.ecommerce.TotalPrice+"</div>"+'<div class="cg-sale-price-total">'+priceTotal+"</div>").removeClass("cg_hide");$cgEcommerceCheckoutApproveContainer.insertAfter($cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyPriceTotal"));$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceBillingAddressContainer").removeClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgBillingAddressDifferentFromShippingAddressContainer").addClass("cg_hide");var cgEcommerceTaxNr=localStorage.getItem("cgEcommerceTaxNr");if(cgEcommerceTaxNr){$cgEcommerceCheckoutApproveContainer.find("#cgEcommerceTaxNr").val(cgEcommerceTaxNr)}}var $cgInvoiceAddressCountryDiv=$('<div class="cg-row"  id="cgInvoiceAddressCountryDiv"><div class="cg-col-12" style="text-align: left;"  >'+'<select id="cgInvoiceAddressCountry" class="cg_select_country" ><option value="">'+cgJsClass.gallery.language.ecommerce.SelectCountry+' *</option></select><span id="cgInvoiceAddressCountryError" class="cg_checkout_error cg_checkout_error_required_country cg_hide">'+cgJsClass.gallery.language.ecommerce.SelectCountry+"</span>"+"</div></div>");var sortedByAlphabet=[];if(hasShipping){cgJsClass.gallery.vars.ecommerce.ecommerceOptions.AllowedCountries.forEach(function(countryCode){var regionNames=new Intl.DisplayNames([localLangShort.toLowerCase()],{type:"region"});if(countryCode=="C2"){countryCode="CN"}var countryName=regionNames.of(countryCode);var obj={name:countryName,code:countryCode};sortedByAlphabet.push(obj)})}else{for(var countryCode in cgJsClass.gallery.vars.ecommerce.ecommerceCountries){if(!cgJsClass.gallery.vars.ecommerce.ecommerceCountries.hasOwnProperty(countryCode)){break}var regionNames=new Intl.DisplayNames([localLangShort.toLowerCase()],{type:"region"});if(countryCode=="C2"){countryCode="CN"}var countryName=regionNames.of(countryCode);var obj={name:countryName,code:countryCode};sortedByAlphabet.push(obj)}}var collator=new Intl.Collator(localLangShort.toLowerCase(),{numeric:true,sensitivity:"base"});sortedByAlphabet.sort(function(a,b){return collator.compare(a.name,b.name)});sortedByAlphabet.forEach(function(value,index){$cgInvoiceAddressCountryDiv.find("#cgInvoiceAddressCountry").append($('<option value="'+value.code+'">'+value.name+"</option>"))});$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceBillingAddressContainer .cg-address-inputs-div").prepend($cgInvoiceAddressCountryDiv);var cgInvoiceAddressCountry=localStorage.getItem("cgInvoiceAddressCountry");if(cgInvoiceAddressCountry){if($cgEcommerceCheckoutBodyContainer.find('#cgInvoiceAddressCountry option[value="'+cgInvoiceAddressCountry+'"]').length){$cgEcommerceCheckoutBodyContainer.find("#cgInvoiceAddressCountry").val(cgInvoiceAddressCountry)}else{$cgEcommerceCheckoutBodyContainer.find("#cgInvoiceAddressCountry").val("");$cgEcommerceCheckoutBodyContainer.find("#cgInvoiceAddressStateDiv").addClass("cg_hide")}if(cgJsClass.gallery.vars.ecommerce.ecommerceCountriesStatesCodes[cgInvoiceAddressCountry]&&$cgEcommerceCheckoutBodyContainer.find("#cgInvoiceAddressCountry").val()==cgInvoiceAddressCountry){cgJsClass.gallery.ecommerce.functions.insertSelectStatesForCountry($,cgInvoiceAddressCountry,$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceBillingAddressContainer .cg-address-inputs-div"),localStorage.getItem("cgInvoiceAddressState"))}else{$cgEcommerceCheckoutBodyContainer.find("#cgInvoiceAddressStateDiv").addClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgInvoiceAddressStateDiv .cg_select_state").val("")}}else{$cgEcommerceCheckoutBodyContainer.find("#cgInvoiceAddressStateDiv").addClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgInvoiceAddressStateDiv .cg_select_state").val("")}$cgEcommerceCheckoutApproveContainer.find(".cg-address-inputs-div input").each(function(){var id=$(this).attr("id");$(this).val(localStorage.getItem(id)?localStorage.getItem(id):"")});var $cgCheckoutNoteTop=$('<div id="cgCheckoutNoteTop"></div>');var $cgCheckoutAgreements=$('<div id="cgCheckoutAgreements"></div>');var $cgCheckoutNoteBottom=$('<div id="cgCheckoutNoteBottom"></div>');var isAgreementSet=false;var isNoteSet=false;if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CheckoutAgreementOne&&cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CheckoutAgreementOne.trim()&&!isOnAmountSelectChange){isAgreementSet=true;var $cg_check_out_agreement=$('<div class="cg_check_out_agreement"></div>');var $cg_check_out_agreement_checkbox_container=$('<div class="cg_check_out_agreement_checkbox_container"><input type="checkbox" class="cg_check_out_agreement_checkbox"></div>');var $cg_check_out_agreement_content=$('<div class="cg_check_out_agreement_content"><div class="cg_check_out_agreement_error cg_hide cg_checkout_error">'+cgJsClass.gallery.language.ecommerce.PleaseCheckAgreement+"</div></div>");var CheckoutAgreementOne=$("<textarea />").html(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CheckoutAgreementOne).text();$cg_check_out_agreement_content.prepend(CheckoutAgreementOne);$cg_check_out_agreement.append($cg_check_out_agreement_checkbox_container);$cg_check_out_agreement.append($cg_check_out_agreement_content);$cgCheckoutAgreements.append($cg_check_out_agreement)}if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CheckoutAgreementTwo&&cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CheckoutAgreementTwo.trim()&&!isOnAmountSelectChange){isAgreementSet=true;var $cg_check_out_agreement=$('<div class="cg_check_out_agreement"></div>');var $cg_check_out_agreement_checkbox_container=$('<div class="cg_check_out_agreement_checkbox_container"><input type="checkbox" class="cg_check_out_agreement_checkbox"></div>');var $cg_check_out_agreement_content=$('<div class="cg_check_out_agreement_content"><div class="cg_check_out_agreement_error cg_checkout_error cg_hide">'+cgJsClass.gallery.language.ecommerce.PleaseCheckAgreement+"</div></div>");var CheckoutAgreementTwo=$("<textarea />").html(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CheckoutAgreementTwo).text();$cg_check_out_agreement_content.prepend(CheckoutAgreementTwo);$cg_check_out_agreement.append($cg_check_out_agreement_checkbox_container);$cg_check_out_agreement.append($cg_check_out_agreement_content);$cgCheckoutAgreements.append($cg_check_out_agreement)}if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CheckoutAgreementThree&&cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CheckoutAgreementThree.trim()&&!isOnAmountSelectChange){isAgreementSet=true;var $cg_check_out_agreement=$('<div class="cg_check_out_agreement"></div>');var $cg_check_out_agreement_checkbox_container=$('<div class="cg_check_out_agreement_checkbox_container"><input type="checkbox" class="cg_check_out_agreement_checkbox"></div>');var $cg_check_out_agreement_content=$('<div class="cg_check_out_agreement_content"><div class="cg_check_out_agreement_error cg_hide cg_checkout_error">'+cgJsClass.gallery.language.ecommerce.PleaseCheckAgreement+"</div></div>");var CheckoutAgreementThree=$("<textarea />").html(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CheckoutAgreementThree).text();$cg_check_out_agreement_content.prepend(CheckoutAgreementThree);$cg_check_out_agreement.append($cg_check_out_agreement_checkbox_container);$cg_check_out_agreement.append($cg_check_out_agreement_content);$cgCheckoutAgreements.append($cg_check_out_agreement)}if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CheckoutNoteTop){isNoteSet=true;var $cgCheckoutNoteTop=$('<div id="cgCheckoutNoteTop"></div>');var CheckoutNoteTop=$("<textarea />").html(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CheckoutNoteTop).text();if(!isOnAmountSelectChange){$cgCheckoutNoteTop.html(CheckoutNoteTop)}}if(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CheckoutNoteBottom){isNoteSet=true;var $cgCheckoutNoteBottom=$('<div id="cgCheckoutNoteBottom"></div>');var CheckoutNoteBottom=$("<textarea />").html(cgJsClass.gallery.vars.ecommerce.ecommerceOptions.CheckoutNoteBottom).text();if(!isOnAmountSelectChange){$cgCheckoutNoteBottom.html(CheckoutNoteBottom)}}if(isNoteSet){$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyInfos").append($cgCheckoutNoteTop)}if(isAgreementSet){$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyOverlay").removeClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyInfos").append($cgCheckoutAgreements)}if(isNoteSet){$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyInfos").append($cgCheckoutNoteBottom)}$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyProductsInfosContainer").removeClass("cg_hide");if(cgJsClass.gallery.vars.ecommerce.isFirstCheckoutLoad){$cgEcommerceCheckoutBodyContainer.find(".cg-general-frontend-loader").addClass("cg_hide");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutBodyContainerSub").removeClass("cg_hide")}var isInvoiceShippingDifferent=function($container){var isDifferent=false;if($container.find("#cgInvoiceAddressCountry").val()!=$container.find("#cgShippingAddressCountry").val()){isDifferent=true}if($container.find("#cgInvoiceAddressFirstName").val()!=$container.find("#cgShippingAddressFirstName").val()){isDifferent=true}if($container.find("#cgInvoiceAddressLastName").val()!=$container.find("#cgShippingAddressLastName").val()){isDifferent=true}if($container.find("#cgInvoiceAddressCompany").val()!=$container.find("#cgShippingAddressCompany").val()){isDifferent=true}if($container.find("#cgInvoiceAddressLine1").val()!=$container.find("#cgShippingAddressLine1").val()){isDifferent=true}if($container.find("#cgInvoiceAddressLine2").val()!=$container.find("#cgShippingAddressLine2").val()){isDifferent=true}if($container.find("#cgInvoiceAddressState").val()!=$container.find("#cgShippingAddressState").val()){isDifferent=true}if($container.find("#cgInvoiceAddressCity").val()!=$container.find("#cgShippingAddressCity").val()){isDifferent=true}return isDifferent};if(hasShipping){$cgEcommerceCheckoutApproveContainer.find("#cgEcommerceShippingAddressContainer").removeClass("cg_hide");if(cgJsClass.gallery.vars.ecommerce.isDifferentBillingAddressClicked||isInvoiceShippingDifferent($cgEcommerceCheckoutBodyContainer)||localStorage.getItem("isCgBillingAddressDifferentFromShippingAddressButtonClicked")){$cgEcommerceCheckoutApproveContainer.find("#cgBillingAddressDifferentFromShippingAddressContainer").addClass("cg_hide");$cgEcommerceCheckoutApproveContainer.find("#cgEcommerceBillingAddressContainer").removeClass("cg_hide")}else{$cgEcommerceCheckoutApproveContainer.find("#cgBillingAddressDifferentFromShippingAddressContainer").removeClass("cg_hide");$cgEcommerceCheckoutApproveContainer.find("#cgEcommerceBillingAddressContainer").addClass("cg_hide")}$cgEcommerceCheckoutApproveContainer.find("#cgSameAsShippingAddress").removeClass("cg_hide")}else{cgJsClass.gallery.vars.ecommerce.isDifferentBillingAddressClicked=false;$cgEcommerceCheckoutApproveContainer.find("#cgEcommerceShippingAddressContainer").addClass("cg_hide");$cgEcommerceCheckoutApproveContainer.find("#cgBillingAddressDifferentFromShippingAddressContainer").addClass("cg_hide");$cgEcommerceCheckoutApproveContainer.find("#cgEcommerceBillingAddressContainer").removeClass("cg_hide");$cgEcommerceCheckoutApproveContainer.find("#cgSameAsShippingAddress").addClass("cg_hide")}return{realIdsForEcommerceSale:realIdsForEcommerceSale,purchase_units:purchase_units}};;cgJsClass.gallery.ecommerce.functions.getEcommerceCheckoutApproveContainer=function(gid){var shippingAndInvoiceCountryName=cgJsClass.gallery.vars.ecommerce.ecommerceCountries[cgJsClass.gallery.vars.ecommerce.selectedCountryCode];var $=jQuery;$(".paypal-checkout-sandbox,.paypal-checkout-live").addClass("cg_hide");var $cgBillingAddressInputsDiv=$('<div class="cg-address-inputs-div">'+'<div class="cg-row">'+'<div class="cg-col-6" ><div class="cg-col-field">'+'<input id="cgInvoiceAddressFirstName" class="cg_required cg_input" placeholder=" " autocomplete="off" role="presentation" />'+'<span class="cg_placeholder">'+cgJsClass.gallery.language.ecommerce.FirstName+" *</span>"+'<div class="cg_checkout_error cg_hide" >'+cgJsClass.gallery.language.general.Required+"</div>"+"</div></div>"+'<div class="cg-col-6" ><div class="cg-col-field">'+'<input id="cgInvoiceAddressLastName" class="cg_required cg_input"  placeholder=" "  autocomplete="off" role="presentation"/>'+'<span class="cg_placeholder">'+cgJsClass.gallery.language.ecommerce.LastName+" *</span>"+'<div class="cg_checkout_error cg_hide" >'+cgJsClass.gallery.language.general.Required+"</div>"+"</div></div>"+"</div>"+'<div class="cg-row">'+'<div class="cg-col-12" ><div class="cg-col-field">'+'<input id="cgInvoiceAddressCompany"  placeholder=" " class="cg_input"  autocomplete="off" role="presentation" />'+'<span class="cg_placeholder">'+cgJsClass.gallery.language.ecommerce.Company+"  ("+cgJsClass.gallery.language.ecommerce.Optional+")</span>"+"</div></div>"+"</div>"+'<div class="cg-row">'+'<div class="cg-col-12" ><div class="cg-col-field">'+'<input id="cgInvoiceAddressLine1" class="cg_required cg_input"    placeholder=" "  autocomplete="off" role="presentation"/>'+'<span class="cg_placeholder">'+cgJsClass.gallery.language.ecommerce.AddressLineOne+" *</span>"+'<div class="cg_checkout_error cg_hide" >'+cgJsClass.gallery.language.general.Required+"</div>"+"</div></div>"+"</div>"+'<div class="cg-row">'+'<div class="cg-col-12" ><div class="cg-col-field">'+'<input id="cgInvoiceAddressLine2" class="cg_input"     placeholder=" "  autocomplete="off" role="presentation" />'+'<span class="cg_placeholder">'+cgJsClass.gallery.language.ecommerce.AddressLineTwo+"  ("+cgJsClass.gallery.language.ecommerce.Optional+")</span>"+"</div></div>"+"</div>"+'<div class="cg-row cg-city-postal" >'+'<div class="cg-col-6" ><div class="cg-col-field">'+'<input id="cgInvoiceAddressCity" class="cg_input cg_required"  placeholder=" "  autocomplete="off" role="presentation"/>'+'<span class="cg_placeholder">'+cgJsClass.gallery.language.ecommerce.City+"  *</span>"+'<div class="cg_checkout_error cg_hide" >'+cgJsClass.gallery.language.general.Required+"</div>"+"</div></div>"+'<div class="cg-col-6" ><div class="cg-col-field">'+'<input id="cgInvoiceAddressPostalCode"  class="cg_input cg_required"  placeholder=" "  autocomplete="off" role="presentation"/>'+'<span class="cg_placeholder">'+cgJsClass.gallery.language.ecommerce.PostalCode+"  *</span>"+'<div class="cg_checkout_error cg_hide" >'+cgJsClass.gallery.language.general.Required+"</div>"+"</div></div>"+"</div>"+'<div class="cg-row">'+'<div class="cg-col-12" ><div class="cg-col-field">'+'<input id="cgEcommerceTaxNr"  class="cg_input"    placeholder=" "  autocomplete="off" role="presentation" />'+'<span class="cg_placeholder">'+cgJsClass.gallery.language.ecommerce.VatNumber+"  ("+cgJsClass.gallery.language.ecommerce.Optional+")</span>"+"</div></div>"+"</div>"+"</div>");var $cgShippingAddressInputsDiv=$cgBillingAddressInputsDiv.clone();$cgShippingAddressInputsDiv.find("#cgEcommerceTaxNr").closest(".cg-row").remove();$cgShippingAddressInputsDiv.find("input").each(function(){$(this).attr("id",$(this).attr("id").replace("Invoice","Shipping"))});var $cgEcommerceCheckoutApproveContainer=$('<div id="cgEcommerceCheckoutApproveContainer">'+'<div id="cgContactInformation" class="cg_hide" >'+'<div id="cgContactInformationContainer" class="cg-ecommerce-address">'+'<div class="cg-ecommerce-input-div-container">'+'<label for="cgEcommerceBillingAddress" class="cg-ecommerce-address-input-label">Contact data *</label>'+'<div  class="cg-address-inputs-div">'+'<div class="cg-row">'+'<div class="cg-col-12" >'+'<div class="cg-col-field">'+'<input id="cgPayerEmail" class="cg_required"    placeholder=" '+cgJsClass.gallery.language[gid].Email+' *"/>'+'<div class="cg_checkout_error cg_hide" >'+cgJsClass.gallery.language.general.Required+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+'<div id="cgEcommerceAddress" class="cg_justify_content_center">'+'<div id="cgEcommerceShippingAddressContainer" class="cg-ecommerce-address cg_hide">'+'<div class="cg-ecommerce-input-div-container">'+'<label for="cgEcommerceShippingAddress" class="cg-ecommerce-address-input-label">'+cgJsClass.gallery.language.ecommerce.ShippingAddress+" *"+"</label>"+'<div class="cg-ecommerce-address-input-div cg_hide_override" >'+'<textarea name="cgEcommerceShippingAddressText"  class="cg-ecommerce-billing-address-textarea"  id="cgEcommerceShippingAddress" rows="6" ></textarea>'+'<span class="cg-ecommerce-input-comment cg_hide"></span>'+"</div>"+'<div class="cg_checkout_error cg_hide"  >'+cgJsClass.gallery.language.general.Required+"</div>"+'<div class="cg-ecommerce-address-input-div-country cg_hide" >'+cgJsClass.gallery.language.ecommerce.Country+": <b>"+shippingAndInvoiceCountryName+"</b>"+"</div>"+'<div class="cg-ecommerce-edit-address-button-input-div cg_hide">'+'<input type="button" class="cg-ecommerce-button cg-ecommerce-address-input-button cg-ecommerce-address-input-button-edit" id="cgEcommerceInvoiceEditButton" value="Edit"/>'+"</div>"+"</div>"+"</div>"+'<div id="cgEcommerceBillingAddressContainer" class="cg-ecommerce-address cg_hide">'+'<div class="cg-ecommerce-input-div-container">'+'<label for="cgEcommerceBillingAddress" class="cg-ecommerce-address-input-label">'+cgJsClass.gallery.language.ecommerce.InvoiceAddress+" *"+"</label>"+'<div class="cg-ecommerce-address-input-div cg_hide_override">'+'<textarea name="cgEcommerceInvoiceAddressText" class="cg-ecommerce-billing-address-textarea"  id="cgEcommerceBillingAddress" rows="6" ></textarea>'+'<span class="cg-ecommerce-input-comment"></span>'+"</div>"+'<div class="cg_checkout_error cg_hide" >'+cgJsClass.gallery.language.general.Required+"</div>"+'<div id="cgSameAsShippingAddress" >'+cgJsClass.gallery.language.ecommerce.SameAsBillingAddress+"</div>"+'<div class="cg-ecommerce-address-input-div-country cg_hide" >'+cgJsClass.gallery.language.ecommerce.Country+": <b>"+shippingAndInvoiceCountryName+"</b>"+"</div>"+'<div class="cg-ecommerce-edit-address-button-input-div cg_hide">'+'<input type="button" class="cg-ecommerce-button cg-ecommerce-address-input-button cg-ecommerce-address-input-button-edit" id="cgEcommerceShippingEditButton" value="Edit"/>'+"</div>"+"</div>"+"</div>"+'<div class="cg-ecommerce-address" id="cgBillingAddressDifferentFromShippingAddressContainer" >'+'<div class="cg_edit_invoice_address" id="cgBillingAddressDifferentFromShippingAddressButton" >'+cgJsClass.gallery.language.ecommerce.ShipToDifferentAddress+"</div>"+"</div>"+"</div>"+'<div id="cgEcommerceCapture" class="cg_hide" >'+'<input type="button"  id="cgEcommerceCaptureButton" data-cg-gid="'+gid+'" class="cg-ecommerce-button" value="Complete purchase"/>'+"</div>"+"<div id='cgEcommerceCheckoutApproveContainerLoader' class='"+(cgJsData[gid].vars.mainCGdiv.hasClass("cg_fe_controls_style_white")?"cg_fe_controls_style_white":"")+" cg_checkout_loader cg-general-frontend-loader cg-lds-dual-ring-div-gallery-hide cg-lds-dual-ring-div-gallery-hide-parent cg_hide'>"+"<div class='cg-lds-dual-ring-gallery-hide'></div>"+"</div>"+"<div id='cgEcommerceCheckoutApproveContainerSuccess' class='cg_hide'>"+cgJsClass.gallery.language.ecommerce.OrderSuccessfulYouWillBeRedirected+"</div>"+"<div id='cgEcommerceCheckoutApproveContainerFail'  class='cg_hide'>"+"Something went wrong. Please contact administrator."+"</div>"+"</div>");$cgShippingAddressInputsDiv.insertAfter($cgEcommerceCheckoutApproveContainer.find("#cgEcommerceShippingAddressContainer .cg-ecommerce-address-input-div"));$cgBillingAddressInputsDiv.insertAfter($cgEcommerceCheckoutApproveContainer.find("#cgEcommerceBillingAddressContainer .cg-ecommerce-address-input-div"));cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutApproveContainer=$cgEcommerceCheckoutApproveContainer;if(cgJsData[gid].vars.mainCGdiv.hasClass("cg_fe_controls_style_white")){cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutApproveContainer.addClass("cg_fe_controls_style_white")}else{cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutApproveContainer.removeClass("cg_fe_controls_style_white")}if(cgJsData[gid].vars.mainCGdiv.hasClass("cg_border_radius_controls_and_containers")){cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutApproveContainer.addClass("cg_border_radius_controls_and_containers")}else{cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutApproveContainer.removeClass("cg_border_radius_controls_and_containers")}return cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutApproveContainer};;cgJsClass.gallery.ecommerce.events.init=function($){if(cgJsClass.gallery.vars.eventInitEcommerce){return}else{cgJsClass.gallery.vars.eventInitEcommerce=true}$(document).on("click",".cg-ecommerce-shipping-info-copy-key",function(){var copyText=$(this).parent().find(".cg-ecommerce-shipping-info-key").text().trim();var el=document.createElement("textarea");el.value=copyText;el.setAttribute("readonly","");el.style.position="absolute";el.style.left="-9999px";document.body.appendChild(el);el.select();document.execCommand("copy");document.body.removeChild(el);cgJsClass.gallery.function.message.show(undefined,"Key copied",undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,cgJsClass.gallery.vars.ecommerce.ecommerceOptions.BorderRadiusOrder?true:false,!cgJsClass.gallery.vars.ecommerce.ecommerceOptions.FeControlsStyleOrder||cgJsClass.gallery.vars.ecommerce.ecommerceOptions.FeControlsStyleOrder=="white"?true:false)});$(document).on("click",".cg-sale-basket-open",function(){var isFullScreenClosed=false;debugger;var gid=$(this).attr("data-cg-gid");var $cgEcommerceCheckoutBodyContainer=$("#cgEcommerceCheckoutBodyContainer");if(cgJsClass.gallery.vars.ecommerce.isEcommerceTest){$cgEcommerceCheckoutBodyContainer.addClass("cg_test")}if(cgJsClass.gallery.vars.fullscreen){$("#mainCGdivHelperParent"+cgJsClass.gallery.vars.fullscreen).append($cgEcommerceCheckoutBodyContainer)}cgJsClass.gallery.ecommerce.functions.showCheckoutPreProcessing($,gid);if(isFullScreenClosed){}});$(document).on("click",".cg-center-sale-add-to-basket",function(){var gid=$(this).attr("data-cg-gid");var realId=$(this).attr("data-cg-real-id");var units=cgJsClass.gallery.ecommerce.functions.getUnits(gid,realId,true);var SaleAmountMin=parseInt(cgJsData[gid].vars.rawData[realId].ecommerceData.SaleAmountMin);if(units<SaleAmountMin){units=SaleAmountMin}debugger;cgJsClass.gallery.ecommerce.functions.addToBasket(gid,realId,$(this),units,undefined,undefined,true);var SaleTitle="";if(cgJsData[gid].options.visual["EcommerceTitle"]&&cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["EcommerceTitle"]]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["EcommerceTitle"]]["field-content"]){SaleTitle=cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["EcommerceTitle"]]["field-content"]}var SaleDescription="";if(cgJsData[gid].options.visual["EcommerceDescription"]&&cgJsData[gid].vars.info[realId]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["EcommerceDescription"]]&&cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["EcommerceDescription"]]["field-content"]){SaleDescription=cgJsData[gid].vars.info[realId][cgJsData[gid].options.visual["EcommerceDescription"]]["field-content"]}var fileType=cgJsData[gid].vars.rawData[realId].ImgType;var rThumb=cgJsData[gid].vars.rawData[realId].rThumb;var isAlternativeFileType=cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid,realId);var $productInfoImage=$('<div class="cg-ecommerce-checkout-body-product-info-image"></div>');if(isAlternativeFileType&&isAlternativeFileType=="video"){if(cgJsClass.gallery.ecommerce.functions.checkIfVideoForSale(fileType,gid,realId)){$productInfoImage.addClass("cg-ecommerce-checkout-body-product-info-image-alternative-file-type cg-file-type-"+fileType)}else{var imgSrcOriginal=cgJsClass.gallery.function.general.tools.checkSsl(cgJsData[gid].vars.rawData[realId].full);$productInfoImage.addClass("cg-ecommerce-checkout-body-product-info-image-alternative-file-type");$productInfoImage.addClass("cg-ecommerce-checkout-body-product-info-image-alternative-file-type").append('<video width="100%" height="100%" >'+'<source src="'+imgSrcOriginal+'#t=0.001" type="video/mp4">'+'<source src="'+imgSrcOriginal+'#t=0.001" type="video/'+fileType+'">'+"</video>")}}else if(isAlternativeFileType){$productInfoImage.addClass("cg-ecommerce-checkout-body-product-info-image-alternative-file-type cg-file-type-"+fileType)}else if(cgJsClass.gallery.function.general.tools.isEmbed(gid,realId)){cgJsClass.gallery.ecommerce.functions.setEmbedVisual(gid,realId,$productInfoImage,fileType,undefined,true)}else{$productInfoImage.addClass("cg-image-type cg"+rThumb+"degree");$productInfoImage.css("background-image","url("+cgJsData[gid].vars.rawData[realId]["large"]+")")}var $showProInfo=$('<div id="cgMessagesContainerProEcommerce" >'+'<p class="cg-ecommerce-title" >'+SaleTitle+"</p>"+'<p class="cg-ecommerce-message">'+cgJsClass.gallery.language.ecommerce.AddedToBasket+"</p>"+'<div  class="cg-ecommerce-go-to-basket" data-cg-gid="'+gid+'" data-cg-real-id="'+realId+'">'+cgJsClass.gallery.language.ecommerce.GoToBasket+"</div>"+"</div>");$showProInfo.prepend($productInfoImage);cgJsClass.gallery.function.message.showPro(gid,$showProInfo)});$(document).on("click",".cg-sale-remove",function(){var realIdToRemove=$(this).attr("data-cg-real-id");var $cgEcommerceCheckoutBodyContainer=$(this).closest("#cgEcommerceCheckoutBodyContainer");$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceCheckoutApproveContainer").remove();var gid=$cgEcommerceCheckoutBodyContainer.attr("data-cg-gid");cgJsClass.gallery.ecommerce.functions.removeItemFromSaleProducts(realIdToRemove);cgJsClass.gallery.ecommerce.functions.showCheckout($,gid)});$(document).on("click",".mainCGdivUploadFormEcommerceButton",function(){cgJsClass.gallery.ecommerce.functions.addToBasket($(this).attr("data-cg-gid"),$(this).attr("data-cg-real-id"),$(this),undefined,1);cgJsClass.gallery.ecommerce.functions.showCheckout($,$(this).attr("data-cg-gid"))});$(document).on("click",".cg-center-sale-buy-now",function(){cgJsClass.gallery.function.message.close();var gid=$(this).attr("data-cg-gid");var realId=$(this).attr("data-cg-real-id");var units=cgJsClass.gallery.ecommerce.functions.getUnits(gid,realId);var SaleAmountMin=parseInt(cgJsData[gid].vars.rawData[realId].ecommerceData.SaleAmountMin);if(units<SaleAmountMin){units=SaleAmountMin}cgJsClass.gallery.ecommerce.functions.addToBasket(gid,realId,$(this),units,undefined,undefined,true);cgJsClass.gallery.ecommerce.functions.showCheckoutPreProcessing($,gid)});$(document).on("click","#cgMessagesContainerProEcommerce .cg-ecommerce-go-to-basket",function(){cgJsClass.gallery.function.message.close();cgJsData[$(this).attr("data-cg-gid")].vars.mainCGdiv.find(".cg_header .cg_sort_div .cg-sale-basket-open").first().click()});$(document).on("change","#cgEcommerceCheckoutBodyContainer .cg-ecommerce-quantity-select",function(){cgJsClass.gallery.ecommerce.functions.addToBasket($(this).attr("data-cg-gid"),$(this).attr("data-cg-real-id"),$(this),$(this).val(),false,true);cgJsClass.gallery.ecommerce.functions.showCheckout($,$(this).closest("#cgEcommerceCheckoutBodyContainer").attr("data-cg-gid"),true);jQuery("body").removeClass("cg_overflow_hidden cg_pointer_events_none")});$(document).on("click","#cgEcommerceCheckoutBodyContainerClose",function(){cgJsClass.gallery.ecommerce.functions.checkoutContainerClose()});cgJsClass.gallery.ecommerce.functions.checkoutContainerClose();$(document).on("input","#cgEcommerceCheckoutApproveContainer input.cg_required",function(){if($(this).val()){$(this).parent().find(".cg_checkout_error").addClass("cg_hide")}else{$(this).parent().find(".cg_checkout_error").removeClass("cg_hide")}if(cgJsClass.gallery.ecommerce.functions.cgCheckAgreementsAndRequired(false,true)){$("#cgEcommerceCheckoutBodyOverlay").removeClass("cg_hide")}else{$("#cgEcommerceCheckoutBodyOverlay").addClass("cg_hide")}});$(document).on("change",".cg_check_out_agreement_checkbox",function(){if($(this).prop("checked")){$(this).closest(".cg_check_out_agreement").find(".cg_check_out_agreement_error").addClass("cg_hide")}else{$(this).closest(".cg_check_out_agreement").find(".cg_check_out_agreement_error").removeClass("cg_hide")}if(cgJsClass.gallery.ecommerce.functions.cgCheckAgreementsAndRequired(false,true)){$("#cgEcommerceCheckoutBodyOverlay").removeClass("cg_hide")}else{$("#cgEcommerceCheckoutBodyOverlay").addClass("cg_hide")}});$(document).on("change",".cg_select_state",function(){var $element=$(this);$element.parent().find(".cg_checkout_error").addClass("cg_hide");if($element.val()==""){$element.parent().find(".cg_checkout_error_required_state").removeClass("cg_hide")}else{$element.parent().find(".cg_checkout_error_required_state ").addClass("cg_hide")}localStorage.setItem($element.attr("id"),$element.val());if(cgJsClass.gallery.ecommerce.functions.cgCheckAgreementsAndRequired(false,true)){$("#cgEcommerceCheckoutBodyOverlay").removeClass("cg_hide")}else{$("#cgEcommerceCheckoutBodyOverlay").addClass("cg_hide")}});$(document).on("change",".cg_select_country",function(){cgJsClass.gallery.ecommerce.functions.changeSelectCountry($,$(this))});$(document).on("click","#cgEcommerceCheckoutBodyOverlay",function(){if(!cgJsClass.gallery.vars.ecommerce.cgEcommerceCheckoutBodyOverlayClicked){cgJsClass.gallery.vars.ecommerce.cgEcommerceCheckoutBodyOverlayClicked=true}if(cgJsClass.gallery.ecommerce.functions.cgCheckAgreementsAndRequired(true)){$(this).removeClass("cg_hide");cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find(".cg_checkout_error:visible").first().get(0).scrollIntoView()}else{$(this).addClass("cg_hide")}});$(document).on("input",".cg-ecommerce-billing-address-textarea",function(){if($(this).val().trim()==""){$(this).closest(".cg-ecommerce-input-div-container").find(".cg_checkout_error").removeClass("cg_hide")}else{$(this).closest(".cg-ecommerce-input-div-container").find(".cg_checkout_error").addClass("cg_hide")}});$(document).on("click",".cg_check_out_agreement_content p",function(e){if(!$(e.target).is("a")){var $cg_check_out_agreement_checkbox=$(this).closest(".cg_check_out_agreement").find(".cg_check_out_agreement_checkbox");if($cg_check_out_agreement_checkbox.prop("checked")){$cg_check_out_agreement_checkbox.prop("checked",false);$(this).closest(".cg_check_out_agreement").find(".cg_check_out_agreement_error").removeClass("cg_hide")}else{$cg_check_out_agreement_checkbox.prop("checked",true);$(this).closest(".cg_check_out_agreement").find(".cg_check_out_agreement_error").addClass("cg_hide")}}if(cgJsClass.gallery.ecommerce.functions.cgCheckAgreementsAndRequired(false,true)){$("#cgEcommerceCheckoutBodyOverlay").removeClass("cg_hide")}else{$("#cgEcommerceCheckoutBodyOverlay").addClass("cg_hide")}});$(document).on("change",".cg-ecommerce-address-input-button-edit",function(){$(this).closest(".cg-ecommerce-billing-address-textarea").removeAttr("disabled");$(this).removeClass("cg-ecommerce-address-input-button-edit").addClass("cg-ecommerce-address-input-button-save");$(this).val("Save")});$(document).on("change",".cg-ecommerce-address-input-button-save",function(){$(this).closest(".cg-ecommerce-billing-address-textarea").removeAttr("disabled");$(this).removeClass("cg-ecommerce-address-input-button-save").addClass("cg-ecommerce-address-input-button-edit");$(this).val("Edit")});$(document).on("click","#cgEcommerceCaptureButton",function(){cgJsClass.gallery.vars.ecommerce.cgEcommerceCaptureButtonGid=$(this).attr("data-cg-gid");cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutApproveContainer.find("#cgEcommerceCapture,#cgEcommerceShippingAddress,#cgEcommerceBillingAddress").addClass("cg_hide");cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutApproveContainer.find("#cgEcommerceCheckoutApproveContainerLoader").removeClass("cg_hide");return cgJsClass.gallery.vars.ecommerce.paypal.actions.order.capture().then(function(orderData){})});$(document).on("click","#cgBillingAddressDifferentFromShippingAddressButton",function(){$(this).addClass("cg_clicked");cgJsClass.gallery.vars.ecommerce.isDifferentBillingAddressClicked=true;cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgBillingAddressDifferentFromShippingAddressContainer").addClass("cg_hide");cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceBillingAddressContainer").removeClass("cg_hide");cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer.find("#cgEcommerceBillingAddress").focus();localStorage.setItem("isCgBillingAddressDifferentFromShippingAddressButtonClicked",true);if(cgJsClass.gallery.ecommerce.functions.cgCheckAgreementsAndRequired(false,true)){jQuery("#cgEcommerceCheckoutBodyOverlay").removeClass("cg_hide")}else{jQuery("#cgEcommerceCheckoutBodyOverlay").addClass("cg_hide")}});$(document).on("input","#cgEcommerceBillingAddress",function(){var $cgEcommerceShippingAddressContainer=$(this).closest("#cgEcommerceAddress").find("#cgEcommerceShippingAddressContainer");if($cgEcommerceShippingAddressContainer.hasClass("cg_hide")){$cgEcommerceShippingAddressContainer.find("#cgEcommerceShippingAddress").val($(this).val())}});$(document).on("click","#cgSameAsShippingAddress",function(){cgJsClass.gallery.ecommerce.functions.setSameInvoiceAsShippingValues();cgJsClass.gallery.vars.ecommerce.cgEcommerceCheckoutBodyOverlayClicked=true;cgJsClass.gallery.ecommerce.functions.cgCheckAgreementsAndRequired(false,true)});$(document).on("input","#cgShippingAddressCountry,#cgEcommerceBillingAddress,#cgEcommerceShippingAddress,.cg-address-inputs-div input",function(){localStorage.setItem($(this).attr("id"),$(this).val())})};;cgJsClass.gallery.vars.ecommerce.isEcommerceInitDone=false;cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer=null;cgJsClass.gallery.vars.ecommerce.currencies={};cgJsClass.gallery.vars.ecommerce.purchase_units_with_gids_and_realIds={};cgJsClass.gallery.vars.ecommerce.defaultShipping=0;cgJsClass.gallery.vars.ecommerce.alternativeShipping=0;cgJsClass.gallery.vars.ecommerce.isFirstCheckoutLoad=false;cgJsClass.gallery.vars.ecommerce.paypal={};cgJsClass.gallery.vars.ecommerce.priceTotalUnformatted=0;cgJsClass.gallery.vars.ecommerce.isNotOnlineForTest=false;cgJsClass.gallery.vars.ecommerce.priceTotalWithShippingTotalUnformatted=0;cgJsClass.gallery.vars.ecommerce.alternativeShippingObject=null;cgJsClass.gallery.vars.ecommerce.cgSaleProductsSorted=[];cgJsClass.gallery.vars.ecommerce.realGidsAndIdsDeletedOrFromOtherGalleries={};cgJsClass.gallery.vars.ecommerce.RawDataEachGallery={};cgJsClass.gallery.vars.ecommerce.InfoDataEachGallery={};cgJsClass.gallery.language=cgJsClass.gallery.language||{};cgJsClass.gallery.language.ecommerce=cgJsClass.gallery.language.ecommerce||{};cgJsClass.gallery.vars.ecommerce.cgEcommerceCheckoutBodyContainerContent=function(){return'<div id="cgEcommerceCheckoutBodyContainer" class="cgEcommerceCheckoutBodyContainer cg_hide" >'+'<div id="cgEcommerceCheckoutBodyCartLoader"><div class="cgEcommerceCheckoutBodyCartLoaderPart"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart" style="margin-bottom: 20px;"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart" style="margin-bottom: 20px;"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart" style="margin-bottom: 20px;"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart"></div><div class="cgEcommerceCheckoutBodyCartLoaderPart" style="margin-bottom: 20px;"></div></div>'+'<div id="cgEcommerceCheckoutBodyContainerClose" class="cgEcommerceCheckoutBodyContainerClose" data-cg-tooltip="'+cgJsClass.gallery.language.ecommerce.CloseShoppingCart+'"></div>'+'<div id="cgEcommerceCheckoutBodyContainerSub" class="cgEcommerceCheckoutBodyContainerSub">'+'<div id="cgOrderSummaryPageUrlMissing" class="cg_hide">Order summary page URL</div>'+'<div id="cgOrderNumber" class="cg_hide" style="text-align: center;margin-bottom: 25px;" ><div class="cg_ecommerce_title" style="margin-bottom:5px;">'+cgJsClass.gallery.language.ecommerce.OrderNumber+'</div><span style="text-align: center;font-size: 16px;"  >'+cgJsClass.gallery.vars.ecommerce.OrderNumber+"</span></div>"+'<div id="cgEcommerceCheckoutBodyProductsInfosContainer"></div>'+'<div id="cgEcommerceCheckoutBodyPriceTotal" class="cg_hide"></div>'+'<div id="cgEcommerceCheckoutBodyInfos"></div>'+'<div id="cgClientIdOrSecretNotSet" class="cg_hide" style="text-align: center;font-size: 22px;margin-top:40px;"><b>PayPal Client ID or Secret are not set in</b><br>"Edit ecommerce" >>> "PayPal options"</div>'+'<div id="cgForwardToOrderSummaryPageURLisMissing" class="cg_hide" style="text-align: center;font-size: 22px;margin-top:40px;"><b>Order summary page after purchase not set</b><br>"Edit ecommerce" >>> "Order summary page options" >>> "Forward to order summary URL after purchase"</div>'+'<div id="cgOrderConfirmationMailNotConfigured" class="cg_hide" style="margin-top:40px;"></div>'+'<div id="cgRegUserPurchaseOnlyText" class="cg_hide" style="margin-top:40px;"></div>'+'<div id="cgEcommerceCheckoutBodyNoSaleProducts" class="cg_hide">'+cgJsClass.gallery.language.ecommerce.NoProductsSelected+"</div>"+'<div id="cgEcommerceCheckoutBody">'+'<div id="cgEcommerceCheckoutBodyOverlay" class="cg_hide"></div>'+'<div id="cgEcommerceButtonsContainer"></div>'+"</div>"+"</div>"+"<div id='cgEcommerceCheckoutBodyContainerOrderSuccess' class='cg_hide cg_order_message'>"+"<span id='cgEcommerceCheckoutBodyContainerOrderSuccessMessage' >"+cgJsClass.gallery.language.ecommerce.OrderSuccessfulYouWillBeRedirected+"</span>"+"</div>"+"<div id='cgEcommerceCheckoutBodyContainerOrderFail' class='cg_hide cg_order_message'>"+cgJsClass.gallery.language.ecommerce.OrderFailedContactAdministrator+"</div>"+'<div id="cgEcommerceCheckoutBodyPaypalLoader" class="cg_hide">'+'<div class="cgEcommerceCheckoutBodyPaypalLoaderPart"></div><div class="cgEcommerceCheckoutBodyPaypalLoaderPart"></div><div class="cgEcommerceCheckoutBodyPaypalLoaderPart"></div><div class="cgEcommerceCheckoutBodyPaypalLoaderPart" style="margin-bottom: 15px;"></div>'+"</div>"+"<div id='cgEcommerceCheckoutBodyContainerLoader' class='cg_checkout_loader cg-general-frontend-loader cg-lds-dual-ring-div-gallery-hide cg-lds-dual-ring-div-gallery-hide-parent cg_hide '>"+"<div class='cg-lds-dual-ring-gallery-hide'></div>"+"</div>"+"</div>"};;cgJsClass.gallery.ecommerce.functions.showSaleOrder =  function(){

    if (!cgJsClass.gallery.vars.ecommerce.isShowSaleOrder) {
        return;
    }
    debugger
    if(!cgJsClass.gallery.vars.ecommerce.is_admin){
        cgJsClass.gallery.user.setFrontendCookieOrderIdHash(cgJsClass.gallery.vars.ecommerce.cgOrderIdHash);
    }

    cgJsClass.gallery.ecommerce.functions.initSaleOrder(jQuery,true);
    var $cgEcommerceCheckoutBodyContainer = cgJsClass.gallery.vars.ecommerce.$cgEcommerceCheckoutBodyContainer;
    $cgEcommerceCheckoutBodyContainer.find('#cgOrderNumber').removeClass('cg_hide');

    var saleOrder = cgJsClass.gallery.vars.ecommerce.LogForDatabase;
    var PriceDivider = saleOrder['PriceDivider'];

    var itemsSorted = {};

    for (var index in saleOrder['purchase_units'][0]['items']) {
        if (!saleOrder['purchase_units'][0]['items'].hasOwnProperty(index)) {
            break;
        }
        var item = saleOrder['purchase_units'][0]['items'][index];
        itemsSorted[item['timestampMilliseconds']] = item;
    }

    var DefaultShipping = 0;
    if (saleOrder.DefaultShipping) {
        DefaultShipping = parseFloat(parseFloat(saleOrder.DefaultShipping).toFixed(2));
    }
    var shippingTotal = 0;
    var alternativeShippingToAdd = 0;
    var defaultShippingToShow = 0;
    var hasDefaultShipping = false;
    var hasShipping = false;

    if(cgJsClass.gallery.vars.ecommerce.isForAdmin){
        cgJsClass.gallery.language.ecommerce.InvoiceAddress = 'Billing address';
        cgJsClass.gallery.language.ecommerce.ShippingAddress = 'Shipping address';
        cgJsClass.gallery.language.ecommerce.DownloadInvoice = 'Download invoice';
        cgJsClass.gallery.language.ecommerce.TotalPrice = 'Total price';
        cgJsClass.gallery.language.ecommerce.AlternativeShipping = 'Alternative shipping';
        cgJsClass.gallery.language.ecommerce.Price = 'Price';
        cgJsClass.gallery.language.ecommerce.CopyKey = 'Copy key';
        cgJsClass.gallery.language.ecommerce.Key = 'Key';
        cgJsClass.gallery.language.ecommerce.Download = 'Download';
        cgJsClass.gallery.language.ecommerce.Service = 'Service';
        cgJsClass.gallery.language.ecommerce.FreeShipping = 'Free shipping';
        cgJsClass.gallery.language.ecommerce.AlternativeShippingCosts = 'Alternative shipping costs';
        cgJsClass.gallery.language.ecommerce.StandardShippingCosts = 'Standard shipping costs';
        cgJsClass.gallery.language.ecommerce.Quantity = 'Quantity';
        cgJsClass.gallery.language.ecommerce.Shipping = 'Shipping';
        cgJsClass.gallery.language.ecommerce.VatNumber = 'VAT Number';
        cgJsClass.gallery.language.ecommerce.OrderNumber = 'Order number';
        cgJsClass.gallery.language.general = {};
        cgJsClass.gallery.language.ecommerce.MaximumUploads = 'Maximum Uploads';
        cgJsClass.gallery.language[1] = {};
        cgJsClass.gallery.language[1].sendUpload = 'Upload';
        cgJsClass.gallery.language.ecommerce.Uploaded = 'Uploaded';
    }

    console.log('cgJsClass.gallery.vars.ecommerce.RawDataWhenBuyed');
    console.log(cgJsClass.gallery.vars.ecommerce.RawDataWhenBuyed);

    console.log('itemsSorted');
    console.log(itemsSorted);

    debugger
    for (var timestampMilliseconds in itemsSorted) {

        if (!itemsSorted.hasOwnProperty(timestampMilliseconds)) {
            break;
        }

        var gid = cgJsClass.gallery.function.general.tools.getLoadedGidBasedOnRealGid(parseInt(itemsSorted[timestampMilliseconds]['gid']));
        var units = itemsSorted[timestampMilliseconds]['quantity'];
        var DownloadKey = itemsSorted[timestampMilliseconds]['DownloadKey'];
        var ServiceKey = itemsSorted[timestampMilliseconds]['ServiceKey'];
        var realId = itemsSorted[timestampMilliseconds]['realId'];
        var SaleType = itemsSorted[timestampMilliseconds]['SaleType'];

        debugger

        if(SaleType==='shipping' || SaleType==='service'){
            cgJsData[gid].vars.rawData[realId] = cgJsClass.gallery.vars.ecommerce.RawDataWhenBuyed[realId];
        }

        if(!cgJsData[gid].vars.ecommerceDataDone && cgJsData[gid].vars.ecommerceFilesData){
            cgJsClass.gallery.ecommerce.functions.setEcommerceFilesData(gid);
            cgJsData[gid].vars.ecommerceDataDone = true;
        }

        if(SaleType==='download' &&
            (
                !cgJsData[gid] || !cgJsData[gid].vars.rawData || !cgJsData[gid].vars.rawData[realId] || !cgJsData[gid].vars.rawData[realId]['ecommerceData'] || cgJsData[gid].vars.rawData[realId]['ecommerceData']['SaleType']!=='download'
            )
        ){
            var notAvailExpl = '';
            if(cgJsClass.gallery.vars.ecommerce.isForAdmin){
                notAvailExpl = '<br>Only visible for administrator: Gallery ID '+gid+', Entry ID '+realId;
            }

            var $productInfo = jQuery(
                '<div class="cg-ecommerce-checkout-body-product-info">' +
                '<div class="cg-ecommerce-source-not-available" style="margin-left: auto; margin-right: auto;min-width: 400px;">Download source not available anymore'+notAvailExpl+'</div>' +
                '</div>');
            $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceCheckoutBodyProductsInfosContainer').append($productInfo);
            continue;
        }

        if(!cgJsData[gid].vars.queryDataArrayDone){
            cgJsClass.gallery.getJson.queryDataArray(gid);
            cgJsData[gid].vars.queryDataArrayDone = true;
        }

        cgJsClass.gallery.views.singleViewFunctions.setSelectedFileDataIfMultipleFilesOrExif(gid,realId);

        var price = parseFloat(parseFloat(itemsSorted[timestampMilliseconds]['priceGross']).toFixed(2));
        debugger
        var priceToShow = cgJsClass.gallery.ecommerce.functions.priceToShow(
            price,
            saleOrder['PriceDivider'],
            saleOrder['CurrencyPosition'],
            cgJsClass.gallery.vars.ecommerce.currenciesArray[saleOrder['CurrencyShort']],
            units
        )

        var EcommerceEntryID = itemsSorted[timestampMilliseconds]['EcommerceEntryID'];
        var SaleTitle = cgJsClass.gallery.ecommerce.functions.getSaleTitle (gid,realId);
        var description = itemsSorted[timestampMilliseconds]['description'] || '';
        var $productInfoWithUpload;

        var $productInfo = jQuery(
            '<div class="cg-ecommerce-checkout-body-product-info"  data-cg-gid="' + gid + '" data-cg-real-id="' + realId + '">' +
            '<div class="cg-sale-remove cg_hide" data-cg-gid="' + gid + '" data-cg-real-id="' + realId + '"></div>' +
            '<div class="cg-ecommerce-checkout-body-product-info-image"></div>' +
            '<div class="cg-ecommerce-checkout-body-product-info-content">' +
                '<div class="cg-sale-title">' + SaleTitle + '</div>' +
                '<div class="cg-sale-description cg_hide">' + description + '</div>' +
                '<div class="cg-sale-price">' + priceToShow + '</div>' +
            '</div>' +
            '<div class="cg-ecommerce-checkout-body-product-info-quantity-select">' +
                '<span class="cg-ecommerce-checkout-body-product-info-quantity-select-label">' +
                cgJsClass.gallery.language.ecommerce.Quantity +
                '</span>' +
                '<span class="cg-ecommerce-checkout-body-product-info-quantity-select-units">' +
                units +
                '</span>' +
            '</div>' +
            '<div class="cg-ecommerce-shipping-info">' +
                '<div class="cg-ecommerce-shipping-info-title-download cg_hide cg_hide_override">'+
                    cgJsClass.gallery.language.ecommerce.Download+
                '</div>'+
                '<div class="cg-ecommerce-shipping-info-title-service cg_hide">'+
                    cgJsClass.gallery.language.ecommerce.Service+
                '</div>'+
                '<div class="cg-ecommerce-shipping-info-title-upload cg_hide">'+
                    cgJsClass.gallery.language[1].sendUpload+
                '</div>'+
                '<div class="cg-ecommerce-shipping-info-maximum-uploads cg_hide">'+
                    '<div><span class="cg-ecommerce-shipping-info-maximum-uploads-title">'+cgJsClass.gallery.language.ecommerce.MaximumUploads+':</span> <span class="cg-ecommerce-shipping-info-maximum-uploads-count"></span></div>'+
                    '<div><span class="cg-ecommerce-shipping-info-maximum-uploaded-title">'+cgJsClass.gallery.language.ecommerce.Uploaded+':</span> <span class="cg-ecommerce-shipping-info-maximum-uploaded-count"></span></div>'+
                '</div>'+
                '<div class="cg-ecommerce-shipping-info-title cg_hide">' +
                    cgJsClass.gallery.language.ecommerce.Shipping +
                '</div>' +
                '<div class="cg-ecommerce-shipping-info-title-default cg_hide">' +
                    cgJsClass.gallery.language.ecommerce.Quantity +
                '</div>' +
                '<div class="cg-ecommerce-shipping-info-title-standard cg_hide">' +
                    cgJsClass.gallery.language.ecommerce.StandardShippingCosts +
                '</div>' +
                '<div class="cg-ecommerce-shipping-info-title-extra cg_hide">' +
                     cgJsClass.gallery.language.ecommerce.AlternativeShippingCosts +
                '</div>' +
                '<div class="cg-ecommerce-shipping-info-title-free cg_hide">' +
                    cgJsClass.gallery.language.ecommerce.FreeShipping +
                '</div>' +
                '<div class="cg-ecommerce-shipping-info-title-price-additional cg_hide">' +
                '</div>' +
            '</div>' +
            '</div>');
        $productInfo.find('.cg-ecommerce-quantity-select').val(units);

        $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceCheckoutBodyProductsInfosContainer').append($productInfo);

        // set image here
        var fileType = cgJsData[gid].vars.rawData[realId].ImgType;
        var rThumb = cgJsData[gid].vars.rawData[realId].rThumb;

        if (itemsSorted[timestampMilliseconds]['IsAlternativeShipping'] == '1') {
            var Shipping = parseFloat(itemsSorted[timestampMilliseconds]['alternative_shipping_amount_value_gross']).toFixed(2);
        } else {
            var Shipping = parseFloat(saleOrder['DefaultShipping']).toFixed(2);
        }

        var IsAlternativeShipping = itemsSorted[timestampMilliseconds]['IsAlternativeShipping'];

        if (SaleType == 'service') {
            $productInfo.find('.cg-ecommerce-shipping-info-title-service').removeClass('cg_hide');
            $productInfo.find('.cg-ecommerce-checkout-body-product-info-quantity-select').addClass('cg_visibility_hidden');
        }

        if (SaleType == 'upload') {

            if(!cgJsData[gid].vars.rawData[realId].ecommerceData || cgJsData[gid].vars.rawData[realId].ecommerceData['UploadGallery']=="0"){
                $productInfo.empty().css('justify-content','center').append('Upload form not available anymore');
                $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceCheckoutBodyProductsInfosContainer').append($productInfo);
                continue;
            }

            $productInfo.find('.cg-ecommerce-checkout-body-product-info-quantity-select').addClass('cg_visibility_hidden');
            $productInfo.find('.cg-ecommerce-shipping-info-title-upload').removeClass('cg_hide');
            $productInfo.find('.cg-ecommerce-shipping-info-maximum-uploads').removeClass('cg_hide');
            $productInfo.find('.cg-ecommerce-shipping-info-maximum-uploads-count').append(cgJsData[gid].vars.rawData[realId].ecommerceData['MaxUploads']);
            $productInfo.find('.cg-ecommerce-shipping-info-maximum-uploaded-count').append(cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[realId]['Uploaded']);

            $productInfoWithUpload = jQuery(
                '<div class="cg-ecommerce-checkout-body-product-info"  data-cg-gid="' + gid + '" data-cg-real-id="' + realId + '">' +
                '</div>');
            $productInfoWithUpload.css('border-top','unset');

            var $mainCGdivUploadForm = jQuery('.mainCGdivUploadForm[data-cg-gid*='+cgJsData[gid].vars.rawData[realId].ecommerceData['UploadGallery']+'-cf]');

            $mainCGdivUploadForm.addClass('mainCGdivUploadFormEcommerce');
            $mainCGdivUploadForm.find('.cg-close-upload-form').addClass('cg_hide');

            var orderGid = $mainCGdivUploadForm.attr(  'data-cg-gid');
            var orderRealGid = $mainCGdivUploadForm.attr(  'data-cg-real-gid');

            if(!cgJsClass.gallery.vars.ecommerce.isForAdmin){
                cgJsData[orderGid].vars.upload.UploadedUserFilesAmount = cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[realId]['Uploaded'];
                cgJsData[orderGid].options = (cgJsData[orderGid].optionsFullData[orderRealGid]) ? cgJsData[orderGid].optionsFullData[orderRealGid] : cgJsData[orderGid].optionsFullData;
                cgJsData[orderGid].options.pro.RegUserUploadOnly = 1;
                cgJsData[orderGid].options.pro.RegUserMaxUpload = cgJsData[gid].vars.rawData[realId].ecommerceData['MaxUploads'];
            }

            var orderItem= cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[realId]['id'];

            var $productInfoWithUploadedEntries = jQuery(
                '<div class="cg-ecommerce-checkout-body-product-info cg-ecommerce-checkout-body-product-info-uploaded-entries cg_hide" id="cgUpoadedEntries' + orderItem + '" data-cg-order-item-id="' + orderItem + '">' +
                '</div>');

            $productInfoWithUploadedEntries.css('border-top','unset');

            $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceCheckoutBodyProductsInfosContainer').append($productInfoWithUploadedEntries);

            if(cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[realId]['Uploaded']>=1){

                var uploadedEntriesData = cgJsClass.gallery.vars.ecommerce.uploadedEntriesData;
                for (var realIdUpload in uploadedEntriesData[orderItem]){
                    if(!uploadedEntriesData[orderItem].hasOwnProperty(realIdUpload)){
                        break;
                    }
                    var entryData = uploadedEntriesData[orderItem][realIdUpload];
                    var entryImgType = entryData['ImgType'];
                    var $entryElement = jQuery(
                        '<div class="cg-ecommerce-uploaded-entry" >' +
                        '</div>');
                    var isAlternativeFileType = cgJsClass.gallery.function.general.tools.isAlternativeFileType(undefined,undefined,undefined,entryImgType);
                    if(isAlternativeFileType){
                        $entryElement.append('<div class="cg-ecommerce-uploaded-entry-file cg-is-alternative-file-type cg-ecommerce-uploaded-entry-file-'+entryData['ImgType']+' "></div>');
                        $entryElement.append('<div class="cg-ecommerce-uploaded-entry-title" >'+entryData['NamePic']+'</div>');
                    }else{
                        $entryElement.append('<div class="cg-ecommerce-uploaded-entry-file" style="background-image: url('+entryData['large']+');" ></div>');
                        $entryElement.append('<div class="cg-ecommerce-uploaded-entry-title" >'+entryData['NamePic']+'</div>');
                    }
                    if(cgJsClass.gallery.vars.ecommerce.isForAdmin){
                        $entryElement.append('<div class="cg-ecommerce-uploaded-entry-gallery" >(Gallery ID: '+entryData['realGid']+')</div>');
                    }
                    $productInfoWithUploadedEntries.prepend($entryElement);
                }

                $productInfoWithUploadedEntries.removeClass('cg_hide');

            }

            if(parseInt(cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[realId]['Uploaded']) < parseInt(cgJsData[gid].vars.rawData[realId].ecommerceData['MaxUploads']) && !cgJsClass.gallery.vars.ecommerce.isForAdmin){

                $mainCGdivUploadForm.removeClass('cg_hide').addClass('cg_is_upload_order');
                $mainCGdivUploadForm.attr( 'data-cg-order-max-uploads', cgJsData[gid].vars.rawData[realId].ecommerceData['MaxUploads']);
                $mainCGdivUploadForm.attr(  'data-cg-order-uploaded', cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[realId]['Uploaded']);
                $mainCGdivUploadForm.attr(  'data-cg-order-item-id', cgJsClass.gallery.vars.ecommerce.OrderItemsByEntryPid[realId]['id']);
                $mainCGdivUploadForm.attr(  'data-cg-order-gallery-id', gid);
                $mainCGdivUploadForm.attr(  'data-cg-order-real-id', realId);
                $productInfoWithUpload.append($mainCGdivUploadForm);
                $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceCheckoutBodyProductsInfosContainer').append($productInfoWithUpload);

            }else{
                if(!cgJsClass.gallery.vars.ecommerce.isForAdmin){

                    var AllUploadsUsedText = cgJsClass.gallery.language.ecommerce.AllUploadsUsed;
                    if(cgJsClass.gallery.vars.ecommerce.ecommerceFilesData[realId]['AllUploadsUsedText']){
                        AllUploadsUsedText = cgJsClass.gallery.vars.ecommerce.ecommerceFilesData[realId]['AllUploadsUsedText'];
                    }
                    $productInfoWithUpload.append(AllUploadsUsedText);
                    $productInfoWithUpload.addClass('cg_justify_content_center cg_all_uploads_used');
                    $productInfoWithUpload.css('padding-top','0');
                    $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceCheckoutBodyProductsInfosContainer').append($productInfoWithUpload);
                   $mainCGdivUploadForm.addClass('cg_hide_override');// has to be cg_hide_override because will be processed later
                }
            }



        }

        if (SaleType == 'download') {
            $productInfo.find('.cg-ecommerce-shipping-info-title-download').removeClass('cg_hide');
            $productInfo.find('.cg-ecommerce-checkout-body-product-info-quantity-select').addClass('cg_visibility_hidden');
            $productInfo.find('.cg-ecommerce-quantity-select').remove();
            if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){

                for(var orderIndex in cgJsData[gid].vars.rawData[realId].MultipleFilesParsed){

                    if(!cgJsData[gid].vars.rawData[realId].MultipleFilesParsed.hasOwnProperty(orderIndex)){
                        break;
                    }
                    debugger
                    if(cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[orderIndex]['isRealIdSource']){
                        var WpUpload = cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[orderIndex].WpUpload;
                        var post_title = cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[orderIndex].post_title;
                    }else{
                        var WpUpload = cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[orderIndex].WpUpload;
                        var post_title = cgJsData[gid].vars.rawData[realId].MultipleFilesParsed[orderIndex].post_title;
                    }

                    var isOneOfUploadFilesForSale = false;
                    for(var orderWpUploadFilesForSale in cgJsData[gid].vars.rawData[realId].ecommerceData['WpUploadFilesForSale']){
                        if(!cgJsData[gid].vars.rawData[realId].ecommerceData['WpUploadFilesForSale'].hasOwnProperty(orderWpUploadFilesForSale)){
                            break;
                        }
                        if(WpUpload==cgJsData[gid].vars.rawData[realId].ecommerceData['WpUploadFilesForSale'][orderWpUploadFilesForSale]){
                            isOneOfUploadFilesForSale = true;break;
                        }
                    }

                    if(isOneOfUploadFilesForSale){
                        //var url = post_cg_ecommerce_download_sale_order_wordpress_ajax_script_function_name.cg_ecommerce_download_sale_order_ajax_url+'?real_id='+realId+'&'+'cg_sale_id='+cgOrderId+'&'+'cg_sale_id_hash='+cgOrderIdHash+'&'+'cg_ecommerce_entry_id='+EcommerceEntryID+'&'+'cg_wp_upload='+WpUpload;
                        var url = cgJsClass.gallery.vars.ecommerce.site_url+'?cg_entry='+EcommerceEntryID+'&cg_download_file_order_id_hash='+ cgJsClass.gallery.vars.ecommerce.cgOrderIdHash+'&cg_wp_upload='+WpUpload;

                        if(cgJsData[gid].vars.rawData[realId]['isRemovedRealIdOrGallery'] ){
                            var $productInfoDownloadContainer = jQuery('<div class="cg-ecommerce-shipping-info-download-container" >' +
                                '<div class="cg-ecommerce-shipping-info-title-download">'+post_title+'</div>' +
                                '<a target="_blank" href="'+url+'" class="cg-ecommerce-download cg_action_button cg_disabled" data-cg-real-id="'+realId+'">Download not available anymore</a>' +
                                '</div>');
                        }else{
                            var $productInfoDownloadContainer = jQuery('<div class="cg-ecommerce-shipping-info-download-container" >' +
                                '<div class="cg-ecommerce-shipping-info-title-download">'+post_title+'</div>' +
                                '<a target="_blank" href="'+url+'" class="cg-ecommerce-download cg_action_button" data-cg-real-id="'+realId+'">'+cgJsClass.gallery.language.ecommerce.Download+'</a>' +
                                '</div>');
                        }
                        $productInfo.find('.cg-ecommerce-shipping-info').append($productInfoDownloadContainer);
                    }

                }

            }else{
                debugger
                var WpUpload = cgJsData[gid].vars.rawData[realId].WpUpload;
                var post_title = cgJsData[gid].vars.rawData[realId].NamePic;
                //var url = post_cg_ecommerce_download_sale_order_wordpress_ajax_script_function_name.cg_ecommerce_download_sale_order_ajax_url+'?real_id='+realId+'&'+'cg_sale_id='+cgOrderId+'&'+'cg_sale_id_hash='+cgOrderIdHash+'&'+'cg_ecommerce_entry_id='+EcommerceEntryID+'&'+'cg_wp_upload='+WpUpload;

                var url = cgJsClass.gallery.vars.ecommerce.site_url+'?cg_download_file_order_id_hash='+ cgJsClass.gallery.vars.ecommerce.cgOrderIdHash+'&cg_entry='+EcommerceEntryID+'&cg_wp_upload='+WpUpload;

                if(cgJsData[gid].vars.rawData[realId]['isRemovedRealIdOrGallery'] ){
                    var $productInfoDownloadContainer = jQuery('<div class="cg-ecommerce-shipping-info-download-container" >' +
                        '<div class="cg-ecommerce-shipping-info-title-download">'+post_title+'</div>' +
                        '<a target="_blank" href="'+url+'" class="cg-ecommerce-download cg_action_button cg_disabled" data-cg-real-id="'+realId+'">Download not available anymore</a>' +
                        '</div>');
                }else{
                    var $productInfoDownloadContainer = jQuery('<div class="cg-ecommerce-shipping-info-download-container" >' +
                        '<div class="cg-ecommerce-shipping-info-title-download">'+post_title+'</div>' +
                        '<a  target="_blank" href="'+url+'" class="cg-ecommerce-download cg_action_button" data-cg-real-id="'+realId+'">'+cgJsClass.gallery.language.ecommerce.Download+'</a>' +
                        '</div>');
                }
                $productInfo.find('.cg-ecommerce-shipping-info').append($productInfoDownloadContainer);
            }

            if(DownloadKey){
                var $productInfoDownloadKeyContainer = jQuery('<div class="cg-ecommerce-shipping-info-key-container" >' +
                    '<div class="cg-ecommerce-shipping-info-key-title">'+cgJsClass.gallery.language.ecommerce.Key+'</div>' +
                    '<div class="cg-ecommerce-shipping-info-key">'+DownloadKey+'</div>' +
                    '<div href="" class="cg-ecommerce-shipping-info-copy-key">'+cgJsClass.gallery.language.ecommerce.CopyKey+'</div>' +
                    '</div>');
                $productInfo.find('.cg-ecommerce-shipping-info').append($productInfoDownloadKeyContainer);
            }

        }
        if (SaleType == 'service') {
            if(ServiceKey){
                var $productInfoServiceKeyContainer = jQuery('<div class="cg-ecommerce-shipping-info-service-key-container" >' +
                    '<div class="cg-ecommerce-shipping-info-key-title">'+cgJsClass.gallery.language.ecommerce.Key+'</div>' +
                    '<div class="cg-ecommerce-shipping-info-key">'+ServiceKey+'</div>' +
                    '<div href="" class="cg-ecommerce-shipping-info-copy-key">'+cgJsClass.gallery.language.ecommerce.CopyKey+'</div>' +
                    '</div>');
                $productInfo.find('.cg-ecommerce-shipping-info').append($productInfoServiceKeyContainer);
            }
        }
        if (SaleType == 'shipping') {
            hasShipping = true;
            $productInfo.find('.cg-ecommerce-shipping-info-title-shipping').removeClass('cg_hide');
            if (Shipping == '' || Shipping == 0) {
                $productInfo.find('.cg-ecommerce-shipping-info-title-free').removeClass('cg_hide');
            } else if (Shipping == DefaultShipping && IsAlternativeShipping != 1) {
                defaultShippingToShow = DefaultShipping;
                hasDefaultShipping = true;
                shippingTotal = shippingTotal;
                $productInfo.find('.cg-ecommerce-shipping-info-title-standard').removeClass('cg_hide');
            } else {
                if (IsAlternativeShipping == 1) {
                    alternativeShippingToAdd = alternativeShippingToAdd + parseFloat(Shipping);
                    debugger
                    $productInfo.find('.cg-ecommerce-shipping-info-title-extra').removeClass('cg_hide');
                    var alternativeShippingPriceToShow = cgJsClass.gallery.ecommerce.functions.priceToShow(
                        Shipping,
                        saleOrder['PriceDivider'],
                        saleOrder['CurrencyPosition'],
                        cgJsClass.gallery.vars.ecommerce.currenciesArray[saleOrder['CurrencyShort']],
                        1
                    );
                    $productInfo.find('.cg-ecommerce-shipping-info-title-price-additional').text(alternativeShippingPriceToShow).removeClass('cg_hide');
                } else {
                    if (!hasDefaultShipping) {
                        $productInfo.find('.cg-ecommerce-shipping-info-title-standard').removeClass('cg_hide');
                    }
                    if (Shipping > DefaultShipping) {
                        defaultShippingToShow = Shipping;
                    } else {
                        if (!hasDefaultShipping) {
                            defaultShippingToShow = Shipping;
                        }
                    }
                }
            }
        }

        var isAlternativeFileType = cgJsClass.gallery.function.general.tools.isAlternativeFileType(gid, realId);
        var $productInfoImage = $productInfo.find('.cg-ecommerce-checkout-body-product-info-image');

        if (isAlternativeFileType && isAlternativeFileType == 'video') {
                $productInfoImage.addClass('cg-ecommerce-checkout-body-product-info-image-alternative-file-type cg-file-type-' + fileType);
            /*            selectString += '<div class="cg_messages_container_pro_select_alternative_file_type" >' +
                            '<video width="100%" height="100%" >' +
                            '<source src="'+imgSrcOriginal+'#t=0.001" type="video/mp4">' +
                            '<source src="'+imgSrcOriginal+'#t=0.001" type="video/'+fileType+'">' +
                            '</video>' +
                            '</div>';*/
        } else if (isAlternativeFileType) {
            $productInfoImage.addClass('cg-ecommerce-checkout-body-product-info-image-alternative-file-type cg-file-type-' + fileType);
            //     selectString += '<div class="cg_messages_container_pro_select_alternative_file_type_name" >'+cgJsData[gid].vars.rawData[realId]['NamePic']+'</div>';
        } else if(cgJsClass.gallery.function.general.tools.isEmbed(gid,realId)){
            cgJsClass.gallery.ecommerce.functions.setEmbedVisual(gid,realId,$productInfoImage,fileType,true);
        }else {
            $productInfoImage.addClass('cg-image-type cg'+rThumb+'degree');
            $productInfoImage.css('background-image', 'url(' + cgJsData[gid].vars.rawData[realId]['large'] + ')');
            //selectString += '<div class="cg_messages_container_pro_select_image" style="background-image: ;"></div>';
        }
        // set image here --- END
    }

    console.log('hasShipping');

    if (hasShipping) {

        if (hasDefaultShipping && alternativeShippingToAdd) {
            var shippingTotal = parseFloat(parseFloat(saleOrder['DefaultShipping']).toFixed(2)) + parseFloat(parseFloat(alternativeShippingToAdd).toFixed(2));
            var shippingDefaultToShow = parseFloat(parseFloat(saleOrder['DefaultShipping']).toFixed(2));
        } else if (hasDefaultShipping && !alternativeShippingToAdd) {
            var shippingTotal = parseFloat(parseFloat(saleOrder['DefaultShipping']).toFixed(2));
            var shippingDefaultToShow = parseFloat(parseFloat(saleOrder['DefaultShipping']).toFixed(2));
        } else if (!hasDefaultShipping && alternativeShippingToAdd) {
            var shippingTotal = parseFloat(parseFloat(alternativeShippingToAdd).toFixed(2));
            shippingDefaultToShow = 0;
        }
        var priceTotal = saleOrder['priceTotal'];
        var priceTotalUnformatted = saleOrder['priceTotalUnformatted'];
        cgJsClass.gallery.vars.ecommerce.priceTotalUnformatted = priceTotalUnformatted;

        var priceTotalToShow = cgJsClass.gallery.ecommerce.functions.priceToShow(
            priceTotal,
            saleOrder['PriceDivider'],
            saleOrder['CurrencyPosition'],
            cgJsClass.gallery.vars.ecommerce.currenciesArray[saleOrder['CurrencyShort']],
            1// 1 because of price total
        );

        console.log('hasShipping priceTotalWithShippingTotal');

        var priceTotalWithShippingTotal = saleOrder['priceTotalWithShippingTotal'];

        shippingDefaultToShow = cgJsClass.gallery.ecommerce.functions.priceToShow(
            shippingDefaultToShow,
            saleOrder['PriceDivider'],
            saleOrder['CurrencyPosition'],
            cgJsClass.gallery.vars.ecommerce.currenciesArray[saleOrder['CurrencyShort']],
            1// 1 because of price total
        );

        console.log('show price top');

        $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceCheckoutBodyPriceTotal').html(
            '<div class="cg-sale-title-part">'+cgJsClass.gallery.language.ecommerce.Price+'</div>' +
            '<div class="cg-sale-price-part">' + priceTotalToShow + '</div>' +
            '<div class="cg-sale-title-total">'+cgJsClass.gallery.language.ecommerce.TotalPrice+'</div>' +
            '<div class="cg-sale-price-total">' + (priceTotalWithShippingTotal) + '</div>'
        ).removeClass('cg_hide');

        if (hasDefaultShipping) {
            jQuery('<div class="cg-sale-title-shipping">'+cgJsClass.gallery.language.ecommerce.Shipping+'</div>' +
                '<div class="cg-sale-total-shipping">' + shippingDefaultToShow + '</div>').insertAfter($cgEcommerceCheckoutBodyContainer.find('.cg-sale-price-part'));
        }

        if (saleOrder['alternativeShippingObject']) {

            for (var alternativeShippingPart in saleOrder['alternativeShippingObject']) {

                if (!saleOrder['alternativeShippingObject'].hasOwnProperty(alternativeShippingPart)) {
                    break;
                }

                var alternativeShipping = saleOrder['alternativeShippingObject'][alternativeShippingPart]['alternativeShipping'];
                console.log('alternativeShipping');

                if(alternativeShipping>0){
                    var alternativeShippingToShow = cgJsClass.gallery.ecommerce.functions.priceToShow(
                        alternativeShipping,
                        saleOrder['PriceDivider'],
                        saleOrder['CurrencyPosition'],
                        cgJsClass.gallery.vars.ecommerce.currenciesArray[saleOrder['CurrencyShort']],
                        1// 1 because of price total
                    );
                    var $toInsert = jQuery('<div class="cg-sale-title-shipping">'+cgJsClass.gallery.language.ecommerce.AlternativeShipping+' - ' + saleOrder['alternativeShippingObject'][alternativeShippingPart]['name'] + '</div>' +
                        '<div class="cg-sale-total-shipping">' + alternativeShippingToShow + '</div>');
                    $toInsert.insertAfter($cgEcommerceCheckoutBodyContainer.find('.cg-sale-total-shipping').last());
                }

            }

        }

    } else {

        var priceTotal = saleOrder['priceTotal'];
        var priceTotalToShow = cgJsClass.gallery.ecommerce.functions.priceToShow(
            priceTotal,
            saleOrder['PriceDivider'],
            saleOrder['CurrencyPosition'],
            cgJsClass.gallery.vars.ecommerce.currenciesArray[saleOrder['CurrencyShort']],
            1// 1 because of price total
        );
        $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceCheckoutBodyPriceTotal').html(
            '<div class="cg-sale-title-total">'+cgJsClass.gallery.language.ecommerce.TotalPrice+'</div>' +
            '<div class="cg-sale-price-total">' + priceTotalToShow + '</div>'
        ).removeClass('cg_hide');

    }

    // If you use jQuery's .html method it parses out the script tag and evals it:
    $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceCheckoutBodyProductsInfosContainer').removeClass('cg_hide');
    $cgEcommerceCheckoutBodyContainer.find('.cg-general-frontend-loader').addClass('cg_hide');

    cgJsClass.gallery.ecommerce.functions.hideSaleElements();
    jQuery('#mainCGdivOrderContainer').append($cgEcommerceCheckoutBodyContainer.removeClass('cg_hide')).removeAttr('style');

    //var ShippingAddress = jQuery('<textarea />').html(cgJsClass.gallery.vars.ecommerce.LogForDatabase.cgEcommerceShippingAddress).text();
    //ShippingAddress = cgJsClass.gallery.function.general.tools.encodeHTML(ShippingAddress);
    //ShippingAddress = ShippingAddress.replaceAll(/\\n/g, "<br>");
    //var ShippingAddress = cgJsClass.gallery.vars.ecommerce.LogForDatabase.cgEcommerceShippingAddress.split('\n').join('<br>');
    //var InvoiceAddress = cgJsClass.gallery.vars.ecommerce.LogForDatabase.cgEcommerceInvoiceAddress.split('\n').join('<br>');
    var InvoiceAddressFirstName = cgJsClass.gallery.vars.ecommerce.Order.InvoiceAddressFirstName;
    var InvoiceAddressLastName = cgJsClass.gallery.vars.ecommerce.Order.InvoiceAddressLastName;
    var InvoiceAddressCompany = cgJsClass.gallery.vars.ecommerce.Order.InvoiceAddressCompany;
    var InvoiceAddressLine1 = cgJsClass.gallery.vars.ecommerce.Order.InvoiceAddressLine1;
    var InvoiceAddressLine2 = cgJsClass.gallery.vars.ecommerce.Order.InvoiceAddressLine2;
    var InvoiceAddressCity = cgJsClass.gallery.vars.ecommerce.Order.InvoiceAddressCity;
    var InvoiceAddressStateShort = cgJsClass.gallery.vars.ecommerce.Order.InvoiceAddressStateShort;
    var InvoiceAddressStateTranslation = cgJsClass.gallery.vars.ecommerce.Order.InvoiceAddressStateTranslation;
    var InvoiceAddressPostalCode = cgJsClass.gallery.vars.ecommerce.Order.InvoiceAddressPostalCode;
    var InvoiceAddressCountryShort = cgJsClass.gallery.vars.ecommerce.Order.InvoiceAddressCountryShort;
    var InvoiceAddressCountryTranslation = cgJsClass.gallery.vars.ecommerce.Order.InvoiceAddressCountryTranslation;
    var TaxNr = cgJsClass.gallery.vars.ecommerce.Order.TaxNr;

    var InvoiceAddress = '';
    InvoiceAddress += InvoiceAddressFirstName+' '+InvoiceAddressLastName+'\r\n';
    InvoiceAddress += (InvoiceAddressCompany) ? InvoiceAddressCompany+'\r\n' : '';
    InvoiceAddress += InvoiceAddressLine1+'\r\n';
    InvoiceAddress += (InvoiceAddressLine2) ? InvoiceAddressLine2+'\r\n' : '';
    debugger
    if(InvoiceAddressStateShort){
        if(InvoiceAddressCountryShort=='US'  || InvoiceAddressCountryShort=='CA'){
            InvoiceAddress += InvoiceAddressCity+' '+InvoiceAddressStateShort+' '+InvoiceAddressPostalCode+'\r\n';
        }else{
            InvoiceAddress += InvoiceAddressCity+' '+InvoiceAddressStateTranslation+' '+InvoiceAddressPostalCode+'\r\n';
        }
    }else{
        if(cgJsClass.gallery.vars.ecommerce.EUshortcodes.indexOf(InvoiceAddressCountryShort)>-1){
            InvoiceAddress += InvoiceAddressPostalCode+' '+InvoiceAddressCity+'\r\n';
        }else{
            InvoiceAddress += InvoiceAddressCity+' '+InvoiceAddressPostalCode+'\r\n';
        }
    }
    InvoiceAddress += (InvoiceAddressCountryTranslation) ? InvoiceAddressCountryTranslation : '';
    InvoiceAddress += (TaxNr) ? '\r\n'+cgJsClass.gallery.language.ecommerce.VatNumber+': '+TaxNr : '';

    var ShippingAddressFirstName = cgJsClass.gallery.vars.ecommerce.Order.ShippingAddressFirstName;
    var ShippingAddressLastName = cgJsClass.gallery.vars.ecommerce.Order.ShippingAddressLastName;
    var ShippingAddressCompany = cgJsClass.gallery.vars.ecommerce.Order.ShippingAddressCompany;
    var ShippingAddressLine1 = cgJsClass.gallery.vars.ecommerce.Order.ShippingAddressLine1;
    var ShippingAddressLine2 = cgJsClass.gallery.vars.ecommerce.Order.ShippingAddressLine2;
    var ShippingAddressCity = cgJsClass.gallery.vars.ecommerce.Order.ShippingAddressCity;
    var ShippingAddressStateShort = cgJsClass.gallery.vars.ecommerce.Order.ShippingAddressStateShort;
    var ShippingAddressStateTranslation = cgJsClass.gallery.vars.ecommerce.Order.ShippingAddressStateTranslation;
    var ShippingAddressPostalCode = cgJsClass.gallery.vars.ecommerce.Order.ShippingAddressPostalCode;
    var ShippingAddressCountryShort = cgJsClass.gallery.vars.ecommerce.Order.ShippingAddressCountryShort;
    var ShippingAddressCountryTranslation = cgJsClass.gallery.vars.ecommerce.Order.ShippingAddressCountryTranslation;

    var ShippingAddress = '';
    ShippingAddress += ShippingAddressFirstName+' '+ShippingAddressLastName+'\r\n';
    ShippingAddress += (ShippingAddressCompany) ? ShippingAddressCompany+'\r\n' : '';
    ShippingAddress += ShippingAddressLine1+'\r\n';
    ShippingAddress += (ShippingAddressLine2) ? ShippingAddressLine2+'\r\n' : '';
    if(ShippingAddressStateShort){
        if(ShippingAddressCountryShort=='US' || ShippingAddressCountryShort=='CA'){
            ShippingAddress += ShippingAddressCity+' '+ShippingAddressStateShort+' '+ShippingAddressPostalCode+'\r\n';
        }else{
            ShippingAddress += ShippingAddressCity+' '+ShippingAddressStateTranslation+' '+ShippingAddressPostalCode+'\r\n';
        }
    }else{
        if(cgJsClass.gallery.vars.ecommerce.EUshortcodes.indexOf(ShippingAddressCountryShort)>-1){
            ShippingAddress += ShippingAddressPostalCode+' '+ShippingAddressCity+'\r\n';
        }else{
            ShippingAddress += ShippingAddressCity+' '+ShippingAddressPostalCode+'\r\n';
        }
    }
    ShippingAddress += (ShippingAddressCountryTranslation) ? ShippingAddressCountryTranslation : '';

    /*ShippingAddress = ShippingAddress.replaceAll(/&lt;br\/&gt;/g, " ");
    ShippingAddress = ShippingAddress.replaceAll(/&lt;br \/&gt;/g, " ");
    ShippingAddress = ShippingAddress.replaceAll(/&lt;br\/>/g, " ");
    ShippingAddress = ShippingAddress.replaceAll(/&lt;br \/>/g, " ");
    ShippingAddress = ShippingAddress.replaceAll(/&lt;br>/g, " ");
    ShippingAddress = ShippingAddress.replaceAll(/&lt;br >/g, " ");*/

    var hideTax = 'cg_hide';
    /*if(cgJsClass.gallery.vars.ecommerce.LogForDatabase.cgEcommerceTaxNr){
        hideTax = '';
    }*/

    $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceCheckoutBodyContainerSub').append(
        '<div id="cgEcommerceAddressContainer">' +

        '</div>');

   // if(cgJsClass.gallery.vars.ecommerce.Order.HasInvoice=='1'){
        $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceAddressContainer').append(
            '<div id="cgEcommerceAddressInvoice" >' +
            '<div class="cg_ecommerce_title">'+cgJsClass.gallery.language.ecommerce.InvoiceAddress+'</div>' +
            '<textarea  rows="7"  class="cg_ecommerce_data">'+InvoiceAddress+'</textarea>' +
            '<div class="cg_ecommerce_title '+hideTax+'" id="cgEcommerceTaxNrTitle" style="margin-top:0 !important;">'+cgJsClass.gallery.language.ecommerce.VatNumber+'</div>' +
            '<textarea  rows="1"  class="cg_ecommerce_data  '+hideTax+'" id="cgEcommerceTaxNrText">'+((cgJsClass.gallery.vars.ecommerce.LogForDatabase.cgEcommerceTaxNr) ?? '---' )+'</textarea>' +
            '</div>');
   // }

    if(hasShipping){
        $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceAddressContainer').prepend(
            '<div id="cgEcommerceAddressShipping" >' +
            '<div class="cg_ecommerce_title">'+cgJsClass.gallery.language.ecommerce.ShippingAddress+'</div>' +
            '<textarea  rows="7"  class="cg_ecommerce_data">'+ShippingAddress+'</textarea>' +
            '</div>'
        );
    }

    if(!ShippingAddressFirstName){
        $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceAddressShipping').addClass('cg_hide');
    }



    /*comment = jQuery('<textarea />').html(comment).text();
    name = jQuery('<textarea />').html(name).text();

    comment = cgJsClass.gallery.function.general.tools.encodeHTML(comment);
    name = cgJsClass.gallery.function.general.tools.encodeHTML(name);
    date = cgJsClass.gallery.function.general.tools.encodeHTML(date);

    comment = comment.replaceAll(/&lt;br\/&gt;/g, " ");
    comment = comment.replaceAll(/&lt;br \/&gt;/g, " ");
    comment = comment.replaceAll(/&lt;br\/>/g, " ");
    comment = comment.replaceAll(/&lt;br \/>/g, " ");
    comment = comment.replaceAll(/&lt;br>/g, " ");
    comment = comment.replaceAll(/&lt;br >/g, " ");

    commentDiv.append('<p class="cg-center-image-comments-comment-content">'+comment+'</p>');*/

    if(cgJsClass.gallery.vars.ecommerce.isForAdmin){

        $cgEcommerceCheckoutBodyContainer.find('#cgOrderNumber .cg_ecommerce_title').text(cgJsClass.gallery.language.ecommerce.OrderNumber);

        var url = cgJsClass.gallery.vars.ecommerce.site_url+'?cg_ecommerce_export_order=true&cg_order_id='+ cgJsClass.gallery.vars.ecommerce.cgOrderId;
        var urlFrontendUser = cgJsClass.gallery.vars.ecommerce.ForwardAfterPurchaseUrl+'?cg_order='+ cgJsClass.gallery.vars.ecommerce.OrderIdHash;
        $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceCheckoutBodyContainerSub').append(
            '<div id="cgEcommerceDownloadCsv"><a id="cgEcommerceDownloadCsvUrl" class="cg_action_button" target="_blank" ' +
            'href="'+url+'" style="background-color:  #f1f1f1;" >Export order</a><br><a id="cgEcommerceShowOrderUserFrontend" class="cg_action_button" target="_blank"   ' +
            'href="'+urlFrontendUser+'" >Show user view of order in frontend</a></div>');
        $cgEcommerceCheckoutBodyContainer.find('#cgEcommerceCheckoutBodyContainerSub').append(
            '<div id="cgEcommerceShowApiResponseButtonContainer" data-cg-sale-id="'+cgJsClass.gallery.vars.ecommerce.SaleId+'"><div id="cgEcommerceShowApiResponseButton" class="cg_action_button">Show PayPal response</div></div>');

        var url = cgJsClass.gallery.vars.ecommerce.site_url+'?cg_download_logs_order_id_hash='+ cgJsClass.gallery.vars.ecommerce.Order.OrderIdHash;

        jQuery('<div id="cgEcommerceDownloadLogsButtonContainer">' +
            '<a id="cgEcommerceDownloadLogsButton" class="cg_action_button" target="_blank" ' +
            'href="'+url+'" >Download logs</a></div>').insertAfter($cgEcommerceCheckoutBodyContainer.find('#cgEcommerceShowApiResponseButtonContainer'));

        if(cgJsClass.gallery.vars.ecommerce.Order.HasInvoice==1){
            var url = cgJsClass.gallery.vars.ecommerce.site_url+'?cg_download_invoice_order_id_hash='+ cgJsClass.gallery.vars.ecommerce.Order.OrderIdHash;

            var urlChangeInvoiceUrl = '?page='+ cgJsClass.gallery.vars.ecommerce.cgVersion+'/index.php&cg_order='+cgJsClass.gallery.vars.ecommerce.OrderId+'&cg_change_invoice=true&option_id='+gid;

            /*
            echo "<div class='cg-show-votes'><a class='cg_image_action_href cg_load_backend_link' href='?page=".cg_get_version()."/index.php&image_id=$id&show_votes=true&option_id=$GalleryID'><div class='cg_image_action_span' style='width: 110px;text-align: center;margin-left: 20px;'>Show votes</div></a></div>";
            */

            jQuery('<div id="cgEcommerceDownloadInvoice">' +
                '<a id="cgEcommerceDownloadInvoiceUrl" class="cg_action_button" target="_blank" ' +
                'href="'+url+'" >Download invoice</a><br><a style="margin-top:20px;box-shadow:unset;" id="cgEcommerceChangeInvoice" class="cg_action_button cg_image_action_href cg_load_backend_link" ' +
                'href="'+urlChangeInvoiceUrl+'" >Edit invoice</a></div>').insertBefore($cgEcommerceCheckoutBodyContainer.find('#cgEcommerceDownloadCsv'));
            setTimeout(function (){
                jQuery('#cgEcommerceCheckoutBodyContainerSub').get(0).scrollIntoView({ behavior: "smooth"});
            },1000);
        }

    }else{

        if(cgJsClass.gallery.vars.ecommerce.Order.HasInvoice==1){
            var url = cgJsClass.gallery.vars.ecommerce.site_url+'?cg_download_invoice_order_id_hash='+ cgJsClass.gallery.vars.ecommerce.Order.OrderIdHash;
            jQuery('<div id="cgEcommerceDownloadInvoice"><a id="cgEcommerceDownloadInvoiceUrl" class="cg_action_button" target="_blank" ' +
                'href="'+url+'" >'+cgJsClass.gallery.language.ecommerce.DownloadInvoice+'</a></div>').insertAfter($cgEcommerceCheckoutBodyContainer.find('#cgEcommerceAddressContainer'));
        }

    }

    if(location.pathname.indexOf('wp-admin/admin.php')===-1){
        setTimeout(function (){
            jQuery('#mainCGdivOrderContainer').get(0).scrollIntoView();
        },100);
    }


};;cgJsClass.gallery.ecommerce.functions.downloadSaleOrder = function(realId){

    var post = {};
    post['realId'] = realId;
    post['cgOrderId'] = cgJsClass.gallery.vars.ecommerce.cgOrderId;
    post['cgOrderIdHash'] = cgJsClass.gallery.vars.ecommerce.cgOrderIdHash;
    post.action = 'post_cg_ecommerce_download_sale_order';

    jQuery.ajax({
        url: post_cg_ecommerce_download_sale_order_wordpress_ajax_script_function_name.cg_ecommerce_download_sale_order_ajax_url,
        type: 'post',
        data: post,
    }).done(function (response) {
        debugger

    }).fail(function (xhr, status, error) {

    }).always(function () {
        // debugger
    });


}
